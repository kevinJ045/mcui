(function(){var oH=Object.create;var{defineProperty:QQ,getPrototypeOf:iH,getOwnPropertyNames:rH}=Object;var sH=Object.prototype.hasOwnProperty;var aH=(J,$,Q)=>{Q=J!=null?oH(iH(J)):{};const Z=$||!J||!J.__esModule?QQ(Q,"default",{value:J,enumerable:!0}):Q;for(let H of rH(J))if(!sH.call(Z,H))QQ(Z,H,{get:()=>J[H],enumerable:!0});return Z};var tH=(J,$)=>()=>($||J(($={exports:{}}).exports,$),$.exports);var z8=function(J,$,Q,Z){var H=arguments.length,Y=H<3?$:Z===null?Z=Object.getOwnPropertyDescriptor($,Q):Z,K;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")Y=Reflect.decorate(J,$,Q,Z);else for(var G=J.length-1;G>=0;G--)if(K=J[G])Y=(H<3?K(Y):H>3?K($,Q,Y):K($,Q))||Y;return H>3&&Y&&Object.defineProperty($,Q,Y),Y};var dZ=tH((b9,h9)=>{(function(J,$){typeof b9=="object"&&typeof h9!="undefined"?h9.exports=$():typeof define=="function"&&define.amd?define($):J.Macy=$()})(b9,function(){function J(O,x){var S=void 0;return function(){S&&clearTimeout(S),S=setTimeout(O,x)}}function $(O,x){for(var S=O.length,g=S,$0=[];S--;)$0.push(x(O[g-S-1]));return $0}function Q(O,x){var S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(window.Promise)return m(O,x,S);O.recalculate(!0,!0)}function Z(O){for(var{options:x,responsiveOptions:S,keys:g,docWidth:$0}=O,Q0=void 0,V0=0;V0<g.length;V0++){var R0=parseInt(g[V0],10);$0>=R0&&(Q0=x.breakAt[R0],K0(Q0,S))}return S}function H(O){for(var{options:x,responsiveOptions:S,keys:g,docWidth:$0}=O,Q0=void 0,V0=g.length-1;V0>=0;V0--){var R0=parseInt(g[V0],10);$0<=R0&&(Q0=x.breakAt[R0],K0(Q0,S))}return S}function Y(O){var x=O.useContainerForBreakpoints?O.container.clientWidth:window.innerWidth,S={columns:O.columns};p(O.margin)?S.margin={x:O.margin.x,y:O.margin.y}:S.margin={x:O.margin,y:O.margin};var g=Object.keys(O.breakAt);return O.mobileFirst?Z({options:O,responsiveOptions:S,keys:g,docWidth:x}):H({options:O,responsiveOptions:S,keys:g,docWidth:x})}function K(O){return Y(O).columns}function G(O){return Y(O).margin}function U(O){var x=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],S=K(O),g=G(O).x,$0=100/S;if(!x)return $0;if(S===1)return"100%";var Q0="px";if(typeof g=="string"){var V0=parseFloat(g);Q0=g.replace(V0,""),g=V0}return g=(S-1)*g/S,Q0==="%"?$0-g+"%":"calc("+$0+"% - "+g+Q0+")"}function q(O,x){var S=K(O.options),g=0,$0=void 0,Q0=void 0;if(++x===1)return 0;Q0=G(O.options).x;var V0="px";if(typeof Q0=="string"){var R0=parseFloat(Q0,10);V0=Q0.replace(R0,""),Q0=R0}return $0=(Q0-(S-1)*Q0/S)*(x-1),g+=U(O.options,!1)*(x-1),V0==="%"?g+$0+"%":"calc("+g+"% + "+$0+V0+")"}function W(O){var x=0,S=O.container,g=O.rows;R(g,function($0){x=$0>x?$0:x}),S.style.height=x+"px"}function V(O,x){var S=arguments.length>2&&arguments[2]!==void 0&&arguments[2],g=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],$0=K(O.options),Q0=G(O.options).y;y(O,$0,S),R(x,function(V0){var R0=0,b0=parseInt(V0.offsetHeight,10);isNaN(b0)||(O.rows.forEach(function(y0,e0){y0<O.rows[R0]&&(R0=e0)}),V0.style.position="absolute",V0.style.top=O.rows[R0]+"px",V0.style.left=""+O.cols[R0],O.rows[R0]+=isNaN(b0)?0:b0+Q0,g&&(V0.dataset.macyComplete=1))}),g&&(O.tmpRows=null),W(O)}function D(O,x){var S=arguments.length>2&&arguments[2]!==void 0&&arguments[2],g=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],$0=K(O.options),Q0=G(O.options).y;y(O,$0,S),R(x,function(V0){O.lastcol===$0&&(O.lastcol=0);var R0=z0(V0,"height");R0=parseInt(V0.offsetHeight,10),isNaN(R0)||(V0.style.position="absolute",V0.style.top=O.rows[O.lastcol]+"px",V0.style.left=""+O.cols[O.lastcol],O.rows[O.lastcol]+=isNaN(R0)?0:R0+Q0,O.lastcol+=1,g&&(V0.dataset.macyComplete=1))}),g&&(O.tmpRows=null),W(O)}var _=function O(x,S){if(!(this instanceof O))return new O(x,S);if(x&&x.nodeName)return x;if(x=x.replace(/^\s*/,"").replace(/\s*$/,""),S)return this.byCss(x,S);for(var g in this.selectors)if(S=g.split("/"),new RegExp(S[1],S[2]).test(x))return this.selectors[g](x);return this.byCss(x)};_.prototype.byCss=function(O,x){return(x||document).querySelectorAll(O)},_.prototype.selectors={},_.prototype.selectors[/^\.[\w\-]+$/]=function(O){return document.getElementsByClassName(O.substring(1))},_.prototype.selectors[/^\w+$/]=function(O){return document.getElementsByTagName(O)},_.prototype.selectors[/^\#[\w\-]+$/]=function(O){return document.getElementById(O.substring(1))};var R=function(O,x){for(var S=O.length,g=S;S--;)x(O[g-S-1])},E=function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.running=!1,this.events=[],this.add(O)};E.prototype.run=function(){if(!this.running&&this.events.length>0){var O=this.events.shift();this.running=!0,O(),this.running=!1,this.run()}},E.prototype.add=function(){var O=this,x=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!!x&&(Array.isArray(x)?R(x,function(S){return O.add(S)}):(this.events.push(x),void this.run()))},E.prototype.clear=function(){this.events=[]};var z=function(O){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.instance=O,this.data=x,this},N=function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.events={},this.instance=O};N.prototype.on=function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0],x=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!(!O||!x)&&(Array.isArray(this.events[O])||(this.events[O]=[]),this.events[O].push(x))},N.prototype.emit=function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0],x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!O||!Array.isArray(this.events[O]))return!1;var S=new z(this.instance,x);R(this.events[O],function(g){return g(S)})};var k=function(O){return!(("naturalHeight"in O)&&O.naturalHeight+O.naturalWidth===0)||O.width+O.height!==0},M=function(O,x){var S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(g,$0){if(x.complete)return k(x)?g(x):$0(x);x.addEventListener("load",function(){return k(x)?g(x):$0(x)}),x.addEventListener("error",function(){return $0(x)})}).then(function(g){S&&O.emit(O.constants.EVENT_IMAGE_LOAD,{img:g})}).catch(function(g){return O.emit(O.constants.EVENT_IMAGE_ERROR,{img:g})})},C=function(O,x){var S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return $(x,function(g){return M(O,g,S)})},m=function(O,x){var S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return Promise.all(C(O,x,S)).then(function(){O.emit(O.constants.EVENT_IMAGE_COMPLETE)})},P=function(O){return J(function(){O.emit(O.constants.EVENT_RESIZE),O.queue.add(function(){return O.recalculate(!0,!0)})},100)},b=function(O){if(O.container=_(O.options.container),O.container instanceof _||!O.container)return!!O.options.debug&&console.error("Error: Container not found");O.container.length&&(O.container=O.container[0]),O.options.container=O.container,O.container.style.position="relative"},a=function(O){O.queue=new E,O.events=new N(O),O.rows=[],O.resizer=P(O)},I=function(O){var x=_("img",O.container);window.addEventListener("resize",O.resizer),O.on(O.constants.EVENT_IMAGE_LOAD,function(){return O.recalculate(!1,!1)}),O.on(O.constants.EVENT_IMAGE_COMPLETE,function(){return O.recalculate(!0,!0)}),O.options.useOwnImageLoader||Q(O,x,!O.options.waitForImages),O.emit(O.constants.EVENT_INITIALIZED)},T=function(O){b(O),a(O),I(O)},p=function(O){return O===Object(O)&&Object.prototype.toString.call(O)!=="[object Array]"},K0=function(O,x){p(O)||(x.columns=O),p(O)&&O.columns&&(x.columns=O.columns),p(O)&&O.margin&&!p(O.margin)&&(x.margin={x:O.margin,y:O.margin}),p(O)&&O.margin&&p(O.margin)&&O.margin.x&&(x.margin.x=O.margin.x),p(O)&&O.margin&&p(O.margin)&&O.margin.y&&(x.margin.y=O.margin.y)},z0=function(O,x){return window.getComputedStyle(O,null).getPropertyValue(x)},y=function(O,x){var S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(O.lastcol||(O.lastcol=0),O.rows.length<1&&(S=!0),S){O.rows=[],O.cols=[],O.lastcol=0;for(var g=x-1;g>=0;g--)O.rows[g]=0,O.cols[g]=q(O,g)}else if(O.tmpRows){O.rows=[];for(var g=x-1;g>=0;g--)O.rows[g]=O.tmpRows[g]}else{O.tmpRows=[];for(var g=x-1;g>=0;g--)O.tmpRows[g]=O.rows[g]}},r=function(O){var x=arguments.length>1&&arguments[1]!==void 0&&arguments[1],S=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],g=x?O.container.children:_(':scope > *:not([data-macy-complete="1"])',O.container);g=Array.from(g).filter(function(Q0){return Q0.offsetParent!==null});var $0=U(O.options);return R(g,function(Q0){x&&(Q0.dataset.macyComplete=0),Q0.style.width=$0}),O.options.trueOrder?(D(O,g,x,S),O.emit(O.constants.EVENT_RECALCULATED)):(V(O,g,x,S),O.emit(O.constants.EVENT_RECALCULATED))},e=function(){return!!window.Promise},Y0=Object.assign||function(O){for(var x=1;x<arguments.length;x++){var S=arguments[x];for(var g in S)Object.prototype.hasOwnProperty.call(S,g)&&(O[g]=S[g])}return O};Array.from||(Array.from=function(O){for(var x=0,S=[];x<O.length;)S.push(O[x++]);return S});var t={columns:4,margin:2,trueOrder:!1,waitForImages:!1,useImageLoader:!0,breakAt:{},useOwnImageLoader:!1,onInit:!1,cancelLegacy:!1,useContainerForBreakpoints:!1};(function(){try{document.createElement("a").querySelector(":scope *")}catch(O){(function(){function x(Q0){return function(V0){if(V0&&S.test(V0)){var R0=this.getAttribute("id");R0||(this.id="q"+Math.floor(9000000*Math.random())+1e6),arguments[0]=V0.replace(S,"#"+this.id);var b0=Q0.apply(this,arguments);return R0===null?this.removeAttribute("id"):R0||(this.id=R0),b0}return Q0.apply(this,arguments)}}var S=/:scope\b/gi,g=x(Element.prototype.querySelector);Element.prototype.querySelector=function(Q0){return g.apply(this,arguments)};var $0=x(Element.prototype.querySelectorAll);Element.prototype.querySelectorAll=function(Q0){return $0.apply(this,arguments)}})()}})();var i=function O(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t;if(!(this instanceof O))return new O(x);this.options={},Y0(this.options,t,x),this.options.cancelLegacy&&!e()||T(this)};return i.init=function(O){return console.warn("Depreciated: Macy.init will be removed in v3.0.0 opt to use Macy directly like so Macy({ /*options here*/ }) "),new i(O)},i.prototype.recalculateOnImageLoad=function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return Q(this,_("img",this.container),!O)},i.prototype.runOnImageLoad=function(O){var x=arguments.length>1&&arguments[1]!==void 0&&arguments[1],S=_("img",this.container);return this.on(this.constants.EVENT_IMAGE_COMPLETE,O),x&&this.on(this.constants.EVENT_IMAGE_LOAD,O),Q(this,S,x)},i.prototype.recalculate=function(){var O=this,x=arguments.length>0&&arguments[0]!==void 0&&arguments[0],S=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return S&&this.queue.clear(),this.queue.add(function(){return r(O,x,S)})},i.prototype.remove=function(){window.removeEventListener("resize",this.resizer),R(this.container.children,function(O){O.removeAttribute("data-macy-complete"),O.removeAttribute("style")}),this.container.removeAttribute("style")},i.prototype.reInit=function(){this.recalculate(!0,!0),this.emit(this.constants.EVENT_INITIALIZED),window.addEventListener("resize",this.resizer),this.container.style.position="relative"},i.prototype.on=function(O,x){this.events.on(O,x)},i.prototype.emit=function(O,x){this.events.emit(O,x)},i.constants={EVENT_INITIALIZED:"macy.initialized",EVENT_RECALCULATED:"macy.recalculated",EVENT_IMAGE_LOAD:"macy.image.load",EVENT_IMAGE_ERROR:"macy.image.error",EVENT_IMAGE_COMPLETE:"macy.images.complete",EVENT_RESIZE:"macy.resize"},i.prototype.constants=i.constants,i})});var ZQ=function(J){return J=="absolute"||J=="relative"||J=="static"||J=="fixed"||J=="inherit"||J=="sticky"},ZJ=function(J){return J instanceof I0},N6=function(J){return J instanceof HTMLElement};var x7=function(J,$){y7[$]=J},J0=function(J){return y7[J]},HQ=function(J,$,Q){let Z=document.createElement(J);if(Q)s5(Z,Q);if($)s8(Z,$);return Z},s5=function(J,$){for(var Q in $)if($[Q])J.setAttribute(Q,$[Q].toString());else if($[Q]==!1)J.removeAttribute(Q)},YQ=function(J,$){for(var Q in $)J[Q]=$[Q]},s8=function(J,$,Q="add"){if(!$.trim())return;($.trim().match(" ")?$.trim().split(" "):[$.trim()]).forEach((H)=>J.classList[Q](H))},GQ=function(J,$,Q=null){if(typeof $==="string")if(Q===null)return window.getComputedStyle(J).getPropertyValue($);else{if(typeof Q=="number")Q=Q+"px";J.style[$]=Q}else if(typeof $==="object")for(let Z in $){let H=$[Z];if(!Z.startsWith("--")&&typeof H=="number")H=H+"px";if(Z in J.style)J.style[Z]=H;else J.style.setProperty(Z,H)}},KQ=function(J){while(J.firstChild)J.removeChild(J.firstChild)},UQ=function(J){return Array.from(J.parentNode?.children||[]).filter(($)=>$!==J).map(($)=>$)},y7={},mW="large|transparent|outline".split("|"),pW="button|input".split("|");var qQ=function(J=12){const Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".length;let Z="";for(let H=0;H<J;H++){const Y=Math.floor(Math.random()*Q);Z+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Y)}return y7[Z]?qQ(J):Z},J8=qQ;var JY=function(J,$){let Q={...J};for(let Z in $)if(Q[Z])if(typeof Q[Z]==typeof $[Z])if(typeof Q[Z]=="object")if(Array.isArray(Q[Z]))if(XQ.includes(Z))Q[Z].push(...$[Z]);else Q[Z]=$[Z];else oJ(Q[Z],$[Z]);else if(XQ.includes(Z))Q[Z]+=(eH[Z]||"")+$[Z];else Q[Z]=$[Z];else Q[Z]=$[Z];else Q[Z]=$[Z];return Q};function oJ(J,$){return JY(J,$)}function GJ(J){return{...{element:{name:"div",html:null,raw:null,selector:null},class:"widget",style:{},position:{type:"default",centered:!1,top:null,left:null,bottom:null,right:null},size:{width:null,height:null},private:!1,reset:!1,value:null,icon:null,children:[],accepts:!0,events:{},type:[]},...J}}var XQ="class|type|_setters|children".split("|"),eH={class:" "};var _6=function(J,$,Q){return Math.min(Math.max(J,$),Q)},a8=function(J,$){return J.indexOf($)>-1},a5=function(J,$){return J.apply(null,$)},_Q=function(J){var $=/\(([^)]+)\)/.exec(J);return $?$[1].split(",").map(function(Q){return parseFloat(Q)}):[]},RQ=function(J,$){var Q=_Q(J),Z=_6(C0.und(Q[0])?1:Q[0],0.1,100),H=_6(C0.und(Q[1])?100:Q[1],0.1,100),Y=_6(C0.und(Q[2])?10:Q[2],0.1,100),K=_6(C0.und(Q[3])?0:Q[3],0.1,100),G=Math.sqrt(H/Z),U=Y/(2*Math.sqrt(H*Z)),q=U<1?G*Math.sqrt(1-U*U):0,W=1,V=U<1?(U*G+-K)/q:-K+G;function D(R){var E=$?$*R/1000:R;if(U<1)E=Math.exp(-E*U*G)*(W*Math.cos(q*E)+V*Math.sin(q*E));else E=(W+V*E)*Math.exp(-E*G);if(R===0||R===1)return R;return 1-E}function _(){var R=b7.springs[J];if(R)return R;var E=0.16666666666666666,z=0,N=0;while(!0)if(z+=E,D(z)===1){if(N++,N>=16)break}else N=0;var k=z*E*1000;return b7.springs[J]=k,k}return $?D:_},QY=function(J){if(J===void 0)J=10;return function($){return Math.ceil(_6($,0.000001,1)*J)*(1/J)}},$9=function(J,$){if(C0.fnc(J))return J;var Q=J.split("(")[0],Z=EQ[Q],H=_Q(J);switch(Q){case"spring":return RQ(J,$);case"cubicBezier":return a5(ZY,H);case"steps":return a5(QY,H);default:return a5(Z,H)}},OQ=function(J){try{var $=document.querySelectorAll(J);return $}catch(Q){return}},h7=function(J,$){var Q=J.length,Z=arguments.length>=2?arguments[1]:void 0,H=[];for(var Y=0;Y<Q;Y++)if(Y in J){var K=J[Y];if($.call(Z,K,Y,J))H.push(K)}return H},g7=function(J){return J.reduce(function($,Q){return $.concat(C0.arr(Q)?g7(Q):Q)},[])},FQ=function(J){if(C0.arr(J))return J;if(C0.str(J))J=OQ(J)||J;if(J instanceof NodeList||J instanceof HTMLCollection)return[].slice.call(J);return[J]},Q9=function(J,$){return J.some(function(Q){return Q===$})},Z9=function(J){var $={};for(var Q in J)$[Q]=J[Q];return $},t5=function(J,$){var Q=Z9(J);for(var Z in J)Q[Z]=$.hasOwnProperty(Z)?$[Z]:J[Z];return Q},v7=function(J,$){var Q=Z9(J);for(var Z in $)Q[Z]=C0.und(J[Z])?$[Z]:J[Z];return Q},HY=function(J){var $=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(J);return $?"rgba("+$[1]+",1)":J},YY=function(J){var $=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Q=J.replace($,function(G,U,q,W){return U+U+q+q+W+W}),Z=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Q),H=parseInt(Z[1],16),Y=parseInt(Z[2],16),K=parseInt(Z[3],16);return"rgba("+H+","+Y+","+K+",1)"},GY=function(J){var $=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(J)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(J),Q=parseInt($[1],10)/360,Z=parseInt($[2],10)/100,H=parseInt($[3],10)/100,Y=$[4]||1;function K(D,_,R){if(R<0)R+=1;if(R>1)R-=1;if(R<0.16666666666666666)return D+(_-D)*6*R;if(R<0.5)return _;if(R<0.6666666666666666)return D+(_-D)*(0.6666666666666666-R)*6;return D}var G,U,q;if(Z==0)G=U=q=H;else{var W=H<0.5?H*(1+Z):H+Z-H*Z,V=2*H-W;G=K(V,W,Q+0.3333333333333333),U=K(V,W,Q),q=K(V,W,Q-0.3333333333333333)}return"rgba("+G*255+","+U*255+","+q*255+","+Y+")"},KY=function(J){if(C0.rgb(J))return HY(J);if(C0.hex(J))return YY(J);if(C0.hsl(J))return GY(J)},T6=function(J){var $=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(J);if($)return $[1]},UY=function(J){if(a8(J,"translate")||J==="perspective")return"px";if(a8(J,"rotate")||a8(J,"skew"))return"deg"},e5=function(J,$){if(!C0.fnc(J))return J;return J($.target,$.id,$.total)},R6=function(J,$){return J.getAttribute($)},H9=function(J,$,Q){var Z=T6($);if(Q9([Q,"deg","rad","turn"],Z))return $;var H=b7.CSS[$+Q];if(!C0.und(H))return H;var Y=100,K=document.createElement(J.tagName),G=J.parentNode&&J.parentNode!==document?J.parentNode:document.body;G.appendChild(K),K.style.position="absolute",K.style.width=Y+Q;var U=Y/K.offsetWidth;G.removeChild(K);var q=U*parseFloat($);return b7.CSS[$+Q]=q,q},BQ=function(J,$,Q){if($ in J.style){var Z=$.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),H=J.style[$]||getComputedStyle(J).getPropertyValue(Z)||"0";return Q?H9(J,H,Q):H}},Y9=function(J,$){if(C0.dom(J)&&!C0.inp(J)&&(!C0.nil(R6(J,$))||C0.svg(J)&&J[$]))return"attribute";if(C0.dom(J)&&Q9($Y,$))return"transform";if(C0.dom(J)&&($!=="transform"&&BQ(J,$)))return"css";if(J[$]!=null)return"object"},MQ=function(J){if(!C0.dom(J))return;var $=J.style.transform||"",Q=/(\w+)\(([^)]*)\)/g,Z=new Map,H;while(H=Q.exec($))Z.set(H[1],H[2]);return Z},qY=function(J,$,Q,Z){var H=a8($,"scale")?1:0+UY($),Y=MQ(J).get($)||H;if(Q)Q.transforms.list.set($,Y),Q.transforms.last=$;return Z?H9(J,Y,Z):Y},G9=function(J,$,Q,Z){switch(Y9(J,$)){case"transform":return qY(J,$,Z,Q);case"css":return BQ(J,$,Q);case"attribute":return R6(J,$);default:return J[$]||0}},K9=function(J,$){var Q=/^(\*=|\+=|-=)/.exec(J);if(!Q)return J;var Z=T6(J)||0,H=parseFloat($),Y=parseFloat(J.replace(Q[0],""));switch(Q[0][0]){case"+":return H+Y+Z;case"-":return H-Y+Z;case"*":return H*Y+Z}},IQ=function(J,$){if(C0.col(J))return KY(J);if(/\s/g.test(J))return J;var Q=T6(J),Z=Q?J.substr(0,J.length-Q.length):J;if($)return Z+$;return Z},U9=function(J,$){return Math.sqrt(Math.pow($.x-J.x,2)+Math.pow($.y-J.y,2))},XY=function(J){return Math.PI*2*R6(J,"r")},FY=function(J){return R6(J,"width")*2+R6(J,"height")*2},WY=function(J){return U9({x:R6(J,"x1"),y:R6(J,"y1")},{x:R6(J,"x2"),y:R6(J,"y2")})},LQ=function(J){var $=J.points,Q=0,Z;for(var H=0;H<$.numberOfItems;H++){var Y=$.getItem(H);if(H>0)Q+=U9(Z,Y);Z=Y}return Q},VY=function(J){var $=J.points;return LQ(J)+U9($.getItem($.numberOfItems-1),$.getItem(0))},kQ=function(J){if(J.getTotalLength)return J.getTotalLength();switch(J.tagName.toLowerCase()){case"circle":return XY(J);case"rect":return FY(J);case"line":return WY(J);case"polyline":return LQ(J);case"polygon":return VY(J)}},DY=function(J){var $=kQ(J);return J.setAttribute("stroke-dasharray",$),$},zY=function(J){var $=J.parentNode;while(C0.svg($)){if(!C0.svg($.parentNode))break;$=$.parentNode}return $},AQ=function(J,$){var Q=$||{},Z=Q.el||zY(J),H=Z.getBoundingClientRect(),Y=R6(Z,"viewBox"),K=H.width,G=H.height,U=Q.viewBox||(Y?Y.split(" "):[0,0,K,G]);return{el:Z,viewBox:U,x:U[0]/1,y:U[1]/1,w:K,h:G,vW:U[2],vH:U[3]}},NY=function(J,$){var Q=C0.str(J)?OQ(J)[0]:J,Z=$||100;return function(H){return{property:H,el:Q,svg:AQ(Q),totalLength:kQ(Q)*(Z/100)}}},_Y=function(J,$,Q){function Z(W){if(W===void 0)W=0;var V=$+W>=1?$+W:0;return J.el.getPointAtLength(V)}var H=AQ(J.el,J.svg),Y=Z(),K=Z(-1),G=Z(1),U=Q?1:H.w/H.vW,q=Q?1:H.h/H.vH;switch(J.property){case"x":return(Y.x-H.x)*U;case"y":return(Y.y-H.y)*q;case"angle":return Math.atan2(G.y-K.y,G.x-K.x)*180/Math.PI}},WQ=function(J,$){var Q=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,Z=IQ(C0.pth(J)?J.totalLength:J,$)+"";return{original:Z,numbers:Z.match(Q)?Z.match(Q).map(Number):[0],strings:C0.str(J)||$?Z.split(Q):[]}},q9=function(J){var $=J?g7(C0.arr(J)?J.map(FQ):FQ(J)):[];return h7($,function(Q,Z,H){return H.indexOf(Q)===Z})},PQ=function(J){var $=q9(J);return $.map(function(Q,Z){return{target:Q,id:Z,total:$.length,transforms:{list:MQ(Q)}}})},RY=function(J,$){var Q=Z9($);if(/^spring/.test(Q.easing))Q.duration=RQ(Q.easing);if(C0.arr(J)){var Z=J.length,H=Z===2&&!C0.obj(J[0]);if(!H){if(!C0.fnc($.duration))Q.duration=$.duration/Z}else J={value:J}}var Y=C0.arr(J)?J:[J];return Y.map(function(K,G){var U=C0.obj(K)&&!C0.pth(K)?K:{value:K};if(C0.und(U.delay))U.delay=!G?$.delay:0;if(C0.und(U.endDelay))U.endDelay=G===Y.length-1?$.endDelay:0;return U}).map(function(K){return v7(K,Q)})},EY=function(J){var $=h7(g7(J.map(function(Y){return Object.keys(Y)})),function(Y){return C0.key(Y)}).reduce(function(Y,K){if(Y.indexOf(K)<0)Y.push(K);return Y},[]),Q={},Z=function(Y){var K=$[Y];Q[K]=J.map(function(G){var U={};for(var q in G)if(C0.key(q)){if(q==K)U.value=G[q]}else U[q]=G[q];return U})};for(var H=0;H<$.length;H++)Z(H);return Q},OY=function(J,$){var Q=[],Z=$.keyframes;if(Z)$=v7(EY(Z),$);for(var H in $)if(C0.key(H))Q.push({name:H,tweens:RY($[H],J)});return Q},BY=function(J,$){var Q={};for(var Z in J){var H=e5(J[Z],$);if(C0.arr(H)){if(H=H.map(function(Y){return e5(Y,$)}),H.length===1)H=H[0]}Q[Z]=H}return Q.duration=parseFloat(Q.duration),Q.delay=parseFloat(Q.delay),Q},MY=function(J,$){var Q;return J.tweens.map(function(Z){var H=BY(Z,$),Y=H.value,K=C0.arr(Y)?Y[1]:Y,G=T6(K),U=G9($.target,J.name,G,$),q=Q?Q.to.original:U,W=C0.arr(Y)?Y[0]:q,V=T6(W)||T6(U),D=G||V;if(C0.und(K))K=q;if(H.from=WQ(W,D),H.to=WQ(K9(K,W),D),H.start=Q?Q.end:0,H.end=H.start+H.delay+H.duration+H.endDelay,H.easing=$9(H.easing,H.duration),H.isPath=C0.pth(Y),H.isPathTargetInsideSVG=H.isPath&&C0.svg($.target),H.isColor=C0.col(H.from.original),H.isColor)H.round=1;return Q=H,H})},wQ=function(J,$){var Q=PQ(J);Q.forEach(function(Z){for(var H in $){var Y=e5($[H],Z),K=Z.target,G=T6(Y),U=G9(K,H,G,Z),q=G||T6(U),W=K9(IQ(Y,q),U),V=Y9(K,H);TQ[V](K,H,W,Z.transforms,!0)}})},IY=function(J,$){var Q=Y9(J.target,$.name);if(Q){var Z=MY($,J),H=Z[Z.length-1];return{type:Q,property:$.name,animatable:J,tweens:Z,duration:H.end,delay:Z[0].delay,endDelay:H.endDelay}}},LY=function(J,$){return h7(g7(J.map(function(Q){return $.map(function(Z){return IY(Q,Z)})})),function(Q){return!C0.und(Q)})},SQ=function(J,$){var Q=J.length,Z=function(Y){return Y.timelineOffset?Y.timelineOffset:0},H={};return H.duration=Q?Math.max.apply(Math,J.map(function(Y){return Z(Y)+Y.duration})):$.duration,H.delay=Q?Math.min.apply(Math,J.map(function(Y){return Z(Y)+Y.delay})):$.delay,H.endDelay=Q?H.duration-Math.max.apply(Math,J.map(function(Y){return Z(Y)+Y.duration-Y.endDelay})):$.endDelay,H},kY=function(J){var $=t5(NQ,J),Q=t5(J9,J),Z=OY(Q,J),H=PQ(J.targets),Y=LY(H,Z),K=SQ(Y,Q),G=VQ;return VQ++,v7($,{id:G,children:[],animatables:H,animations:Y,duration:K.duration,delay:K.delay,endDelay:K.endDelay})},DQ=function(){return!!document&&document.hidden},_J=function(J){if(J===void 0)J={};var $=0,Q=0,Z=0,H,Y=0,K=null;function G(M){var C=window.Promise&&new Promise(function(m){return K=m});return M.finished=C,C}var U=kY(J),q=G(U);function W(){var M=U.direction;if(M!=="alternate")U.direction=M!=="normal"?"normal":"reverse";U.reversed=!U.reversed,H.forEach(function(C){return C.reversed=U.reversed})}function V(M){return U.reversed?U.duration-M:M}function D(){$=0,Q=V(U.currentTime)*(1/_J.speed)}function _(M,C){if(C)C.seek(M-C.timelineOffset)}function R(M){if(!U.reversePlayback)for(var C=0;C<Y;C++)_(M,H[C]);else for(var m=Y;m--;)_(M,H[m])}function E(M){var C=0,m=U.animations,P=m.length;while(C<P){var b=m[C],a=b.animatable,I=b.tweens,T=I.length-1,p=I[T];if(T)p=h7(I,function(b0){return M<b0.end})[0]||p;var K0=_6(M-p.start-p.delay,0,p.duration)/p.duration,z0=isNaN(K0)?1:p.easing(K0),y=p.to.strings,r=p.round,e=[],Y0=p.to.numbers.length,t=void 0;for(var i=0;i<Y0;i++){var O=void 0,x=p.to.numbers[i],S=p.from.numbers[i]||0;if(!p.isPath)O=S+z0*(x-S);else O=_Y(p.value,z0*x,p.isPathTargetInsideSVG);if(r){if(!(p.isColor&&i>2))O=Math.round(O*r)/r}e.push(O)}var g=y.length;if(!g)t=e[0];else{t=y[0];for(var $0=0;$0<g;$0++){var Q0=y[$0],V0=y[$0+1],R0=e[$0];if(!isNaN(R0))if(!V0)t+=R0+" ";else t+=R0+V0}}TQ[b.type](a.target,b.property,t,a.transforms),b.currentValue=t,C++}}function z(M){if(U[M]&&!U.passThrough)U[M](U)}function N(){if(U.remaining&&U.remaining!==!0)U.remaining--}function k(M){var{duration:C,delay:m}=U,P=C-U.endDelay,b=V(M);if(U.progress=_6(b/C*100,0,100),U.reversePlayback=b<U.currentTime,H)R(b);if(!U.began&&U.currentTime>0)U.began=!0,z("begin");if(!U.loopBegan&&U.currentTime>0)U.loopBegan=!0,z("loopBegin");if(b<=m&&U.currentTime!==0)E(0);if(b>=P&&U.currentTime!==C||!C)E(C);if(b>m&&b<P){if(!U.changeBegan)U.changeBegan=!0,U.changeCompleted=!1,z("changeBegin");z("change"),E(b)}else if(U.changeBegan)U.changeCompleted=!0,U.changeBegan=!1,z("changeComplete");if(U.currentTime=_6(b,0,C),U.began)z("update");if(M>=C){if(Q=0,N(),!U.remaining){if(U.paused=!0,!U.completed){if(U.completed=!0,z("loopComplete"),z("complete"),!U.passThrough&&"Promise"in window)K(),q=G(U)}}else if($=Z,z("loopComplete"),U.loopBegan=!1,U.direction==="alternate")W()}}if(U.reset=function(){var M=U.direction;U.passThrough=!1,U.currentTime=0,U.progress=0,U.paused=!0,U.began=!1,U.loopBegan=!1,U.changeBegan=!1,U.completed=!1,U.changeCompleted=!1,U.reversePlayback=!1,U.reversed=M==="reverse",U.remaining=U.loop,H=U.children,Y=H.length;for(var C=Y;C--;)U.children[C].reset();if(U.reversed&&U.loop!==!0||M==="alternate"&&U.loop===1)U.remaining++;E(U.reversed?U.duration:0)},U._onDocumentVisibility=D,U.set=function(M,C){return wQ(M,C),U},U.tick=function(M){if(Z=M,!$)$=Z;k((Z+(Q-$))*_J.speed)},U.seek=function(M){k(V(M))},U.pause=function(){U.paused=!0,D()},U.play=function(){if(!U.paused)return;if(U.completed)U.reset();U.paused=!1,K6.push(U),D(),CQ()},U.reverse=function(){W(),U.completed=U.reversed?!1:!0,D()},U.restart=function(){U.reset(),U.play()},U.remove=function(M){var C=q9(M);fQ(C,U)},U.reset(),U.autoplay)U.play();return U},zQ=function(J,$){for(var Q=$.length;Q--;)if(Q9(J,$[Q].animatable.target))$.splice(Q,1)},fQ=function(J,$){var{animations:Q,children:Z}=$;zQ(J,Q);for(var H=Z.length;H--;){var Y=Z[H],K=Y.animations;if(zQ(J,K),!K.length&&!Y.children.length)Z.splice(H,1)}if(!Q.length&&!Z.length)$.pause()},AY=function(J){var $=q9(J);for(var Q=K6.length;Q--;){var Z=K6[Q];fQ($,Z)}},PY=function(J,$){if($===void 0)$={};var Q=$.direction||"normal",Z=$.easing?$9($.easing):null,H=$.grid,Y=$.axis,K=$.from||0,G=K==="first",U=K==="center",q=K==="last",W=C0.arr(J),V=W?parseFloat(J[0]):parseFloat(J),D=W?parseFloat(J[1]):0,_=T6(W?J[1]:J)||0,R=$.start||0+(W?V:0),E=[],z=0;return function(N,k,M){if(G)K=0;if(U)K=(M-1)/2;if(q)K=M-1;if(!E.length){for(var C=0;C<M;C++){if(!H)E.push(Math.abs(K-C));else{var m=!U?K%H[0]:(H[0]-1)/2,P=!U?Math.floor(K/H[0]):(H[1]-1)/2,b=C%H[0],a=Math.floor(C/H[0]),I=m-b,T=P-a,p=Math.sqrt(I*I+T*T);if(Y==="x")p=-I;if(Y==="y")p=-T;E.push(p)}z=Math.max.apply(Math,E)}if(Z)E=E.map(function(z0){return Z(z0/z)*z});if(Q==="reverse")E=E.map(function(z0){return Y?z0<0?z0*-1:-z0:Math.abs(z-z0)})}var K0=W?(D-V)/z:V;return R+K0*(Math.round(E[k]*100)/100)+_}},TY=function(J){if(J===void 0)J={};var $=_J(J);return $.duration=0,$.add=function(Q,Z){var H=K6.indexOf($),Y=$.children;if(H>-1)K6.splice(H,1);function K(D){D.passThrough=!0}for(var G=0;G<Y.length;G++)K(Y[G]);var U=v7(Q,t5(J9,J));U.targets=U.targets||J.targets;var q=$.duration;U.autoplay=!1,U.direction=$.direction,U.timelineOffset=C0.und(Z)?q:K9(Z,q),K($),$.seek(U.timelineOffset);var W=_J(U);K(W),Y.push(W);var V=SQ(Y,J);if($.delay=V.delay,$.endDelay=V.endDelay,$.duration=V.duration,$.seek(0),$.reset(),$.autoplay)$.play();return $},$},NQ={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},J9={duration:1000,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},$Y=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],b7={CSS:{},springs:{}},C0={arr:function(J){return Array.isArray(J)},obj:function(J){return a8(Object.prototype.toString.call(J),"Object")},pth:function(J){return C0.obj(J)&&J.hasOwnProperty("totalLength")},svg:function(J){return J instanceof SVGElement},inp:function(J){return J instanceof HTMLInputElement},dom:function(J){return J.nodeType||C0.svg(J)},str:function(J){return typeof J==="string"},fnc:function(J){return typeof J==="function"},und:function(J){return typeof J==="undefined"},nil:function(J){return C0.und(J)||J===null},hex:function(J){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(J)},rgb:function(J){return/^rgb/.test(J)},hsl:function(J){return/^hsl/.test(J)},col:function(J){return C0.hex(J)||C0.rgb(J)||C0.hsl(J)},key:function(J){return!NQ.hasOwnProperty(J)&&!J9.hasOwnProperty(J)&&J!=="targets"&&J!=="keyframes"}},ZY=function(){var J=11,$=1/(J-1);function Q(W,V){return 1-3*V+3*W}function Z(W,V){return 3*V-6*W}function H(W){return 3*W}function Y(W,V,D){return((Q(V,D)*W+Z(V,D))*W+H(V))*W}function K(W,V,D){return 3*Q(V,D)*W*W+2*Z(V,D)*W+H(V)}function G(W,V,D,_,R){var E,z,N=0;do if(z=V+(D-V)/2,E=Y(z,_,R)-W,E>0)D=z;else V=z;while(Math.abs(E)>0.0000001&&++N<10);return z}function U(W,V,D,_){for(var R=0;R<4;++R){var E=K(V,D,_);if(E===0)return V;var z=Y(V,D,_)-W;V-=z/E}return V}function q(W,V,D,_){if(!(0<=W&&W<=1&&0<=D&&D<=1))return;var R=new Float32Array(J);if(W!==V||D!==_)for(var E=0;E<J;++E)R[E]=Y(E*$,W,D);function z(N){var k=0,M=1,C=J-1;for(;M!==C&&R[M]<=N;++M)k+=$;--M;var m=(N-R[M])/(R[M+1]-R[M]),P=k+m*$,b=K(P,W,D);if(b>=0.001)return U(N,P,W,D);else if(b===0)return P;else return G(N,k,k+$,W,D)}return function(N){if(W===V&&D===_)return N;if(N===0||N===1)return N;return Y(z(N),V,_)}}return q}(),EQ=function(){var J={linear:function(){return function(Z){return Z}}},$={Sine:function(){return function(Z){return 1-Math.cos(Z*Math.PI/2)}},Circ:function(){return function(Z){return 1-Math.sqrt(1-Z*Z)}},Back:function(){return function(Z){return Z*Z*(3*Z-2)}},Bounce:function(){return function(Z){var H,Y=4;while(Z<((H=Math.pow(2,--Y))-1)/11);return 1/Math.pow(4,3-Y)-7.5625*Math.pow((H*3-2)/22-Z,2)}},Elastic:function(Z,H){if(Z===void 0)Z=1;if(H===void 0)H=0.5;var Y=_6(Z,1,10),K=_6(H,0.1,2);return function(G){return G===0||G===1?G:-Y*Math.pow(2,10*(G-1))*Math.sin((G-1-K/(Math.PI*2)*Math.asin(1/Y))*(Math.PI*2)/K)}}},Q=["Quad","Cubic","Quart","Quint","Expo"];return Q.forEach(function(Z,H){$[Z]=function(){return function(Y){return Math.pow(Y,H+2)}}}),Object.keys($).forEach(function(Z){var H=$[Z];J["easeIn"+Z]=H,J["easeOut"+Z]=function(Y,K){return function(G){return 1-H(Y,K)(1-G)}},J["easeInOut"+Z]=function(Y,K){return function(G){return G<0.5?H(Y,K)(G*2)/2:1-H(Y,K)(G*-2+2)/2}},J["easeOutIn"+Z]=function(Y,K){return function(G){return G<0.5?(1-H(Y,K)(1-G*2))/2:(H(Y,K)(G*2-1)+1)/2}}}),J}(),TQ={css:function(J,$,Q){return J.style[$]=Q},attribute:function(J,$,Q){return J.setAttribute($,Q)},object:function(J,$,Q){return J[$]=Q},transform:function(J,$,Q,Z,H){if(Z.list.set($,Q),$===Z.last||H){var Y="";Z.list.forEach(function(K,G){Y+=G+"("+K+") "}),J.style.transform=Y}}},VQ=0,K6=[],CQ=function(){var J;function $(){if(!J&&(!DQ()||!_J.suspendWhenDocumentHidden)&&K6.length>0)J=requestAnimationFrame(Q)}function Q(H){var Y=K6.length,K=0;while(K<Y){var G=K6[K];if(!G.paused)G.tick(H),K++;else K6.splice(K,1),Y--}J=K>0?requestAnimationFrame(Q):void 0}function Z(){if(!_J.suspendWhenDocumentHidden)return;if(DQ())J=cancelAnimationFrame(J);else K6.forEach(function(H){return H._onDocumentVisibility()}),CQ()}if(typeof document!=="undefined")document.addEventListener("visibilitychange",Z);return $}();_J.version="3.2.1";_J.speed=1;_J.suspendWhenDocumentHidden=!0;_J.running=K6;_J.remove=AY;_J.get=G9;_J.set=wQ;_J.convertPx=H9;_J.path=NY;_J.setDashoffset=DY;_J.stagger=PY;_J.timeline=TY;_J.easing=$9;_J.penner=EQ;_J.random=function(J,$){return Math.floor(Math.random()*($-J+1))+J};var t8=_J;var wY=function(J){for(var $ in J){let Q=J[$];if(typeof Q=="function")J[$]=(Z,...H)=>{return Q(Z.GUIWIDGET,...H)};if(typeof Q=="string"){let Z=Q.match(/(random|stagger)\(([^)]+)\)/),H="random|none".split("|");if(Z){let Y=Z[2].match(",")?Z[2].split(",").map((K)=>K.trim()):[Z[2]];Y=Y.map((K)=>isNaN(parseInt(K))?K:parseInt(K)).map((K)=>{if(typeof K=="string")try{return JSON.parse(K)}catch(G){return K}return K}),J[$]=H.includes(Z[1])?()=>t8[Z[1]](...Y):t8[Z[1]](...Y)}}}return console.log(J),J},m7=function(J,$){return $=wY($),t8({targets:J.map((Q)=>J0(Q.id).at(0)),...$})},jQ=function(J,$){return m7([J],$)};class m6{_events=[];_eventEmitMethod="normal";constructor(){if(this._events=[],"afterConstruct"in this&&typeof this.afterConstruct=="function")this.afterConstruct()}on(J,$){let Q=[];if(Array.isArray(J))Q.push(...J);else Q.push(J);return Q.forEach((Z)=>{this._events.push({event:Z,eventCallback:$})}),this}once(J,$){let Q=[];if(Array.isArray(J))Q.push(...J);else Q.push(J);return Q.forEach((Z)=>{if(!this._events.find((Y)=>Y.event==Z&&Y.eventCallback.toString()==$.toString()))this._events.push({event:Z,eventCallback:$})}),this}off(J,$){let Q=[];if(Array.isArray(J))Q.push(...J);else Q.push(J);return Q.forEach((Z)=>{if($){let H=this._events.find((Y)=>Y.event==Z&&Y.eventCallback==$);if(H)this._events.splice(this._events.indexOf(H))}else this._events.filter((H)=>H.event==Z).forEach((H)=>{this._events.splice(this._events.indexOf(H))})}),this}emit(J,$,Q,Z){if(Z==null)Z=this._eventEmitMethod=="raw";let H=$||null,Y=[];if(Array.isArray(J))Y.push(...J);else Y.push(J);return Y.forEach((K)=>{this._events.filter((G)=>G.event==K).forEach((G)=>{let U=$ instanceof CustomEvent?$:new CustomEvent(G.event,{...Q,detail:H});G.eventCallback(Z?H:U,Z?void 0:H)})}),this}}var F9=function(){return F9=Object.assign||function(J){for(var $=1;$<arguments.length;$++){var Q=arguments[$];for(var Z in Q)if(Object.prototype.hasOwnProperty.call(Q,Z))J[Z]=Q[Z]}return J},F9.apply(this,arguments)},SY=function(J,$){return jY(J)||xY(J,$)||hY()},CY=function(J){return fY(J)||yY(J)||bY()},fY=function(J){if(Array.isArray(J)){for(var $=0,Q=new Array(J.length);$<J.length;$++)Q[$]=J[$];return Q}},jY=function(J){if(Array.isArray(J))return J},yY=function(J){if(Symbol.iterator in Object(J)||Object.prototype.toString.call(J)==="[object Arguments]")return Array.from(J)},xY=function(J,$){if(!((Symbol.iterator in Object(J))||Object.prototype.toString.call(J)==="[object Arguments]"))return;var Q=[],Z=!0,H=!1,Y=void 0;try{for(var K=J[Symbol.iterator](),G;!(Z=(G=K.next()).done);Z=!0)if(Q.push(G.value),$&&Q.length===$)break}catch(U){H=!0,Y=U}finally{try{if(!Z&&K.return!=null)K.return()}finally{if(H)throw Y}}return Q},bY=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")},hY=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")},FJ=function(J){return J===void 0||J===null},mQ=function(J){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(FJ(J))return $;return Boolean(J)},$7=function(J){return typeof J==="string"},W0=function(J){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(FJ(J))return $;if($7(J))return J;return String(J)},D9=function(J,$){var Q=W0(J),Z=mQ($);if(Q==="")return"";if(Z)Q=Q.toLowerCase();return Q.substr(0,1).toUpperCase()+Q.substr(1)},n7=function(J){var $=W0(J,"");return $.toLowerCase()},_8=function(J,$){return J==null?$:J},w6=function(J){if(FJ(J))return null;if($7(J))return J;return String(J)},Q7=function(J,$,Q){var Z=W0(J),H;if(FJ($))H=E9.test(Z)?R9:_9;else if($ instanceof RegExp)H=$;else{var Y=w6(_8(Q,""));H=new RegExp(w6($),Y)}return _8(Z.match(H),[])},tY=function(J,$){return $===0?n7(J):D9(J,!0)},eY=function(J){var $=W0(J);if($==="")return"";return Q7($).map(tY).join("")},JG=function(J){var $=W0(J);if($==="")return"";return $.substr(0,1).toLowerCase()+$.substr(1)},uQ=function(J){var $=W0(J);if($==="")return"";return Q7($).map(n7).join("-")},$G=function(J){var $=W0(J);if($==="")return"";return Q7($).map(n7).join("_")},QG=function(J){var $=W0(J);return $.toUpperCase()},ZG=function(J){var $=W0(J);return $.split("").reduce(HG,"")},HG=function(J,$){var Q=$.toLowerCase(),Z=$.toUpperCase();return J+($===Q?Z:Q)},YG=function(J,$){var Q=W0(J),Z=Array.isArray($)?$:[],H=E9.test(Q)?R9:_9;return Q.replace(H,function(Y,K){var G=K>0&&Z.indexOf(Q[K-1])>=0;return G?Y.toLowerCase():D9(Y,!0)})},eJ=function(J,$,Q){if(J<=$)return $;if(J>=Q)return Q;return J},lJ=function(J){if(J===Infinity)return E6;if(J===(-Infinity))return-E6;return~~J},lQ=function(J,$,Q){var Z=W0(J),H=FJ($)?Z.length:eJ(lJ($),0,E6),Y=W0(Q,"...");if(H>=Z.length)return Z;return Z.substr(0,$-Y.length)+Y},GG=function(J,$){var Q=W0(J);return Q.charAt($)},qG=function(J){return J>=nQ&&J<=KG},XG=function(J){return J>=oQ&&J<=UG},FG=function(J,$){return(J-nQ)*1024+$-oQ+65536},S6=function(J){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(FJ(J))return $;if(typeof J==="number")return J;return Number(J)},iQ=function(J,$){return J!==J?$:J},rQ=function(J,$){var Q=W0(J),Z=Q.length,H=S6($);if(H=iQ(H,0),H<0||H>=Z)return;var Y=Q.charCodeAt(H),K;if(qG(Y)&&Z>H+1){if(K=Q.charCodeAt(H+1),XG(K))return FG(Y,K)}return Y},WG=function(J,$){var Q=W0(J),Z=FJ($)?1:eJ(lJ($),0,E6);if(Q.length<=Z)return Q;return Q.substr(0,Z)},VG=function(J,$){var Q=W0(J),Z=S6($),H,Y=0;Z=iQ(Z,0);while((H=W9.exec(Q))!==null){if(Y===Z)return W9.lastIndex=0,H[0];Y++}return""},DG=function(J,$){var Q=W0(J),Z=FJ($)?1:eJ(lJ($),0,E6);if(Q.length<=Z)return Q;return Q.substr(Q.length-Z,Z)},zG=function(J,$,Q){var Z=W0(J),H=FJ($)?Z.length:eJ(lJ($),0,E6),Y=W0(Q,"...");if(H>=Z.length)return Z;var K=E9.test(Z)?R9:_9,G=0;return Z.replace(K,function(U,q){var W=q+U.length;if(W<=H-Y.length)G=W}),Z.substr(0,G)+Y},NG=function(J,$,Q){return W0(J).slice($,Q)},_G=function(J,$,Q){return W0(J).substr($,Q)},RG=function(J,$,Q){return W0(J).substring($,Q)},EG=function(J){return W0(J).length},OG=function(J){return W0(J).replace(N9,"*").replace(dQ,"*").length},BG=function(J,$){var Q=W0(J),Z=W0($),H=Z.length,Y=0,K=0;if(Q===""||Z==="")return Y;do if(K=Q.indexOf(Z,K),K!==-1)Y++,K+=H;while(K!==-1);return Y},IG=function(J,$,Q){var Z=W0(J);if(Z===""||typeof $!=="function")return 0;var H=$.bind(Q);return MG.call(Z,function(Y,K,G){return H(K,G,Z)?Y+1:Y},0)},LG=function(J,$,Q){return Q7(J,$,Q).length},i7=function(){this.index=0},YZ=function(J,$){var Q=W0(J),Z=FJ($)?1:eJ(lJ($),0,E6),H="";while(Z){if(Z&1)H+=Q;if(Z>1)Q+=Q;Z>>=1}return H},u7=function(J,$){var Q=lJ($/J.length),Z=$%J.length;return YZ(J,Q+Z).substr(0,$)},GZ=function(J,$,Q){var Z=W0(J),H=FJ($)?0:eJ(lJ($),0,E6),Y=W0(Q," ");if(H<=Z.length)return Z;return u7(Y,H-Z.length)+Z},KZ=function(J,$,Q){var Z=W0(J),H=FJ($)?0:eJ(lJ($),0,E6),Y=W0(Q," ");if(H<=Z.length)return Z;return Z+u7(Y,H-Z.length)},yG=function(J,$){var Q=$.width;if(FJ(Q)||J.length>=Q)return J;var Z=$.alignmentSpecifier===SG?KZ:GZ;return Z(J,Q,$.getPaddingCharacter())},UZ=function(J,$,Q){if(Q.signSpecifier===yQ&&J>=0)$=yQ+$;return $},xG=function(J,$){var Q=parseFloat(J),Z;if(isNaN(Q))Q=0;var H=S6($.precision,6);switch($.typeSpecifier){case ZZ:Z=Q.toFixed(H);break;case $Z:Z=Q.toExponential(H);break;case QZ:Z=Q.toExponential(H).toUpperCase();break;case HZ:case O9:Z=bG(Q,H,$);break}return Z=UZ(Q,Z,$),W0(Z)},bG=function(J,$,Q){if(J===0)return"0";var Z=$===0?1:$,H=J.toPrecision(Z).replace(lY,"");if(Q.typeSpecifier===O9)H=H.toUpperCase();return H},hG=function(J,$){var Q=parseInt(J);if(isNaN(Q))Q=0;switch(Q=Q>>>0,$.typeSpecifier){case aQ:Q=String.fromCharCode(Q);break;case sQ:Q=Q.toString(fG);break;case tQ:Q=Q.toString(jG);break;case eQ:Q=Q.toString(xQ);break;case JZ:Q=Q.toString(xQ).toUpperCase();break}return W0(Q)},gG=function(J,$){var Q=parseInt(J);if(isNaN(Q))Q=0;return UZ(Q,w6(Q),$)},vG=function(J,$){var Q=J,Z=$.precision;if(!FJ(Z)&&Q.length>Z)Q=lQ(Q,Z,"");return Q},mG=function(J,$){var Q;switch($.typeSpecifier){case TG:Q=vG;break;case AG:case kG:Q=gG;break;case aQ:case sQ:case tQ:case eQ:case JZ:case PG:Q=hG;break;case ZZ:case $Z:case QZ:case HZ:case O9:Q=xG;break}var Z=Q(J,$);return yG(Z,$)},B9=function(J){this.percent=J.percent,this.signSpecifier=J.signSpecifier,this.paddingSpecifier=J.paddingSpecifier,this.alignmentSpecifier=J.alignmentSpecifier,this.width=J.width,this.precision=J.precision,this.typeSpecifier=J.typeSpecifier},pG=function(J,$,Q){if(FJ(Q.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(J>$-1)throw new Error("sprintf(): Too few arguments");if(J<0)throw new Error("sprintf(): Argument number must be greater than zero")},dG=function(J,$,Q,Z,H,Y,K,G,U,q,W){var V=new B9({percent:Z,signSpecifier:Y,paddingSpecifier:K,alignmentSpecifier:G,width:S6(U,null),precision:S6(q,null),typeSpecifier:W});if(V.isPercentLiteral())return Q.slice(1);var D=J.getIndexByPosition(H);return J.incrementOnEmptyPosition(H),pG(D,$.length,V),mG($[D],V)},qZ=function(J){var $=W0(J);if($==="")return $;for(var Q=arguments.length,Z=new Array(Q>1?Q-1:0),H=1;H<Q;H++)Z[H-1]=arguments[H];var Y=dG.bind(void 0,new i7,Z);return $.replace(uY,Y)},cG=function(J,$){return qZ.apply(void 0,[J].concat(CY(_8($,[]))))},lG=function(J){return uG[J]},nG=function(J){return W0(J).replace(cY,lG)},oG=function(J){return W0(J).replace(dY,"\\$&")},rG=function(J,$){return J.replace(XZ[$],$)},sG=function(J){var $=W0(J);return iG.reduce(rG,$)},aG=function(J,$,Q){var Z=W0(J);return Z.indexOf($,Q)},tG=function(J,$,Q){var Z=W0(J);return Z.lastIndexOf($,Q)},eG=function(J,$,Q){var Z=W0(J),H=FJ(Q)?0:eJ(lJ(Q),0,Z.length),Y=Z.substr(H).search($);if(Y!==-1&&!isNaN(H))Y+=H;return Y},JK=function(J,$,Q){var Z=W0(J),H=W0($),Y=S6(Q);if(Y<0||Y>Z.length||H==="")return Z;return Z.slice(0,Y)+H+Z.slice(Y)},$K=function(){if(e8!==null)return e8;return e8={},Object.keys(bQ).forEach(function(J){var $=bQ[J];for(var Q=0;Q<$.length;Q++){var Z=$[Q];e8[Z]=J}}),e8},QK=function(J){var $=$K()[J];return $?$:J},ZK=function(J,$){return $},FZ=function(J){var $=W0(J);if($==="")return"";return $.replace(cQ,QK).replace(N9,ZK)},HK=function(J,$,Q){var Z=W0(J),H=FJ($)?0:eJ(lJ($),0,E6),Y=W0(Q," ");if(H<=Z.length)return Z;var K=H-Z.length,G=lJ(K/2),U=K%2;return u7(Y,G)+Z+u7(Y,G+U)},YK=function(J,$,Q){var Z=W0(J);return Z.replace($,Q)},WZ=function(J,$,Q){var Z=W0(J);if($ instanceof RegExp){if($.flags.indexOf("g")===-1)throw new TypeError("search argument is a non-global regular expression");return Z.replace($,Q)}var H=W0($),Y=typeof Q==="function";if(!Y)Q=W0(Q);var K=H.length;if(K===0)return WZ(J,/(?:)/g,Q);var G=K>1?K:1,U=[],q=Z.indexOf(H,0);while(q!==-1)U.push(q),q=Z.indexOf(H,q+G);var W=0,V="";for(var D=0;D<U.length;D++){var _=U[D],R=Q;if(Y)R=W0(Q.call(void 0,H,_,Z));V+=Z.slice(W,_)+R,W=_+K}if(W<Z.length)V+=Z.slice(W);return V},GK=function(J){var $=W0(J);return $.split("").reverse().join("")},VZ=function(J){var $=W0(J);$=$.replace(N9,function(H,Y,K){return VZ(K)+Y}).replace(dQ,"$2$1");var Q="",Z=$.length;while(Z--)Q+=$.charAt(Z);return Q},KK=function(J){var $=W0(J);if($==="")return"";var Q=FZ($).replace(cQ,"-");return uQ(Q)},UK=function(J,$,Q,Z){var H=W0(J),Y=W0(Z),K=S6($);if(K<0){if(K=H.length+K,K<0)K=0}else if(K>H.length)K=H.length;var G=S6(Q,H.length-K);if(G<0)G=0;return H.slice(0,K)+Y+H.slice(K+G)},qK=function(J,$,Q){var Z=W0(J),H,Y;if($7($)&&$7(Q))H=$.split(""),Y=Q.split("");else{var K=XK(_8($,{})),G=SY(K,2);H=G[0],Y=G[1]}var U=H.length;if(U===0)return Z;var q="",W=Y.length;for(var V=0;V<Z.length;V++){var D=!1,_=void 0;for(var R=0;R<U&&R<W;R++){var E=H[R];if(Z.substr(V,E.length)===E){D=!0,_=Y[R],V=V+E.length-1;break}}q+=D?_:Z[V]}return q},XK=function(J){var $=Object.keys(J),Q=$.sort(FK).map(function(Z){return J[Z]});return[$,Q]},FK=function(J,$){if(J.length===$.length)return 0;return J.length<$.length?1:-1},M9=function(J,$,Q){var Z=W0(J),H=w6($);if(H===null)return!1;if(H==="")return!0;return Q=FJ(Q)?0:eJ(lJ(Q),0,Z.length),Z.indexOf(H,Q)!==-1},DZ=function(J,$){var Q=W0(J);if($===""||Q==="")return Q;var Z=w6($);if(FJ(Z))return Q.replace(vY,"");var H=!0;return WK.call(Q,function(Y,K){if(H&&M9(Z,K))return Y;return H=!1,Y+K},"")},zZ=function(J,$){var Q=W0(J);if($===""||Q==="")return Q;var Z=w6($);if(FJ(Z))return Q.replace(mY,"");var H=!0;return VK.call(Q,function(Y,K){if(H&&M9(Z,K))return Y;return H=!1,K+Y},"")},DK=function(J,$){var Q=W0(J);if($===""||Q==="")return Q;var Z=w6($);if(FJ(Z))return Q.trim();return zZ(DZ(Q,Z),Z)},EK=function(J){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=W0(J),Z=OK($),H=Z.width,Y=Z.newLine,K=Z.indent,G=Z.cut;if(Q===""||H<=0)return K;var U=Q.length,q=Q.substring.bind(Q),W=0,V="";while(U-W>H){if(Q[W]===" "){W++;continue}var D=Q.lastIndexOf(" ",H+W);if(D>=W)V+=K+q(W,D)+Y,W=D+1;else if(G)V+=K+q(W,H+W)+Y,W+=H;else if(D=Q.indexOf(" ",H+W),D>=0)V+=K+q(W,D)+Y,W=D+1;else V+=K+q(W),W=U}if(W<U)V+=K+q(W);return V},OK=function(J){return{width:S6(J[zK],75),newLine:W0(J[NK],"\n"),indent:W0(J[_K],""),cut:mQ(J[RK],!1)}},BK=function(J,$,Q){if(FJ($))return!1;var Z=W0(J),H=W0($);if(H==="")return!0;Q=FJ(Q)?Z.length:eJ(lJ(Q),0,Z.length),Q-=H.length;var Y=Z.indexOf(H,Q);return Y!==-1&&Y===Q},I9=function(J){var $=W0(J);return sY.test($)},MK=function(J){var $=W0(J);return aY.test($)},IK=function(J){var $=W0(J);return $.trim().length===0},LK=function(J){var $=W0(J);return pY.test($)},kK=function(J){var $=W0(J);return $.length===0},AK=function(J){var $=W0(J);return I9($)&&$.toLowerCase()===$},PK=function(J){var $=typeof J==="object"&&!FJ(J)?Number(J):J;return(typeof $==="number"||typeof $==="string")&&!isNaN($-parseFloat($))},TK=function(J){var $=W0(J);return I9($)&&$.toUpperCase()===$},wK=function(J,$,Q){var Z=W0(J),H=W0(Q),Y;if(!($ instanceof RegExp)){if(Y=w6($),Y===null)return!1;$=new RegExp(Y,H)}return $.test(Z)},SK=function(J,$,Q){var Z=W0(J),H=w6($);if(H===null)return!1;if(H==="")return!0;return Q=FJ(Q)?0:eJ(lJ(Q),0,Z.length),Z.substr(Q,H.length)===H},CK=function(J){var $=W0(J);return $.split("")},fK=function(J){var $=W0(J),Q=$.length,Z=[],H=0,Y;while(H<Q)Y=rQ($,H),Z.push(Y),H+=Y>65535?2:1;return Z},jK=function(J){var $=W0(J);return _8($.match(W9),[])},yK=function(J,$,Q){var Z=W0(J);return Z.split($,Q)},bK=function(J){var $=W0(J);if($==="")return"";if($[0]===xK)return $.substring(1);return $},hK=function(J,$,Q){var Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,H=0;if(Z)H=-$.length+1;var Y=J.substr(Q+H,$.length);return Y.toLowerCase()===$},gK=function(J){var $=[],Q;while((Q=nY.exec(J))!==null)$.push(Q[1]);return $},vK=function(J){var $=hQ,Q="",Z=0;while($!==X9){var H=J[Z++].toLowerCase();switch(H){case"<":break;case">":$=X9;break;default:if(gY.test(H)){if($===gQ)$=X9}else{if($===hQ)$=gQ;if(H!=="/")Q+=H}break}}return Q},mK=function(J,$,Q){if(J=W0(J),J==="")return"";if(!Array.isArray($)){var Z=W0($);$=Z===""?[]:gK(Z)}var H=W0(Q),Y=J.length,K=$.length>0,G=hK.bind(null,J),U=J7,q=0,W="",V="",D=null;for(var _=0;_<Y;_++){var R=J[_],E=!1;switch(R){case"<":if(D)break;if(G("< ",_,!1)){E=!0;break}if(U===J7){E=!0,U=$8;break}if(U===$8){q++;break}E=!0;break;case"!":if(U===$8&&G("<!",_)){U=p7;break}E=!0;break;case"-":if(U===p7&&G("!--",_)){U=vQ;break}E=!0;break;case'"':case"'":if(U===$8){if(D===R)D=null;else if(!D)D=R}E=!0;break;case"E":case"e":if(U===p7&&G("doctype",_)){U=$8;break}E=!0;break;case">":if(q>0){q--;break}if(D)break;if(U===$8){if(D=null,U=J7,K){V+=">";var z=vK(V);if($.indexOf(z.toLowerCase())!==-1)W+=V;else W+=H;V=""}else W+=H;break}if(U===p7||U===vQ&&G("-->",_)){D=null,U=J7,V="";break}E=!0;break;default:E=!0}if(E)switch(U){case J7:W+=R;break;case $8:if(K)V+=R;break}}return W},pK=function(){if(N8!==null)return N8;if(typeof global==="object"&&global.Object===Object)N8=global;else if(typeof self==="object"&&self.Object===Object)N8=self;else N8=new Function("return this")();return N8},cK=function(){if(this===V9.v)V9.v=dK;return this},iJ=function(J,$){this._wrappedValue=J,this._explicitChain=$},lK=function(J){return function(){for(var $=arguments.length,Q=new Array($),Z=0;Z<$;Z++)Q[Z]=arguments[Z];var H=J.apply(void 0,[this._wrappedValue].concat(Q));if(this._explicitChain||typeof H==="string")return new iJ(H,this._explicitChain);else return H}},nK=function(J){return new iJ(J,!0)},NZ=function(J){return new iJ(J,!1)},z9="\\d",o7="\\s\\uFEFF\\xA0",p6="\\uD800-\\uDBFF",d6="\\uDC00-\\uDFFF",Q8="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",pQ="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",N9=new RegExp("(["+pQ+"]|["+p6+"]["+d6+"]|["+p6+"](?!["+d6+"])|(?:[^"+p6+"]|^)["+d6+"])(["+Q8+"]+)","g"),dQ=new RegExp("(["+p6+"])(["+d6+"])","g"),W9=new RegExp("((?:["+pQ+"]|["+p6+"]["+d6+"]|["+p6+"](?!["+d6+"])|(?:[^"+p6+"]|^)["+d6+"])(?:["+Q8+"]+))|(["+p6+"]["+d6+"])|([\\n\\r\\u2028\\u2029])|(.)","g"),gY=new RegExp("["+o7+"]"),vY=new RegExp("^["+o7+"]+"),mY=new RegExp("["+o7+"]+$"),pY=new RegExp("^"+z9+"+$"),dY=/[-[\]{}()*+!<=:?./\\^$|#,]/g,cQ=/[^A-Za-z0-9]/g,cY=/[<>&"'`]/g,uY=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,lY=/\.?0+$/g,nY=/<([A-Za-z0-9]+)>/g,oY="\\u2000-\\u206F",iY="\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7",rY="\\u2700-\\u27BF",d7="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",c7="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",_9=new RegExp("(?:["+c7+"]["+Q8+"]*)?(?:["+d7+"]["+Q8+"]*)+|(?:["+c7+"]["+Q8+"]*)+(?!["+d7+"])|["+z9+"]+|["+rY+"]|[^"+iY+oY+o7+"]+","g"),R9=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,sY=new RegExp("^(?:["+d7+c7+"]["+Q8+"]*)+$"),aY=new RegExp("^((?:["+d7+c7+"]["+Q8+"]*)|["+z9+"])+$"),E9=/^[\x01-\xFF]*$/,E6=9007199254740991,nQ=55296,KG=56319,oQ=56320,UG=57343,MG=Array.prototype.reduce;i7.prototype.increment=function(){this.index++};i7.prototype.incrementOnEmptyPosition=function(J){if(FJ(J))this.increment()};i7.prototype.getIndexByPosition=function(J){return FJ(J)?this.index:J-1};var kG="i",sQ="b",aQ="c",AG="d",tQ="o",PG="u",eQ="x",JZ="X",$Z="e",QZ="E",ZZ="f",HZ="g",O9="G",TG="s",wG="'",yQ="+",SG="-",CG="%%",fG=2,jG=8,xQ=16;B9.prototype.isPercentLiteral=function(){return CG===this.percent};B9.prototype.getPaddingCharacter=function(){var J=_8(this.paddingSpecifier," ");if(J.length===2&&J[0]===wG)J=J[1];return J};var uG={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},XZ={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,'"':/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},iG=Object.keys(XZ),bQ={"3":"\u039E\u03BE","8":"\u0398\u03B8",A:"A\xC0\xC1\xC2\xC3\xC4\xC5\u0100\u0102\u0104\u01CD\u01DE\u01E0\u01FA\u0200\u0202\u0226\u023A\u0386\u0391\u0410",B:"B\u0181\u0182\u0243\u0392\u0411",C:"C\xC7\u0106\u0108\u010A\u010C\u0187\u023B\u0426",D:"D\u010E\u0110\u0189\u018A\u018B\xD0\u0394\u0414",E:"E\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u018E\u0190\u0204\u0206\u0228\u0388\u0395\u0415\u042D",F:"F\u0191\u03A6\u0424",G:"G\u011C\u011E\u0120\u0122\u0193\u01E4\u01E6\u01F4\u0393\u0413\u0490",H:"H\u0124\u0126\u021E\u0389\u0397\u0425",I:"I\xCC\xCD\xCE\xCF\u0128\u012A\u012C\u012E\u0130\u0197\u01CF\u0208\u020A\u038A\u0399\u03AA\u0406\u0418",J:"J\u0134\u0248\u0419",K:"K\u0136\u0198\u01E8\u039A\u041A",L:"L\u0139\u013B\u013D\u013F\u0141\u023D\u039B\u041B",M:"M\u019C\u039C\u041C",N:"N\xD1\u0143\u0145\u0147\u019D\u01F8\u0220\u039D\u041D",O:"O\xD2\xD3\xD4\xD5\xD6\xD8\u014C\u014E\u0150\u0186\u019F\u01A0\u01D1\u01EA\u01EC\u01FE\u020C\u020E\u022A\u022C\u022E\u0230\u038C\u039F\u041E",P:"P\u01A4\u03A0\u041F",Q:"Q\u024A",R:"R\u0154\u0156\u0158\u0210\u0212\u024C\u03A1\u0420",S:"S\u015A\u015C\u015E\u0160\u0218\u03A3\u0421",T:"T\u0162\u0164\u0166\u01AC\u01AE\u021A\u023E\u03A4\u0422",U:"U\xD9\xDA\xDB\xDC\u0168\u016A\u016C\u016E\u0170\u0172\u01AF\u01D3\u01D5\u01D7\u01D9\u01DB\u0214\u0216\u0244\u0423\u042A",V:"V\u01B2\u0245\u0412",W:"W\u0174\u038F\u03A9",X:"X\u03A7",Y:"Y\xDD\u0176\u0178\u01B3\u0232\u024E\u038E\u03A5\u03AB\u042B",Z:"Z\u0179\u017B\u017D\u01B5\u0224\u0396\u0417",a:"a\xE0\xE1\xE2\xE3\xE4\xE5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u0250\u03AC\u03B1\u0430",b:"b\u0180\u0183\u0253\u03B2\u0431",c:"c\xE7\u0107\u0109\u010B\u010D\u0188\u023C\u0446",d:"d\u010F\u0111\u018C\u0256\u0257\xF0\u03B4\u0434",e:"e\xE8\xE9\xEA\xEB\u0113\u0115\u0117\u0119\u011B\u01DD\u0205\u0207\u0229\u0247\u025B\u03AD\u03B5\u0435\u044D",f:"f\u0192\u03C6\u0444",g:"g\u011D\u011F\u0121\u0123\u01E5\u01E7\u01F5\u0260\u03B3\u0433\u0491",h:"h\u0125\u0127\u021F\u0265\u03AE\u03B7\u0445",i:"i\xEC\xED\xEE\xEF\u0129\u012B\u012D\u012F\u0131\u01D0\u0209\u020B\u0268\u0390\u03AF\u03B9\u03CA\u0438\u0456",j:"j\u0135\u01F0\u0249\u0439",k:"k\u0137\u0199\u01E9\u03BA\u043A",l:"l\u013A\u013C\u013E\u0140\u0142\u017F\u019A\u026B\u03BB\u043B",m:"m\u026F\u0271\u03BC\u043C",n:"n\xF1\u0144\u0146\u0148\u0149\u019E\u01F9\u0272\u03BD\u043D",o:"o\xF2\xF3\xF4\xF5\xF6\xF8\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u01FF\u020D\u020F\u022B\u022D\u022F\u0231\u0254\u0275\u03BF\u03CC\u043E",p:"p\u01A5\u03C0\u043F",q:"q\u024B",r:"r\u0155\u0157\u0159\u0211\u0213\u024D\u027D\u03C1\u0440",s:"s\xDF\u015B\u015D\u015F\u0161\u0219\u023F\u03C2\u03C3\u0441",t:"t\u0163\u0165\u0167\u01AD\u021B\u0288\u03C4\u0442",u:"u\xF9\xFA\xFB\xFC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u0289\u0443\u044A",v:"v\u028B\u028C\u0432",w:"w\u0175\u03C9\u03CE",x:"x\u03C7",y:"y\xFD\xFF\u0177\u01B4\u0233\u024F\u03B0\u03C5\u03CB\u03CD\u044B",z:"z\u017A\u017C\u017E\u01B6\u0225\u0240\u03B6\u0437",OE:"\x8C\u0152",oe:"\x9C\u0153",AE:"\xC6\u01E2\u01FC",ae:"\xE6\u01E3\u01FD",hv:"\u0195",OI:"\u01A2",oi:"\u01A3",DZ:"\u01C4\u01F1",Dz:"\u01C5\u01F2",dz:"\u01C6\u01F3",LJ:"\u01C7",Lj:"\u01C8",lj:"\u01C9",NJ:"\u01CA",Nj:"\u01CB",nj:"\u01CC",OU:"\u0222",ou:"\u0223",TH:"\xDE",th:"\xFE",PS:"\u03A8",ps:"\u03C8",Yo:"\u0401",Ye:"\u0404",Yi:"\u0407",Zh:"\u0416",Ch:"\u0427",Sh:"\u0428\u0429","":"\u042A\u042C\u044C",Yu:"\u042E",Ya:"\u042F",zh:"\u0436",ch:"\u0447",sh:"\u0448\u0449",yu:"\u044E",ya:"\u044F",yo:"\u0451",ye:"\u0454",yi:"\u0457"},e8=null,WK=Array.prototype.reduce,VK=Array.prototype.reduceRight,zK="width",NK="newLine",_K="indent",RK="cut",xK="\uFEFF",hQ=0,gQ=1,X9=2,J7=0,$8=1,p7=2,vQ=3,N8=null,V9=pK(),dK=V9.v,uK="1.4.0",l7={camelCase:eY,capitalize:D9,decapitalize:JG,kebabCase:uQ,lowerCase:n7,snakeCase:$G,swapCase:ZG,titleCase:YG,upperCase:QG,count:EG,countGraphemes:OG,countSubstrings:BG,countWhere:IG,countWords:LG,escapeHtml:nG,escapeRegExp:oG,unescapeHtml:sG,sprintf:qZ,vprintf:cG,indexOf:aG,lastIndexOf:tG,search:eG,charAt:GG,codePointAt:rQ,first:WG,graphemeAt:VG,last:DG,prune:zG,slice:NG,substr:_G,substring:RG,truncate:lQ,insert:JK,latinise:FZ,pad:HK,padLeft:GZ,padRight:KZ,repeat:YZ,replace:YK,replaceAll:WZ,reverse:GK,reverseGrapheme:VZ,slugify:KK,splice:UK,tr:qK,trim:DK,trimLeft:DZ,trimRight:zZ,wordWrap:EK,endsWith:BK,includes:M9,isAlpha:I9,isAlphaDigit:MK,isBlank:IK,isDigit:LK,isEmpty:kK,isLowerCase:AK,isNumeric:PK,isString:$7,isUpperCase:TK,matches:wK,startsWith:SK,chars:CK,codePoints:fK,graphemes:jK,split:yK,words:Q7,stripBom:bK,stripTags:mK,noConflict:cK,version:uK};iJ.prototype.value=function(){return this._wrappedValue};iJ.prototype.valueOf=function(){return this.value()};iJ.prototype.toJSON=function(){return this.value()};iJ.prototype.toString=function(){return String(this.value())};iJ.prototype.chain=function(){return new iJ(this._wrappedValue,!0)};iJ.prototype.thru=function(J){if(typeof J==="function")return new iJ(J(this._wrappedValue),this._explicitChain);return this};iJ.prototype._explicitChain=!0;Object.keys(l7).forEach(function(J){iJ.prototype[J]=lK(l7[J])});F9(NZ,l7,{chain:nK});var L9={...l7,voca:NZ};var k9=function(J){return J},oK=function(J){if(typeof J=="number"){if(J.toString(16).match(/[0-9a-f]{6}|[0-9a-f]{3}|[0-9a-f]{5}/))J="#"+(J.toString(16).length==5?"0"+J.toString(16):J.toString(16))}return J},iK=function(J){if(typeof J=="string"){if(J.toLocaleLowerCase()in _Z)J=_Z[J]}return J},Z7=function(J,$=!0){if(J=oK(J),J=iK(J),Array.isArray(J))J=J.map((Q)=>typeof Q=="number"&&$?Q+"px":Z7(Q)).join(" ");return J},F=function(J,$){if(!c6[J])c6[J]={};for(var Q in $)c6[J][Q]=Z7($[Q])},X=function(J,$=null){if(!c6[J])c6[J]={};if(!$)return c6[J];return c6[J][$]},c6={},_Z={};class rJ extends m6{name="";values={};constructor(J,$=null){super();if(typeof J=="object"&&!$)$=J,J=null;if(!J)J="style-"+Object.keys(c6).length;if(this.name=J,$)this.set($);this.values=new Proxy({},{get:(Q,Z)=>this[Z]||this.all[Z]})}addProperty(J,$){if(k9({[J]:$})[J])this[J]=$}get all(){return X(this.name)}set all(J){for(var $ in J)if($ in this)this[$]=J[$];else this.variable($,J[$]);this._updated()}set(J){J=k9(J),this.all=J}set accentColor(J){F(this.name,{accentColor:J}),this._updated()}get accentColor(){return X(this.name,"accentColor")}setAccentColor(J){return this.accentColor=J,this}set additiveSymbols(J){F(this.name,{additiveSymbols:J}),this._updated()}get additiveSymbols(){return X(this.name,"additiveSymbols")}setAdditiveSymbols(J){return this.additiveSymbols=J,this}set alignContent(J){F(this.name,{alignContent:J}),this._updated()}get alignContent(){return X(this.name,"alignContent")}setAlignContent(J){return this.alignContent=J,this}set alignItems(J){F(this.name,{alignItems:J}),this._updated()}get alignItems(){return X(this.name,"alignItems")}setAlignItems(J){return this.alignItems=J,this}set alignSelf(J){F(this.name,{alignSelf:J}),this._updated()}get alignSelf(){return X(this.name,"alignSelf")}setAlignSelf(J){return this.alignSelf=J,this}set alignmentBaseline(J){F(this.name,{alignmentBaseline:J}),this._updated()}get alignmentBaseline(){return X(this.name,"alignmentBaseline")}setAlignmentBaseline(J){return this.alignmentBaseline=J,this}set animation(J){F(this.name,{animation:J}),this._updated()}get animation(){return X(this.name,"animation")}setAnimation(J){return this.animation=J,this}set animationComposition(J){F(this.name,{animationComposition:J}),this._updated()}get animationComposition(){return X(this.name,"animationComposition")}setAnimationComposition(J){return this.animationComposition=J,this}set animationDelay(J){F(this.name,{animationDelay:J}),this._updated()}get animationDelay(){return X(this.name,"animationDelay")}setAnimationDelay(J){return this.animationDelay=J,this}set animationDirection(J){F(this.name,{animationDirection:J}),this._updated()}get animationDirection(){return X(this.name,"animationDirection")}setAnimationDirection(J){return this.animationDirection=J,this}set animationDuration(J){F(this.name,{animationDuration:J}),this._updated()}get animationDuration(){return X(this.name,"animationDuration")}setAnimationDuration(J){return this.animationDuration=J,this}set animationFillMode(J){F(this.name,{animationFillMode:J}),this._updated()}get animationFillMode(){return X(this.name,"animationFillMode")}setAnimationFillMode(J){return this.animationFillMode=J,this}set animationIterationCount(J){F(this.name,{animationIterationCount:J}),this._updated()}get animationIterationCount(){return X(this.name,"animationIterationCount")}setAnimationIterationCount(J){return this.animationIterationCount=J,this}set animationName(J){F(this.name,{animationName:J}),this._updated()}get animationName(){return X(this.name,"animationName")}setAnimationName(J){return this.animationName=J,this}set animationPlayState(J){F(this.name,{animationPlayState:J}),this._updated()}get animationPlayState(){return X(this.name,"animationPlayState")}setAnimationPlayState(J){return this.animationPlayState=J,this}set animationRange(J){F(this.name,{animationRange:J}),this._updated()}get animationRange(){return X(this.name,"animationRange")}setAnimationRange(J){return this.animationRange=J,this}set animationRangeEnd(J){F(this.name,{animationRangeEnd:J}),this._updated()}get animationRangeEnd(){return X(this.name,"animationRangeEnd")}setAnimationRangeEnd(J){return this.animationRangeEnd=J,this}set animationRangeStart(J){F(this.name,{animationRangeStart:J}),this._updated()}get animationRangeStart(){return X(this.name,"animationRangeStart")}setAnimationRangeStart(J){return this.animationRangeStart=J,this}set animationTimeline(J){F(this.name,{animationTimeline:J}),this._updated()}get animationTimeline(){return X(this.name,"animationTimeline")}setAnimationTimeline(J){return this.animationTimeline=J,this}set animationTimingFunction(J){F(this.name,{animationTimingFunction:J}),this._updated()}get animationTimingFunction(){return X(this.name,"animationTimingFunction")}setAnimationTimingFunction(J){return this.animationTimingFunction=J,this}set appRegion(J){F(this.name,{appRegion:J}),this._updated()}get appRegion(){return X(this.name,"appRegion")}setAppRegion(J){return this.appRegion=J,this}set appearance(J){F(this.name,{appearance:J}),this._updated()}get appearance(){return X(this.name,"appearance")}setAppearance(J){return this.appearance=J,this}set ascentOverride(J){F(this.name,{ascentOverride:J}),this._updated()}get ascentOverride(){return X(this.name,"ascentOverride")}setAscentOverride(J){return this.ascentOverride=J,this}set aspectRatio(J){F(this.name,{aspectRatio:J}),this._updated()}get aspectRatio(){return X(this.name,"aspectRatio")}setAspectRatio(J){return this.aspectRatio=J,this}set backdropFilter(J){F(this.name,{backdropFilter:J}),this._updated()}get backdropFilter(){return X(this.name,"backdropFilter")}setBackdropFilter(J){return this.backdropFilter=J,this}set backfaceVisibility(J){F(this.name,{backfaceVisibility:J}),this._updated()}get backfaceVisibility(){return X(this.name,"backfaceVisibility")}setBackfaceVisibility(J){return this.backfaceVisibility=J,this}set background(J){F(this.name,{background:J}),this._updated()}get background(){return X(this.name,"background")}setBackground(J){return this.background=J,this}set backgroundAttachment(J){F(this.name,{backgroundAttachment:J}),this._updated()}get backgroundAttachment(){return X(this.name,"backgroundAttachment")}setBackgroundAttachment(J){return this.backgroundAttachment=J,this}set backgroundBlendMode(J){F(this.name,{backgroundBlendMode:J}),this._updated()}get backgroundBlendMode(){return X(this.name,"backgroundBlendMode")}setBackgroundBlendMode(J){return this.backgroundBlendMode=J,this}set backgroundClip(J){F(this.name,{backgroundClip:J}),this._updated()}get backgroundClip(){return X(this.name,"backgroundClip")}setBackgroundClip(J){return this.backgroundClip=J,this}set backgroundColor(J){F(this.name,{backgroundColor:J}),this._updated()}get backgroundColor(){return X(this.name,"backgroundColor")}setBackgroundColor(J){return this.backgroundColor=J,this}set backgroundImage(J){F(this.name,{backgroundImage:J}),this._updated()}get backgroundImage(){return X(this.name,"backgroundImage")}setBackgroundImage(J){return this.backgroundImage=J,this}set backgroundOrigin(J){F(this.name,{backgroundOrigin:J}),this._updated()}get backgroundOrigin(){return X(this.name,"backgroundOrigin")}setBackgroundOrigin(J){return this.backgroundOrigin=J,this}set backgroundPosition(J){F(this.name,{backgroundPosition:J}),this._updated()}get backgroundPosition(){return X(this.name,"backgroundPosition")}setBackgroundPosition(J){return this.backgroundPosition=J,this}set backgroundPositionX(J){F(this.name,{backgroundPositionX:J}),this._updated()}get backgroundPositionX(){return X(this.name,"backgroundPositionX")}setBackgroundPositionX(J){return this.backgroundPositionX=J,this}set backgroundPositionY(J){F(this.name,{backgroundPositionY:J}),this._updated()}get backgroundPositionY(){return X(this.name,"backgroundPositionY")}setBackgroundPositionY(J){return this.backgroundPositionY=J,this}set backgroundRepeat(J){F(this.name,{backgroundRepeat:J}),this._updated()}get backgroundRepeat(){return X(this.name,"backgroundRepeat")}setBackgroundRepeat(J){return this.backgroundRepeat=J,this}set backgroundRepeatX(J){F(this.name,{backgroundRepeatX:J}),this._updated()}get backgroundRepeatX(){return X(this.name,"backgroundRepeatX")}setBackgroundRepeatX(J){return this.backgroundRepeatX=J,this}set backgroundRepeatY(J){F(this.name,{backgroundRepeatY:J}),this._updated()}get backgroundRepeatY(){return X(this.name,"backgroundRepeatY")}setBackgroundRepeatY(J){return this.backgroundRepeatY=J,this}set backgroundSize(J){F(this.name,{backgroundSize:J}),this._updated()}get backgroundSize(){return X(this.name,"backgroundSize")}setBackgroundSize(J){return this.backgroundSize=J,this}set basePalette(J){F(this.name,{basePalette:J}),this._updated()}get basePalette(){return X(this.name,"basePalette")}setBasePalette(J){return this.basePalette=J,this}set baselineShift(J){F(this.name,{baselineShift:J}),this._updated()}get baselineShift(){return X(this.name,"baselineShift")}setBaselineShift(J){return this.baselineShift=J,this}set baselineSource(J){F(this.name,{baselineSource:J}),this._updated()}get baselineSource(){return X(this.name,"baselineSource")}setBaselineSource(J){return this.baselineSource=J,this}set blockSize(J){F(this.name,{blockSize:J}),this._updated()}get blockSize(){return X(this.name,"blockSize")}setBlockSize(J){return this.blockSize=J,this}set border(J){F(this.name,{border:J}),this._updated()}get border(){return X(this.name,"border")}setBorder(J){return this.border=J,this}set borderBlock(J){F(this.name,{borderBlock:J}),this._updated()}get borderBlock(){return X(this.name,"borderBlock")}setBorderBlock(J){return this.borderBlock=J,this}set borderBlockColor(J){F(this.name,{borderBlockColor:J}),this._updated()}get borderBlockColor(){return X(this.name,"borderBlockColor")}setBorderBlockColor(J){return this.borderBlockColor=J,this}set borderBlockEnd(J){F(this.name,{borderBlockEnd:J}),this._updated()}get borderBlockEnd(){return X(this.name,"borderBlockEnd")}setBorderBlockEnd(J){return this.borderBlockEnd=J,this}set borderBlockEndColor(J){F(this.name,{borderBlockEndColor:J}),this._updated()}get borderBlockEndColor(){return X(this.name,"borderBlockEndColor")}setBorderBlockEndColor(J){return this.borderBlockEndColor=J,this}set borderBlockEndStyle(J){F(this.name,{borderBlockEndStyle:J}),this._updated()}get borderBlockEndStyle(){return X(this.name,"borderBlockEndStyle")}setBorderBlockEndStyle(J){return this.borderBlockEndStyle=J,this}set borderBlockEndWidth(J){F(this.name,{borderBlockEndWidth:J}),this._updated()}get borderBlockEndWidth(){return X(this.name,"borderBlockEndWidth")}setBorderBlockEndWidth(J){return this.borderBlockEndWidth=J,this}set borderBlockStart(J){F(this.name,{borderBlockStart:J}),this._updated()}get borderBlockStart(){return X(this.name,"borderBlockStart")}setBorderBlockStart(J){return this.borderBlockStart=J,this}set borderBlockStartColor(J){F(this.name,{borderBlockStartColor:J}),this._updated()}get borderBlockStartColor(){return X(this.name,"borderBlockStartColor")}setBorderBlockStartColor(J){return this.borderBlockStartColor=J,this}set borderBlockStartStyle(J){F(this.name,{borderBlockStartStyle:J}),this._updated()}get borderBlockStartStyle(){return X(this.name,"borderBlockStartStyle")}setBorderBlockStartStyle(J){return this.borderBlockStartStyle=J,this}set borderBlockStartWidth(J){F(this.name,{borderBlockStartWidth:J}),this._updated()}get borderBlockStartWidth(){return X(this.name,"borderBlockStartWidth")}setBorderBlockStartWidth(J){return this.borderBlockStartWidth=J,this}set borderBlockStyle(J){F(this.name,{borderBlockStyle:J}),this._updated()}get borderBlockStyle(){return X(this.name,"borderBlockStyle")}setBorderBlockStyle(J){return this.borderBlockStyle=J,this}set borderBlockWidth(J){F(this.name,{borderBlockWidth:J}),this._updated()}get borderBlockWidth(){return X(this.name,"borderBlockWidth")}setBorderBlockWidth(J){return this.borderBlockWidth=J,this}set borderBottom(J){F(this.name,{borderBottom:J}),this._updated()}get borderBottom(){return X(this.name,"borderBottom")}setBorderBottom(J){return this.borderBottom=J,this}set borderBottomColor(J){F(this.name,{borderBottomColor:J}),this._updated()}get borderBottomColor(){return X(this.name,"borderBottomColor")}setBorderBottomColor(J){return this.borderBottomColor=J,this}set borderBottomLeftRadius(J){F(this.name,{borderBottomLeftRadius:J}),this._updated()}get borderBottomLeftRadius(){return X(this.name,"borderBottomLeftRadius")}setBorderBottomLeftRadius(J){return this.borderBottomLeftRadius=J,this}set borderBottomRightRadius(J){F(this.name,{borderBottomRightRadius:J}),this._updated()}get borderBottomRightRadius(){return X(this.name,"borderBottomRightRadius")}setBorderBottomRightRadius(J){return this.borderBottomRightRadius=J,this}set borderBottomStyle(J){F(this.name,{borderBottomStyle:J}),this._updated()}get borderBottomStyle(){return X(this.name,"borderBottomStyle")}setBorderBottomStyle(J){return this.borderBottomStyle=J,this}set borderBottomWidth(J){F(this.name,{borderBottomWidth:J}),this._updated()}get borderBottomWidth(){return X(this.name,"borderBottomWidth")}setBorderBottomWidth(J){return this.borderBottomWidth=J,this}set borderCollapse(J){F(this.name,{borderCollapse:J}),this._updated()}get borderCollapse(){return X(this.name,"borderCollapse")}setBorderCollapse(J){return this.borderCollapse=J,this}set borderColor(J){F(this.name,{borderColor:J}),this._updated()}get borderColor(){return X(this.name,"borderColor")}setBorderColor(J){return this.borderColor=J,this}set borderEndEndRadius(J){F(this.name,{borderEndEndRadius:J}),this._updated()}get borderEndEndRadius(){return X(this.name,"borderEndEndRadius")}setBorderEndEndRadius(J){return this.borderEndEndRadius=J,this}set borderEndStartRadius(J){F(this.name,{borderEndStartRadius:J}),this._updated()}get borderEndStartRadius(){return X(this.name,"borderEndStartRadius")}setBorderEndStartRadius(J){return this.borderEndStartRadius=J,this}set borderImage(J){F(this.name,{borderImage:J}),this._updated()}get borderImage(){return X(this.name,"borderImage")}setBorderImage(J){return this.borderImage=J,this}set borderImageOutset(J){F(this.name,{borderImageOutset:J}),this._updated()}get borderImageOutset(){return X(this.name,"borderImageOutset")}setBorderImageOutset(J){return this.borderImageOutset=J,this}set borderImageRepeat(J){F(this.name,{borderImageRepeat:J}),this._updated()}get borderImageRepeat(){return X(this.name,"borderImageRepeat")}setBorderImageRepeat(J){return this.borderImageRepeat=J,this}set borderImageSlice(J){F(this.name,{borderImageSlice:J}),this._updated()}get borderImageSlice(){return X(this.name,"borderImageSlice")}setBorderImageSlice(J){return this.borderImageSlice=J,this}set borderImageSource(J){F(this.name,{borderImageSource:J}),this._updated()}get borderImageSource(){return X(this.name,"borderImageSource")}setBorderImageSource(J){return this.borderImageSource=J,this}set borderImageWidth(J){F(this.name,{borderImageWidth:J}),this._updated()}get borderImageWidth(){return X(this.name,"borderImageWidth")}setBorderImageWidth(J){return this.borderImageWidth=J,this}set borderInline(J){F(this.name,{borderInline:J}),this._updated()}get borderInline(){return X(this.name,"borderInline")}setBorderInline(J){return this.borderInline=J,this}set borderInlineColor(J){F(this.name,{borderInlineColor:J}),this._updated()}get borderInlineColor(){return X(this.name,"borderInlineColor")}setBorderInlineColor(J){return this.borderInlineColor=J,this}set borderInlineEnd(J){F(this.name,{borderInlineEnd:J}),this._updated()}get borderInlineEnd(){return X(this.name,"borderInlineEnd")}setBorderInlineEnd(J){return this.borderInlineEnd=J,this}set borderInlineEndColor(J){F(this.name,{borderInlineEndColor:J}),this._updated()}get borderInlineEndColor(){return X(this.name,"borderInlineEndColor")}setBorderInlineEndColor(J){return this.borderInlineEndColor=J,this}set borderInlineEndStyle(J){F(this.name,{borderInlineEndStyle:J}),this._updated()}get borderInlineEndStyle(){return X(this.name,"borderInlineEndStyle")}setBorderInlineEndStyle(J){return this.borderInlineEndStyle=J,this}set borderInlineEndWidth(J){F(this.name,{borderInlineEndWidth:J}),this._updated()}get borderInlineEndWidth(){return X(this.name,"borderInlineEndWidth")}setBorderInlineEndWidth(J){return this.borderInlineEndWidth=J,this}set borderInlineStart(J){F(this.name,{borderInlineStart:J}),this._updated()}get borderInlineStart(){return X(this.name,"borderInlineStart")}setBorderInlineStart(J){return this.borderInlineStart=J,this}set borderInlineStartColor(J){F(this.name,{borderInlineStartColor:J}),this._updated()}get borderInlineStartColor(){return X(this.name,"borderInlineStartColor")}setBorderInlineStartColor(J){return this.borderInlineStartColor=J,this}set borderInlineStartStyle(J){F(this.name,{borderInlineStartStyle:J}),this._updated()}get borderInlineStartStyle(){return X(this.name,"borderInlineStartStyle")}setBorderInlineStartStyle(J){return this.borderInlineStartStyle=J,this}set borderInlineStartWidth(J){F(this.name,{borderInlineStartWidth:J}),this._updated()}get borderInlineStartWidth(){return X(this.name,"borderInlineStartWidth")}setBorderInlineStartWidth(J){return this.borderInlineStartWidth=J,this}set borderInlineStyle(J){F(this.name,{borderInlineStyle:J}),this._updated()}get borderInlineStyle(){return X(this.name,"borderInlineStyle")}setBorderInlineStyle(J){return this.borderInlineStyle=J,this}set borderInlineWidth(J){F(this.name,{borderInlineWidth:J}),this._updated()}get borderInlineWidth(){return X(this.name,"borderInlineWidth")}setBorderInlineWidth(J){return this.borderInlineWidth=J,this}set borderLeft(J){F(this.name,{borderLeft:J}),this._updated()}get borderLeft(){return X(this.name,"borderLeft")}setBorderLeft(J){return this.borderLeft=J,this}set borderLeftColor(J){F(this.name,{borderLeftColor:J}),this._updated()}get borderLeftColor(){return X(this.name,"borderLeftColor")}setBorderLeftColor(J){return this.borderLeftColor=J,this}set borderLeftStyle(J){F(this.name,{borderLeftStyle:J}),this._updated()}get borderLeftStyle(){return X(this.name,"borderLeftStyle")}setBorderLeftStyle(J){return this.borderLeftStyle=J,this}set borderLeftWidth(J){F(this.name,{borderLeftWidth:J}),this._updated()}get borderLeftWidth(){return X(this.name,"borderLeftWidth")}setBorderLeftWidth(J){return this.borderLeftWidth=J,this}set borderRadius(J){F(this.name,{borderRadius:J}),this._updated()}get borderRadius(){return X(this.name,"borderRadius")}setBorderRadius(J){return this.borderRadius=J,this}set borderRight(J){F(this.name,{borderRight:J}),this._updated()}get borderRight(){return X(this.name,"borderRight")}setBorderRight(J){return this.borderRight=J,this}set borderRightColor(J){F(this.name,{borderRightColor:J}),this._updated()}get borderRightColor(){return X(this.name,"borderRightColor")}setBorderRightColor(J){return this.borderRightColor=J,this}set borderRightStyle(J){F(this.name,{borderRightStyle:J}),this._updated()}get borderRightStyle(){return X(this.name,"borderRightStyle")}setBorderRightStyle(J){return this.borderRightStyle=J,this}set borderRightWidth(J){F(this.name,{borderRightWidth:J}),this._updated()}get borderRightWidth(){return X(this.name,"borderRightWidth")}setBorderRightWidth(J){return this.borderRightWidth=J,this}set borderSpacing(J){F(this.name,{borderSpacing:J}),this._updated()}get borderSpacing(){return X(this.name,"borderSpacing")}setBorderSpacing(J){return this.borderSpacing=J,this}set borderStartEndRadius(J){F(this.name,{borderStartEndRadius:J}),this._updated()}get borderStartEndRadius(){return X(this.name,"borderStartEndRadius")}setBorderStartEndRadius(J){return this.borderStartEndRadius=J,this}set borderStartStartRadius(J){F(this.name,{borderStartStartRadius:J}),this._updated()}get borderStartStartRadius(){return X(this.name,"borderStartStartRadius")}setBorderStartStartRadius(J){return this.borderStartStartRadius=J,this}set borderStyle(J){F(this.name,{borderStyle:J}),this._updated()}get borderStyle(){return X(this.name,"borderStyle")}setBorderStyle(J){return this.borderStyle=J,this}set borderTop(J){F(this.name,{borderTop:J}),this._updated()}get borderTop(){return X(this.name,"borderTop")}setBorderTop(J){return this.borderTop=J,this}set borderTopColor(J){F(this.name,{borderTopColor:J}),this._updated()}get borderTopColor(){return X(this.name,"borderTopColor")}setBorderTopColor(J){return this.borderTopColor=J,this}set borderTopLeftRadius(J){F(this.name,{borderTopLeftRadius:J}),this._updated()}get borderTopLeftRadius(){return X(this.name,"borderTopLeftRadius")}setBorderTopLeftRadius(J){return this.borderTopLeftRadius=J,this}set borderTopRightRadius(J){F(this.name,{borderTopRightRadius:J}),this._updated()}get borderTopRightRadius(){return X(this.name,"borderTopRightRadius")}setBorderTopRightRadius(J){return this.borderTopRightRadius=J,this}set borderTopStyle(J){F(this.name,{borderTopStyle:J}),this._updated()}get borderTopStyle(){return X(this.name,"borderTopStyle")}setBorderTopStyle(J){return this.borderTopStyle=J,this}set borderTopWidth(J){F(this.name,{borderTopWidth:J}),this._updated()}get borderTopWidth(){return X(this.name,"borderTopWidth")}setBorderTopWidth(J){return this.borderTopWidth=J,this}set borderWidth(J){F(this.name,{borderWidth:J}),this._updated()}get borderWidth(){return X(this.name,"borderWidth")}setBorderWidth(J){return this.borderWidth=J,this}set bottom(J){F(this.name,{bottom:J}),this._updated()}get bottom(){return X(this.name,"bottom")}setBottom(J){return this.bottom=J,this}set boxShadow(J){F(this.name,{boxShadow:J}),this._updated()}get boxShadow(){return X(this.name,"boxShadow")}setBoxShadow(J){return this.boxShadow=J,this}set boxSizing(J){F(this.name,{boxSizing:J}),this._updated()}get boxSizing(){return X(this.name,"boxSizing")}setBoxSizing(J){return this.boxSizing=J,this}set breakAfter(J){F(this.name,{breakAfter:J}),this._updated()}get breakAfter(){return X(this.name,"breakAfter")}setBreakAfter(J){return this.breakAfter=J,this}set breakBefore(J){F(this.name,{breakBefore:J}),this._updated()}get breakBefore(){return X(this.name,"breakBefore")}setBreakBefore(J){return this.breakBefore=J,this}set breakInside(J){F(this.name,{breakInside:J}),this._updated()}get breakInside(){return X(this.name,"breakInside")}setBreakInside(J){return this.breakInside=J,this}set bufferedRendering(J){F(this.name,{bufferedRendering:J}),this._updated()}get bufferedRendering(){return X(this.name,"bufferedRendering")}setBufferedRendering(J){return this.bufferedRendering=J,this}set captionSide(J){F(this.name,{captionSide:J}),this._updated()}get captionSide(){return X(this.name,"captionSide")}setCaptionSide(J){return this.captionSide=J,this}set caretColor(J){F(this.name,{caretColor:J}),this._updated()}get caretColor(){return X(this.name,"caretColor")}setCaretColor(J){return this.caretColor=J,this}set clear(J){F(this.name,{clear:J}),this._updated()}get clear(){return X(this.name,"clear")}setClear(J){return this.clear=J,this}set clip(J){F(this.name,{clip:J}),this._updated()}get clip(){return X(this.name,"clip")}setClip(J){return this.clip=J,this}set clipPath(J){F(this.name,{clipPath:J}),this._updated()}get clipPath(){return X(this.name,"clipPath")}setClipPath(J){return this.clipPath=J,this}set clipRule(J){F(this.name,{clipRule:J}),this._updated()}get clipRule(){return X(this.name,"clipRule")}setClipRule(J){return this.clipRule=J,this}set color(J){F(this.name,{color:J}),this._updated()}get color(){return X(this.name,"color")}setColor(J){return this.color=J,this}set colorInterpolation(J){F(this.name,{colorInterpolation:J}),this._updated()}get colorInterpolation(){return X(this.name,"colorInterpolation")}setColorInterpolation(J){return this.colorInterpolation=J,this}set colorInterpolationFilters(J){F(this.name,{colorInterpolationFilters:J}),this._updated()}get colorInterpolationFilters(){return X(this.name,"colorInterpolationFilters")}setColorInterpolationFilters(J){return this.colorInterpolationFilters=J,this}set colorRendering(J){F(this.name,{colorRendering:J}),this._updated()}get colorRendering(){return X(this.name,"colorRendering")}setColorRendering(J){return this.colorRendering=J,this}set colorScheme(J){F(this.name,{colorScheme:J}),this._updated()}get colorScheme(){return X(this.name,"colorScheme")}setColorScheme(J){return this.colorScheme=J,this}set columnCount(J){F(this.name,{columnCount:J}),this._updated()}get columnCount(){return X(this.name,"columnCount")}setColumnCount(J){return this.columnCount=J,this}set columnFill(J){F(this.name,{columnFill:J}),this._updated()}get columnFill(){return X(this.name,"columnFill")}setColumnFill(J){return this.columnFill=J,this}set columnGap(J){F(this.name,{columnGap:J}),this._updated()}get columnGap(){return X(this.name,"columnGap")}setColumnGap(J){return this.columnGap=J,this}set columnRule(J){F(this.name,{columnRule:J}),this._updated()}get columnRule(){return X(this.name,"columnRule")}setColumnRule(J){return this.columnRule=J,this}set columnRuleColor(J){F(this.name,{columnRuleColor:J}),this._updated()}get columnRuleColor(){return X(this.name,"columnRuleColor")}setColumnRuleColor(J){return this.columnRuleColor=J,this}set columnRuleStyle(J){F(this.name,{columnRuleStyle:J}),this._updated()}get columnRuleStyle(){return X(this.name,"columnRuleStyle")}setColumnRuleStyle(J){return this.columnRuleStyle=J,this}set columnRuleWidth(J){F(this.name,{columnRuleWidth:J}),this._updated()}get columnRuleWidth(){return X(this.name,"columnRuleWidth")}setColumnRuleWidth(J){return this.columnRuleWidth=J,this}set columnSpan(J){F(this.name,{columnSpan:J}),this._updated()}get columnSpan(){return X(this.name,"columnSpan")}setColumnSpan(J){return this.columnSpan=J,this}set columnWidth(J){F(this.name,{columnWidth:J}),this._updated()}get columnWidth(){return X(this.name,"columnWidth")}setColumnWidth(J){return this.columnWidth=J,this}set columns(J){F(this.name,{columns:J}),this._updated()}get columns(){return X(this.name,"columns")}setColumns(J){return this.columns=J,this}set contain(J){F(this.name,{contain:J}),this._updated()}get contain(){return X(this.name,"contain")}setContain(J){return this.contain=J,this}set containIntrinsicBlockSize(J){F(this.name,{containIntrinsicBlockSize:J}),this._updated()}get containIntrinsicBlockSize(){return X(this.name,"containIntrinsicBlockSize")}setContainIntrinsicBlockSize(J){return this.containIntrinsicBlockSize=J,this}set containIntrinsicHeight(J){F(this.name,{containIntrinsicHeight:J}),this._updated()}get containIntrinsicHeight(){return X(this.name,"containIntrinsicHeight")}setContainIntrinsicHeight(J){return this.containIntrinsicHeight=J,this}set containIntrinsicInlineSize(J){F(this.name,{containIntrinsicInlineSize:J}),this._updated()}get containIntrinsicInlineSize(){return X(this.name,"containIntrinsicInlineSize")}setContainIntrinsicInlineSize(J){return this.containIntrinsicInlineSize=J,this}set containIntrinsicSize(J){F(this.name,{containIntrinsicSize:J}),this._updated()}get containIntrinsicSize(){return X(this.name,"containIntrinsicSize")}setContainIntrinsicSize(J){return this.containIntrinsicSize=J,this}set containIntrinsicWidth(J){F(this.name,{containIntrinsicWidth:J}),this._updated()}get containIntrinsicWidth(){return X(this.name,"containIntrinsicWidth")}setContainIntrinsicWidth(J){return this.containIntrinsicWidth=J,this}set container(J){F(this.name,{container:J}),this._updated()}get container(){return X(this.name,"container")}setContainer(J){return this.container=J,this}set containerName(J){F(this.name,{containerName:J}),this._updated()}get containerName(){return X(this.name,"containerName")}setContainerName(J){return this.containerName=J,this}set containerType(J){F(this.name,{containerType:J}),this._updated()}get containerType(){return X(this.name,"containerType")}setContainerType(J){return this.containerType=J,this}set content(J){F(this.name,{content:J}),this._updated()}get content(){return X(this.name,"content")}setContent(J){return this.content=J,this}set contentVisibility(J){F(this.name,{contentVisibility:J}),this._updated()}get contentVisibility(){return X(this.name,"contentVisibility")}setContentVisibility(J){return this.contentVisibility=J,this}set counterIncrement(J){F(this.name,{counterIncrement:J}),this._updated()}get counterIncrement(){return X(this.name,"counterIncrement")}setCounterIncrement(J){return this.counterIncrement=J,this}set counterReset(J){F(this.name,{counterReset:J}),this._updated()}get counterReset(){return X(this.name,"counterReset")}setCounterReset(J){return this.counterReset=J,this}set counterSet(J){F(this.name,{counterSet:J}),this._updated()}get counterSet(){return X(this.name,"counterSet")}setCounterSet(J){return this.counterSet=J,this}set cursor(J){F(this.name,{cursor:J}),this._updated()}get cursor(){return X(this.name,"cursor")}setCursor(J){return this.cursor=J,this}set cx(J){F(this.name,{cx:J}),this._updated()}get cx(){return X(this.name,"cx")}setCx(J){return this.cx=J,this}set cy(J){F(this.name,{cy:J}),this._updated()}get cy(){return X(this.name,"cy")}setCy(J){return this.cy=J,this}set d(J){F(this.name,{d:J}),this._updated()}get d(){return X(this.name,"d")}setD(J){return this.d=J,this}set descentOverride(J){F(this.name,{descentOverride:J}),this._updated()}get descentOverride(){return X(this.name,"descentOverride")}setDescentOverride(J){return this.descentOverride=J,this}set direction(J){F(this.name,{direction:J}),this._updated()}get direction(){return X(this.name,"direction")}setDirection(J){return this.direction=J,this}set display(J){F(this.name,{display:J}),this._updated()}get display(){return X(this.name,"display")}setDisplay(J){return this.display=J,this}set dominantBaseline(J){F(this.name,{dominantBaseline:J}),this._updated()}get dominantBaseline(){return X(this.name,"dominantBaseline")}setDominantBaseline(J){return this.dominantBaseline=J,this}set emptyCells(J){F(this.name,{emptyCells:J}),this._updated()}get emptyCells(){return X(this.name,"emptyCells")}setEmptyCells(J){return this.emptyCells=J,this}set fallback(J){F(this.name,{fallback:J}),this._updated()}get fallback(){return X(this.name,"fallback")}setFallback(J){return this.fallback=J,this}set fill(J){F(this.name,{fill:J}),this._updated()}get fill(){return X(this.name,"fill")}setFill(J){return this.fill=J,this}set fillOpacity(J){F(this.name,{fillOpacity:J}),this._updated()}get fillOpacity(){return X(this.name,"fillOpacity")}setFillOpacity(J){return this.fillOpacity=J,this}set fillRule(J){F(this.name,{fillRule:J}),this._updated()}get fillRule(){return X(this.name,"fillRule")}setFillRule(J){return this.fillRule=J,this}set filter(J){F(this.name,{filter:J}),this._updated()}get filter(){return X(this.name,"filter")}setFilter(J){return this.filter=J,this}set flex(J){F(this.name,{flex:J}),this._updated()}get flex(){return X(this.name,"flex")}setFlex(J){return this.flex=J,this}set flexBasis(J){F(this.name,{flexBasis:J}),this._updated()}get flexBasis(){return X(this.name,"flexBasis")}setFlexBasis(J){return this.flexBasis=J,this}set flexDirection(J){F(this.name,{flexDirection:J}),this._updated()}get flexDirection(){return X(this.name,"flexDirection")}setFlexDirection(J){return this.flexDirection=J,this}set flexFlow(J){F(this.name,{flexFlow:J}),this._updated()}get flexFlow(){return X(this.name,"flexFlow")}setFlexFlow(J){return this.flexFlow=J,this}set flexGrow(J){F(this.name,{flexGrow:J}),this._updated()}get flexGrow(){return X(this.name,"flexGrow")}setFlexGrow(J){return this.flexGrow=J,this}set flexShrink(J){F(this.name,{flexShrink:J}),this._updated()}get flexShrink(){return X(this.name,"flexShrink")}setFlexShrink(J){return this.flexShrink=J,this}set flexWrap(J){F(this.name,{flexWrap:J}),this._updated()}get flexWrap(){return X(this.name,"flexWrap")}setFlexWrap(J){return this.flexWrap=J,this}set float(J){F(this.name,{float:J}),this._updated()}get float(){return X(this.name,"float")}setFloat(J){return this.float=J,this}set floodColor(J){F(this.name,{floodColor:J}),this._updated()}get floodColor(){return X(this.name,"floodColor")}setFloodColor(J){return this.floodColor=J,this}set floodOpacity(J){F(this.name,{floodOpacity:J}),this._updated()}get floodOpacity(){return X(this.name,"floodOpacity")}setFloodOpacity(J){return this.floodOpacity=J,this}set font(J){F(this.name,{font:J}),this._updated()}get font(){return X(this.name,"font")}setFont(J){return this.font=J,this}set fontDisplay(J){F(this.name,{fontDisplay:J}),this._updated()}get fontDisplay(){return X(this.name,"fontDisplay")}setFontDisplay(J){return this.fontDisplay=J,this}set fontFamily(J){F(this.name,{fontFamily:J}),this._updated()}get fontFamily(){return X(this.name,"fontFamily")}setFontFamily(J){return this.fontFamily=J,this}set fontFeatureSettings(J){F(this.name,{fontFeatureSettings:J}),this._updated()}get fontFeatureSettings(){return X(this.name,"fontFeatureSettings")}setFontFeatureSettings(J){return this.fontFeatureSettings=J,this}set fontKerning(J){F(this.name,{fontKerning:J}),this._updated()}get fontKerning(){return X(this.name,"fontKerning")}setFontKerning(J){return this.fontKerning=J,this}set fontOpticalSizing(J){F(this.name,{fontOpticalSizing:J}),this._updated()}get fontOpticalSizing(){return X(this.name,"fontOpticalSizing")}setFontOpticalSizing(J){return this.fontOpticalSizing=J,this}set fontPalette(J){F(this.name,{fontPalette:J}),this._updated()}get fontPalette(){return X(this.name,"fontPalette")}setFontPalette(J){return this.fontPalette=J,this}set fontSize(J){F(this.name,{fontSize:J}),this._updated()}get fontSize(){return X(this.name,"fontSize")}setFontSize(J){return this.fontSize=J,this}set fontStretch(J){F(this.name,{fontStretch:J}),this._updated()}get fontStretch(){return X(this.name,"fontStretch")}setFontStretch(J){return this.fontStretch=J,this}set fontStyle(J){F(this.name,{fontStyle:J}),this._updated()}get fontStyle(){return X(this.name,"fontStyle")}setFontStyle(J){return this.fontStyle=J,this}set fontSynthesis(J){F(this.name,{fontSynthesis:J}),this._updated()}get fontSynthesis(){return X(this.name,"fontSynthesis")}setFontSynthesis(J){return this.fontSynthesis=J,this}set fontSynthesisSmallCaps(J){F(this.name,{fontSynthesisSmallCaps:J}),this._updated()}get fontSynthesisSmallCaps(){return X(this.name,"fontSynthesisSmallCaps")}setFontSynthesisSmallCaps(J){return this.fontSynthesisSmallCaps=J,this}set fontSynthesisStyle(J){F(this.name,{fontSynthesisStyle:J}),this._updated()}get fontSynthesisStyle(){return X(this.name,"fontSynthesisStyle")}setFontSynthesisStyle(J){return this.fontSynthesisStyle=J,this}set fontSynthesisWeight(J){F(this.name,{fontSynthesisWeight:J}),this._updated()}get fontSynthesisWeight(){return X(this.name,"fontSynthesisWeight")}setFontSynthesisWeight(J){return this.fontSynthesisWeight=J,this}set fontVariant(J){F(this.name,{fontVariant:J}),this._updated()}get fontVariant(){return X(this.name,"fontVariant")}setFontVariant(J){return this.fontVariant=J,this}set fontVariantAlternates(J){F(this.name,{fontVariantAlternates:J}),this._updated()}get fontVariantAlternates(){return X(this.name,"fontVariantAlternates")}setFontVariantAlternates(J){return this.fontVariantAlternates=J,this}set fontVariantCaps(J){F(this.name,{fontVariantCaps:J}),this._updated()}get fontVariantCaps(){return X(this.name,"fontVariantCaps")}setFontVariantCaps(J){return this.fontVariantCaps=J,this}set fontVariantEastAsian(J){F(this.name,{fontVariantEastAsian:J}),this._updated()}get fontVariantEastAsian(){return X(this.name,"fontVariantEastAsian")}setFontVariantEastAsian(J){return this.fontVariantEastAsian=J,this}set fontVariantLigatures(J){F(this.name,{fontVariantLigatures:J}),this._updated()}get fontVariantLigatures(){return X(this.name,"fontVariantLigatures")}setFontVariantLigatures(J){return this.fontVariantLigatures=J,this}set fontVariantNumeric(J){F(this.name,{fontVariantNumeric:J}),this._updated()}get fontVariantNumeric(){return X(this.name,"fontVariantNumeric")}setFontVariantNumeric(J){return this.fontVariantNumeric=J,this}set fontVariantPosition(J){F(this.name,{fontVariantPosition:J}),this._updated()}get fontVariantPosition(){return X(this.name,"fontVariantPosition")}setFontVariantPosition(J){return this.fontVariantPosition=J,this}set fontVariationSettings(J){F(this.name,{fontVariationSettings:J}),this._updated()}get fontVariationSettings(){return X(this.name,"fontVariationSettings")}setFontVariationSettings(J){return this.fontVariationSettings=J,this}set fontWeight(J){F(this.name,{fontWeight:J}),this._updated()}get fontWeight(){return X(this.name,"fontWeight")}setFontWeight(J){return this.fontWeight=J,this}set forcedColorAdjust(J){F(this.name,{forcedColorAdjust:J}),this._updated()}get forcedColorAdjust(){return X(this.name,"forcedColorAdjust")}setForcedColorAdjust(J){return this.forcedColorAdjust=J,this}set gap(J){F(this.name,{gap:J}),this._updated()}get gap(){return X(this.name,"gap")}setGap(J){return this.gap=J,this}set grid(J){F(this.name,{grid:J}),this._updated()}get grid(){return X(this.name,"grid")}setGrid(J){return this.grid=J,this}set gridArea(J){F(this.name,{gridArea:J}),this._updated()}get gridArea(){return X(this.name,"gridArea")}setGridArea(J){return this.gridArea=J,this}set gridAutoColumns(J){F(this.name,{gridAutoColumns:J}),this._updated()}get gridAutoColumns(){return X(this.name,"gridAutoColumns")}setGridAutoColumns(J){return this.gridAutoColumns=J,this}set gridAutoFlow(J){F(this.name,{gridAutoFlow:J}),this._updated()}get gridAutoFlow(){return X(this.name,"gridAutoFlow")}setGridAutoFlow(J){return this.gridAutoFlow=J,this}set gridAutoRows(J){F(this.name,{gridAutoRows:J}),this._updated()}get gridAutoRows(){return X(this.name,"gridAutoRows")}setGridAutoRows(J){return this.gridAutoRows=J,this}set gridColumn(J){F(this.name,{gridColumn:J}),this._updated()}get gridColumn(){return X(this.name,"gridColumn")}setGridColumn(J){return this.gridColumn=J,this}set gridColumnEnd(J){F(this.name,{gridColumnEnd:J}),this._updated()}get gridColumnEnd(){return X(this.name,"gridColumnEnd")}setGridColumnEnd(J){return this.gridColumnEnd=J,this}set gridColumnGap(J){F(this.name,{gridColumnGap:J}),this._updated()}get gridColumnGap(){return X(this.name,"gridColumnGap")}setGridColumnGap(J){return this.gridColumnGap=J,this}set gridColumnStart(J){F(this.name,{gridColumnStart:J}),this._updated()}get gridColumnStart(){return X(this.name,"gridColumnStart")}setGridColumnStart(J){return this.gridColumnStart=J,this}set gridGap(J){F(this.name,{gridGap:J}),this._updated()}get gridGap(){return X(this.name,"gridGap")}setGridGap(J){return this.gridGap=J,this}set gridRow(J){F(this.name,{gridRow:J}),this._updated()}get gridRow(){return X(this.name,"gridRow")}setGridRow(J){return this.gridRow=J,this}set gridRowEnd(J){F(this.name,{gridRowEnd:J}),this._updated()}get gridRowEnd(){return X(this.name,"gridRowEnd")}setGridRowEnd(J){return this.gridRowEnd=J,this}set gridRowGap(J){F(this.name,{gridRowGap:J}),this._updated()}get gridRowGap(){return X(this.name,"gridRowGap")}setGridRowGap(J){return this.gridRowGap=J,this}set gridRowStart(J){F(this.name,{gridRowStart:J}),this._updated()}get gridRowStart(){return X(this.name,"gridRowStart")}setGridRowStart(J){return this.gridRowStart=J,this}set gridTemplate(J){F(this.name,{gridTemplate:J}),this._updated()}get gridTemplate(){return X(this.name,"gridTemplate")}setGridTemplate(J){return this.gridTemplate=J,this}set gridTemplateAreas(J){F(this.name,{gridTemplateAreas:J}),this._updated()}get gridTemplateAreas(){return X(this.name,"gridTemplateAreas")}setGridTemplateAreas(J){return this.gridTemplateAreas=J,this}set gridTemplateColumns(J){F(this.name,{gridTemplateColumns:J}),this._updated()}get gridTemplateColumns(){return X(this.name,"gridTemplateColumns")}setGridTemplateColumns(J){return this.gridTemplateColumns=J,this}set gridTemplateRows(J){F(this.name,{gridTemplateRows:J}),this._updated()}get gridTemplateRows(){return X(this.name,"gridTemplateRows")}setGridTemplateRows(J){return this.gridTemplateRows=J,this}set height(J){F(this.name,{height:J}),this._updated()}get height(){return X(this.name,"height")}setHeight(J){return this.height=J,this}set hyphenateCharacter(J){F(this.name,{hyphenateCharacter:J}),this._updated()}get hyphenateCharacter(){return X(this.name,"hyphenateCharacter")}setHyphenateCharacter(J){return this.hyphenateCharacter=J,this}set hyphenateLimitChars(J){F(this.name,{hyphenateLimitChars:J}),this._updated()}get hyphenateLimitChars(){return X(this.name,"hyphenateLimitChars")}setHyphenateLimitChars(J){return this.hyphenateLimitChars=J,this}set hyphens(J){F(this.name,{hyphens:J}),this._updated()}get hyphens(){return X(this.name,"hyphens")}setHyphens(J){return this.hyphens=J,this}set imageOrientation(J){F(this.name,{imageOrientation:J}),this._updated()}get imageOrientation(){return X(this.name,"imageOrientation")}setImageOrientation(J){return this.imageOrientation=J,this}set imageRendering(J){F(this.name,{imageRendering:J}),this._updated()}get imageRendering(){return X(this.name,"imageRendering")}setImageRendering(J){return this.imageRendering=J,this}set inherits(J){F(this.name,{inherits:J}),this._updated()}get inherits(){return X(this.name,"inherits")}setInherits(J){return this.inherits=J,this}set initialLetter(J){F(this.name,{initialLetter:J}),this._updated()}get initialLetter(){return X(this.name,"initialLetter")}setInitialLetter(J){return this.initialLetter=J,this}set initialValue(J){F(this.name,{initialValue:J}),this._updated()}get initialValue(){return X(this.name,"initialValue")}setInitialValue(J){return this.initialValue=J,this}set inlineSize(J){F(this.name,{inlineSize:J}),this._updated()}get inlineSize(){return X(this.name,"inlineSize")}setInlineSize(J){return this.inlineSize=J,this}set inset(J){F(this.name,{inset:J}),this._updated()}get inset(){return X(this.name,"inset")}setInset(J){return this.inset=J,this}set insetBlock(J){F(this.name,{insetBlock:J}),this._updated()}get insetBlock(){return X(this.name,"insetBlock")}setInsetBlock(J){return this.insetBlock=J,this}set insetBlockEnd(J){F(this.name,{insetBlockEnd:J}),this._updated()}get insetBlockEnd(){return X(this.name,"insetBlockEnd")}setInsetBlockEnd(J){return this.insetBlockEnd=J,this}set insetBlockStart(J){F(this.name,{insetBlockStart:J}),this._updated()}get insetBlockStart(){return X(this.name,"insetBlockStart")}setInsetBlockStart(J){return this.insetBlockStart=J,this}set insetInline(J){F(this.name,{insetInline:J}),this._updated()}get insetInline(){return X(this.name,"insetInline")}setInsetInline(J){return this.insetInline=J,this}set insetInlineEnd(J){F(this.name,{insetInlineEnd:J}),this._updated()}get insetInlineEnd(){return X(this.name,"insetInlineEnd")}setInsetInlineEnd(J){return this.insetInlineEnd=J,this}set insetInlineStart(J){F(this.name,{insetInlineStart:J}),this._updated()}get insetInlineStart(){return X(this.name,"insetInlineStart")}setInsetInlineStart(J){return this.insetInlineStart=J,this}set isolation(J){F(this.name,{isolation:J}),this._updated()}get isolation(){return X(this.name,"isolation")}setIsolation(J){return this.isolation=J,this}set justifyContent(J){F(this.name,{justifyContent:J}),this._updated()}get justifyContent(){return X(this.name,"justifyContent")}setJustifyContent(J){return this.justifyContent=J,this}set justifyItems(J){F(this.name,{justifyItems:J}),this._updated()}get justifyItems(){return X(this.name,"justifyItems")}setJustifyItems(J){return this.justifyItems=J,this}set justifySelf(J){F(this.name,{justifySelf:J}),this._updated()}get justifySelf(){return X(this.name,"justifySelf")}setJustifySelf(J){return this.justifySelf=J,this}set left(J){F(this.name,{left:J}),this._updated()}get left(){return X(this.name,"left")}setLeft(J){return this.left=J,this}set letterSpacing(J){F(this.name,{letterSpacing:J}),this._updated()}get letterSpacing(){return X(this.name,"letterSpacing")}setLetterSpacing(J){return this.letterSpacing=J,this}set lightingColor(J){F(this.name,{lightingColor:J}),this._updated()}get lightingColor(){return X(this.name,"lightingColor")}setLightingColor(J){return this.lightingColor=J,this}set lineBreak(J){F(this.name,{lineBreak:J}),this._updated()}get lineBreak(){return X(this.name,"lineBreak")}setLineBreak(J){return this.lineBreak=J,this}set lineGapOverride(J){F(this.name,{lineGapOverride:J}),this._updated()}get lineGapOverride(){return X(this.name,"lineGapOverride")}setLineGapOverride(J){return this.lineGapOverride=J,this}set lineHeight(J){F(this.name,{lineHeight:J}),this._updated()}get lineHeight(){return X(this.name,"lineHeight")}setLineHeight(J){return this.lineHeight=J,this}set listStyle(J){F(this.name,{listStyle:J}),this._updated()}get listStyle(){return X(this.name,"listStyle")}setListStyle(J){return this.listStyle=J,this}set listStyleImage(J){F(this.name,{listStyleImage:J}),this._updated()}get listStyleImage(){return X(this.name,"listStyleImage")}setListStyleImage(J){return this.listStyleImage=J,this}set listStylePosition(J){F(this.name,{listStylePosition:J}),this._updated()}get listStylePosition(){return X(this.name,"listStylePosition")}setListStylePosition(J){return this.listStylePosition=J,this}set listStyleType(J){F(this.name,{listStyleType:J}),this._updated()}get listStyleType(){return X(this.name,"listStyleType")}setListStyleType(J){return this.listStyleType=J,this}set margin(J){F(this.name,{margin:J}),this._updated()}get margin(){return X(this.name,"margin")}setMargin(J){return this.margin=J,this}set marginBlock(J){F(this.name,{marginBlock:J}),this._updated()}get marginBlock(){return X(this.name,"marginBlock")}setMarginBlock(J){return this.marginBlock=J,this}set marginBlockEnd(J){F(this.name,{marginBlockEnd:J}),this._updated()}get marginBlockEnd(){return X(this.name,"marginBlockEnd")}setMarginBlockEnd(J){return this.marginBlockEnd=J,this}set marginBlockStart(J){F(this.name,{marginBlockStart:J}),this._updated()}get marginBlockStart(){return X(this.name,"marginBlockStart")}setMarginBlockStart(J){return this.marginBlockStart=J,this}set marginBottom(J){F(this.name,{marginBottom:J}),this._updated()}get marginBottom(){return X(this.name,"marginBottom")}setMarginBottom(J){return this.marginBottom=J,this}set marginInline(J){F(this.name,{marginInline:J}),this._updated()}get marginInline(){return X(this.name,"marginInline")}setMarginInline(J){return this.marginInline=J,this}set marginInlineEnd(J){F(this.name,{marginInlineEnd:J}),this._updated()}get marginInlineEnd(){return X(this.name,"marginInlineEnd")}setMarginInlineEnd(J){return this.marginInlineEnd=J,this}set marginInlineStart(J){F(this.name,{marginInlineStart:J}),this._updated()}get marginInlineStart(){return X(this.name,"marginInlineStart")}setMarginInlineStart(J){return this.marginInlineStart=J,this}set marginLeft(J){F(this.name,{marginLeft:J}),this._updated()}get marginLeft(){return X(this.name,"marginLeft")}setMarginLeft(J){return this.marginLeft=J,this}set marginRight(J){F(this.name,{marginRight:J}),this._updated()}get marginRight(){return X(this.name,"marginRight")}setMarginRight(J){return this.marginRight=J,this}set marginTop(J){F(this.name,{marginTop:J}),this._updated()}get marginTop(){return X(this.name,"marginTop")}setMarginTop(J){return this.marginTop=J,this}set marker(J){F(this.name,{marker:J}),this._updated()}get marker(){return X(this.name,"marker")}setMarker(J){return this.marker=J,this}set markerEnd(J){F(this.name,{markerEnd:J}),this._updated()}get markerEnd(){return X(this.name,"markerEnd")}setMarkerEnd(J){return this.markerEnd=J,this}set markerMid(J){F(this.name,{markerMid:J}),this._updated()}get markerMid(){return X(this.name,"markerMid")}setMarkerMid(J){return this.markerMid=J,this}set markerStart(J){F(this.name,{markerStart:J}),this._updated()}get markerStart(){return X(this.name,"markerStart")}setMarkerStart(J){return this.markerStart=J,this}set mask(J){F(this.name,{mask:J}),this._updated()}get mask(){return X(this.name,"mask")}setMask(J){return this.mask=J,this}set maskType(J){F(this.name,{maskType:J}),this._updated()}get maskType(){return X(this.name,"maskType")}setMaskType(J){return this.maskType=J,this}set mathDepth(J){F(this.name,{mathDepth:J}),this._updated()}get mathDepth(){return X(this.name,"mathDepth")}setMathDepth(J){return this.mathDepth=J,this}set mathShift(J){F(this.name,{mathShift:J}),this._updated()}get mathShift(){return X(this.name,"mathShift")}setMathShift(J){return this.mathShift=J,this}set mathStyle(J){F(this.name,{mathStyle:J}),this._updated()}get mathStyle(){return X(this.name,"mathStyle")}setMathStyle(J){return this.mathStyle=J,this}set maxBlockSize(J){F(this.name,{maxBlockSize:J}),this._updated()}get maxBlockSize(){return X(this.name,"maxBlockSize")}setMaxBlockSize(J){return this.maxBlockSize=J,this}set maxHeight(J){F(this.name,{maxHeight:J}),this._updated()}get maxHeight(){return X(this.name,"maxHeight")}setMaxHeight(J){return this.maxHeight=J,this}set maxInlineSize(J){F(this.name,{maxInlineSize:J}),this._updated()}get maxInlineSize(){return X(this.name,"maxInlineSize")}setMaxInlineSize(J){return this.maxInlineSize=J,this}set maxWidth(J){F(this.name,{maxWidth:J}),this._updated()}get maxWidth(){return X(this.name,"maxWidth")}setMaxWidth(J){return this.maxWidth=J,this}set minBlockSize(J){F(this.name,{minBlockSize:J}),this._updated()}get minBlockSize(){return X(this.name,"minBlockSize")}setMinBlockSize(J){return this.minBlockSize=J,this}set minHeight(J){F(this.name,{minHeight:J}),this._updated()}get minHeight(){return X(this.name,"minHeight")}setMinHeight(J){return this.minHeight=J,this}set minInlineSize(J){F(this.name,{minInlineSize:J}),this._updated()}get minInlineSize(){return X(this.name,"minInlineSize")}setMinInlineSize(J){return this.minInlineSize=J,this}set minWidth(J){F(this.name,{minWidth:J}),this._updated()}get minWidth(){return X(this.name,"minWidth")}setMinWidth(J){return this.minWidth=J,this}set mixBlendMode(J){F(this.name,{mixBlendMode:J}),this._updated()}get mixBlendMode(){return X(this.name,"mixBlendMode")}setMixBlendMode(J){return this.mixBlendMode=J,this}set negative(J){F(this.name,{negative:J}),this._updated()}get negative(){return X(this.name,"negative")}setNegative(J){return this.negative=J,this}set objectFit(J){F(this.name,{objectFit:J}),this._updated()}get objectFit(){return X(this.name,"objectFit")}setObjectFit(J){return this.objectFit=J,this}set objectPosition(J){F(this.name,{objectPosition:J}),this._updated()}get objectPosition(){return X(this.name,"objectPosition")}setObjectPosition(J){return this.objectPosition=J,this}set objectViewBox(J){F(this.name,{objectViewBox:J}),this._updated()}get objectViewBox(){return X(this.name,"objectViewBox")}setObjectViewBox(J){return this.objectViewBox=J,this}set offset(J){F(this.name,{offset:J}),this._updated()}get offset(){return X(this.name,"offset")}setOffset(J){return this.offset=J,this}set offsetAnchor(J){F(this.name,{offsetAnchor:J}),this._updated()}get offsetAnchor(){return X(this.name,"offsetAnchor")}setOffsetAnchor(J){return this.offsetAnchor=J,this}set offsetDistance(J){F(this.name,{offsetDistance:J}),this._updated()}get offsetDistance(){return X(this.name,"offsetDistance")}setOffsetDistance(J){return this.offsetDistance=J,this}set offsetPath(J){F(this.name,{offsetPath:J}),this._updated()}get offsetPath(){return X(this.name,"offsetPath")}setOffsetPath(J){return this.offsetPath=J,this}set offsetPosition(J){F(this.name,{offsetPosition:J}),this._updated()}get offsetPosition(){return X(this.name,"offsetPosition")}setOffsetPosition(J){return this.offsetPosition=J,this}set offsetRotate(J){F(this.name,{offsetRotate:J}),this._updated()}get offsetRotate(){return X(this.name,"offsetRotate")}setOffsetRotate(J){return this.offsetRotate=J,this}set opacity(J){F(this.name,{opacity:J}),this._updated()}get opacity(){return X(this.name,"opacity")}setOpacity(J){return this.opacity=J,this}set order(J){F(this.name,{order:J}),this._updated()}get order(){return X(this.name,"order")}setOrder(J){return this.order=J,this}set orphans(J){F(this.name,{orphans:J}),this._updated()}get orphans(){return X(this.name,"orphans")}setOrphans(J){return this.orphans=J,this}set outline(J){F(this.name,{outline:J}),this._updated()}get outline(){return X(this.name,"outline")}setOutline(J){return this.outline=J,this}set outlineColor(J){F(this.name,{outlineColor:J}),this._updated()}get outlineColor(){return X(this.name,"outlineColor")}setOutlineColor(J){return this.outlineColor=J,this}set outlineOffset(J){F(this.name,{outlineOffset:J}),this._updated()}get outlineOffset(){return X(this.name,"outlineOffset")}setOutlineOffset(J){return this.outlineOffset=J,this}set outlineStyle(J){F(this.name,{outlineStyle:J}),this._updated()}get outlineStyle(){return X(this.name,"outlineStyle")}setOutlineStyle(J){return this.outlineStyle=J,this}set outlineWidth(J){F(this.name,{outlineWidth:J}),this._updated()}get outlineWidth(){return X(this.name,"outlineWidth")}setOutlineWidth(J){return this.outlineWidth=J,this}set overflow(J){F(this.name,{overflow:J}),this._updated()}get overflow(){return X(this.name,"overflow")}setOverflow(J){return this.overflow=J,this}set overflowAnchor(J){F(this.name,{overflowAnchor:J}),this._updated()}get overflowAnchor(){return X(this.name,"overflowAnchor")}setOverflowAnchor(J){return this.overflowAnchor=J,this}set overflowClipMargin(J){F(this.name,{overflowClipMargin:J}),this._updated()}get overflowClipMargin(){return X(this.name,"overflowClipMargin")}setOverflowClipMargin(J){return this.overflowClipMargin=J,this}set overflowWrap(J){F(this.name,{overflowWrap:J}),this._updated()}get overflowWrap(){return X(this.name,"overflowWrap")}setOverflowWrap(J){return this.overflowWrap=J,this}set overflowX(J){F(this.name,{overflowX:J}),this._updated()}get overflowX(){return X(this.name,"overflowX")}setOverflowX(J){return this.overflowX=J,this}set overflowY(J){F(this.name,{overflowY:J}),this._updated()}get overflowY(){return X(this.name,"overflowY")}setOverflowY(J){return this.overflowY=J,this}set overlay(J){F(this.name,{overlay:J}),this._updated()}get overlay(){return X(this.name,"overlay")}setOverlay(J){return this.overlay=J,this}set overrideColors(J){F(this.name,{overrideColors:J}),this._updated()}get overrideColors(){return X(this.name,"overrideColors")}setOverrideColors(J){return this.overrideColors=J,this}set overscrollBehavior(J){F(this.name,{overscrollBehavior:J}),this._updated()}get overscrollBehavior(){return X(this.name,"overscrollBehavior")}setOverscrollBehavior(J){return this.overscrollBehavior=J,this}set overscrollBehaviorBlock(J){F(this.name,{overscrollBehaviorBlock:J}),this._updated()}get overscrollBehaviorBlock(){return X(this.name,"overscrollBehaviorBlock")}setOverscrollBehaviorBlock(J){return this.overscrollBehaviorBlock=J,this}set overscrollBehaviorInline(J){F(this.name,{overscrollBehaviorInline:J}),this._updated()}get overscrollBehaviorInline(){return X(this.name,"overscrollBehaviorInline")}setOverscrollBehaviorInline(J){return this.overscrollBehaviorInline=J,this}set overscrollBehaviorX(J){F(this.name,{overscrollBehaviorX:J}),this._updated()}get overscrollBehaviorX(){return X(this.name,"overscrollBehaviorX")}setOverscrollBehaviorX(J){return this.overscrollBehaviorX=J,this}set overscrollBehaviorY(J){F(this.name,{overscrollBehaviorY:J}),this._updated()}get overscrollBehaviorY(){return X(this.name,"overscrollBehaviorY")}setOverscrollBehaviorY(J){return this.overscrollBehaviorY=J,this}set pad(J){F(this.name,{pad:J}),this._updated()}get pad(){return X(this.name,"pad")}setPad(J){return this.pad=J,this}set padding(J){F(this.name,{padding:J}),this._updated()}get padding(){return X(this.name,"padding")}setPadding(J){return this.padding=J,this}set paddingBlock(J){F(this.name,{paddingBlock:J}),this._updated()}get paddingBlock(){return X(this.name,"paddingBlock")}setPaddingBlock(J){return this.paddingBlock=J,this}set paddingBlockEnd(J){F(this.name,{paddingBlockEnd:J}),this._updated()}get paddingBlockEnd(){return X(this.name,"paddingBlockEnd")}setPaddingBlockEnd(J){return this.paddingBlockEnd=J,this}set paddingBlockStart(J){F(this.name,{paddingBlockStart:J}),this._updated()}get paddingBlockStart(){return X(this.name,"paddingBlockStart")}setPaddingBlockStart(J){return this.paddingBlockStart=J,this}set paddingBottom(J){F(this.name,{paddingBottom:J}),this._updated()}get paddingBottom(){return X(this.name,"paddingBottom")}setPaddingBottom(J){return this.paddingBottom=J,this}set paddingInline(J){F(this.name,{paddingInline:J}),this._updated()}get paddingInline(){return X(this.name,"paddingInline")}setPaddingInline(J){return this.paddingInline=J,this}set paddingInlineEnd(J){F(this.name,{paddingInlineEnd:J}),this._updated()}get paddingInlineEnd(){return X(this.name,"paddingInlineEnd")}setPaddingInlineEnd(J){return this.paddingInlineEnd=J,this}set paddingInlineStart(J){F(this.name,{paddingInlineStart:J}),this._updated()}get paddingInlineStart(){return X(this.name,"paddingInlineStart")}setPaddingInlineStart(J){return this.paddingInlineStart=J,this}set paddingLeft(J){F(this.name,{paddingLeft:J}),this._updated()}get paddingLeft(){return X(this.name,"paddingLeft")}setPaddingLeft(J){return this.paddingLeft=J,this}set paddingRight(J){F(this.name,{paddingRight:J}),this._updated()}get paddingRight(){return X(this.name,"paddingRight")}setPaddingRight(J){return this.paddingRight=J,this}set paddingTop(J){F(this.name,{paddingTop:J}),this._updated()}get paddingTop(){return X(this.name,"paddingTop")}setPaddingTop(J){return this.paddingTop=J,this}set page(J){F(this.name,{page:J}),this._updated()}get page(){return X(this.name,"page")}setPage(J){return this.page=J,this}set pageBreakAfter(J){F(this.name,{pageBreakAfter:J}),this._updated()}get pageBreakAfter(){return X(this.name,"pageBreakAfter")}setPageBreakAfter(J){return this.pageBreakAfter=J,this}set pageBreakBefore(J){F(this.name,{pageBreakBefore:J}),this._updated()}get pageBreakBefore(){return X(this.name,"pageBreakBefore")}setPageBreakBefore(J){return this.pageBreakBefore=J,this}set pageBreakInside(J){F(this.name,{pageBreakInside:J}),this._updated()}get pageBreakInside(){return X(this.name,"pageBreakInside")}setPageBreakInside(J){return this.pageBreakInside=J,this}set pageOrientation(J){F(this.name,{pageOrientation:J}),this._updated()}get pageOrientation(){return X(this.name,"pageOrientation")}setPageOrientation(J){return this.pageOrientation=J,this}set paintOrder(J){F(this.name,{paintOrder:J}),this._updated()}get paintOrder(){return X(this.name,"paintOrder")}setPaintOrder(J){return this.paintOrder=J,this}set perspective(J){F(this.name,{perspective:J}),this._updated()}get perspective(){return X(this.name,"perspective")}setPerspective(J){return this.perspective=J,this}set perspectiveOrigin(J){F(this.name,{perspectiveOrigin:J}),this._updated()}get perspectiveOrigin(){return X(this.name,"perspectiveOrigin")}setPerspectiveOrigin(J){return this.perspectiveOrigin=J,this}set placeContent(J){F(this.name,{placeContent:J}),this._updated()}get placeContent(){return X(this.name,"placeContent")}setPlaceContent(J){return this.placeContent=J,this}set placeItems(J){F(this.name,{placeItems:J}),this._updated()}get placeItems(){return X(this.name,"placeItems")}setPlaceItems(J){return this.placeItems=J,this}set placeSelf(J){F(this.name,{placeSelf:J}),this._updated()}get placeSelf(){return X(this.name,"placeSelf")}setPlaceSelf(J){return this.placeSelf=J,this}set pointerEvents(J){F(this.name,{pointerEvents:J}),this._updated()}get pointerEvents(){return X(this.name,"pointerEvents")}setPointerEvents(J){return this.pointerEvents=J,this}set position(J){F(this.name,{position:J}),this._updated()}get position(){return X(this.name,"position")}setPosition(J){return this.position=J,this}set prefix(J){F(this.name,{prefix:J}),this._updated()}get prefix(){return X(this.name,"prefix")}setPrefix(J){return this.prefix=J,this}set quotes(J){F(this.name,{quotes:J}),this._updated()}get quotes(){return X(this.name,"quotes")}setQuotes(J){return this.quotes=J,this}set r(J){F(this.name,{r:J}),this._updated()}get r(){return X(this.name,"r")}setR(J){return this.r=J,this}set range(J){F(this.name,{range:J}),this._updated()}get range(){return X(this.name,"range")}setRange(J){return this.range=J,this}set resize(J){F(this.name,{resize:J}),this._updated()}get resize(){return X(this.name,"resize")}setResize(J){return this.resize=J,this}set right(J){F(this.name,{right:J}),this._updated()}get right(){return X(this.name,"right")}setRight(J){return this.right=J,this}set rotate(J){F(this.name,{rotate:J}),this._updated()}get rotate(){return X(this.name,"rotate")}setRotate(J){return this.rotate=J,this}set rowGap(J){F(this.name,{rowGap:J}),this._updated()}get rowGap(){return X(this.name,"rowGap")}setRowGap(J){return this.rowGap=J,this}set rubyPosition(J){F(this.name,{rubyPosition:J}),this._updated()}get rubyPosition(){return X(this.name,"rubyPosition")}setRubyPosition(J){return this.rubyPosition=J,this}set rx(J){F(this.name,{rx:J}),this._updated()}get rx(){return X(this.name,"rx")}setRx(J){return this.rx=J,this}set ry(J){F(this.name,{ry:J}),this._updated()}get ry(){return X(this.name,"ry")}setRy(J){return this.ry=J,this}set scale(J){F(this.name,{scale:J}),this._updated()}get scale(){return X(this.name,"scale")}setScale(J){return this.scale=J,this}set scrollBehavior(J){F(this.name,{scrollBehavior:J}),this._updated()}get scrollBehavior(){return X(this.name,"scrollBehavior")}setScrollBehavior(J){return this.scrollBehavior=J,this}set scrollMargin(J){F(this.name,{scrollMargin:J}),this._updated()}get scrollMargin(){return X(this.name,"scrollMargin")}setScrollMargin(J){return this.scrollMargin=J,this}set scrollMarginBlock(J){F(this.name,{scrollMarginBlock:J}),this._updated()}get scrollMarginBlock(){return X(this.name,"scrollMarginBlock")}setScrollMarginBlock(J){return this.scrollMarginBlock=J,this}set scrollMarginBlockEnd(J){F(this.name,{scrollMarginBlockEnd:J}),this._updated()}get scrollMarginBlockEnd(){return X(this.name,"scrollMarginBlockEnd")}setScrollMarginBlockEnd(J){return this.scrollMarginBlockEnd=J,this}set scrollMarginBlockStart(J){F(this.name,{scrollMarginBlockStart:J}),this._updated()}get scrollMarginBlockStart(){return X(this.name,"scrollMarginBlockStart")}setScrollMarginBlockStart(J){return this.scrollMarginBlockStart=J,this}set scrollMarginBottom(J){F(this.name,{scrollMarginBottom:J}),this._updated()}get scrollMarginBottom(){return X(this.name,"scrollMarginBottom")}setScrollMarginBottom(J){return this.scrollMarginBottom=J,this}set scrollMarginInline(J){F(this.name,{scrollMarginInline:J}),this._updated()}get scrollMarginInline(){return X(this.name,"scrollMarginInline")}setScrollMarginInline(J){return this.scrollMarginInline=J,this}set scrollMarginInlineEnd(J){F(this.name,{scrollMarginInlineEnd:J}),this._updated()}get scrollMarginInlineEnd(){return X(this.name,"scrollMarginInlineEnd")}setScrollMarginInlineEnd(J){return this.scrollMarginInlineEnd=J,this}set scrollMarginInlineStart(J){F(this.name,{scrollMarginInlineStart:J}),this._updated()}get scrollMarginInlineStart(){return X(this.name,"scrollMarginInlineStart")}setScrollMarginInlineStart(J){return this.scrollMarginInlineStart=J,this}set scrollMarginLeft(J){F(this.name,{scrollMarginLeft:J}),this._updated()}get scrollMarginLeft(){return X(this.name,"scrollMarginLeft")}setScrollMarginLeft(J){return this.scrollMarginLeft=J,this}set scrollMarginRight(J){F(this.name,{scrollMarginRight:J}),this._updated()}get scrollMarginRight(){return X(this.name,"scrollMarginRight")}setScrollMarginRight(J){return this.scrollMarginRight=J,this}set scrollMarginTop(J){F(this.name,{scrollMarginTop:J}),this._updated()}get scrollMarginTop(){return X(this.name,"scrollMarginTop")}setScrollMarginTop(J){return this.scrollMarginTop=J,this}set scrollPadding(J){F(this.name,{scrollPadding:J}),this._updated()}get scrollPadding(){return X(this.name,"scrollPadding")}setScrollPadding(J){return this.scrollPadding=J,this}set scrollPaddingBlock(J){F(this.name,{scrollPaddingBlock:J}),this._updated()}get scrollPaddingBlock(){return X(this.name,"scrollPaddingBlock")}setScrollPaddingBlock(J){return this.scrollPaddingBlock=J,this}set scrollPaddingBlockEnd(J){F(this.name,{scrollPaddingBlockEnd:J}),this._updated()}get scrollPaddingBlockEnd(){return X(this.name,"scrollPaddingBlockEnd")}setScrollPaddingBlockEnd(J){return this.scrollPaddingBlockEnd=J,this}set scrollPaddingBlockStart(J){F(this.name,{scrollPaddingBlockStart:J}),this._updated()}get scrollPaddingBlockStart(){return X(this.name,"scrollPaddingBlockStart")}setScrollPaddingBlockStart(J){return this.scrollPaddingBlockStart=J,this}set scrollPaddingBottom(J){F(this.name,{scrollPaddingBottom:J}),this._updated()}get scrollPaddingBottom(){return X(this.name,"scrollPaddingBottom")}setScrollPaddingBottom(J){return this.scrollPaddingBottom=J,this}set scrollPaddingInline(J){F(this.name,{scrollPaddingInline:J}),this._updated()}get scrollPaddingInline(){return X(this.name,"scrollPaddingInline")}setScrollPaddingInline(J){return this.scrollPaddingInline=J,this}set scrollPaddingInlineEnd(J){F(this.name,{scrollPaddingInlineEnd:J}),this._updated()}get scrollPaddingInlineEnd(){return X(this.name,"scrollPaddingInlineEnd")}setScrollPaddingInlineEnd(J){return this.scrollPaddingInlineEnd=J,this}set scrollPaddingInlineStart(J){F(this.name,{scrollPaddingInlineStart:J}),this._updated()}get scrollPaddingInlineStart(){return X(this.name,"scrollPaddingInlineStart")}setScrollPaddingInlineStart(J){return this.scrollPaddingInlineStart=J,this}set scrollPaddingLeft(J){F(this.name,{scrollPaddingLeft:J}),this._updated()}get scrollPaddingLeft(){return X(this.name,"scrollPaddingLeft")}setScrollPaddingLeft(J){return this.scrollPaddingLeft=J,this}set scrollPaddingRight(J){F(this.name,{scrollPaddingRight:J}),this._updated()}get scrollPaddingRight(){return X(this.name,"scrollPaddingRight")}setScrollPaddingRight(J){return this.scrollPaddingRight=J,this}set scrollPaddingTop(J){F(this.name,{scrollPaddingTop:J}),this._updated()}get scrollPaddingTop(){return X(this.name,"scrollPaddingTop")}setScrollPaddingTop(J){return this.scrollPaddingTop=J,this}set scrollSnapAlign(J){F(this.name,{scrollSnapAlign:J}),this._updated()}get scrollSnapAlign(){return X(this.name,"scrollSnapAlign")}setScrollSnapAlign(J){return this.scrollSnapAlign=J,this}set scrollSnapStop(J){F(this.name,{scrollSnapStop:J}),this._updated()}get scrollSnapStop(){return X(this.name,"scrollSnapStop")}setScrollSnapStop(J){return this.scrollSnapStop=J,this}set scrollSnapType(J){F(this.name,{scrollSnapType:J}),this._updated()}get scrollSnapType(){return X(this.name,"scrollSnapType")}setScrollSnapType(J){return this.scrollSnapType=J,this}set scrollTimeline(J){F(this.name,{scrollTimeline:J}),this._updated()}get scrollTimeline(){return X(this.name,"scrollTimeline")}setScrollTimeline(J){return this.scrollTimeline=J,this}set scrollTimelineAxis(J){F(this.name,{scrollTimelineAxis:J}),this._updated()}get scrollTimelineAxis(){return X(this.name,"scrollTimelineAxis")}setScrollTimelineAxis(J){return this.scrollTimelineAxis=J,this}set scrollTimelineName(J){F(this.name,{scrollTimelineName:J}),this._updated()}get scrollTimelineName(){return X(this.name,"scrollTimelineName")}setScrollTimelineName(J){return this.scrollTimelineName=J,this}set scrollbarGutter(J){F(this.name,{scrollbarGutter:J}),this._updated()}get scrollbarGutter(){return X(this.name,"scrollbarGutter")}setScrollbarGutter(J){return this.scrollbarGutter=J,this}set shapeImageThreshold(J){F(this.name,{shapeImageThreshold:J}),this._updated()}get shapeImageThreshold(){return X(this.name,"shapeImageThreshold")}setShapeImageThreshold(J){return this.shapeImageThreshold=J,this}set shapeMargin(J){F(this.name,{shapeMargin:J}),this._updated()}get shapeMargin(){return X(this.name,"shapeMargin")}setShapeMargin(J){return this.shapeMargin=J,this}set shapeOutside(J){F(this.name,{shapeOutside:J}),this._updated()}get shapeOutside(){return X(this.name,"shapeOutside")}setShapeOutside(J){return this.shapeOutside=J,this}set shapeRendering(J){F(this.name,{shapeRendering:J}),this._updated()}get shapeRendering(){return X(this.name,"shapeRendering")}setShapeRendering(J){return this.shapeRendering=J,this}set size(J){F(this.name,{size:J}),this._updated()}get size(){return X(this.name,"size")}setSize(J){return this.size=J,this}set sizeAdjust(J){F(this.name,{sizeAdjust:J}),this._updated()}get sizeAdjust(){return X(this.name,"sizeAdjust")}setSizeAdjust(J){return this.sizeAdjust=J,this}set speak(J){F(this.name,{speak:J}),this._updated()}get speak(){return X(this.name,"speak")}setSpeak(J){return this.speak=J,this}set speakAs(J){F(this.name,{speakAs:J}),this._updated()}get speakAs(){return X(this.name,"speakAs")}setSpeakAs(J){return this.speakAs=J,this}set src(J){F(this.name,{src:J}),this._updated()}get src(){return X(this.name,"src")}setSrc(J){return this.src=J,this}set stopColor(J){F(this.name,{stopColor:J}),this._updated()}get stopColor(){return X(this.name,"stopColor")}setStopColor(J){return this.stopColor=J,this}set stopOpacity(J){F(this.name,{stopOpacity:J}),this._updated()}get stopOpacity(){return X(this.name,"stopOpacity")}setStopOpacity(J){return this.stopOpacity=J,this}set stroke(J){F(this.name,{stroke:J}),this._updated()}get stroke(){return X(this.name,"stroke")}setStroke(J){return this.stroke=J,this}set strokeDasharray(J){F(this.name,{strokeDasharray:J}),this._updated()}get strokeDasharray(){return X(this.name,"strokeDasharray")}setStrokeDasharray(J){return this.strokeDasharray=J,this}set strokeDashoffset(J){F(this.name,{strokeDashoffset:J}),this._updated()}get strokeDashoffset(){return X(this.name,"strokeDashoffset")}setStrokeDashoffset(J){return this.strokeDashoffset=J,this}set strokeLinecap(J){F(this.name,{strokeLinecap:J}),this._updated()}get strokeLinecap(){return X(this.name,"strokeLinecap")}setStrokeLinecap(J){return this.strokeLinecap=J,this}set strokeLinejoin(J){F(this.name,{strokeLinejoin:J}),this._updated()}get strokeLinejoin(){return X(this.name,"strokeLinejoin")}setStrokeLinejoin(J){return this.strokeLinejoin=J,this}set strokeMiterlimit(J){F(this.name,{strokeMiterlimit:J}),this._updated()}get strokeMiterlimit(){return X(this.name,"strokeMiterlimit")}setStrokeMiterlimit(J){return this.strokeMiterlimit=J,this}set strokeOpacity(J){F(this.name,{strokeOpacity:J}),this._updated()}get strokeOpacity(){return X(this.name,"strokeOpacity")}setStrokeOpacity(J){return this.strokeOpacity=J,this}set strokeWidth(J){F(this.name,{strokeWidth:J}),this._updated()}get strokeWidth(){return X(this.name,"strokeWidth")}setStrokeWidth(J){return this.strokeWidth=J,this}set suffix(J){F(this.name,{suffix:J}),this._updated()}get suffix(){return X(this.name,"suffix")}setSuffix(J){return this.suffix=J,this}set symbols(J){F(this.name,{symbols:J}),this._updated()}get symbols(){return X(this.name,"symbols")}setSymbols(J){return this.symbols=J,this}set syntax(J){F(this.name,{syntax:J}),this._updated()}get syntax(){return X(this.name,"syntax")}setSyntax(J){return this.syntax=J,this}set system(J){F(this.name,{system:J}),this._updated()}get system(){return X(this.name,"system")}setSystem(J){return this.system=J,this}set tabSize(J){F(this.name,{tabSize:J}),this._updated()}get tabSize(){return X(this.name,"tabSize")}setTabSize(J){return this.tabSize=J,this}set tableLayout(J){F(this.name,{tableLayout:J}),this._updated()}get tableLayout(){return X(this.name,"tableLayout")}setTableLayout(J){return this.tableLayout=J,this}set textAlign(J){F(this.name,{textAlign:J}),this._updated()}get textAlign(){return X(this.name,"textAlign")}setTextAlign(J){return this.textAlign=J,this}set textAlignLast(J){F(this.name,{textAlignLast:J}),this._updated()}get textAlignLast(){return X(this.name,"textAlignLast")}setTextAlignLast(J){return this.textAlignLast=J,this}set textAnchor(J){F(this.name,{textAnchor:J}),this._updated()}get textAnchor(){return X(this.name,"textAnchor")}setTextAnchor(J){return this.textAnchor=J,this}set textCombineUpright(J){F(this.name,{textCombineUpright:J}),this._updated()}get textCombineUpright(){return X(this.name,"textCombineUpright")}setTextCombineUpright(J){return this.textCombineUpright=J,this}set textDecoration(J){F(this.name,{textDecoration:J}),this._updated()}get textDecoration(){return X(this.name,"textDecoration")}setTextDecoration(J){return this.textDecoration=J,this}set textDecorationColor(J){F(this.name,{textDecorationColor:J}),this._updated()}get textDecorationColor(){return X(this.name,"textDecorationColor")}setTextDecorationColor(J){return this.textDecorationColor=J,this}set textDecorationLine(J){F(this.name,{textDecorationLine:J}),this._updated()}get textDecorationLine(){return X(this.name,"textDecorationLine")}setTextDecorationLine(J){return this.textDecorationLine=J,this}set textDecorationSkipInk(J){F(this.name,{textDecorationSkipInk:J}),this._updated()}get textDecorationSkipInk(){return X(this.name,"textDecorationSkipInk")}setTextDecorationSkipInk(J){return this.textDecorationSkipInk=J,this}set textDecorationStyle(J){F(this.name,{textDecorationStyle:J}),this._updated()}get textDecorationStyle(){return X(this.name,"textDecorationStyle")}setTextDecorationStyle(J){return this.textDecorationStyle=J,this}set textDecorationThickness(J){F(this.name,{textDecorationThickness:J}),this._updated()}get textDecorationThickness(){return X(this.name,"textDecorationThickness")}setTextDecorationThickness(J){return this.textDecorationThickness=J,this}set textEmphasis(J){F(this.name,{textEmphasis:J}),this._updated()}get textEmphasis(){return X(this.name,"textEmphasis")}setTextEmphasis(J){return this.textEmphasis=J,this}set textEmphasisColor(J){F(this.name,{textEmphasisColor:J}),this._updated()}get textEmphasisColor(){return X(this.name,"textEmphasisColor")}setTextEmphasisColor(J){return this.textEmphasisColor=J,this}set textEmphasisPosition(J){F(this.name,{textEmphasisPosition:J}),this._updated()}get textEmphasisPosition(){return X(this.name,"textEmphasisPosition")}setTextEmphasisPosition(J){return this.textEmphasisPosition=J,this}set textEmphasisStyle(J){F(this.name,{textEmphasisStyle:J}),this._updated()}get textEmphasisStyle(){return X(this.name,"textEmphasisStyle")}setTextEmphasisStyle(J){return this.textEmphasisStyle=J,this}set textIndent(J){F(this.name,{textIndent:J}),this._updated()}get textIndent(){return X(this.name,"textIndent")}setTextIndent(J){return this.textIndent=J,this}set textOrientation(J){F(this.name,{textOrientation:J}),this._updated()}get textOrientation(){return X(this.name,"textOrientation")}setTextOrientation(J){return this.textOrientation=J,this}set textOverflow(J){F(this.name,{textOverflow:J}),this._updated()}get textOverflow(){return X(this.name,"textOverflow")}setTextOverflow(J){return this.textOverflow=J,this}set textRendering(J){F(this.name,{textRendering:J}),this._updated()}get textRendering(){return X(this.name,"textRendering")}setTextRendering(J){return this.textRendering=J,this}set textShadow(J){F(this.name,{textShadow:J}),this._updated()}get textShadow(){return X(this.name,"textShadow")}setTextShadow(J){return this.textShadow=J,this}set textSizeAdjust(J){F(this.name,{textSizeAdjust:J}),this._updated()}get textSizeAdjust(){return X(this.name,"textSizeAdjust")}setTextSizeAdjust(J){return this.textSizeAdjust=J,this}set textTransform(J){F(this.name,{textTransform:J}),this._updated()}get textTransform(){return X(this.name,"textTransform")}setTextTransform(J){return this.textTransform=J,this}set textUnderlineOffset(J){F(this.name,{textUnderlineOffset:J}),this._updated()}get textUnderlineOffset(){return X(this.name,"textUnderlineOffset")}setTextUnderlineOffset(J){return this.textUnderlineOffset=J,this}set textUnderlinePosition(J){F(this.name,{textUnderlinePosition:J}),this._updated()}get textUnderlinePosition(){return X(this.name,"textUnderlinePosition")}setTextUnderlinePosition(J){return this.textUnderlinePosition=J,this}set textWrap(J){F(this.name,{textWrap:J}),this._updated()}get textWrap(){return X(this.name,"textWrap")}setTextWrap(J){return this.textWrap=J,this}set timelineScope(J){F(this.name,{timelineScope:J}),this._updated()}get timelineScope(){return X(this.name,"timelineScope")}setTimelineScope(J){return this.timelineScope=J,this}set top(J){F(this.name,{top:J}),this._updated()}get top(){return X(this.name,"top")}setTop(J){return this.top=J,this}set touchAction(J){F(this.name,{touchAction:J}),this._updated()}get touchAction(){return X(this.name,"touchAction")}setTouchAction(J){return this.touchAction=J,this}set transform(J){F(this.name,{transform:J}),this._updated()}get transform(){return X(this.name,"transform")}setTransform(J){return this.transform=J,this}set transformBox(J){F(this.name,{transformBox:J}),this._updated()}get transformBox(){return X(this.name,"transformBox")}setTransformBox(J){return this.transformBox=J,this}set transformOrigin(J){F(this.name,{transformOrigin:J}),this._updated()}get transformOrigin(){return X(this.name,"transformOrigin")}setTransformOrigin(J){return this.transformOrigin=J,this}set transformStyle(J){F(this.name,{transformStyle:J}),this._updated()}get transformStyle(){return X(this.name,"transformStyle")}setTransformStyle(J){return this.transformStyle=J,this}set transition(J){F(this.name,{transition:J}),this._updated()}get transition(){return X(this.name,"transition")}setTransition(J){return this.transition=J,this}set transitionBehavior(J){F(this.name,{transitionBehavior:J}),this._updated()}get transitionBehavior(){return X(this.name,"transitionBehavior")}setTransitionBehavior(J){return this.transitionBehavior=J,this}set transitionDelay(J){F(this.name,{transitionDelay:J}),this._updated()}get transitionDelay(){return X(this.name,"transitionDelay")}setTransitionDelay(J){return this.transitionDelay=J,this}set transitionDuration(J){F(this.name,{transitionDuration:J}),this._updated()}get transitionDuration(){return X(this.name,"transitionDuration")}setTransitionDuration(J){return this.transitionDuration=J,this}set transitionProperty(J){F(this.name,{transitionProperty:J}),this._updated()}get transitionProperty(){return X(this.name,"transitionProperty")}setTransitionProperty(J){return this.transitionProperty=J,this}set transitionTimingFunction(J){F(this.name,{transitionTimingFunction:J}),this._updated()}get transitionTimingFunction(){return X(this.name,"transitionTimingFunction")}setTransitionTimingFunction(J){return this.transitionTimingFunction=J,this}set translate(J){F(this.name,{translate:J}),this._updated()}get translate(){return X(this.name,"translate")}setTranslate(J){return this.translate=J,this}set unicodeBidi(J){F(this.name,{unicodeBidi:J}),this._updated()}get unicodeBidi(){return X(this.name,"unicodeBidi")}setUnicodeBidi(J){return this.unicodeBidi=J,this}set unicodeRange(J){F(this.name,{unicodeRange:J}),this._updated()}get unicodeRange(){return X(this.name,"unicodeRange")}setUnicodeRange(J){return this.unicodeRange=J,this}set userSelect(J){F(this.name,{userSelect:J}),this._updated()}get userSelect(){return X(this.name,"userSelect")}setUserSelect(J){return this.userSelect=J,this}set vectorEffect(J){F(this.name,{vectorEffect:J}),this._updated()}get vectorEffect(){return X(this.name,"vectorEffect")}setVectorEffect(J){return this.vectorEffect=J,this}set verticalAlign(J){F(this.name,{verticalAlign:J}),this._updated()}get verticalAlign(){return X(this.name,"verticalAlign")}setVerticalAlign(J){return this.verticalAlign=J,this}set viewTimeline(J){F(this.name,{viewTimeline:J}),this._updated()}get viewTimeline(){return X(this.name,"viewTimeline")}setViewTimeline(J){return this.viewTimeline=J,this}set viewTimelineAxis(J){F(this.name,{viewTimelineAxis:J}),this._updated()}get viewTimelineAxis(){return X(this.name,"viewTimelineAxis")}setViewTimelineAxis(J){return this.viewTimelineAxis=J,this}set viewTimelineInset(J){F(this.name,{viewTimelineInset:J}),this._updated()}get viewTimelineInset(){return X(this.name,"viewTimelineInset")}setViewTimelineInset(J){return this.viewTimelineInset=J,this}set viewTimelineName(J){F(this.name,{viewTimelineName:J}),this._updated()}get viewTimelineName(){return X(this.name,"viewTimelineName")}setViewTimelineName(J){return this.viewTimelineName=J,this}set viewTransitionName(J){F(this.name,{viewTransitionName:J}),this._updated()}get viewTransitionName(){return X(this.name,"viewTransitionName")}setViewTransitionName(J){return this.viewTransitionName=J,this}set visibility(J){F(this.name,{visibility:J}),this._updated()}get visibility(){return X(this.name,"visibility")}setVisibility(J){return this.visibility=J,this}set webkitAlignContent(J){F(this.name,{webkitAlignContent:J}),this._updated()}get webkitAlignContent(){return X(this.name,"webkitAlignContent")}setWebkitAlignContent(J){return this.webkitAlignContent=J,this}set webkitAlignItems(J){F(this.name,{webkitAlignItems:J}),this._updated()}get webkitAlignItems(){return X(this.name,"webkitAlignItems")}setWebkitAlignItems(J){return this.webkitAlignItems=J,this}set webkitAlignSelf(J){F(this.name,{webkitAlignSelf:J}),this._updated()}get webkitAlignSelf(){return X(this.name,"webkitAlignSelf")}setWebkitAlignSelf(J){return this.webkitAlignSelf=J,this}set webkitAnimation(J){F(this.name,{webkitAnimation:J}),this._updated()}get webkitAnimation(){return X(this.name,"webkitAnimation")}setWebkitAnimation(J){return this.webkitAnimation=J,this}set webkitAnimationDelay(J){F(this.name,{webkitAnimationDelay:J}),this._updated()}get webkitAnimationDelay(){return X(this.name,"webkitAnimationDelay")}setWebkitAnimationDelay(J){return this.webkitAnimationDelay=J,this}set webkitAnimationDirection(J){F(this.name,{webkitAnimationDirection:J}),this._updated()}get webkitAnimationDirection(){return X(this.name,"webkitAnimationDirection")}setWebkitAnimationDirection(J){return this.webkitAnimationDirection=J,this}set webkitAnimationDuration(J){F(this.name,{webkitAnimationDuration:J}),this._updated()}get webkitAnimationDuration(){return X(this.name,"webkitAnimationDuration")}setWebkitAnimationDuration(J){return this.webkitAnimationDuration=J,this}set webkitAnimationFillMode(J){F(this.name,{webkitAnimationFillMode:J}),this._updated()}get webkitAnimationFillMode(){return X(this.name,"webkitAnimationFillMode")}setWebkitAnimationFillMode(J){return this.webkitAnimationFillMode=J,this}set webkitAnimationIterationCount(J){F(this.name,{webkitAnimationIterationCount:J}),this._updated()}get webkitAnimationIterationCount(){return X(this.name,"webkitAnimationIterationCount")}setWebkitAnimationIterationCount(J){return this.webkitAnimationIterationCount=J,this}set webkitAnimationName(J){F(this.name,{webkitAnimationName:J}),this._updated()}get webkitAnimationName(){return X(this.name,"webkitAnimationName")}setWebkitAnimationName(J){return this.webkitAnimationName=J,this}set webkitAnimationPlayState(J){F(this.name,{webkitAnimationPlayState:J}),this._updated()}get webkitAnimationPlayState(){return X(this.name,"webkitAnimationPlayState")}setWebkitAnimationPlayState(J){return this.webkitAnimationPlayState=J,this}set webkitAnimationTimingFunction(J){F(this.name,{webkitAnimationTimingFunction:J}),this._updated()}get webkitAnimationTimingFunction(){return X(this.name,"webkitAnimationTimingFunction")}setWebkitAnimationTimingFunction(J){return this.webkitAnimationTimingFunction=J,this}set webkitAppRegion(J){F(this.name,{webkitAppRegion:J}),this._updated()}get webkitAppRegion(){return X(this.name,"webkitAppRegion")}setWebkitAppRegion(J){return this.webkitAppRegion=J,this}set webkitAppearance(J){F(this.name,{webkitAppearance:J}),this._updated()}get webkitAppearance(){return X(this.name,"webkitAppearance")}setWebkitAppearance(J){return this.webkitAppearance=J,this}set webkitBackfaceVisibility(J){F(this.name,{webkitBackfaceVisibility:J}),this._updated()}get webkitBackfaceVisibility(){return X(this.name,"webkitBackfaceVisibility")}setWebkitBackfaceVisibility(J){return this.webkitBackfaceVisibility=J,this}set webkitBackgroundClip(J){F(this.name,{webkitBackgroundClip:J}),this._updated()}get webkitBackgroundClip(){return X(this.name,"webkitBackgroundClip")}setWebkitBackgroundClip(J){return this.webkitBackgroundClip=J,this}set webkitBackgroundOrigin(J){F(this.name,{webkitBackgroundOrigin:J}),this._updated()}get webkitBackgroundOrigin(){return X(this.name,"webkitBackgroundOrigin")}setWebkitBackgroundOrigin(J){return this.webkitBackgroundOrigin=J,this}set webkitBackgroundSize(J){F(this.name,{webkitBackgroundSize:J}),this._updated()}get webkitBackgroundSize(){return X(this.name,"webkitBackgroundSize")}setWebkitBackgroundSize(J){return this.webkitBackgroundSize=J,this}set webkitBorderAfter(J){F(this.name,{webkitBorderAfter:J}),this._updated()}get webkitBorderAfter(){return X(this.name,"webkitBorderAfter")}setWebkitBorderAfter(J){return this.webkitBorderAfter=J,this}set webkitBorderAfterColor(J){F(this.name,{webkitBorderAfterColor:J}),this._updated()}get webkitBorderAfterColor(){return X(this.name,"webkitBorderAfterColor")}setWebkitBorderAfterColor(J){return this.webkitBorderAfterColor=J,this}set webkitBorderAfterStyle(J){F(this.name,{webkitBorderAfterStyle:J}),this._updated()}get webkitBorderAfterStyle(){return X(this.name,"webkitBorderAfterStyle")}setWebkitBorderAfterStyle(J){return this.webkitBorderAfterStyle=J,this}set webkitBorderAfterWidth(J){F(this.name,{webkitBorderAfterWidth:J}),this._updated()}get webkitBorderAfterWidth(){return X(this.name,"webkitBorderAfterWidth")}setWebkitBorderAfterWidth(J){return this.webkitBorderAfterWidth=J,this}set webkitBorderBefore(J){F(this.name,{webkitBorderBefore:J}),this._updated()}get webkitBorderBefore(){return X(this.name,"webkitBorderBefore")}setWebkitBorderBefore(J){return this.webkitBorderBefore=J,this}set webkitBorderBeforeColor(J){F(this.name,{webkitBorderBeforeColor:J}),this._updated()}get webkitBorderBeforeColor(){return X(this.name,"webkitBorderBeforeColor")}setWebkitBorderBeforeColor(J){return this.webkitBorderBeforeColor=J,this}set webkitBorderBeforeStyle(J){F(this.name,{webkitBorderBeforeStyle:J}),this._updated()}get webkitBorderBeforeStyle(){return X(this.name,"webkitBorderBeforeStyle")}setWebkitBorderBeforeStyle(J){return this.webkitBorderBeforeStyle=J,this}set webkitBorderBeforeWidth(J){F(this.name,{webkitBorderBeforeWidth:J}),this._updated()}get webkitBorderBeforeWidth(){return X(this.name,"webkitBorderBeforeWidth")}setWebkitBorderBeforeWidth(J){return this.webkitBorderBeforeWidth=J,this}set webkitBorderBottomLeftRadius(J){F(this.name,{webkitBorderBottomLeftRadius:J}),this._updated()}get webkitBorderBottomLeftRadius(){return X(this.name,"webkitBorderBottomLeftRadius")}setWebkitBorderBottomLeftRadius(J){return this.webkitBorderBottomLeftRadius=J,this}set webkitBorderBottomRightRadius(J){F(this.name,{webkitBorderBottomRightRadius:J}),this._updated()}get webkitBorderBottomRightRadius(){return X(this.name,"webkitBorderBottomRightRadius")}setWebkitBorderBottomRightRadius(J){return this.webkitBorderBottomRightRadius=J,this}set webkitBorderEnd(J){F(this.name,{webkitBorderEnd:J}),this._updated()}get webkitBorderEnd(){return X(this.name,"webkitBorderEnd")}setWebkitBorderEnd(J){return this.webkitBorderEnd=J,this}set webkitBorderEndColor(J){F(this.name,{webkitBorderEndColor:J}),this._updated()}get webkitBorderEndColor(){return X(this.name,"webkitBorderEndColor")}setWebkitBorderEndColor(J){return this.webkitBorderEndColor=J,this}set webkitBorderEndStyle(J){F(this.name,{webkitBorderEndStyle:J}),this._updated()}get webkitBorderEndStyle(){return X(this.name,"webkitBorderEndStyle")}setWebkitBorderEndStyle(J){return this.webkitBorderEndStyle=J,this}set webkitBorderEndWidth(J){F(this.name,{webkitBorderEndWidth:J}),this._updated()}get webkitBorderEndWidth(){return X(this.name,"webkitBorderEndWidth")}setWebkitBorderEndWidth(J){return this.webkitBorderEndWidth=J,this}set webkitBorderHorizontalSpacing(J){F(this.name,{webkitBorderHorizontalSpacing:J}),this._updated()}get webkitBorderHorizontalSpacing(){return X(this.name,"webkitBorderHorizontalSpacing")}setWebkitBorderHorizontalSpacing(J){return this.webkitBorderHorizontalSpacing=J,this}set webkitBorderImage(J){F(this.name,{webkitBorderImage:J}),this._updated()}get webkitBorderImage(){return X(this.name,"webkitBorderImage")}setWebkitBorderImage(J){return this.webkitBorderImage=J,this}set webkitBorderRadius(J){F(this.name,{webkitBorderRadius:J}),this._updated()}get webkitBorderRadius(){return X(this.name,"webkitBorderRadius")}setWebkitBorderRadius(J){return this.webkitBorderRadius=J,this}set webkitBorderStart(J){F(this.name,{webkitBorderStart:J}),this._updated()}get webkitBorderStart(){return X(this.name,"webkitBorderStart")}setWebkitBorderStart(J){return this.webkitBorderStart=J,this}set webkitBorderStartColor(J){F(this.name,{webkitBorderStartColor:J}),this._updated()}get webkitBorderStartColor(){return X(this.name,"webkitBorderStartColor")}setWebkitBorderStartColor(J){return this.webkitBorderStartColor=J,this}set webkitBorderStartStyle(J){F(this.name,{webkitBorderStartStyle:J}),this._updated()}get webkitBorderStartStyle(){return X(this.name,"webkitBorderStartStyle")}setWebkitBorderStartStyle(J){return this.webkitBorderStartStyle=J,this}set webkitBorderStartWidth(J){F(this.name,{webkitBorderStartWidth:J}),this._updated()}get webkitBorderStartWidth(){return X(this.name,"webkitBorderStartWidth")}setWebkitBorderStartWidth(J){return this.webkitBorderStartWidth=J,this}set webkitBorderTopLeftRadius(J){F(this.name,{webkitBorderTopLeftRadius:J}),this._updated()}get webkitBorderTopLeftRadius(){return X(this.name,"webkitBorderTopLeftRadius")}setWebkitBorderTopLeftRadius(J){return this.webkitBorderTopLeftRadius=J,this}set webkitBorderTopRightRadius(J){F(this.name,{webkitBorderTopRightRadius:J}),this._updated()}get webkitBorderTopRightRadius(){return X(this.name,"webkitBorderTopRightRadius")}setWebkitBorderTopRightRadius(J){return this.webkitBorderTopRightRadius=J,this}set webkitBorderVerticalSpacing(J){F(this.name,{webkitBorderVerticalSpacing:J}),this._updated()}get webkitBorderVerticalSpacing(){return X(this.name,"webkitBorderVerticalSpacing")}setWebkitBorderVerticalSpacing(J){return this.webkitBorderVerticalSpacing=J,this}set webkitBoxAlign(J){F(this.name,{webkitBoxAlign:J}),this._updated()}get webkitBoxAlign(){return X(this.name,"webkitBoxAlign")}setWebkitBoxAlign(J){return this.webkitBoxAlign=J,this}set webkitBoxDecorationBreak(J){F(this.name,{webkitBoxDecorationBreak:J}),this._updated()}get webkitBoxDecorationBreak(){return X(this.name,"webkitBoxDecorationBreak")}setWebkitBoxDecorationBreak(J){return this.webkitBoxDecorationBreak=J,this}set webkitBoxDirection(J){F(this.name,{webkitBoxDirection:J}),this._updated()}get webkitBoxDirection(){return X(this.name,"webkitBoxDirection")}setWebkitBoxDirection(J){return this.webkitBoxDirection=J,this}set webkitBoxFlex(J){F(this.name,{webkitBoxFlex:J}),this._updated()}get webkitBoxFlex(){return X(this.name,"webkitBoxFlex")}setWebkitBoxFlex(J){return this.webkitBoxFlex=J,this}set webkitBoxOrdinalGroup(J){F(this.name,{webkitBoxOrdinalGroup:J}),this._updated()}get webkitBoxOrdinalGroup(){return X(this.name,"webkitBoxOrdinalGroup")}setWebkitBoxOrdinalGroup(J){return this.webkitBoxOrdinalGroup=J,this}set webkitBoxOrient(J){F(this.name,{webkitBoxOrient:J}),this._updated()}get webkitBoxOrient(){return X(this.name,"webkitBoxOrient")}setWebkitBoxOrient(J){return this.webkitBoxOrient=J,this}set webkitBoxPack(J){F(this.name,{webkitBoxPack:J}),this._updated()}get webkitBoxPack(){return X(this.name,"webkitBoxPack")}setWebkitBoxPack(J){return this.webkitBoxPack=J,this}set webkitBoxReflect(J){F(this.name,{webkitBoxReflect:J}),this._updated()}get webkitBoxReflect(){return X(this.name,"webkitBoxReflect")}setWebkitBoxReflect(J){return this.webkitBoxReflect=J,this}set webkitBoxShadow(J){F(this.name,{webkitBoxShadow:J}),this._updated()}get webkitBoxShadow(){return X(this.name,"webkitBoxShadow")}setWebkitBoxShadow(J){return this.webkitBoxShadow=J,this}set webkitBoxSizing(J){F(this.name,{webkitBoxSizing:J}),this._updated()}get webkitBoxSizing(){return X(this.name,"webkitBoxSizing")}setWebkitBoxSizing(J){return this.webkitBoxSizing=J,this}set webkitClipPath(J){F(this.name,{webkitClipPath:J}),this._updated()}get webkitClipPath(){return X(this.name,"webkitClipPath")}setWebkitClipPath(J){return this.webkitClipPath=J,this}set webkitColumnBreakAfter(J){F(this.name,{webkitColumnBreakAfter:J}),this._updated()}get webkitColumnBreakAfter(){return X(this.name,"webkitColumnBreakAfter")}setWebkitColumnBreakAfter(J){return this.webkitColumnBreakAfter=J,this}set webkitColumnBreakBefore(J){F(this.name,{webkitColumnBreakBefore:J}),this._updated()}get webkitColumnBreakBefore(){return X(this.name,"webkitColumnBreakBefore")}setWebkitColumnBreakBefore(J){return this.webkitColumnBreakBefore=J,this}set webkitColumnBreakInside(J){F(this.name,{webkitColumnBreakInside:J}),this._updated()}get webkitColumnBreakInside(){return X(this.name,"webkitColumnBreakInside")}setWebkitColumnBreakInside(J){return this.webkitColumnBreakInside=J,this}set webkitColumnCount(J){F(this.name,{webkitColumnCount:J}),this._updated()}get webkitColumnCount(){return X(this.name,"webkitColumnCount")}setWebkitColumnCount(J){return this.webkitColumnCount=J,this}set webkitColumnGap(J){F(this.name,{webkitColumnGap:J}),this._updated()}get webkitColumnGap(){return X(this.name,"webkitColumnGap")}setWebkitColumnGap(J){return this.webkitColumnGap=J,this}set webkitColumnRule(J){F(this.name,{webkitColumnRule:J}),this._updated()}get webkitColumnRule(){return X(this.name,"webkitColumnRule")}setWebkitColumnRule(J){return this.webkitColumnRule=J,this}set webkitColumnRuleColor(J){F(this.name,{webkitColumnRuleColor:J}),this._updated()}get webkitColumnRuleColor(){return X(this.name,"webkitColumnRuleColor")}setWebkitColumnRuleColor(J){return this.webkitColumnRuleColor=J,this}set webkitColumnRuleStyle(J){F(this.name,{webkitColumnRuleStyle:J}),this._updated()}get webkitColumnRuleStyle(){return X(this.name,"webkitColumnRuleStyle")}setWebkitColumnRuleStyle(J){return this.webkitColumnRuleStyle=J,this}set webkitColumnRuleWidth(J){F(this.name,{webkitColumnRuleWidth:J}),this._updated()}get webkitColumnRuleWidth(){return X(this.name,"webkitColumnRuleWidth")}setWebkitColumnRuleWidth(J){return this.webkitColumnRuleWidth=J,this}set webkitColumnSpan(J){F(this.name,{webkitColumnSpan:J}),this._updated()}get webkitColumnSpan(){return X(this.name,"webkitColumnSpan")}setWebkitColumnSpan(J){return this.webkitColumnSpan=J,this}set webkitColumnWidth(J){F(this.name,{webkitColumnWidth:J}),this._updated()}get webkitColumnWidth(){return X(this.name,"webkitColumnWidth")}setWebkitColumnWidth(J){return this.webkitColumnWidth=J,this}set webkitColumns(J){F(this.name,{webkitColumns:J}),this._updated()}get webkitColumns(){return X(this.name,"webkitColumns")}setWebkitColumns(J){return this.webkitColumns=J,this}set webkitFilter(J){F(this.name,{webkitFilter:J}),this._updated()}get webkitFilter(){return X(this.name,"webkitFilter")}setWebkitFilter(J){return this.webkitFilter=J,this}set webkitFlex(J){F(this.name,{webkitFlex:J}),this._updated()}get webkitFlex(){return X(this.name,"webkitFlex")}setWebkitFlex(J){return this.webkitFlex=J,this}set webkitFlexBasis(J){F(this.name,{webkitFlexBasis:J}),this._updated()}get webkitFlexBasis(){return X(this.name,"webkitFlexBasis")}setWebkitFlexBasis(J){return this.webkitFlexBasis=J,this}set webkitFlexDirection(J){F(this.name,{webkitFlexDirection:J}),this._updated()}get webkitFlexDirection(){return X(this.name,"webkitFlexDirection")}setWebkitFlexDirection(J){return this.webkitFlexDirection=J,this}set webkitFlexFlow(J){F(this.name,{webkitFlexFlow:J}),this._updated()}get webkitFlexFlow(){return X(this.name,"webkitFlexFlow")}setWebkitFlexFlow(J){return this.webkitFlexFlow=J,this}set webkitFlexGrow(J){F(this.name,{webkitFlexGrow:J}),this._updated()}get webkitFlexGrow(){return X(this.name,"webkitFlexGrow")}setWebkitFlexGrow(J){return this.webkitFlexGrow=J,this}set webkitFlexShrink(J){F(this.name,{webkitFlexShrink:J}),this._updated()}get webkitFlexShrink(){return X(this.name,"webkitFlexShrink")}setWebkitFlexShrink(J){return this.webkitFlexShrink=J,this}set webkitFlexWrap(J){F(this.name,{webkitFlexWrap:J}),this._updated()}get webkitFlexWrap(){return X(this.name,"webkitFlexWrap")}setWebkitFlexWrap(J){return this.webkitFlexWrap=J,this}set webkitFontFeatureSettings(J){F(this.name,{webkitFontFeatureSettings:J}),this._updated()}get webkitFontFeatureSettings(){return X(this.name,"webkitFontFeatureSettings")}setWebkitFontFeatureSettings(J){return this.webkitFontFeatureSettings=J,this}set webkitFontSmoothing(J){F(this.name,{webkitFontSmoothing:J}),this._updated()}get webkitFontSmoothing(){return X(this.name,"webkitFontSmoothing")}setWebkitFontSmoothing(J){return this.webkitFontSmoothing=J,this}set webkitHyphenateCharacter(J){F(this.name,{webkitHyphenateCharacter:J}),this._updated()}get webkitHyphenateCharacter(){return X(this.name,"webkitHyphenateCharacter")}setWebkitHyphenateCharacter(J){return this.webkitHyphenateCharacter=J,this}set webkitJustifyContent(J){F(this.name,{webkitJustifyContent:J}),this._updated()}get webkitJustifyContent(){return X(this.name,"webkitJustifyContent")}setWebkitJustifyContent(J){return this.webkitJustifyContent=J,this}set webkitLineBreak(J){F(this.name,{webkitLineBreak:J}),this._updated()}get webkitLineBreak(){return X(this.name,"webkitLineBreak")}setWebkitLineBreak(J){return this.webkitLineBreak=J,this}set webkitLineClamp(J){F(this.name,{webkitLineClamp:J}),this._updated()}get webkitLineClamp(){return X(this.name,"webkitLineClamp")}setWebkitLineClamp(J){return this.webkitLineClamp=J,this}set webkitLocale(J){F(this.name,{webkitLocale:J}),this._updated()}get webkitLocale(){return X(this.name,"webkitLocale")}setWebkitLocale(J){return this.webkitLocale=J,this}set webkitLogicalHeight(J){F(this.name,{webkitLogicalHeight:J}),this._updated()}get webkitLogicalHeight(){return X(this.name,"webkitLogicalHeight")}setWebkitLogicalHeight(J){return this.webkitLogicalHeight=J,this}set webkitLogicalWidth(J){F(this.name,{webkitLogicalWidth:J}),this._updated()}get webkitLogicalWidth(){return X(this.name,"webkitLogicalWidth")}setWebkitLogicalWidth(J){return this.webkitLogicalWidth=J,this}set webkitMarginAfter(J){F(this.name,{webkitMarginAfter:J}),this._updated()}get webkitMarginAfter(){return X(this.name,"webkitMarginAfter")}setWebkitMarginAfter(J){return this.webkitMarginAfter=J,this}set webkitMarginBefore(J){F(this.name,{webkitMarginBefore:J}),this._updated()}get webkitMarginBefore(){return X(this.name,"webkitMarginBefore")}setWebkitMarginBefore(J){return this.webkitMarginBefore=J,this}set webkitMarginEnd(J){F(this.name,{webkitMarginEnd:J}),this._updated()}get webkitMarginEnd(){return X(this.name,"webkitMarginEnd")}setWebkitMarginEnd(J){return this.webkitMarginEnd=J,this}set webkitMarginStart(J){F(this.name,{webkitMarginStart:J}),this._updated()}get webkitMarginStart(){return X(this.name,"webkitMarginStart")}setWebkitMarginStart(J){return this.webkitMarginStart=J,this}set webkitMask(J){F(this.name,{webkitMask:J}),this._updated()}get webkitMask(){return X(this.name,"webkitMask")}setWebkitMask(J){return this.webkitMask=J,this}set webkitMaskBoxImage(J){F(this.name,{webkitMaskBoxImage:J}),this._updated()}get webkitMaskBoxImage(){return X(this.name,"webkitMaskBoxImage")}setWebkitMaskBoxImage(J){return this.webkitMaskBoxImage=J,this}set webkitMaskBoxImageOutset(J){F(this.name,{webkitMaskBoxImageOutset:J}),this._updated()}get webkitMaskBoxImageOutset(){return X(this.name,"webkitMaskBoxImageOutset")}setWebkitMaskBoxImageOutset(J){return this.webkitMaskBoxImageOutset=J,this}set webkitMaskBoxImageRepeat(J){F(this.name,{webkitMaskBoxImageRepeat:J}),this._updated()}get webkitMaskBoxImageRepeat(){return X(this.name,"webkitMaskBoxImageRepeat")}setWebkitMaskBoxImageRepeat(J){return this.webkitMaskBoxImageRepeat=J,this}set webkitMaskBoxImageSlice(J){F(this.name,{webkitMaskBoxImageSlice:J}),this._updated()}get webkitMaskBoxImageSlice(){return X(this.name,"webkitMaskBoxImageSlice")}setWebkitMaskBoxImageSlice(J){return this.webkitMaskBoxImageSlice=J,this}set webkitMaskBoxImageSource(J){F(this.name,{webkitMaskBoxImageSource:J}),this._updated()}get webkitMaskBoxImageSource(){return X(this.name,"webkitMaskBoxImageSource")}setWebkitMaskBoxImageSource(J){return this.webkitMaskBoxImageSource=J,this}set webkitMaskBoxImageWidth(J){F(this.name,{webkitMaskBoxImageWidth:J}),this._updated()}get webkitMaskBoxImageWidth(){return X(this.name,"webkitMaskBoxImageWidth")}setWebkitMaskBoxImageWidth(J){return this.webkitMaskBoxImageWidth=J,this}set webkitMaskClip(J){F(this.name,{webkitMaskClip:J}),this._updated()}get webkitMaskClip(){return X(this.name,"webkitMaskClip")}setWebkitMaskClip(J){return this.webkitMaskClip=J,this}set webkitMaskComposite(J){F(this.name,{webkitMaskComposite:J}),this._updated()}get webkitMaskComposite(){return X(this.name,"webkitMaskComposite")}setWebkitMaskComposite(J){return this.webkitMaskComposite=J,this}set webkitMaskImage(J){F(this.name,{webkitMaskImage:J}),this._updated()}get webkitMaskImage(){return X(this.name,"webkitMaskImage")}setWebkitMaskImage(J){return this.webkitMaskImage=J,this}set webkitMaskOrigin(J){F(this.name,{webkitMaskOrigin:J}),this._updated()}get webkitMaskOrigin(){return X(this.name,"webkitMaskOrigin")}setWebkitMaskOrigin(J){return this.webkitMaskOrigin=J,this}set webkitMaskPosition(J){F(this.name,{webkitMaskPosition:J}),this._updated()}get webkitMaskPosition(){return X(this.name,"webkitMaskPosition")}setWebkitMaskPosition(J){return this.webkitMaskPosition=J,this}set webkitMaskPositionX(J){F(this.name,{webkitMaskPositionX:J}),this._updated()}get webkitMaskPositionX(){return X(this.name,"webkitMaskPositionX")}setWebkitMaskPositionX(J){return this.webkitMaskPositionX=J,this}set webkitMaskPositionY(J){F(this.name,{webkitMaskPositionY:J}),this._updated()}get webkitMaskPositionY(){return X(this.name,"webkitMaskPositionY")}setWebkitMaskPositionY(J){return this.webkitMaskPositionY=J,this}set webkitMaskRepeat(J){F(this.name,{webkitMaskRepeat:J}),this._updated()}get webkitMaskRepeat(){return X(this.name,"webkitMaskRepeat")}setWebkitMaskRepeat(J){return this.webkitMaskRepeat=J,this}set webkitMaskRepeatX(J){F(this.name,{webkitMaskRepeatX:J}),this._updated()}get webkitMaskRepeatX(){return X(this.name,"webkitMaskRepeatX")}setWebkitMaskRepeatX(J){return this.webkitMaskRepeatX=J,this}set webkitMaskRepeatY(J){F(this.name,{webkitMaskRepeatY:J}),this._updated()}get webkitMaskRepeatY(){return X(this.name,"webkitMaskRepeatY")}setWebkitMaskRepeatY(J){return this.webkitMaskRepeatY=J,this}set webkitMaskSize(J){F(this.name,{webkitMaskSize:J}),this._updated()}get webkitMaskSize(){return X(this.name,"webkitMaskSize")}setWebkitMaskSize(J){return this.webkitMaskSize=J,this}set webkitMaxLogicalHeight(J){F(this.name,{webkitMaxLogicalHeight:J}),this._updated()}get webkitMaxLogicalHeight(){return X(this.name,"webkitMaxLogicalHeight")}setWebkitMaxLogicalHeight(J){return this.webkitMaxLogicalHeight=J,this}set webkitMaxLogicalWidth(J){F(this.name,{webkitMaxLogicalWidth:J}),this._updated()}get webkitMaxLogicalWidth(){return X(this.name,"webkitMaxLogicalWidth")}setWebkitMaxLogicalWidth(J){return this.webkitMaxLogicalWidth=J,this}set webkitMinLogicalHeight(J){F(this.name,{webkitMinLogicalHeight:J}),this._updated()}get webkitMinLogicalHeight(){return X(this.name,"webkitMinLogicalHeight")}setWebkitMinLogicalHeight(J){return this.webkitMinLogicalHeight=J,this}set webkitMinLogicalWidth(J){F(this.name,{webkitMinLogicalWidth:J}),this._updated()}get webkitMinLogicalWidth(){return X(this.name,"webkitMinLogicalWidth")}setWebkitMinLogicalWidth(J){return this.webkitMinLogicalWidth=J,this}set webkitOpacity(J){F(this.name,{webkitOpacity:J}),this._updated()}get webkitOpacity(){return X(this.name,"webkitOpacity")}setWebkitOpacity(J){return this.webkitOpacity=J,this}set webkitOrder(J){F(this.name,{webkitOrder:J}),this._updated()}get webkitOrder(){return X(this.name,"webkitOrder")}setWebkitOrder(J){return this.webkitOrder=J,this}set webkitPaddingAfter(J){F(this.name,{webkitPaddingAfter:J}),this._updated()}get webkitPaddingAfter(){return X(this.name,"webkitPaddingAfter")}setWebkitPaddingAfter(J){return this.webkitPaddingAfter=J,this}set webkitPaddingBefore(J){F(this.name,{webkitPaddingBefore:J}),this._updated()}get webkitPaddingBefore(){return X(this.name,"webkitPaddingBefore")}setWebkitPaddingBefore(J){return this.webkitPaddingBefore=J,this}set webkitPaddingEnd(J){F(this.name,{webkitPaddingEnd:J}),this._updated()}get webkitPaddingEnd(){return X(this.name,"webkitPaddingEnd")}setWebkitPaddingEnd(J){return this.webkitPaddingEnd=J,this}set webkitPaddingStart(J){F(this.name,{webkitPaddingStart:J}),this._updated()}get webkitPaddingStart(){return X(this.name,"webkitPaddingStart")}setWebkitPaddingStart(J){return this.webkitPaddingStart=J,this}set webkitPerspective(J){F(this.name,{webkitPerspective:J}),this._updated()}get webkitPerspective(){return X(this.name,"webkitPerspective")}setWebkitPerspective(J){return this.webkitPerspective=J,this}set webkitPerspectiveOrigin(J){F(this.name,{webkitPerspectiveOrigin:J}),this._updated()}get webkitPerspectiveOrigin(){return X(this.name,"webkitPerspectiveOrigin")}setWebkitPerspectiveOrigin(J){return this.webkitPerspectiveOrigin=J,this}set webkitPerspectiveOriginX(J){F(this.name,{webkitPerspectiveOriginX:J}),this._updated()}get webkitPerspectiveOriginX(){return X(this.name,"webkitPerspectiveOriginX")}setWebkitPerspectiveOriginX(J){return this.webkitPerspectiveOriginX=J,this}set webkitPerspectiveOriginY(J){F(this.name,{webkitPerspectiveOriginY:J}),this._updated()}get webkitPerspectiveOriginY(){return X(this.name,"webkitPerspectiveOriginY")}setWebkitPerspectiveOriginY(J){return this.webkitPerspectiveOriginY=J,this}set webkitPrintColorAdjust(J){F(this.name,{webkitPrintColorAdjust:J}),this._updated()}get webkitPrintColorAdjust(){return X(this.name,"webkitPrintColorAdjust")}setWebkitPrintColorAdjust(J){return this.webkitPrintColorAdjust=J,this}set webkitRtlOrdering(J){F(this.name,{webkitRtlOrdering:J}),this._updated()}get webkitRtlOrdering(){return X(this.name,"webkitRtlOrdering")}setWebkitRtlOrdering(J){return this.webkitRtlOrdering=J,this}set webkitRubyPosition(J){F(this.name,{webkitRubyPosition:J}),this._updated()}get webkitRubyPosition(){return X(this.name,"webkitRubyPosition")}setWebkitRubyPosition(J){return this.webkitRubyPosition=J,this}set webkitShapeImageThreshold(J){F(this.name,{webkitShapeImageThreshold:J}),this._updated()}get webkitShapeImageThreshold(){return X(this.name,"webkitShapeImageThreshold")}setWebkitShapeImageThreshold(J){return this.webkitShapeImageThreshold=J,this}set webkitShapeMargin(J){F(this.name,{webkitShapeMargin:J}),this._updated()}get webkitShapeMargin(){return X(this.name,"webkitShapeMargin")}setWebkitShapeMargin(J){return this.webkitShapeMargin=J,this}set webkitShapeOutside(J){F(this.name,{webkitShapeOutside:J}),this._updated()}get webkitShapeOutside(){return X(this.name,"webkitShapeOutside")}setWebkitShapeOutside(J){return this.webkitShapeOutside=J,this}set webkitTapHighlightColor(J){F(this.name,{webkitTapHighlightColor:J}),this._updated()}get webkitTapHighlightColor(){return X(this.name,"webkitTapHighlightColor")}setWebkitTapHighlightColor(J){return this.webkitTapHighlightColor=J,this}set webkitTextCombine(J){F(this.name,{webkitTextCombine:J}),this._updated()}get webkitTextCombine(){return X(this.name,"webkitTextCombine")}setWebkitTextCombine(J){return this.webkitTextCombine=J,this}set webkitTextDecorationsInEffect(J){F(this.name,{webkitTextDecorationsInEffect:J}),this._updated()}get webkitTextDecorationsInEffect(){return X(this.name,"webkitTextDecorationsInEffect")}setWebkitTextDecorationsInEffect(J){return this.webkitTextDecorationsInEffect=J,this}set webkitTextEmphasis(J){F(this.name,{webkitTextEmphasis:J}),this._updated()}get webkitTextEmphasis(){return X(this.name,"webkitTextEmphasis")}setWebkitTextEmphasis(J){return this.webkitTextEmphasis=J,this}set webkitTextEmphasisColor(J){F(this.name,{webkitTextEmphasisColor:J}),this._updated()}get webkitTextEmphasisColor(){return X(this.name,"webkitTextEmphasisColor")}setWebkitTextEmphasisColor(J){return this.webkitTextEmphasisColor=J,this}set webkitTextEmphasisPosition(J){F(this.name,{webkitTextEmphasisPosition:J}),this._updated()}get webkitTextEmphasisPosition(){return X(this.name,"webkitTextEmphasisPosition")}setWebkitTextEmphasisPosition(J){return this.webkitTextEmphasisPosition=J,this}set webkitTextEmphasisStyle(J){F(this.name,{webkitTextEmphasisStyle:J}),this._updated()}get webkitTextEmphasisStyle(){return X(this.name,"webkitTextEmphasisStyle")}setWebkitTextEmphasisStyle(J){return this.webkitTextEmphasisStyle=J,this}set webkitTextFillColor(J){F(this.name,{webkitTextFillColor:J}),this._updated()}get webkitTextFillColor(){return X(this.name,"webkitTextFillColor")}setWebkitTextFillColor(J){return this.webkitTextFillColor=J,this}set webkitTextOrientation(J){F(this.name,{webkitTextOrientation:J}),this._updated()}get webkitTextOrientation(){return X(this.name,"webkitTextOrientation")}setWebkitTextOrientation(J){return this.webkitTextOrientation=J,this}set webkitTextSecurity(J){F(this.name,{webkitTextSecurity:J}),this._updated()}get webkitTextSecurity(){return X(this.name,"webkitTextSecurity")}setWebkitTextSecurity(J){return this.webkitTextSecurity=J,this}set webkitTextSizeAdjust(J){F(this.name,{webkitTextSizeAdjust:J}),this._updated()}get webkitTextSizeAdjust(){return X(this.name,"webkitTextSizeAdjust")}setWebkitTextSizeAdjust(J){return this.webkitTextSizeAdjust=J,this}set webkitTextStroke(J){F(this.name,{webkitTextStroke:J}),this._updated()}get webkitTextStroke(){return X(this.name,"webkitTextStroke")}setWebkitTextStroke(J){return this.webkitTextStroke=J,this}set webkitTextStrokeColor(J){F(this.name,{webkitTextStrokeColor:J}),this._updated()}get webkitTextStrokeColor(){return X(this.name,"webkitTextStrokeColor")}setWebkitTextStrokeColor(J){return this.webkitTextStrokeColor=J,this}set webkitTextStrokeWidth(J){F(this.name,{webkitTextStrokeWidth:J}),this._updated()}get webkitTextStrokeWidth(){return X(this.name,"webkitTextStrokeWidth")}setWebkitTextStrokeWidth(J){return this.webkitTextStrokeWidth=J,this}set webkitTransform(J){F(this.name,{webkitTransform:J}),this._updated()}get webkitTransform(){return X(this.name,"webkitTransform")}setWebkitTransform(J){return this.webkitTransform=J,this}set webkitTransformOrigin(J){F(this.name,{webkitTransformOrigin:J}),this._updated()}get webkitTransformOrigin(){return X(this.name,"webkitTransformOrigin")}setWebkitTransformOrigin(J){return this.webkitTransformOrigin=J,this}set webkitTransformOriginX(J){F(this.name,{webkitTransformOriginX:J}),this._updated()}get webkitTransformOriginX(){return X(this.name,"webkitTransformOriginX")}setWebkitTransformOriginX(J){return this.webkitTransformOriginX=J,this}set webkitTransformOriginY(J){F(this.name,{webkitTransformOriginY:J}),this._updated()}get webkitTransformOriginY(){return X(this.name,"webkitTransformOriginY")}setWebkitTransformOriginY(J){return this.webkitTransformOriginY=J,this}set webkitTransformOriginZ(J){F(this.name,{webkitTransformOriginZ:J}),this._updated()}get webkitTransformOriginZ(){return X(this.name,"webkitTransformOriginZ")}setWebkitTransformOriginZ(J){return this.webkitTransformOriginZ=J,this}set webkitTransformStyle(J){F(this.name,{webkitTransformStyle:J}),this._updated()}get webkitTransformStyle(){return X(this.name,"webkitTransformStyle")}setWebkitTransformStyle(J){return this.webkitTransformStyle=J,this}set webkitTransition(J){F(this.name,{webkitTransition:J}),this._updated()}get webkitTransition(){return X(this.name,"webkitTransition")}setWebkitTransition(J){return this.webkitTransition=J,this}set webkitTransitionDelay(J){F(this.name,{webkitTransitionDelay:J}),this._updated()}get webkitTransitionDelay(){return X(this.name,"webkitTransitionDelay")}setWebkitTransitionDelay(J){return this.webkitTransitionDelay=J,this}set webkitTransitionDuration(J){F(this.name,{webkitTransitionDuration:J}),this._updated()}get webkitTransitionDuration(){return X(this.name,"webkitTransitionDuration")}setWebkitTransitionDuration(J){return this.webkitTransitionDuration=J,this}set webkitTransitionProperty(J){F(this.name,{webkitTransitionProperty:J}),this._updated()}get webkitTransitionProperty(){return X(this.name,"webkitTransitionProperty")}setWebkitTransitionProperty(J){return this.webkitTransitionProperty=J,this}set webkitTransitionTimingFunction(J){F(this.name,{webkitTransitionTimingFunction:J}),this._updated()}get webkitTransitionTimingFunction(){return X(this.name,"webkitTransitionTimingFunction")}setWebkitTransitionTimingFunction(J){return this.webkitTransitionTimingFunction=J,this}set webkitUserDrag(J){F(this.name,{webkitUserDrag:J}),this._updated()}get webkitUserDrag(){return X(this.name,"webkitUserDrag")}setWebkitUserDrag(J){return this.webkitUserDrag=J,this}set webkitUserModify(J){F(this.name,{webkitUserModify:J}),this._updated()}get webkitUserModify(){return X(this.name,"webkitUserModify")}setWebkitUserModify(J){return this.webkitUserModify=J,this}set webkitUserSelect(J){F(this.name,{webkitUserSelect:J}),this._updated()}get webkitUserSelect(){return X(this.name,"webkitUserSelect")}setWebkitUserSelect(J){return this.webkitUserSelect=J,this}set webkitWritingMode(J){F(this.name,{webkitWritingMode:J}),this._updated()}get webkitWritingMode(){return X(this.name,"webkitWritingMode")}setWebkitWritingMode(J){return this.webkitWritingMode=J,this}set whiteSpace(J){F(this.name,{whiteSpace:J}),this._updated()}get whiteSpace(){return X(this.name,"whiteSpace")}setWhiteSpace(J){return this.whiteSpace=J,this}set whiteSpaceCollapse(J){F(this.name,{whiteSpaceCollapse:J}),this._updated()}get whiteSpaceCollapse(){return X(this.name,"whiteSpaceCollapse")}setWhiteSpaceCollapse(J){return this.whiteSpaceCollapse=J,this}set widows(J){F(this.name,{widows:J}),this._updated()}get widows(){return X(this.name,"widows")}setWidows(J){return this.widows=J,this}set width(J){F(this.name,{width:J}),this._updated()}get width(){return X(this.name,"width")}setWidth(J){return this.width=J,this}set willChange(J){F(this.name,{willChange:J}),this._updated()}get willChange(){return X(this.name,"willChange")}setWillChange(J){return this.willChange=J,this}set wordBreak(J){F(this.name,{wordBreak:J}),this._updated()}get wordBreak(){return X(this.name,"wordBreak")}setWordBreak(J){return this.wordBreak=J,this}set wordSpacing(J){F(this.name,{wordSpacing:J}),this._updated()}get wordSpacing(){return X(this.name,"wordSpacing")}setWordSpacing(J){return this.wordSpacing=J,this}set wordWrap(J){F(this.name,{wordWrap:J}),this._updated()}get wordWrap(){return X(this.name,"wordWrap")}setWordWrap(J){return this.wordWrap=J,this}set writingMode(J){F(this.name,{writingMode:J}),this._updated()}get writingMode(){return X(this.name,"writingMode")}setWritingMode(J){return this.writingMode=J,this}set x(J){F(this.name,{x:J}),this._updated()}get x(){return X(this.name,"x")}setX(J){return this.x=J,this}set y(J){F(this.name,{y:J}),this._updated()}get y(){return X(this.name,"y")}setY(J){return this.y=J,this}set zIndex(J){F(this.name,{zIndex:J}),this._updated()}get zIndex(){return X(this.name,"zIndex")}setZIndex(J){return this.zIndex=J,this}set zoom(J){F(this.name,{zoom:J}),this._updated()}get zoom(){return X(this.name,"zoom")}setZoom(J){return this.zoom=J,this}variable(J,$=null){const Q=J.startsWith("--")?J:"--"+J;if($)F(this.name,{[Q]:$}),this._updated();else return X(this.name,Q);return this}_updated(){this.emit("update")}extends(J,$=!0){return rJ.extends(this,J,this.name,$)}static trimRules(J){return k9(J)}static register(J,$){const Q=new rJ(J);return Q.set($),Q}static fromElement(J,$=null){const Q=getComputedStyle(J),Z={};for(let H of Q){const Y=Q.getPropertyValue(H);Z[H]=Y}return rJ.register($,Z)}static fromWidget(J,$=null){return rJ.fromElement(J0(J.id)[0],$)}static from(J,$=null){if(N6(J))return rJ.fromElement(J,$);else if(ZJ(J))return rJ.fromWidget(J,$);else throw new Error("Only HTMLElements and Widgets are allowed for style copying.")}static copy(J,$=null,Q="all",Z=null,H=!0){if(Q=="all"&&J instanceof rJ){let Y=Z||new rJ($||J8(5));if(Y.set(J.all),H)J.on("update",()=>Y.set(J.all));return Y}else{let Y={...X(J)};return rJ.register($||J8(5),Y)}}static extends(J,$,Q=null,Z=!0){let H=new rJ(Q);if(rJ.copy(J,Q,"all",H,Z),!Z)J.on("update",()=>{const Y={...J.all,...$};H.set(Y)});return H.set($),H}static INHERIT="inherit";static AUTO="auto";static FULL="100%";static FULLWIDTH="100vw";static FULLHEIGHT="100dvh";static WRAP="wrap";static NONE="none";static BLOCK="block";static FLEX="flex";static GRID="grid";static NOWRAP="nowrap";static INITIAL="initial";static UNSET="unset";static CLIP="clip";static HIDDEN="hidden";static VISIBLE="visible";static UNIT="16px";static HALFUNIT="8px";static ONEANDHALFUNIT="24px";static TWOUNITS="32px";static THREEUNITS="48px";static FOURUNITS="64px";static FIVEUNITS="80px";static BULKUNIT="100px";static GRADIENT={LEFT:"to left",RIGHT:"to right",TOP:"to top",BOTTOM:"to bottom"};static calc(...J){return"calc("+J.join(" ")+")"}static var(J){return"var(--"+L9.kebabCase(J)+")"}static double(J){return Z7([J,J])}static linearGradient(...J){return`linear-gradient(${J.map(($)=>Z7($)).join(",")})`}static radialGradient(...J){return`radial-gradient(${J.map(($)=>Z7($)).join(",")})`}static deg(J){return J+"deg"}static em(J){return J+"em"}static rem(J){return J+"rem"}static px(J){return J+"px"}static p(J){return J+"%"}}var r7=rJ;var RZ=function(J,$){let Q=$.getStores();for(let Z in Q)J.setStore(Q[Z],Z)};class EZ extends m6{stores={state:{}};constructor(J={}){super();this.setStore(J)}set(J,$,Q="state"){if(!this.stores[Q])this.stores[Q]={};this.stores[Q][J]=$,this.emit("change")}get(J,$="state"){return this.stores[$][J]}getStore(J="state",$=null){let Q=$?this.stores[$]||{}:{};return{...this.stores[J]}}setStore(J,$="state"){if(J)for(var Q in J)this.set(Q,J[Q],$)}getStores(){return this.stores}inherit(J){J.on("change",()=>{RZ(this,J)}),RZ(this,J)}}var R8=EZ;var RJ=(J,$)=>{let Q=[];if(J.forEach((Z)=>{let H=$(Z);if(H)Q.push(H)}),Q=Q.filter((Z)=>!(Z instanceof J6)),Q.length)Q=Q.shift();else Q=J;return Array.isArray(Q)?J:Q};class J6{elements=[];constructor(J,$=null,Q=null){if(J instanceof HTMLElement)this.elements.push(J);else document.querySelectorAll(J).forEach((H)=>this.elements.push(H));if($)this.addClass($);if(Q)this.attr(Q)}at(J){return this.elements.at(J)}push(J){if(J instanceof I0)this.elements.push(J0(J.id));else this.elements.push(J);return this}unshift(J){if(J instanceof I0)this.elements.unshift(J0(J.id));else this.elements.unshift(J);return this}shift(){return this.elements.shift()}pop(){return this.elements.pop()}forEach(J){return this.elements.forEach(J),this}get length(){return this.elements.length}addClass(J){return RJ(this,($)=>s8($,J,"add"))}removeClass(J){return RJ(this,($)=>s8($,J,"remove"))}toggleClass(J){return RJ(this,($)=>s8($,J,"toggle"))}hasClass(J){return this.elements.at(0).classList.contains(J)}attr(J){if(typeof J=="object")RJ(this,($)=>s5($,J));return typeof J=="string"?this.elements.at(0).attributes[J].value:this}getAttr(J){return this.elements.at(0).attributes[J].value}prop(J){if(typeof J=="object")RJ(this,($)=>YQ($,J));return typeof J=="string"?this.elements.at(0)[J]:this}getProp(J){return this.elements.at(0)[J]}html(J){if(J)this.elements.at(0).innerHTML=J;return this.elements.at(0).innerHTML}width(J=null){if(J)RJ(this,($)=>$.style.width=typeof J=="number"?J+"px":J);return J?this:this.at(0).getBoundingClientRect().width}height(J=null){if(J)RJ(this,($)=>$.style.height=typeof J=="number"?J+"px":J);return J?this:this.at(0).getBoundingClientRect().height}text(J){if(typeof J=="string")this.elements.at(0).innerText=J;return this.elements.at(0).innerText}append(J){if(J instanceof J6)J.forEach(($)=>this.at(0).appendChild($));else this.at(0).appendChild(J);return this}appendTo(J){return RJ(this,($)=>J.appendChild($))}prepend(J){if(J instanceof J6)J.forEach(($)=>this.at(0).insertBefore($,this.at(0).firstChild));else this.at(0).insertBefore(J,this.at(0).firstChild);return this}prependTo(J){return RJ(this,($)=>J.insertBefore($,J.firstChild))}css(J,$){return RJ(this,(Q)=>GQ(Q,J,$))}remove(){return RJ(this,(J)=>J.remove())}empty(){return RJ(this,(J)=>KQ(J))}click(){return RJ(this,(J)=>J.click())}focus(){return RJ(this,(J)=>J.focus())}children(){return J6.from(this.at(0).children.length?this.at(0).children:[])}siblings(){return J6.from(UQ(this.at(0)))}parent(){return this.at(0).parentNode?new J6(this.at(0).parentNode):null}closest(J){return new J6(this.at(0).closest(J))}find(J){if(typeof J==="string")return J6.from(Array.from(this.at(0).querySelectorAll(J)));else if(typeof J==="function")return Array.prototype.find.call(this,J);return}on(J,$){return RJ(this,(Q)=>{if(!Q.domEventListeners)Q.domEventListeners=[];Q.domEventListeners.push({event:J,callback:$}),Q.addEventListener(J,$)}),this}is(J){const $=this.elements.at(0);if("matches"in $)return $.matches(J);else if("msMatchesSelector"in $&&typeof $.msMatchesSelector==="function")return $.msMatchesSelector(J);else if("webkitMatchesSelector"in $&&typeof $.msMatchesSelector==="function")return $.webkitMatchesSelector(J);else if("mozMatchesSelector"in $&&typeof $.msMatchesSelector==="function")return $.mozMatchesSelector(J);else{const Q=document.querySelectorAll(J);return Array.from(Q).indexOf($)!==-1}}off(J,$=null){return RJ(this,(Q)=>{if(!Q.domEventListeners)Q.domEventListeners=[];Q.domEventListeners.forEach((Z)=>{if($){if(Z.event===J&&Z.callback==$)Q.removeEventListener(J,$)}else if(Z.event===J)Q.removeEventListener(J,Z.callback)}),Q.domEventListeners=Q.domEventListeners.filter((Z)=>{if($)return Z.event!==J&&Z.callback!==$;else return Z.event!==J})}),this}trigger(J,$){return RJ(this,(Q)=>{Q.dispatchEvent(new Event(J,$))}),this}show(){return RJ(this,(J)=>{J.style.display=""})}hide(){return RJ(this,(J)=>{J.style.display="none"})}toggle(){return RJ(this,(J)=>{J.style.display=J.style.display==="none"?"":"none"})}enable(){return RJ(this,(J)=>{if(N6(J))J.disabled=!1,J.setAttribute("disabled","false")})}disable(){return RJ(this,(J)=>{if(N6(J))J.disabled=!0,J.setAttribute("disabled","true")})}static from(J){let $=new J6(Array.from(J).shift());return Array.from(J).forEach((Q)=>$.push(Q)),$}static create(J,$="",Q={}){return new J6(HQ(J,$,Q))}}var C6=J6;var E8=function(J,$,Q=null){return{prevent:()=>J.preventDefault(),stop:()=>J.stopPropagation(),key:{code:J.keyCode,name:J.code,output:J.key,ctrl:J.ctrlKey,shift:J.shiftKey,alt:J.altKey,meta:J.metaKey},pos:{x:J.clientX,y:J.clientY},offset:{x:J.offsetX,y:J.offsetY},name:$,data:J.data||J.originalEvent?.data,dataTransfer:J.dataTransfer||J.originalEvent?.dataTransfer,target:Q||J.target?I0.from(J.target):null,original:J}},s7=function(J){if(J==="tap")return"click";if(J==="hover")return"mouseenter";if(J==="doubleTap")return"dblclick";if(J==="focusIn")return"focus";if(J==="focusOut")return"blur";return J},OZ=function(J,$,Q){const H=s7("hold"),Y=(G)=>{if(J.is("disabled"))return;$.__holdTimer=setTimeout(()=>{var U=E8(G,"hold");$.call(J,U,{}),J.emit(H,E8({},"hold")),J.is("held",!0)},Q)},K=()=>{setTimeout(()=>J.is("held",!1),10),clearTimeout($.__holdTimer)};return J.__events__.push({event:H,callback:$}),J0(J.id).on("mousedown",Y),J0(J.id).on("mouseup",K),J},BZ=function(J,$){const Q=s7("textinput"),Z=(H)=>{var Y=E8(H,Q);$.call(J,Y,{}),J.emit(Q,E8({},Q))};J0(J.id).on("input",Z),J0(J.id).on("change",Z)};var H7=function(J,$=!1,Q=!1,Z=!1){const H=Array.isArray(J)?J:(J instanceof I0?J.toArray():J.elements).filter((G)=>Z?!0:G.GUIWIDGET).map((G)=>Z&&!G.GUIWIDGET?I0.from(G):G.GUIWIDGET),Y=H.length==1&&$;if(Y)H[0].toArray=()=>HJ.from([H[0]]);else H.toArray=()=>HJ.from([...H]);let K=Y?H[0]:H.length?H:Q?null:H;if(Array.isArray(K)&&!$)return HJ.from(K);return $&&Array.isArray(K)?K[0]:K},u6=function(J,$=null){let Q=J;if($&&Q.find($)instanceof I0)Q=Q.find($);return Q},MZ=["::after","::before","::first-letter","::first-line","::selection","::placeholder","::marker",":hover",":active",":focus",":visited",":link",":target",":first-child",":last-child",":nth-child(n)",":nth-of-type(n)",":not(selector)",":checked"];var IZ=function(J,$,Q){if($=s7($),$=="hold")return OZ(J,Q,J.options.holdDuration);if($=="textinput")return BZ(J,Q);J.__events__.push({event:$,callback:Q}),J0(J.id).on($,(Z,H)=>{if(J.is("disabled"))return;if($=="click"&&J.is("held"))return;var Y=E8(Z,$,J);return Q.call(J,Y,H)})},LZ=function(J,$){if(typeof $._onMount=="function")$._onMount(J);$?.emit("mount",{parent:J})},Y7=[];class kZ{tree=[];_id=null;id=null;accepts=!0;private=!1;sealed=!1;options={};__generated=!1;_onBuild;store=new R8({});__events__=[];set style(J){const $=(Q)=>{if(!J0(this.id).at(0).GUISTYLE)J0(this.id).at(0).GUISTYLE=Q;else J0(this.id).at(0).GUISTYLE={...J0(this.id).at(0).GUISTYLE,...Q};J0(this.id).css(Q)};if(J instanceof r7)J0(this.id).at(0).WIDGET_STYLE=J,$(J.all),J.on("update",()=>{$(J.all)});else if(J)$(J)}get style(){return J0(this.id).at(0).WIDGET_STYLE||J0(this.id).at(0).GUISTYLE||J0(this.id).at(0).style}set padding(J){J0(this.id).css({padding:J})}set margin(J){J0(this.id).css({margin:J})}set name(J){J0(this.id).attr({name:J})}setOptions(J){}_optionChange(J){}addHTMLElement(J,$){let Q=J.GUIWIDGET;const Z=this.add(Q?J.GUIWIDGET:I0.from(J),$);if(!Q)Z.stripElement();return Z}addWidget(J,$){if(this.accepts===!1)return this;if(this.sealed===!0)return this;if(ZJ(J)){const Q=u6(J0(this.id),$);if(J.is("prefix"))Q.prepend(J0(J.id));else Q.append(J0(J.id));LZ(this,J)}return this}add(J,$=null){if(ZJ(J))this.addWidget(J,$);else if(N6(J))this.addHTMLElement(J,$);else if(typeof J=="string")J0(this.id).at(0).append(new window.Text(J));else{const Q=Y7.find((Z)=>Z.testcase(J));if(Q&&typeof Q.additionFunction=="function")Q.additionFunction.call(this,this,J,$);else throw console.log(J," was given"),new Error("Only Widgets or HTMLElements Allowed, The given child was logged.")}return this}addBefore(J,$=null){return J.is("prefix",!0),this.add(J,$),J.is("prefix",!1),this}addAll(...J){let $="";if(typeof J[J.length-1]=="string")$=J.pop();return J.forEach((Z)=>this.add(Z,$)),this}addWrappedElement(J,$,Q,Z=null){const H=u6(J0(this.id),Z);let[Y,K]=$.split(" ");if(!J)return H.find("."+Y).remove(),this;if(!K)K="div";let G;if(J instanceof I0)G=J0(J.id);else if(J instanceof HTMLElement)G=new C6(J);else throw new Error("Unexpected Element: not HTMLElement nor Widget");const U=document.createElement(K);if(U.className=Y,U.append(G.at(0)),Q=="before")H.prepend(U);else H.append(U);if(ZJ(J))LZ(this,J);return this}remove(J=null,$=null){if(this.sealed===!0)return this;if(!J)u6(J0(this.id),$).remove();else if(J=="*")u6(J0(this.id),$)?.empty();else J.remove();return this}is(J,$=null){const Q=":"+J;if($===!0||$===!1){if($===!0)J0(this.id).at(0)[Q]=!0;else delete J0(this.id).at(0)[Q];return!0}if(J=="disabled")return J0(this.id).hasClass("disabled")&&J0(this.id).is(":disabled");else return MZ.indexOf(Q)==-1?J0(this.id).at(0)[Q]:J0(this.id).is(Q)}children(J=null,$=!1){return HJ.from(H7(u6(J0(this.id),J).children(),!1,!1,$))}find(J,$=!1,Q=null){return J=="*"?this.children():H7(u6(J0(this.id),Q).find(J),!0,!1,$)}findAll(J,$=!1,Q=null){return J=="*"?this.children():H7(u6(J0(this.id),Q).find(J),!1,!1,$)}closest(J,$=!1){return H7(J0(this.id).closest(J),!0,!0,$)}parent(J=!1){let $=J0(this.id).parent();if(!$&&!this.private)return I0.from(document.body);if(J)return this.container();if(!$.at(0))return null;while(!$.at(0).GUIWIDGET)$=$.parent();if(!$.at(0).GUIWIDGET)return I0.from($.at(0));return $.at(0).GUIWIDGET}container(){let J=J0(this.id).parent();return I0.from(J.at(0))}attr(J){if(this.sealed===!0)return this;if(typeof J=="object")J0(this.id).attr(J);return typeof J=="string"?J0(this.id).attr(J):this}prop(J){if(this.sealed===!0)return this;if(typeof J=="object")J0(this.id).prop(J);return typeof J=="string"?J0(this.id).prop(J):this}css(J){if(this.sealed===!0)return this;if(typeof J=="object")J0(this.id).css(J);return typeof J=="string"?J0(this.id).css(J):this}styleProp(J){if(typeof J!=="string")return this;return J0(this.id).css(J)}text(J){if(this.sealed===!0)return this;return J0(this.id).text(J),J?this:J0(this.id).text(J)}height(J=null){if(this.sealed===!0)return this;return J0(this.id).height(J),J?this:J0(this.id).height()}width(J=null){if(this.sealed===!0)return this;return J0(this.id).width(J),J?this:J0(this.id).width()}html(J=null){if(this.sealed===!0)return this;return J0(this.id).html(J),J?this:J0(this.id).html()}addClass(J){return J0(this.id).addClass(J),this}hasClass(J){return J0(this.id).hasClass(J)}removeClass(J){return J0(this.id).removeClass(J),this}toggleClass(J){return J0(this.id).toggleClass(J),this}rect(){return J0(this.id).at(0).getBoundingClientRect()}focus(){return J0(this.id).focus(),this}click(){return J0(this.id).click(),this}toHTMLElement(J,$=null){if(this.sealed===!0)return this;return this.toWidget(I0.from(J),$)}toWidget(J,$=null){if(this.sealed===!0)return this;if($=="before")J.addBefore(this);else J.add(this);return this}to(J,$=null){if(ZJ(J))this.toWidget(J,$);else if(N6(J))this.toHTMLElement(J,$);else throw new Error("Only Widgets or HTMLElements Allowed");return this}on(J,$){if(Array.isArray(J))J.forEach((Q)=>IZ(this,Q,$));else IZ(this,J,$);return this}off(J,$=null){if(Array.isArray(J))J.forEach((Q)=>J0(this.id).off(Q,$));else J0(this.id).off(J,$);return this}emit(J,$){return J0(this.id).trigger(J,$),this}hide(J){return J0(this.id).hide(J),this}show(J){return J0(this.id).show(J),this}toggle(J){return J0(this.id).toggle(J),this}disable(){return J0(this.id).disable(),this}enable(){return J0(this.id).enable(),this}raw(){if(this.sealed===!0)return this;return this.private?this:J0(this.id)}toString(){return J0(this.id).at(0).outerHTML}stripElement(){return delete J0(this.id).at(0).GUIWIDGET}toArray(){return[this]}set animation(J){jQ(this,J)}setAnimation(J){this.animation=J}animate(J,$){return m7(this.findAll(J),$),this}getStore(J="state"){return this.store.getStore(J)}setStore(J,$="state"){return this.store.setStore(J,$),this}_onMount(J){if(J instanceof I0){if(this.options.inheritStore)this.store.inherit(J.store)}}clone(J={}){let $={cloneChildren:!0,cloneEvents:!1,...J},Z=J0(this.id).clone(!0,!0),H={};if($.cloneEvents)this.__events__.forEach((G)=>{H[G.event]=G.callback});let Y={...this.options,children:[],...$};if(!Array.isArray(Y.children))Y.children=[];let K=$.cloneChildren=="options"?this.options.children:this.children();if(K&&$.cloneChildren)Y.children=K.map((G)=>G.clone({cloneChildren:$.cloneChildren,cloneEvents:$.cloneEvents})).concat(Y.children);return new(this.constructor||I0)({element:{raw:Z[0]},events:H,...Y,private:this.private})}registerProxy(J,$,Q=!0){try{return new Proxy(J,{set:(Z,H,Y)=>{if(Q)Z[H]=Y;return $(Z,H,Y),!0}})}catch(Z){return J}}proxyCloner(J,$){return this.registerProxy(J,(Q,Z,H)=>{console.log(J,$),$[Z]=H},!1)}set $id(J){this._id=J,J0(this.id).attr({id:J})}static additionRule(J,$){let Q=Y7.find((Z)=>Z.testcase==J);if(!Q){if(typeof J!=="function")return;if(typeof $!=="function")return;Q={testcase:J,additionFunction:$},Y7.push(Q)}return{remove(){Y7.splice(Y7.indexOf(Q),1)}}}}class HJ extends Array{constructor(){super(...arguments)}static from(J){return new HJ(...J)}add(J,$){let Q=new HJ;return this.forEach((Z)=>{if(ZJ(Z))Q.push(Z.add(J,$))}),Q}to(J,$){let Q=new HJ;return this.forEach((Z)=>{if(ZJ(Z))Q.push(Z.to(J,$))}),Q}remove(J,$){let Q=new HJ;return this.forEach((Z)=>{if(ZJ(Z))Q.push(Z.remove(J,$))}),Q}is(J,$){let Q=new HJ;return this.forEach((Z)=>{if(ZJ(Z))Q.push(Z.is(J,$))}),Q}attr(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.attr(J))}),$}disable(){let J=new HJ;return this.forEach(($)=>{if(ZJ($))J.push($.disable())}),J}enable(){let J=new HJ;return this.forEach(($)=>{if(ZJ($))J.push($.enable())}),J}prop(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.prop(J))}),$}addClass(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.addClass(J))}),$}hasClass(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.hasClass(J))}),$}removeClass(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.removeClass(J))}),$}toggleClass(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.toggleClass(J))}),$}text(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.text(J))}),$}height(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.height(J))}),$}width(J){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.width(J))}),$}on(J,$){let Q=new HJ;return this.forEach((Z)=>{if(ZJ(Z))Q.push(Z.on(J,$))}),Q}off(J,$){let Q=new HJ;return this.forEach((Z)=>{if(ZJ(Z))Q.push(Z.off(J,$))}),Q}emit(J,$){let Q=new HJ;return this.forEach((Z)=>{if(ZJ(Z))Q.push(Z.emit(J,$))}),Q}hide(J=null){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.hide(J))}),$}show(J=null){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.show(J))}),$}toggle(J=null){let $=new HJ;return this.forEach((Q)=>{if(ZJ(Q))$.push(Q.toggle(J))}),$}animate(J){let $=this.filter((Q)=>ZJ(Q));return m7($,J),this}}var AZ=kZ;var rK=function(J){return J instanceof I0?"widget":typeof J},G7=function(J){const $=J.split(".");let Q=$[0];const Z=$.slice(1).join(" ").trim();let H=null;if(Q.match("#"))H=Q.split("#")[1],Q=Q.split("#")[0];return{element:Q,classes:Z,id:H}},a7=function(J){if(J instanceof I0)return J;if(typeof J=="string")J={selector:J};let $=G7(J.selector);const Q={...J.options,element:{name:$.element},class:$.classes,attr:J.attributes,children:J.children?J.children.map(a7):[],model:J};if($.id)Q.id=$.id;let Z=new I0(Q);if(J.text)Z.text(J.text);if(J.html)Z.html(J.html);if(J.child)Z.add(a7(J.child));return Z},sK=function(J,$,Q){return{type:typeof J,value:J,option:Q,widget:$}},O8=function(J,$){let Q={type:typeof J,value:J};if(typeof J=="string"&&J.match(/\$\(/))Q.value=J.replace(/\$\(([\w]+)\)/g,$.type=="list"?(Z,H)=>$.value[H]:$.value),Q.type="string";else if(typeof J=="string"&&J.startsWith("$"))Q.value=$.type=="list"?$.value[J.split("$")[1]]:$.value,Q.type=typeof $;if(Q.value instanceof I0)return Q;if(typeof Q.value=="function"){let Z=Q.value($.widget,$.option);return O8(Z,$)}if(typeof Q.value=="object"&&typeof Q.value.selector=="string"){if(Q.value.attributes)for(let Z in Q.value.attributes)Q.value.attributes[Z]=O8(Q.value.attributes[Z],$).value;for(let Z in Q.value)Q.value[Z]=O8(Q.value[Z],$).value;Q.value=a7(Q.value)}return Q},aK=function(J,$,Q){for(let Z in J){let H=typeof J[Z]=="object"?Array.isArray(J[Z])?[...J[Z]]:{...J[Z]}:J[Z],Y=O8(H,Q);if(Z=="empty"&&Y.value==!0)$.remove("*");else if(Z=="append")$.add(Y.value);else if(Z=="prepend")$.addBefore(Y.value);else if(Z=="text")$.text(Y.value);else{let K=$,G=typeof Y.value=="object"&&Y.value.arguments?Y.value.arguments:[Y.value];if(typeof Y.value=="object"&&Y.value.resolve)for(let U in Y.value)Y.value[U]=O8(Y.value[U],Q).value;if(typeof Y.value=="function"&&Z.startsWith("on"))K.on(Z.split("on")[1].toLowerCase(),function(U,...q){Y.value(K,U,...q)});else if(typeof K[Z]=="function")K[Z](...G);else if(Z in K)K[Z]=Y.value}}},A9=function(J,$,Q,Z){for(let H in J){let Y=H=="this"?$:$.find(H);if(Y){let K=Q;aK(J[H],Y,K)}}},PZ=function(J,$,Q){let Z=sK(Q,J,$),H=rK(Z.value);if("any"in $)A9($.any,J,Z,$);if(H in $)A9($[H],J,Z,$);else if("else"in $)A9($.else,J,Z,$)};function TZ(J,$,Q=I0){const Z=class extends Q{options={};constructor(Y=$){let K={};if(J.widgetOptions)for(let U in J.widgetOptions)K[U]=O8(J.widgetOptions[U],{type:"list",value:Y}).value;const G=oJ({...K,element:{name:G7(J.selector).element},class:G7(J.selector).classes,children:J.children?J.children.map(a7):[],_setters:Object.keys(Y)},Y);if(G7(J.selector).id)G.id=G7(J.selector).id;super(G)}};if(typeof J._onMount=="function")Z.prototype._onMount=J._onMount;if(typeof J._optionChange=="function")Z.prototype._optionChange=J._optionChange;function H(Y){for(var K in Y.options){let G=Y.options[K];Z.prototype.__defineSetter__(K,function(U){let q=this;if(G.type=="array"){let W=U;for(let V in G)if(typeof W[V]=="function")W[V](function(D){PZ(q,G[V],D)})}else PZ(q,G,U)})}}return H(J),Z}var eK=function(J,$,Q){$.forEach((Z)=>{let H=Z,Y=Z;if(Z.match(":"))[H,Y]=Z.split(":");if(Q[H])J[Y]=Q[H]})},wZ=function(J,$){let Q;if(!J.__generated)if($.element.raw||$.element.selector)Q=new C6($.element.raw).at(0);else Q=document.createElement($.element.name);const Z=J.__generated?J0(J.id):new C6(Q);if(!J.__generated&&$.element.html)Z.html($.element.html);if(J.__generated&&$.reset)Z.attr({class:"",style:""});if(Z.addClass($.class),$.position){let{type:K,centered:G,top:U,left:q,right:W,bottom:V}=$.position;if(Z.css({position:ZQ(K)?K:null}),G)Z.css({left:"50%",top:"50%",transform:"translate(-50%, -50%)"});else Z.css({top:U,left:q,right:W,bottom:V})}if($.size){const{width:K,height:G}=$.size;Z.css({width:K,height:G})}if(!J.__generated)Object.defineProperty(J,"id",{writable:!1,value:J8()}),Z.at(0).GUIWIDGET=J,x7(Z,J.id),J.store.on("change",()=>{J.emit("state:change",J.store)});if($.store instanceof R8)J.store=$.store;if(typeof $.build=="function"){if(!$.children)$.children=[];let K=$.build($,J);if(Array.isArray(K))$.children.push(K);else $.children.push(K)}if($.children&&$.children.length)$.children.forEach((K)=>{if(K==null)return;if(K instanceof window.Text)K=K.textContent;J.add(K)});if($.private===!0)delete $.private;if($.accepts===!1)J.accepts=!1;else if($.accepts===!0)J.accepts=!0;for(var H in $)if(H.match(/on([A-Z])([a-zA-Z]+)/)){if(!$.events)$.events={};$.events[H.replace("on","").toLowerCase()]=$[H]}if($.events)for(var H in $.events)J.on(H,$.events[H]);if($.props)Z.prop($.props);if($.attr)Z.attr($.attr);J.options=J.registerProxy($,()=>{J.setOptions({})});let Y=[...tK];if($._setters)Y.push(...$._setters);if(eK(J,Y,$),!J.__generated)J.__generated=!0;if(typeof J._onBuild=="function"){let K=J._onBuild();if(K)J.add(K)}};var aV=GJ({}),tK=["padding","margin","name","id:$id","animation","tooltip","style"];class SZ extends AZ{component;options={};constructor(J){super();if(typeof J!=="object")J={element:{name:"div"},class:"widget"};wZ(this,{...GJ({}),...J})}setOptions(J){const $={...this.options,...J};wZ(this,$),this._optionChange($)}static from(J){return new this({element:{raw:new C6(J).at(0)}})}static model(J,$={}){return TZ(J,$,this)}static animateWidgets(J,...$){return HJ.from($).animate(J)}static new(J){return new this(J)}}var I0=SZ;class CZ{value;type;taken=[];changeListeners=[];constructor(J){this.value=J,this.type=typeof J}take(J){this.taken.push(J)}isTakenBy(J){return this.taken.indexOf(J)>-1}unTake(J){this.taken.splice(this.taken.indexOf(J),1)}set(J,$=!1){if(this.value=J,$!==!0)this.notifyChangeListeners(typeof $=="function"?$:!1)}get(){return this.value}onChange(J){return this.changeListeners.push(J),this}offChange(J){return this.changeListeners.splice(this.changeListeners.indexOf(J),1),this}notifyChangeListeners(J=!1){let $=typeof J=="function"?this.changeListeners.indexOf(J):-1;this.changeListeners.forEach((Q,Z)=>{if(Z==$)return;Q(this.value)})}}var jJ=CZ;class fZ extends I0{__controller__callback;__controller;state=new R8({items:[]});constructor(J,$){const Q={...J};super(Q);this.updateList(Q),$(this,this.getStore()),this.on("state:change",(Z)=>{$(this,this.getStore()),this.emit("list:update",{})})}_fromTemplate(J,$){if(!$)$=this.getStore()[this.options.itemsStateName].length||0;let Q=this.options.template.call(this,J,$);if(!(Q instanceof I0))throw new Error("ListBuilder requires for a widget as a template");return Q}updateList(J){if(Array.isArray(J))J={items:J};const $={...this.options,...J};if($.items){const Q=()=>{if($.items instanceof jJ){if(!this.options.multiControllers)this._stripController();if(!$.items.isTakenBy(this))this.setStore({[$.itemsStateName]:$.items.get()}),$.items.take(this),this.__controller=$.items,this.__controller__callback=()=>{this.setStore({[$.itemsStateName]:$.items.get()})},$.items.onChange(this.__controller__callback)}else this.setStore({[$.itemsStateName]:$.items})};if($.items instanceof Promise)$.items.then((Z)=>{$.items=Z,Q()});else Q()}if($.loader)super.add($.loader);if($.loading)$.loader?.show();else $.loader?.hide();if(typeof this._onUpdate=="function")this._onUpdate($);return this}_onUpdate(J){}_stripController(){if(this.__controller__callback&&this.__controller)this.__controller.unTake(this),this.__controller.offChange(this.__controller__callback)}addItem(...J){return this.setStore({[this.options.itemsStateName]:[...J].concat(this.getStore()[this.options.itemsStateName])}),this}removeItems(...J){const $=this.getStore()[this.options.itemsStateName],Q=$.filter((Z,H)=>{let Y=!1;return J.forEach((K)=>{if(H==$.indexOf(K)){Y=!0;return}if(typeof K=="object"?Object.keys(K).every((U)=>Z[U]===K[U]):K==Z){Y=!0;return}}),!Y});if($.length===Q.length)return this;return this.setStore({[this.options.itemsStateName]:Q}),this}hasItem(J){const $=this.getStore()[this.options.itemsStateName];return $.includes(J)||$.find((Q)=>typeof Q=="object"?Object.keys(J).every((Z)=>Q[Z]===J[Z]):Q==J)}onItems(J,$,Q){return this.children(Q).forEach((Z,H)=>{Z.on(J,(Y)=>{$(Y,{child:Z,index:H})})}),this}empty(){return J0(this.id).empty(),this}}var K7=fZ;class P9 extends jJ{constructor(J){super(J)}}class T9 extends I0{__controller;constructor(J){const $={...{element:{name:J.inputType=="textarea"?"textarea":"input"},attr:{type:"text"},class:"input-wrapper",_setters:["inputType","title"]},...J};super($);if($.controller)this.setController($.controller);if($.required)J0(this.id).attr({required:!0})}setController(J){if(this.__controller)throw new Error("Input already is married to a controller.");if(J instanceof P9){const $=(Q)=>this.val()!==Q?this.val(Q):[];this.on("textinput",()=>{J.set(this.val(),$)}),J.onChange($),this.__controller=J,this.val(J.get())}}val(J=null){if(J)J0(this.id).at(0).value=J;return J0(this.id).at(0).value}set inputType(J){if(J instanceof jJ)J.onChange(($)=>{this.inputType=$});J0(this.id).attr({type:J instanceof jJ?J.get():J.toString()})}set title(J){if(J instanceof jJ)J.onChange(($)=>{this.title=$});J0(this.id).attr({placeholder:J instanceof jJ?J.get():J.toString()})}static textArea(J){return new T9({...J,element:{name:"textarea"}})}}var w9=T9;var RD=GJ({element:{name:"input"},class:"checkbox",attr:{type:"checkbox"}});var e7=function(J){return xZ.find(($)=>$.component==J)};function yZ(J,$,Q=!0){let Z=Array.isArray($.args)?$.args:[];if(Q)J.emit("beforeBuildStart",{component:J,props:$});const H=J.build($,...Z);if(Q)J.emit("afterBuild",{component:J,props:$});if(!(H instanceof I0))throw new TypeError("Component.build does not return a widget.");return J._currentWidget=H,J._buildProps=$,H}function jZ(J,$,Q=null){let Z=new J($);if(Z._beforeInit(),J.inheritState!==!1&&Q)Z._inheritState(Q);Z.emit("beforeInit",{component:J,props:$}),Z.initState($),Z.emit("initState",{component:J,props:$});let H=Z.make($);return Z.emit("buildStart",{component:J,props:$,widget:H}),H.component=Z,Z.afterBuild({...$,page:H}),Z.emit("buildEnd",{component:J,props:$,widget:H}),H}var xZ=[],U7;(function(J){J["onBeforeInit"]="beforeInit";J["onInitState"]="initState";J["onBuildStart"]="buildStart";J["onBuildEnd"]="buildEnd";J["onRebuild"]="rebuild"})(U7||(U7={}));class f6 extends m6{_eventEmitMethod="raw";_currentWidget;id;_buildProps;_data={};static layouts=!0;static title=null;static bodyClass=null;static inheritState=!0;static links=[];static scripts=[];static headContent;static updateMode="reinit";styles;static beforeBuildStart;constructor(J){super();xZ.push({component:this}),this._buildProps=J,this.id=J8(12)}get _beforeInit(){return()=>{for(let J in this){if(this[J]instanceof t7)this.ref(J,this[J].value);if(typeof J=="function"&&J in U7)this.on(U7[J],this[J])}}}set _beforeInit(J){}get _inheritState(){return(J)=>{for(let $ in J)if(!($ in f6.prototype))this[$]=J[$];for(let $ in J._data)if($ in this._data)this._data[$]=J._data[$];else this.ref($,J._data[$])}}set _inheritState(J){}initState(J){}build(J){return new I0({})}afterBuild(J){}ref(J,$=null){let Q=this;if(J in f6.prototype)return this;if(J in this){if($==null&&Q[J]instanceof t7)$=Q[J];delete Q[J]}return Object.defineProperty(this,J,{get:()=>this._data[J],set:(Z)=>{this._data[J]=Z,this.update()}}),this._data[J]=$,this}get make(){return(J=null)=>yZ(this,J)}set make(J){}update(){if(this._currentWidget){let J=e7(this),$=!1;if(J){if(J.preventNextUpdate)return J.preventNextUpdate=!1,this;else if(J.preventAllUpdates)return this;if(J.rendererElement&&typeof J.rendererElement=="string"||J.rendererElement instanceof I0)$=J.rendererElement}let Q=$==!1?this._currentWidget:$ instanceof I0?$:this._currentWidget.find($)||this._currentWidget,Z=$?Q:Q.parent(!0);if($)Q.remove("*");else this._currentWidget.remove();let H=this._currentWidget,Y=yZ(this,this._buildProps.wrap?this._buildProps.wrap({page:H}):{...this._buildProps,page:H},!1),K=Y;if(typeof $=="string"&&Y.find($))K=Y.find($).children();else if($)Y.children();if(Z)K.to(Z);this.emit("rebuild",{widget:K,oldWidget:H,component:this,props:this._buildProps})}}preventNextUpdate(){e7(this).preventNextUpdate=!0}preventAllUpdates(J){e7(this).preventAllUpdates=J}rendererWidget(J){e7(this).rendererElement=J}getStyle(J){if(this.styles)return this.styles.get(J);return null}static buildFor(J,$){return jZ(this,$,J)}}class t7{value;constructor(J=null){if(J!=null)this.value=J}}var $U=()=>GJ({element:{name:"div"},class:"text-wrapper",accepts:!1});class S9 extends I0{constructor(J,$=null){const Q=S9.resolveOptions(J,$,$U());if(Q.children)Q.accepts=!0;super(Q);this.render()}_optionChange(J){this.render()}render(){const J=this.options;let $=J.text||"";const Q=(Z)=>{if(typeof Z=="function")Z=J.text(this);else if(Z instanceof jJ)Z.onChange((H)=>{this.options.text=H.toString()}),Z=Z.get().toString();if(this.text(Z),J.children)this.addAll(...J.children)};if($ instanceof Promise)$.then(Q);else Q($)}static resolveOptions(J,$,Q){if(typeof J=="string"||J instanceof jJ||J instanceof Promise)J={text:J};if($)J={...$,...J};return{...Q,...J}}}var VJ=S9;var ZU=function(J,$){if(typeof $=="string")J.attr({href:$});else if($.url)J.attr({href:$.url}).on("click",(Q)=>{Q.preventDefault(),$.click($.url)})},QU=(J=null)=>GJ({element:{name:"a"},class:J?"link "+J:"link",accepts:!1,_setters:["url","target"],icon:null});class bZ extends VJ{constructor(J,$=null){const Q=VJ.resolveOptions(J,$,{...QU()});super(Q)}set url(J){if(J instanceof jJ)J.onChange(($)=>{this.url=$});ZU(J0(this.id),J instanceof jJ?J.get():J)}set target(J){J0(this.id).at(0).target=J}}var C9=bZ;var HU=(J,$)=>GJ({element:{name:$?"a":"button"},class:J?"button "+J:"button",accepts:!1});class hZ extends C9{constructor(J,$=null){const Q=VJ.resolveOptions(J,$,HU(null,$?.url||J?.url));super(Q)}}var f9=hZ;var YU=()=>GJ({element:{name:"img"},class:"image",accepts:!1,_setters:["src"]});class j9 extends I0{constructor(J,$=null){const Q=j9.resolveOptions(J,$,YU());super(Q);if(Q.width)this.width(Q.width);if(Q.height)this.height(Q.height)}static resolveOptions(J,$,Q){if(typeof J=="string"||J instanceof Blob)J={src:J};if($)J={...$,...J};return{...Q,...J}}set src(J){if(this.sealed!==!0){if(typeof J!="string")J=URL.createObjectURL(J);J0(this.id).attr({src:J})}}}var y9=j9;class gZ extends I0{constructor(J){super({...GJ({element:{name:"canvas"},class:"canas"}),...J})}getContext(J){return J0(this.id)[0].getContext(J)}}var x9=gZ;function GU(w,h,pw,ph,vw,vh,query){const cases=[];if(query.match(/\|\||&&/))cases.push(...query.split(/\|\||&&/).map((J)=>({case:J,true:!1})));else cases.push({case:query,true:!1});let overallResult=!0;return cases.forEach((c)=>{let query=c.case.trim(),match=query.match(/(w|h|pw|ph|vw|vh)(\s+|)(==|!=|>|<|>=|<=)(\s+|)([0-9]+)/);if(match)overallResult=overallResult&&eval(`var w = ${w}, h = ${h}, pw = ${pw}, ph = ${ph}, vw = ${vw}, vh = ${vh};\n`+query);else throw new Error(`Invalid LayoutBuilder query: ${query}`)}),overallResult}var vZ=(J,$)=>{if(J.handlingResize)return;J.handlingResize=!0;const Q=J.parent().width(),Z=J.parent().height();if(J.emit("resize",{width:J.width(),height:J.height(),viewportWidth:window.innerWidth,viewportHeight:window.innerHeight}),$.queries){const H=Array.from(J.children()).map((K)=>J0(K.id));H.forEach((K)=>K.remove());const Y=Object.entries($.queries).find(([K,G])=>{return GU(J.width(),J.height(),Q,Z,window.innerWidth,window.innerHeight,K)});if(Y){const[K,G]=Y,U=typeof G=="function"?G(H.map((q)=>q.GUIWIDGET)):G;if(U instanceof I0)J.add(U);else if(Array.isArray(U))U.forEach((q)=>J.add(q))}}J.emit("layout:rebuild",{width:J.width(),height:J.height(),viewportWidth:window.innerWidth,viewportHeight:window.innerHeight}),delete J.handlingResize};class mZ extends I0{constructor(J){const $={...GJ({element:{name:"div"},class:"layout-builder"}),...J};super($)}_onMount(J){super._onMount(J),window.addEventListener("resize",()=>vZ(this,this.options)),vZ(this,this.options)}}var KU=mZ;var nz=GJ({element:{name:"input"},class:"radio",attr:{type:"radio"}});class pZ extends I0{constructor(J){super({...GJ({element:{name:"div"},class:"block"}),...J})}}var MJ=pZ;var cZ=aH(dZ(),1),XU=function(J,$){if($[J.options.itemsStateName]&&Array.isArray($[J.options.itemsStateName])){if(J.options.empty!==!1)J.empty();$[J.options.itemsStateName].forEach((Q,Z)=>{J.appendItem(Q,Z)}),J0(J.id+"-grid")?.reInit()}},qU=()=>GJ({element:{name:"div",html:'<div class="grid-wrapper"></div>'},class:"macy",itemsStateName:"$items_grid",template:()=>new I0,items:[],empty:!0,grid:{trueOrder:!1,waitForImages:!1,useOwnImageLoader:!1,mobileFirst:!0,columns:2,margin:{y:16,x:"1%"}}});class uZ extends K7{constructor(J){const $={...qU(),...J};super($,XU);if($.grid){let Q=cZ.default({container:J0(this.id).at(0),...$.grid});x7(Q,this.id+"-grid")}if($.gridClass)J0(this.id).addClass($.gridClass)}gridClass(J,$){let Q=($?$+"-":"")+"grid-cols-([0-9]+)";if(J)J0(this.id).attr({class:J0(this.id).attr("class").replace(new RegExp(Q,"g"),"")+" "+J});return!J?J0(this.id).attr("class").match(new RegExp(Q))?.[1]:this}_onUpdate(J){if(J.grid&&J0(this.id+"-grid"))J0(this.id+"-grid").reInit()}appendItem(J,$){return this.add(this._fromTemplate(J,$))}onItems(J,$){return this.onItems(J,$)}empty(){return J0(this.id).empty(),this}}var g9=uZ;function FU(J,$={},...Q){let Z;if(typeof J=="string"){if(Z=document.createElement(J),Z.dom=new C6(Z),$&&$.className)(Z.className=$.className)&&delete $.className;if($)for(let[H,Y]of Object.entries($))Z.setAttribute(H,Y);if(Array.isArray(Q[0])&&Q.length==1)Q=Q[0];for(let H of Q)if(typeof H==="string")Z.appendChild(document.createTextNode(H)),H.dom?.trigger("mount",{});else if(H instanceof I0)H.to(Z);else{if(J=="svg")Z.dom?.on("mount",()=>{Z.outerHTML+=" "});Z.appendChild(H),H.dom?.trigger("mount",{})}}else if(typeof J=="function"&&J.prototype instanceof I0){if(!$)$={};if(Q.length==1&&typeof Q[0]=="string")$.text=Q.pop();Z=new J({...$,children:Q})}else if(typeof J=="function"){if(Z=J($,...Q),!ZJ(Z)&&!N6(Z))throw new TypeError("Only HTMLElements and Widgets are allowed inside a jsx nest")}return Z}var X0={createElement:FU};class LJ extends f9{constructor(J){super(oJ({class:"button"},J))}}class $6 extends LJ{constructor(J){super(oJ({class:"mini no-border"},J))}}class U6 extends I0{constructor(J){super(oJ({class:"icon",style:{"--icon-url":`url("${J.icon||""}")`}},J))}setIcon(J){this.options.icon=J,this.style={"--icon-url":`url("${J||""}")`}}}class EJ extends U6{constructor(J){super(oJ({class:"icon sm"},J))}}function q7(J){return J instanceof HTMLImageElement||J instanceof HTMLVideoElement||J instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&J instanceof ImageBitmap||typeof OffscreenCanvas!=="undefined"&&J instanceof OffscreenCanvas}var v9=function(J,$,Q,Z,H){const Y=J.getImageData($,Q,Z,H);for(let K=0;K<Z;K++)for(let G=0;G<H;G++){const U=(K+G*Z)*4;if(Y.data[U+3]!==255)return!0}return!1},J5=function(J){return J/64},lZ=function(J,$,Q){if(Q){if(v9(J,0,0,$,$))return}else if(v9(J,0,0,$,$/2))return;const Z=J5($),H=(Y,K,G,U)=>J.clearRect(Y*Z,K*Z,G*Z,U*Z);if(H(40,0,8,8),H(48,0,8,8),H(32,8,8,8),H(40,8,8,8),H(48,8,8,8),H(56,8,8,8),Q)H(4,32,4,4),H(8,32,4,4),H(0,36,4,12),H(4,36,4,12),H(8,36,4,12),H(12,36,4,12),H(20,32,8,4),H(28,32,8,4),H(16,36,4,12),H(20,36,8,12),H(28,36,4,12),H(32,36,8,12),H(44,32,4,4),H(48,32,4,4),H(40,36,4,12),H(44,36,4,12),H(48,36,4,12),H(52,36,12,12),H(4,48,4,4),H(8,48,4,4),H(0,52,4,12),H(4,52,4,12),H(8,52,4,12),H(12,52,4,12),H(52,48,4,4),H(56,48,4,4),H(48,52,4,12),H(52,52,4,12),H(56,52,4,12),H(60,52,4,12)},WU=function(J,$){J.save(),J.scale(-1,1);const Q=J5($),Z=(H,Y,K,G,U,q)=>J.drawImage(J.canvas,H*Q,Y*Q,K*Q,G*Q,-U*Q,q*Q,-K*Q,G*Q);Z(4,16,4,4,20,48),Z(8,16,4,4,24,48),Z(0,20,4,12,24,52),Z(4,20,4,12,20,52),Z(8,20,4,12,16,52),Z(12,20,4,12,28,52),Z(44,16,4,4,36,48),Z(48,16,4,4,40,48),Z(40,20,4,12,40,52),Z(44,20,4,12,36,52),Z(48,20,4,12,32,52),Z(52,20,4,12,44,52),J.restore()};function nZ(J,$){let Q=!1;if($.width!==$.height)if($.width===2*$.height)Q=!0;else throw new Error(`Bad skin size: ${$.width}x${$.height}`);const Z=J.getContext("2d",{willReadFrequently:!0});if(Q){const H=$.width;J.width=H,J.height=H,Z.clearRect(0,0,H,H),Z.drawImage($,0,0,H,H/2),WU(Z,H),lZ(Z,J.width,!1)}else J.width=$.width,J.height=$.height,Z.clearRect(0,0,$.width,$.height),Z.drawImage($,0,0,J.width,J.height),lZ(Z,J.width,!0)}var VU=function(J){if(J.width===2*J.height)return J.width/64;else if(J.width*17===J.height*22)return J.width/22;else if(J.width*11===J.height*23)return J.width/46;else throw new Error(`Bad cape size: ${J.width}x${J.height}`)};function oZ(J,$){const Q=VU($);J.width=64*Q,J.height=32*Q;const Z=J.getContext("2d",{willReadFrequently:!0});Z.clearRect(0,0,J.width,J.height),Z.drawImage($,0,0,$.width,$.height)}var DU=function(J,$,Q,Z,H){const Y=J.getImageData($,Q,Z,H);for(let K=0;K<Z;K++)for(let G=0;G<H;G++){const U=(K+G*Z)*4;if(!(Y.data[U+0]===0&&Y.data[U+1]===0&&Y.data[U+2]===0&&Y.data[U+3]===255))return!1}return!0},zU=function(J,$,Q,Z,H){const Y=J.getImageData($,Q,Z,H);for(let K=0;K<Z;K++)for(let G=0;G<H;G++){const U=(K+G*Z)*4;if(!(Y.data[U+0]===255&&Y.data[U+1]===255&&Y.data[U+2]===255&&Y.data[U+3]===255))return!1}return!0};function iZ(J){const $=J5(J.width),Q=J.getContext("2d",{willReadFrequently:!0}),Z=(G,U,q,W)=>v9(Q,G*$,U*$,q*$,W*$),H=(G,U,q,W)=>DU(Q,G*$,U*$,q*$,W*$),Y=(G,U,q,W)=>zU(Q,G*$,U*$,q*$,W*$);return Z(50,16,2,4)||Z(54,20,2,12)||Z(42,48,2,4)||Z(46,52,2,12)||H(50,16,2,4)&&H(54,20,2,12)&&H(42,48,2,4)&&H(46,52,2,12)||Y(50,16,2,4)&&Y(54,20,2,12)&&Y(42,48,2,4)&&Y(46,52,2,12)?"slim":"default"}var NU=function(J){if(J.width===J.height*2&&J.height%7===0)return J.height/7;else throw new Error(`Bad ears size: ${J.width}x${J.height}`)};function rZ(J,$){const Q=NU($);J.width=14*Q,J.height=7*Q;const Z=J.getContext("2d",{willReadFrequently:!0});Z.clearRect(0,0,J.width,J.height),Z.drawImage($,0,0,$.width,$.height)}function m9(J,$){if($.width!==$.height&&$.width!==2*$.height)throw new Error(`Bad skin size: ${$.width}x${$.height}`);const Q=J5($.width),Z=14*Q,H=7*Q;J.width=Z,J.height=H;const Y=J.getContext("2d",{willReadFrequently:!0});Y.clearRect(0,0,Z,H),Y.drawImage($,24*Q,0,Z,H,0,0,Z,H)}async function X7(J){const $=document.createElement("img");return new Promise((Q,Z)=>{if($.onload=()=>Q($),$.onerror=Z,$.crossOrigin="anonymous",typeof J==="string")$.src=J;else{if(J.crossOrigin!==void 0)$.crossOrigin=J.crossOrigin;if(J.referrerPolicy!==void 0)$.referrerPolicy=J.referrerPolicy;$.src=J.src}})}var g6=function(){const J=Math.random()*4294967295|0,$=Math.random()*4294967295|0,Q=Math.random()*4294967295|0,Z=Math.random()*4294967295|0;return(gJ[J&255]+gJ[J>>8&255]+gJ[J>>16&255]+gJ[J>>24&255]+"-"+gJ[$&255]+gJ[$>>8&255]+"-"+gJ[$>>16&15|64]+gJ[$>>24&255]+"-"+gJ[Q&63|128]+gJ[Q>>8&255]+"-"+gJ[Q>>16&255]+gJ[Q>>24&255]+gJ[Z&255]+gJ[Z>>8&255]+gJ[Z>>16&255]+gJ[Z>>24&255]).toLowerCase()},mJ=function(J,$,Q){return Math.max($,Math.min(Q,J))},N$=function(J,$){return(J%$+$)%$},_U=function(J,$,Q,Z,H){return Z+(J-$)*(H-Z)/(Q-$)},RU=function(J,$,Q){if(J!==$)return(Q-J)/($-J);else return 0},O7=function(J,$,Q){return(1-Q)*J+Q*$},EU=function(J,$,Q,Z){return O7(J,$,1-Math.exp(-Q*Z))},OU=function(J,$=1){return $-Math.abs(N$(J,$*2)-$)},BU=function(J,$,Q){if(J<=$)return 0;if(J>=Q)return 1;return J=(J-$)/(Q-$),J*J*(3-2*J)},MU=function(J,$,Q){if(J<=$)return 0;if(J>=Q)return 1;return J=(J-$)/(Q-$),J*J*J*(J*(J*6-15)+10)},IU=function(J,$){return J+Math.floor(Math.random()*($-J+1))},LU=function(J,$){return J+Math.random()*($-J)},kU=function(J){return J*(0.5-Math.random())},AU=function(J){if(J!==void 0)sZ=J;let $=sZ+=1831565813;return $=Math.imul($^$>>>15,$|1),$^=$+Math.imul($^$>>>7,$|61),(($^$>>>14)>>>0)/4294967296},PU=function(J){return J*E7},TU=function(J){return J*I7},W$=function(J){return(J&J-1)===0&&J!==0},wU=function(J){return Math.pow(2,Math.ceil(Math.log(J)/Math.LN2))},T5=function(J){return Math.pow(2,Math.floor(Math.log(J)/Math.LN2))},SU=function(J,$,Q,Z,H){const{cos:Y,sin:K}=Math,G=Y(Q/2),U=K(Q/2),q=Y(($+Z)/2),W=K(($+Z)/2),V=Y(($-Z)/2),D=K(($-Z)/2),_=Y((Z-$)/2),R=K((Z-$)/2);switch(H){case"XYX":J.set(G*W,U*V,U*D,G*q);break;case"YZY":J.set(U*D,G*W,U*V,G*q);break;case"ZXZ":J.set(U*V,U*D,G*W,G*q);break;case"XZX":J.set(G*W,U*R,U*_,G*q);break;case"YXY":J.set(U*_,G*W,U*R,G*q);break;case"ZYZ":J.set(U*R,U*_,G*W,G*q);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+H)}},M6=function(J,$){switch($.constructor){case Float32Array:return J;case Uint32Array:return J/4294967295;case Uint16Array:return J/65535;case Uint8Array:return J/255;case Int32Array:return Math.max(J/2147483647,-1);case Int16Array:return Math.max(J/32767,-1);case Int8Array:return Math.max(J/127,-1);default:throw new Error("Invalid component type.")}},UJ=function(J,$){switch($.constructor){case Float32Array:return J;case Uint32Array:return Math.round(J*4294967295);case Uint16Array:return Math.round(J*65535);case Uint8Array:return Math.round(J*255);case Int32Array:return Math.round(J*2147483647);case Int16Array:return Math.round(J*32767);case Int8Array:return Math.round(J*127);default:throw new Error("Invalid component type.")}},l4=function(J){for(let $=J.length-1;$>=0;--$)if(J[$]>=65535)return!0;return!1};var w5=function(J){return document.createElementNS("http://www.w3.org/1999/xhtml",J)},CU=function(){const J=w5("canvas");return J.style.display="block",J},B7=function(J){if(J in aZ)return;aZ[J]=!0,console.warn(J)},d8=function(J){return J<0.04045?J*0.0773993808:Math.pow(J*0.9478672986+0.0521327014,2.4)},d9=function(J){return J<0.0031308?J*12.92:1.055*Math.pow(J,0.41666)-0.055},c9=function(J){if(typeof HTMLImageElement!=="undefined"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&J instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&J instanceof ImageBitmap)return _$.getDataURL(J);else if(J.data)return{data:Array.from(J.data),width:J.width,height:J.height,type:J.data.constructor.name};else return console.warn("THREE.Texture: Unable to serialize Texture."),{}},l9=function(J,$,Q,Z,H){for(let Y=0,K=J.length-3;Y<=K;Y+=3){H8.fromArray(J,Y);const G=H.x*Math.abs(H8.x)+H.y*Math.abs(H8.y)+H.z*Math.abs(H8.z),U=$.dot(H8),q=Q.dot(H8),W=Z.dot(H8);if(Math.max(-Math.max(U,q,W),Math.min(U,q,W))>G)return!1}return!0},J$=function(J,$,Q){if(Q<0)Q+=1;if(Q>1)Q-=1;if(Q<0.16666666666666666)return J+($-J)*6*Q;if(Q<0.5)return $;if(Q<0.6666666666666666)return J+($-J)*6*(0.6666666666666666-Q);return J};var lU=function(J,$,Q,Z,H,Y,K,G){let U;if($.side===1)U=Z.intersectTriangle(K,Y,H,!0,G);else U=Z.intersectTriangle(H,Y,K,$.side===0,G);if(U===null)return null;R5.copy(G),R5.applyMatrix4(J.matrixWorld);const q=Q.ray.origin.distanceTo(R5);if(q<Q.near||q>Q.far)return null;return{distance:q,point:R5.clone(),object:J}},E5=function(J,$,Q,Z,H,Y,K,G,U,q){J.getVertexPosition(G,S8),J.getVertexPosition(U,C8),J.getVertexPosition(q,f8);const W=lU(J,$,Q,Z,S8,C8,f8,_5);if(W){if(H)D5.fromBufferAttribute(H,G),z5.fromBufferAttribute(H,U),N5.fromBufferAttribute(H,q),W.uv=Z6.getInterpolation(_5,S8,C8,f8,D5,z5,N5,new k0);if(Y)D5.fromBufferAttribute(Y,G),z5.fromBufferAttribute(Y,U),N5.fromBufferAttribute(Y,q),W.uv1=Z6.getInterpolation(_5,S8,C8,f8,D5,z5,N5,new k0),W.uv2=W.uv1;if(K){if(X4.fromBufferAttribute(K,G),F4.fromBufferAttribute(K,U),W4.fromBufferAttribute(K,q),W.normal=Z6.getInterpolation(_5,S8,C8,f8,X4,F4,W4,new v),W.normal.dot(Z.direction)>0)W.normal.multiplyScalar(-1)}const V={a:G,b:U,c:q,normal:new v,materialIndex:0};Z6.getNormal(S8,C8,f8,V.normal),W.face=V}return W},c8=function(J){const $={};for(let Q in J){$[Q]={};for(let Z in J[Q]){const H=J[Q][Z];if(H&&(H.isColor||H.isMatrix3||H.isMatrix4||H.isVector2||H.isVector3||H.isVector4||H.isTexture||H.isQuaternion))if(H.isRenderTargetTexture)console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),$[Q][Z]=null;else $[Q][Z]=H.clone();else if(Array.isArray(H))$[Q][Z]=H.slice();else $[Q][Z]=H}}return $},cJ=function(J){const $={};for(let Q=0;Q<J.length;Q++){const Z=c8(J[Q]);for(let H in Z)$[H]=Z[H]}return $},nU=function(J){const $=[];for(let Q=0;Q<J.length;Q++)$.push(J[Q].clone());return $},r4=function(J){if(J.getRenderTarget()===null)return J.outputColorSpace;return XJ.workingColorSpace},t4=function(){let J=null,$=!1,Q=null,Z=null;function H(Y,K){Q(Y,K),Z=J.requestAnimationFrame(H)}return{start:function(){if($===!0)return;if(Q===null)return;Z=J.requestAnimationFrame(H),$=!0},stop:function(){J.cancelAnimationFrame(Z),$=!1},setAnimationLoop:function(Y){Q=Y},setContext:function(Y){J=Y}}},aU=function(J,$){const Q=$.isWebGL2,Z=new WeakMap;function H(q,W){const{array:V,usage:D}=q,_=V.byteLength,R=J.createBuffer();J.bindBuffer(W,R),J.bufferData(W,V,D),q.onUploadCallback();let E;if(V instanceof Float32Array)E=J.FLOAT;else if(V instanceof Uint16Array)if(q.isFloat16BufferAttribute)if(Q)E=J.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else E=J.UNSIGNED_SHORT;else if(V instanceof Int16Array)E=J.SHORT;else if(V instanceof Uint32Array)E=J.UNSIGNED_INT;else if(V instanceof Int32Array)E=J.INT;else if(V instanceof Int8Array)E=J.BYTE;else if(V instanceof Uint8Array)E=J.UNSIGNED_BYTE;else if(V instanceof Uint8ClampedArray)E=J.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+V);return{buffer:R,type:E,bytesPerElement:V.BYTES_PER_ELEMENT,version:q.version,size:_}}function Y(q,W,V){const{array:D,_updateRange:_,updateRanges:R}=W;if(J.bindBuffer(V,q),_.count===-1&&R.length===0)J.bufferSubData(V,0,D);if(R.length!==0){for(let E=0,z=R.length;E<z;E++){const N=R[E];if(Q)J.bufferSubData(V,N.start*D.BYTES_PER_ELEMENT,D,N.start,N.count);else J.bufferSubData(V,N.start*D.BYTES_PER_ELEMENT,D.subarray(N.start,N.start+N.count))}W.clearUpdateRanges()}if(_.count!==-1){if(Q)J.bufferSubData(V,_.offset*D.BYTES_PER_ELEMENT,D,_.offset,_.count);else J.bufferSubData(V,_.offset*D.BYTES_PER_ELEMENT,D.subarray(_.offset,_.offset+_.count));_.count=-1}W.onUploadCallback()}function K(q){if(q.isInterleavedBufferAttribute)q=q.data;return Z.get(q)}function G(q){if(q.isInterleavedBufferAttribute)q=q.data;const W=Z.get(q);if(W)J.deleteBuffer(W.buffer),Z.delete(q)}function U(q,W){if(q.isGLBufferAttribute){const D=Z.get(q);if(!D||D.version<q.version)Z.set(q,{buffer:q.buffer,type:q.type,bytesPerElement:q.elementSize,version:q.version});return}if(q.isInterleavedBufferAttribute)q=q.data;const V=Z.get(q);if(V===void 0)Z.set(q,H(q,W));else if(V.version<q.version){if(V.size!==q.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute\'s array buffer does not match the original size. Resizing buffer attributes is not supported.");Y(V.buffer,q,W),V.version=q.version}}return{get:K,remove:G,update:U}},C1=function(J,$,Q,Z,H,Y,K){const G=new a0(0);let U=Y===!0?0:1,q,W,V=null,D=0,_=null;function R(z,N){let k=!1,M=N.isScene===!0?N.background:null;if(M&&M.isTexture)M=(N.backgroundBlurriness>0?Q:$).get(M);if(M===null)E(G,U);else if(M&&M.isColor)E(M,1),k=!0;const C=J.xr.getEnvironmentBlendMode();if(C==="additive")Z.buffers.color.setClear(0,0,0,1,K);else if(C==="alpha-blend")Z.buffers.color.setClear(0,0,0,0,K);if(J.autoClear||k)J.clear(J.autoClearColor,J.autoClearDepth,J.autoClearStencil);if(M&&(M.isCubeTexture||M.mapping===306)){if(W===void 0)W=new KJ(new OJ(1,1,1),new V6({name:"BackgroundCubeMaterial",uniforms:c8(B6.backgroundCube.uniforms),vertexShader:B6.backgroundCube.vertexShader,fragmentShader:B6.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),W.geometry.deleteAttribute("normal"),W.geometry.deleteAttribute("uv"),W.onBeforeRender=function(m,P,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(W.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),H.update(W);if(W.material.uniforms.envMap.value=M,W.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,W.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,W.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,W.material.toneMapped=XJ.getTransfer(M.colorSpace)!=="srgb",V!==M||D!==M.version||_!==J.toneMapping)W.material.needsUpdate=!0,V=M,D=M.version,_=J.toneMapping;W.layers.enableAll(),z.unshift(W,W.geometry,W.material,0,0,null)}else if(M&&M.isTexture){if(q===void 0)q=new KJ(new P$(2,2),new V6({name:"BackgroundMaterial",uniforms:c8(B6.background.uniforms),vertexShader:B6.background.vertexShader,fragmentShader:B6.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),q.geometry.deleteAttribute("normal"),Object.defineProperty(q.material,"map",{get:function(){return this.uniforms.t2D.value}}),H.update(q);if(q.material.uniforms.t2D.value=M,q.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,q.material.toneMapped=XJ.getTransfer(M.colorSpace)!=="srgb",M.matrixAutoUpdate===!0)M.updateMatrix();if(q.material.uniforms.uvTransform.value.copy(M.matrix),V!==M||D!==M.version||_!==J.toneMapping)q.material.needsUpdate=!0,V=M,D=M.version,_=J.toneMapping;q.layers.enableAll(),z.unshift(q,q.geometry,q.material,0,0,null)}}function E(z,N){z.getRGB(B5,r4(J)),Z.buffers.color.setClear(B5.r,B5.g,B5.b,N,K)}return{getClearColor:function(){return G},setClearColor:function(z,N=1){G.set(z),U=N,E(G,U)},getClearAlpha:function(){return U},setClearAlpha:function(z){U=z,E(G,U)},render:R}},f1=function(J,$,Q,Z){const H=J.getParameter(J.MAX_VERTEX_ATTRIBS),Y=Z.isWebGL2?null:$.get("OES_vertex_array_object"),K=Z.isWebGL2||Y!==null,G={},U=z(null);let q=U,W=!1;function V(y,r,e,Y0,t){let i=!1;if(K){const O=E(Y0,e,r);if(q!==O)q=O,_(q.object);if(i=N(y,Y0,e,t),i)k(y,Y0,e,t)}else{const O=r.wireframe===!0;if(q.geometry!==Y0.id||q.program!==e.id||q.wireframe!==O)q.geometry=Y0.id,q.program=e.id,q.wireframe=O,i=!0}if(t!==null)Q.update(t,J.ELEMENT_ARRAY_BUFFER);if(i||W){if(W=!1,a(y,r,e,Y0),t!==null)J.bindBuffer(J.ELEMENT_ARRAY_BUFFER,Q.get(t).buffer)}}function D(){if(Z.isWebGL2)return J.createVertexArray();return Y.createVertexArrayOES()}function _(y){if(Z.isWebGL2)return J.bindVertexArray(y);return Y.bindVertexArrayOES(y)}function R(y){if(Z.isWebGL2)return J.deleteVertexArray(y);return Y.deleteVertexArrayOES(y)}function E(y,r,e){const Y0=e.wireframe===!0;let t=G[y.id];if(t===void 0)t={},G[y.id]=t;let i=t[r.id];if(i===void 0)i={},t[r.id]=i;let O=i[Y0];if(O===void 0)O=z(D()),i[Y0]=O;return O}function z(y){const r=[],e=[],Y0=[];for(let t=0;t<H;t++)r[t]=0,e[t]=0,Y0[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:r,enabledAttributes:e,attributeDivisors:Y0,object:y,attributes:{},index:null}}function N(y,r,e,Y0){const t=q.attributes,i=r.attributes;let O=0;const x=e.getAttributes();for(let S in x)if(x[S].location>=0){const $0=t[S];let Q0=i[S];if(Q0===void 0){if(S==="instanceMatrix"&&y.instanceMatrix)Q0=y.instanceMatrix;if(S==="instanceColor"&&y.instanceColor)Q0=y.instanceColor}if($0===void 0)return!0;if($0.attribute!==Q0)return!0;if(Q0&&$0.data!==Q0.data)return!0;O++}if(q.attributesNum!==O)return!0;if(q.index!==Y0)return!0;return!1}function k(y,r,e,Y0){const t={},i=r.attributes;let O=0;const x=e.getAttributes();for(let S in x)if(x[S].location>=0){let $0=i[S];if($0===void 0){if(S==="instanceMatrix"&&y.instanceMatrix)$0=y.instanceMatrix;if(S==="instanceColor"&&y.instanceColor)$0=y.instanceColor}const Q0={};if(Q0.attribute=$0,$0&&$0.data)Q0.data=$0.data;t[S]=Q0,O++}q.attributes=t,q.attributesNum=O,q.index=Y0}function M(){const y=q.newAttributes;for(let r=0,e=y.length;r<e;r++)y[r]=0}function C(y){m(y,0)}function m(y,r){const{newAttributes:e,enabledAttributes:Y0,attributeDivisors:t}=q;if(e[y]=1,Y0[y]===0)J.enableVertexAttribArray(y),Y0[y]=1;if(t[y]!==r)(Z.isWebGL2?J:$.get("ANGLE_instanced_arrays"))[Z.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](y,r),t[y]=r}function P(){const{newAttributes:y,enabledAttributes:r}=q;for(let e=0,Y0=r.length;e<Y0;e++)if(r[e]!==y[e])J.disableVertexAttribArray(e),r[e]=0}function b(y,r,e,Y0,t,i,O){if(O===!0)J.vertexAttribIPointer(y,r,e,t,i);else J.vertexAttribPointer(y,r,e,Y0,t,i)}function a(y,r,e,Y0){if(Z.isWebGL2===!1&&(y.isInstancedMesh||Y0.isInstancedBufferGeometry)){if($.get("ANGLE_instanced_arrays")===null)return}M();const t=Y0.attributes,i=e.getAttributes(),O=r.defaultAttributeValues;for(let x in i){const S=i[x];if(S.location>=0){let g=t[x];if(g===void 0){if(x==="instanceMatrix"&&y.instanceMatrix)g=y.instanceMatrix;if(x==="instanceColor"&&y.instanceColor)g=y.instanceColor}if(g!==void 0){const{normalized:$0,itemSize:Q0}=g,V0=Q.get(g);if(V0===void 0)continue;const{buffer:R0,type:b0,bytesPerElement:y0}=V0,e0=Z.isWebGL2===!0&&(b0===J.INT||b0===J.UNSIGNED_INT||g.gpuType===1013);if(g.isInterleavedBufferAttribute){const u=g.data,CJ=u.stride,t0=g.offset;if(u.isInstancedInterleavedBuffer){for(let T0=0;T0<S.locationSize;T0++)m(S.location+T0,u.meshPerAttribute);if(y.isInstancedMesh!==!0&&Y0._maxInstanceCount===void 0)Y0._maxInstanceCount=u.meshPerAttribute*u.count}else for(let T0=0;T0<S.locationSize;T0++)C(S.location+T0);J.bindBuffer(J.ARRAY_BUFFER,R0);for(let T0=0;T0<S.locationSize;T0++)b(S.location+T0,Q0/S.locationSize,b0,$0,CJ*y0,(t0+Q0/S.locationSize*T0)*y0,e0)}else{if(g.isInstancedBufferAttribute){for(let u=0;u<S.locationSize;u++)m(S.location+u,g.meshPerAttribute);if(y.isInstancedMesh!==!0&&Y0._maxInstanceCount===void 0)Y0._maxInstanceCount=g.meshPerAttribute*g.count}else for(let u=0;u<S.locationSize;u++)C(S.location+u);J.bindBuffer(J.ARRAY_BUFFER,R0);for(let u=0;u<S.locationSize;u++)b(S.location+u,Q0/S.locationSize,b0,$0,Q0*y0,Q0/S.locationSize*u*y0,e0)}}else if(O!==void 0){const $0=O[x];if($0!==void 0)switch($0.length){case 2:J.vertexAttrib2fv(S.location,$0);break;case 3:J.vertexAttrib3fv(S.location,$0);break;case 4:J.vertexAttrib4fv(S.location,$0);break;default:J.vertexAttrib1fv(S.location,$0)}}}}P()}function I(){K0();for(let y in G){const r=G[y];for(let e in r){const Y0=r[e];for(let t in Y0)R(Y0[t].object),delete Y0[t];delete r[e]}delete G[y]}}function T(y){if(G[y.id]===void 0)return;const r=G[y.id];for(let e in r){const Y0=r[e];for(let t in Y0)R(Y0[t].object),delete Y0[t];delete r[e]}delete G[y.id]}function p(y){for(let r in G){const e=G[r];if(e[y.id]===void 0)continue;const Y0=e[y.id];for(let t in Y0)R(Y0[t].object),delete Y0[t];delete e[y.id]}}function K0(){if(z0(),W=!0,q===U)return;q=U,_(q.object)}function z0(){U.geometry=null,U.program=null,U.wireframe=!1}return{setup:V,reset:K0,resetDefaultState:z0,dispose:I,releaseStatesOfGeometry:T,releaseStatesOfProgram:p,initAttributes:M,enableAttribute:C,disableUnusedAttributes:P}},j1=function(J,$,Q,Z){const H=Z.isWebGL2;let Y;function K(W){Y=W}function G(W,V){J.drawArrays(Y,W,V),Q.update(V,Y,1)}function U(W,V,D){if(D===0)return;let _,R;if(H)_=J,R="drawArraysInstanced";else if(_=$.get("ANGLE_instanced_arrays"),R="drawArraysInstancedANGLE",_===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[R](Y,W,V,D),Q.update(V,Y,D)}function q(W,V,D){if(D===0)return;const _=$.get("WEBGL_multi_draw");if(_===null)for(let R=0;R<D;R++)this.render(W[R],V[R]);else{_.multiDrawArraysWEBGL(Y,W,0,V,0,D);let R=0;for(let E=0;E<D;E++)R+=V[E];Q.update(R,Y,1)}}this.setMode=K,this.render=G,this.renderInstances=U,this.renderMultiDraw=q},y1=function(J,$,Q){let Z;function H(){if(Z!==void 0)return Z;if($.has("EXT_texture_filter_anisotropic")===!0){const b=$.get("EXT_texture_filter_anisotropic");Z=J.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else Z=0;return Z}function Y(b){if(b==="highp"){if(J.getShaderPrecisionFormat(J.VERTEX_SHADER,J.HIGH_FLOAT).precision>0&&J.getShaderPrecisionFormat(J.FRAGMENT_SHADER,J.HIGH_FLOAT).precision>0)return"highp";b="mediump"}if(b==="mediump"){if(J.getShaderPrecisionFormat(J.VERTEX_SHADER,J.MEDIUM_FLOAT).precision>0&&J.getShaderPrecisionFormat(J.FRAGMENT_SHADER,J.MEDIUM_FLOAT).precision>0)return"mediump"}return"lowp"}const K=typeof WebGL2RenderingContext!=="undefined"&&J.constructor.name==="WebGL2RenderingContext";let G=Q.precision!==void 0?Q.precision:"highp";const U=Y(G);if(U!==G)console.warn("THREE.WebGLRenderer:",G,"not supported, using",U,"instead."),G=U;const q=K||$.has("WEBGL_draw_buffers"),W=Q.logarithmicDepthBuffer===!0,V=J.getParameter(J.MAX_TEXTURE_IMAGE_UNITS),D=J.getParameter(J.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=J.getParameter(J.MAX_TEXTURE_SIZE),R=J.getParameter(J.MAX_CUBE_MAP_TEXTURE_SIZE),E=J.getParameter(J.MAX_VERTEX_ATTRIBS),z=J.getParameter(J.MAX_VERTEX_UNIFORM_VECTORS),N=J.getParameter(J.MAX_VARYING_VECTORS),k=J.getParameter(J.MAX_FRAGMENT_UNIFORM_VECTORS),M=D>0,C=K||$.has("OES_texture_float"),m=M&&C,P=K?J.getParameter(J.MAX_SAMPLES):0;return{isWebGL2:K,drawBuffers:q,getMaxAnisotropy:H,getMaxPrecision:Y,precision:G,logarithmicDepthBuffer:W,maxTextures:V,maxVertexTextures:D,maxTextureSize:_,maxCubemapSize:R,maxAttributes:E,maxVertexUniforms:z,maxVaryings:N,maxFragmentUniforms:k,vertexTextures:M,floatFragmentTextures:C,floatVertexTextures:m,maxSamples:P}},x1=function(J){const $=this;let Q=null,Z=0,H=!1,Y=!1;const K=new O6,G=new s0,U={value:null,needsUpdate:!1};this.uniform=U,this.numPlanes=0,this.numIntersection=0,this.init=function(V,D){const _=V.length!==0||D||Z!==0||H;return H=D,Z=V.length,_},this.beginShadows=function(){Y=!0,W(null)},this.endShadows=function(){Y=!1},this.setGlobalState=function(V,D){Q=W(V,D,0)},this.setState=function(V,D,_){const{clippingPlanes:R,clipIntersection:E,clipShadows:z}=V,N=J.get(V);if(!H||R===null||R.length===0||Y&&!z)if(Y)W(null);else q();else{const k=Y?0:Z,M=k*4;let C=N.clippingState||null;U.value=C,C=W(R,D,M,_);for(let m=0;m!==M;++m)C[m]=Q[m];N.clippingState=C,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=k}};function q(){if(U.value!==Q)U.value=Q,U.needsUpdate=Z>0;$.numPlanes=Z,$.numIntersection=0}function W(V,D,_,R){const E=V!==null?V.length:0;let z=null;if(E!==0){if(z=U.value,R!==!0||z===null){const N=_+E*4,k=D.matrixWorldInverse;if(G.getNormalMatrix(k),z===null||z.length<N)z=new Float32Array(N);for(let M=0,C=_;M!==E;++M,C+=4)K.copy(V[M]).applyMatrix4(k,G),K.normal.toArray(z,C),z[C+3]=K.constant}U.value=z,U.needsUpdate=!0}return $.numPlanes=E,$.numIntersection=0,z}},b1=function(J){let $=new WeakMap;function Q(K,G){if(G===303)K.mapping=301;else if(G===304)K.mapping=302;return K}function Z(K){if(K&&K.isTexture){const G=K.mapping;if(G===303||G===304)if($.has(K)){const U=$.get(K).texture;return Q(U,K.mapping)}else{const U=K.image;if(U&&U.height>0){const q=new a4(U.height/2);return q.fromEquirectangularTexture(J,K),$.set(K,q),K.addEventListener("dispose",H),Q(q.texture,K.mapping)}else return null}}return K}function H(K){const G=K.target;G.removeEventListener("dispose",H);const U=$.get(G);if(U!==void 0)$.delete(G),U.dispose()}function Y(){$=new WeakMap}return{get:Z,dispose:Y}},h1=function(J){const $=[],Q=[],Z=[];let H=J;const Y=J-m8+1+V4.length;for(let K=0;K<Y;K++){const G=Math.pow(2,H);Q.push(G);let U=1/G;if(K>J-m8)U=V4[K-J+m8-1];else if(K===0)U=0;Z.push(U);const q=1/(G-2),W=-q,V=1+q,D=[W,W,V,W,V,V,W,W,V,V,W,V],_=6,R=6,E=3,z=2,N=1,k=new Float32Array(E*R*_),M=new Float32Array(z*R*_),C=new Float32Array(N*R*_);for(let P=0;P<_;P++){const b=P%3*2/3-1,a=P>2?0:-1,I=[b,a,0,b+0.6666666666666666,a,0,b+0.6666666666666666,a+1,0,b,a,0,b+0.6666666666666666,a+1,0,b,a+1,0];k.set(I,E*R*P),M.set(D,z*R*P);const T=[P,P,P,P,P,P];C.set(T,N*R*P)}const m=new k6;if(m.setAttribute("position",new H6(k,E)),m.setAttribute("uv",new H6(M,z)),m.setAttribute("faceIndex",new H6(C,N)),$.push(m),H>m8)H--}return{lodPlanes:$,sizeLods:Q,sigmas:Z}},N4=function(J,$,Q){const Z=new Y6(J,$,Q);return Z.texture.mapping=306,Z.texture.name="PMREM.cubeUv",Z.scissorTest=!0,Z},M5=function(J,$,Q,Z,H){J.viewport.set($,Q,Z,H),J.scissor.set($,Q,Z,H)},g1=function(J,$,Q){const Z=new Float32Array(U8),H=new v(0,1,0);return new V6({name:"SphericalGaussianBlur",defines:{n:U8,CUBEUV_TEXEL_WIDTH:1/$,CUBEUV_TEXEL_HEIGHT:1/Q,CUBEUV_MAX_MIP:`${J}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Z},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:H}},vertexShader:T$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1})},_4=function(){return new V6({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:T$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})},R4=function(){return new V6({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:T$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})},T$=function(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`},v1=function(J){let $=new WeakMap,Q=null;function Z(G){if(G&&G.isTexture){const U=G.mapping,q=U===303||U===304,W=U===301||U===302;if(q||W)if(G.isRenderTargetTexture&&G.needsPMREMUpdate===!0){G.needsPMREMUpdate=!1;let V=$.get(G);if(Q===null)Q=new V$(J);return V=q?Q.fromEquirectangular(G,V):Q.fromCubemap(G,V),$.set(G,V),V.texture}else if($.has(G))return $.get(G).texture;else{const V=G.image;if(q&&V&&V.height>0||W&&V&&H(V)){if(Q===null)Q=new V$(J);const D=q?Q.fromEquirectangular(G):Q.fromCubemap(G);return $.set(G,D),G.addEventListener("dispose",Y),D.texture}else return null}}return G}function H(G){let U=0;const q=6;for(let W=0;W<q;W++)if(G[W]!==void 0)U++;return U===q}function Y(G){const U=G.target;U.removeEventListener("dispose",Y);const q=$.get(U);if(q!==void 0)$.delete(U),q.dispose()}function K(){if($=new WeakMap,Q!==null)Q.dispose(),Q=null}return{get:Z,dispose:K}},m1=function(J){const $={};function Q(Z){if($[Z]!==void 0)return $[Z];let H;switch(Z){case"WEBGL_depth_texture":H=J.getExtension("WEBGL_depth_texture")||J.getExtension("MOZ_WEBGL_depth_texture")||J.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":H=J.getExtension("EXT_texture_filter_anisotropic")||J.getExtension("MOZ_EXT_texture_filter_anisotropic")||J.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":H=J.getExtension("WEBGL_compressed_texture_s3tc")||J.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||J.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":H=J.getExtension("WEBGL_compressed_texture_pvrtc")||J.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:H=J.getExtension(Z)}return $[Z]=H,H}return{has:function(Z){return Q(Z)!==null},init:function(Z){if(Z.isWebGL2)Q("EXT_color_buffer_float"),Q("WEBGL_clip_cull_distance");else Q("WEBGL_depth_texture"),Q("OES_texture_float"),Q("OES_texture_half_float"),Q("OES_texture_half_float_linear"),Q("OES_standard_derivatives"),Q("OES_element_index_uint"),Q("OES_vertex_array_object"),Q("ANGLE_instanced_arrays");Q("OES_texture_float_linear"),Q("EXT_color_buffer_half_float"),Q("WEBGL_multisampled_render_to_texture")},get:function(Z){const H=Q(Z);if(H===null)console.warn("THREE.WebGLRenderer: "+Z+" extension not supported.");return H}}},p1=function(J,$,Q,Z){const H={},Y=new WeakMap;function K(V){const D=V.target;if(D.index!==null)$.remove(D.index);for(let R in D.attributes)$.remove(D.attributes[R]);for(let R in D.morphAttributes){const E=D.morphAttributes[R];for(let z=0,N=E.length;z<N;z++)$.remove(E[z])}D.removeEventListener("dispose",K),delete H[D.id];const _=Y.get(D);if(_)$.remove(_),Y.delete(D);if(Z.releaseStatesOfGeometry(D),D.isInstancedBufferGeometry===!0)delete D._maxInstanceCount;Q.memory.geometries--}function G(V,D){if(H[D.id]===!0)return D;return D.addEventListener("dispose",K),H[D.id]=!0,Q.memory.geometries++,D}function U(V){const D=V.attributes;for(let R in D)$.update(D[R],J.ARRAY_BUFFER);const _=V.morphAttributes;for(let R in _){const E=_[R];for(let z=0,N=E.length;z<N;z++)$.update(E[z],J.ARRAY_BUFFER)}}function q(V){const D=[],_=V.index,R=V.attributes.position;let E=0;if(_!==null){const k=_.array;E=_.version;for(let M=0,C=k.length;M<C;M+=3){const m=k[M+0],P=k[M+1],b=k[M+2];D.push(m,P,P,b,b,m)}}else if(R!==void 0){const k=R.array;E=R.version;for(let M=0,C=k.length/3-1;M<C;M+=3){const m=M+0,P=M+1,b=M+2;D.push(m,P,P,b,b,m)}}else return;const z=new((l4(D))?I$:M$)(D,1);z.version=E;const N=Y.get(V);if(N)$.remove(N);Y.set(V,z)}function W(V){const D=Y.get(V);if(D){const _=V.index;if(_!==null){if(D.version<_.version)q(V)}}else q(V);return Y.get(V)}return{get:G,update:U,getWireframeAttribute:W}},d1=function(J,$,Q,Z){const H=Z.isWebGL2;let Y;function K(_){Y=_}let G,U;function q(_){G=_.type,U=_.bytesPerElement}function W(_,R){J.drawElements(Y,R,G,_*U),Q.update(R,Y,1)}function V(_,R,E){if(E===0)return;let z,N;if(H)z=J,N="drawElementsInstanced";else if(z=$.get("ANGLE_instanced_arrays"),N="drawElementsInstancedANGLE",z===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}z[N](Y,R,G,_*U,E),Q.update(R,Y,E)}function D(_,R,E){if(E===0)return;const z=$.get("WEBGL_multi_draw");if(z===null)for(let N=0;N<E;N++)this.render(_[N]/U,R[N]);else{z.multiDrawElementsWEBGL(Y,R,0,G,_,0,E);let N=0;for(let k=0;k<E;k++)N+=R[k];Q.update(N,Y,1)}}this.setMode=K,this.setIndex=q,this.render=W,this.renderInstances=V,this.renderMultiDraw=D},c1=function(J){const $={geometries:0,textures:0},Q={frame:0,calls:0,triangles:0,points:0,lines:0};function Z(Y,K,G){switch(Q.calls++,K){case J.TRIANGLES:Q.triangles+=G*(Y/3);break;case J.LINES:Q.lines+=G*(Y/2);break;case J.LINE_STRIP:Q.lines+=G*(Y-1);break;case J.LINE_LOOP:Q.lines+=G*Y;break;case J.POINTS:Q.points+=G*Y;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",K);break}}function H(){Q.calls=0,Q.triangles=0,Q.points=0,Q.lines=0}return{memory:$,render:Q,programs:null,autoReset:!0,reset:H,update:Z}},u1=function(J,$){return J[0]-$[0]},l1=function(J,$){return Math.abs($[1])-Math.abs(J[1])},n1=function(J,$,Q){const Z={},H=new Float32Array(8),Y=new WeakMap,K=new DJ,G=[];for(let q=0;q<8;q++)G[q]=[q,0];function U(q,W,V){const D=q.morphTargetInfluences;if($.isWebGL2===!0){const _=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,R=_!==void 0?_.length:0;let E=Y.get(W);if(E===void 0||E.count!==R){let y=function(){K0.dispose(),Y.delete(W),W.removeEventListener("dispose",y)};if(E!==void 0)E.texture.dispose();const k=W.morphAttributes.position!==void 0,M=W.morphAttributes.normal!==void 0,C=W.morphAttributes.color!==void 0,m=W.morphAttributes.position||[],P=W.morphAttributes.normal||[],b=W.morphAttributes.color||[];let a=0;if(k===!0)a=1;if(M===!0)a=2;if(C===!0)a=3;let I=W.attributes.position.count*a,T=1;if(I>$.maxTextureSize)T=Math.ceil(I/$.maxTextureSize),I=$.maxTextureSize;const p=new Float32Array(I*T*4*R),K0=new E$(p,I,T,R);K0.type=1015,K0.needsUpdate=!0;const z0=a*4;for(let r=0;r<R;r++){const e=m[r],Y0=P[r],t=b[r],i=I*T*4*r;for(let O=0;O<e.count;O++){const x=O*z0;if(k===!0)K.fromBufferAttribute(e,O),p[i+x+0]=K.x,p[i+x+1]=K.y,p[i+x+2]=K.z,p[i+x+3]=0;if(M===!0)K.fromBufferAttribute(Y0,O),p[i+x+4]=K.x,p[i+x+5]=K.y,p[i+x+6]=K.z,p[i+x+7]=0;if(C===!0)K.fromBufferAttribute(t,O),p[i+x+8]=K.x,p[i+x+9]=K.y,p[i+x+10]=K.z,p[i+x+11]=t.itemSize===4?K.w:1}}E={count:R,texture:K0,size:new k0(I,T)},Y.set(W,E),W.addEventListener("dispose",y)}let z=0;for(let k=0;k<D.length;k++)z+=D[k];const N=W.morphTargetsRelative?1:1-z;V.getUniforms().setValue(J,"morphTargetBaseInfluence",N),V.getUniforms().setValue(J,"morphTargetInfluences",D),V.getUniforms().setValue(J,"morphTargetsTexture",E.texture,Q),V.getUniforms().setValue(J,"morphTargetsTextureSize",E.size)}else{const _=D===void 0?0:D.length;let R=Z[W.id];if(R===void 0||R.length!==_){R=[];for(let M=0;M<_;M++)R[M]=[M,0];Z[W.id]=R}for(let M=0;M<_;M++){const C=R[M];C[0]=M,C[1]=D[M]}R.sort(l1);for(let M=0;M<8;M++)if(M<_&&R[M][1])G[M][0]=R[M][0],G[M][1]=R[M][1];else G[M][0]=Number.MAX_SAFE_INTEGER,G[M][1]=0;G.sort(u1);const E=W.morphAttributes.position,z=W.morphAttributes.normal;let N=0;for(let M=0;M<8;M++){const C=G[M],m=C[0],P=C[1];if(m!==Number.MAX_SAFE_INTEGER&&P){if(E&&W.getAttribute("morphTarget"+M)!==E[m])W.setAttribute("morphTarget"+M,E[m]);if(z&&W.getAttribute("morphNormal"+M)!==z[m])W.setAttribute("morphNormal"+M,z[m]);H[M]=P,N+=P}else{if(E&&W.hasAttribute("morphTarget"+M)===!0)W.deleteAttribute("morphTarget"+M);if(z&&W.hasAttribute("morphNormal"+M)===!0)W.deleteAttribute("morphNormal"+M);H[M]=0}}const k=W.morphTargetsRelative?1:1-N;V.getUniforms().setValue(J,"morphTargetBaseInfluence",k),V.getUniforms().setValue(J,"morphTargetInfluences",H)}}return{update:U}},o1=function(J,$,Q,Z){let H=new WeakMap;function Y(U){const q=Z.render.frame,W=U.geometry,V=$.get(U,W);if(H.get(V)!==q)$.update(V),H.set(V,q);if(U.isInstancedMesh){if(U.hasEventListener("dispose",G)===!1)U.addEventListener("dispose",G);if(H.get(U)!==q){if(Q.update(U.instanceMatrix,J.ARRAY_BUFFER),U.instanceColor!==null)Q.update(U.instanceColor,J.ARRAY_BUFFER);H.set(U,q)}}if(U.isSkinnedMesh){const D=U.skeleton;if(H.get(D)!==q)D.update(),H.set(D,q)}return V}function K(){H=new WeakMap}function G(U){const q=U.target;if(q.removeEventListener("dispose",G),Q.remove(q.instanceMatrix),q.instanceColor!==null)Q.remove(q.instanceColor)}return{update:Y,dispose:K}},l8=function(J,$,Q){const Z=J[0];if(Z<=0||Z>0)return J;const H=$*Q;let Y=E4[H];if(Y===void 0)Y=new Float32Array(H),E4[H]=Y;if($!==0){Z.toArray(Y,0);for(let K=1,G=0;K!==$;++K)G+=Q,J[K].toArray(Y,G)}return Y},wJ=function(J,$){if(J.length!==$.length)return!1;for(let Q=0,Z=J.length;Q<Z;Q++)if(J[Q]!==$[Q])return!1;return!0},SJ=function(J,$){for(let Q=0,Z=$.length;Q<Z;Q++)J[Q]=$[Q]},h5=function(J,$){let Q=O4[$];if(Q===void 0)Q=new Int32Array($),O4[$]=Q;for(let Z=0;Z!==$;++Z)Q[Z]=J.allocateTextureUnit();return Q},i1=function(J,$){const Q=this.cache;if(Q[0]===$)return;J.uniform1f(this.addr,$),Q[0]=$},r1=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y)J.uniform2f(this.addr,$.x,$.y),Q[0]=$.x,Q[1]=$.y}else{if(wJ(Q,$))return;J.uniform2fv(this.addr,$),SJ(Q,$)}},s1=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y||Q[2]!==$.z)J.uniform3f(this.addr,$.x,$.y,$.z),Q[0]=$.x,Q[1]=$.y,Q[2]=$.z}else if($.r!==void 0){if(Q[0]!==$.r||Q[1]!==$.g||Q[2]!==$.b)J.uniform3f(this.addr,$.r,$.g,$.b),Q[0]=$.r,Q[1]=$.g,Q[2]=$.b}else{if(wJ(Q,$))return;J.uniform3fv(this.addr,$),SJ(Q,$)}},a1=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y||Q[2]!==$.z||Q[3]!==$.w)J.uniform4f(this.addr,$.x,$.y,$.z,$.w),Q[0]=$.x,Q[1]=$.y,Q[2]=$.z,Q[3]=$.w}else{if(wJ(Q,$))return;J.uniform4fv(this.addr,$),SJ(Q,$)}},t1=function(J,$){const Q=this.cache,Z=$.elements;if(Z===void 0){if(wJ(Q,$))return;J.uniformMatrix2fv(this.addr,!1,$),SJ(Q,$)}else{if(wJ(Q,Z))return;I4.set(Z),J.uniformMatrix2fv(this.addr,!1,I4),SJ(Q,Z)}},e1=function(J,$){const Q=this.cache,Z=$.elements;if(Z===void 0){if(wJ(Q,$))return;J.uniformMatrix3fv(this.addr,!1,$),SJ(Q,$)}else{if(wJ(Q,Z))return;M4.set(Z),J.uniformMatrix3fv(this.addr,!1,M4),SJ(Q,Z)}},JF=function(J,$){const Q=this.cache,Z=$.elements;if(Z===void 0){if(wJ(Q,$))return;J.uniformMatrix4fv(this.addr,!1,$),SJ(Q,$)}else{if(wJ(Q,Z))return;B4.set(Z),J.uniformMatrix4fv(this.addr,!1,B4),SJ(Q,Z)}},$F=function(J,$){const Q=this.cache;if(Q[0]===$)return;J.uniform1i(this.addr,$),Q[0]=$},QF=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y)J.uniform2i(this.addr,$.x,$.y),Q[0]=$.x,Q[1]=$.y}else{if(wJ(Q,$))return;J.uniform2iv(this.addr,$),SJ(Q,$)}},ZF=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y||Q[2]!==$.z)J.uniform3i(this.addr,$.x,$.y,$.z),Q[0]=$.x,Q[1]=$.y,Q[2]=$.z}else{if(wJ(Q,$))return;J.uniform3iv(this.addr,$),SJ(Q,$)}},HF=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y||Q[2]!==$.z||Q[3]!==$.w)J.uniform4i(this.addr,$.x,$.y,$.z,$.w),Q[0]=$.x,Q[1]=$.y,Q[2]=$.z,Q[3]=$.w}else{if(wJ(Q,$))return;J.uniform4iv(this.addr,$),SJ(Q,$)}},YF=function(J,$){const Q=this.cache;if(Q[0]===$)return;J.uniform1ui(this.addr,$),Q[0]=$},GF=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y)J.uniform2ui(this.addr,$.x,$.y),Q[0]=$.x,Q[1]=$.y}else{if(wJ(Q,$))return;J.uniform2uiv(this.addr,$),SJ(Q,$)}},KF=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y||Q[2]!==$.z)J.uniform3ui(this.addr,$.x,$.y,$.z),Q[0]=$.x,Q[1]=$.y,Q[2]=$.z}else{if(wJ(Q,$))return;J.uniform3uiv(this.addr,$),SJ(Q,$)}},UF=function(J,$){const Q=this.cache;if($.x!==void 0){if(Q[0]!==$.x||Q[1]!==$.y||Q[2]!==$.z||Q[3]!==$.w)J.uniform4ui(this.addr,$.x,$.y,$.z,$.w),Q[0]=$.x,Q[1]=$.y,Q[2]=$.z,Q[3]=$.w}else{if(wJ(Q,$))return;J.uniform4uiv(this.addr,$),SJ(Q,$)}},qF=function(J,$,Q){const Z=this.cache,H=Q.allocateTextureUnit();if(Z[0]!==H)J.uniform1i(this.addr,H),Z[0]=H;const Y=this.type===J.SAMPLER_2D_SHADOW?JH:e4;Q.setTexture2D($||Y,H)},XF=function(J,$,Q){const Z=this.cache,H=Q.allocateTextureUnit();if(Z[0]!==H)J.uniform1i(this.addr,H),Z[0]=H;Q.setTexture3D($||QH,H)},FF=function(J,$,Q){const Z=this.cache,H=Q.allocateTextureUnit();if(Z[0]!==H)J.uniform1i(this.addr,H),Z[0]=H;Q.setTextureCube($||ZH,H)},WF=function(J,$,Q){const Z=this.cache,H=Q.allocateTextureUnit();if(Z[0]!==H)J.uniform1i(this.addr,H),Z[0]=H;Q.setTexture2DArray($||$H,H)},VF=function(J){switch(J){case 5126:return i1;case 35664:return r1;case 35665:return s1;case 35666:return a1;case 35674:return t1;case 35675:return e1;case 35676:return JF;case 5124:case 35670:return $F;case 35667:case 35671:return QF;case 35668:case 35672:return ZF;case 35669:case 35673:return HF;case 5125:return YF;case 36294:return GF;case 36295:return KF;case 36296:return UF;case 35678:case 36198:case 36298:case 36306:case 35682:return qF;case 35679:case 36299:case 36307:return XF;case 35680:case 36300:case 36308:case 36293:return FF;case 36289:case 36303:case 36311:case 36292:return WF}},DF=function(J,$){J.uniform1fv(this.addr,$)},zF=function(J,$){const Q=l8($,this.size,2);J.uniform2fv(this.addr,Q)},NF=function(J,$){const Q=l8($,this.size,3);J.uniform3fv(this.addr,Q)},_F=function(J,$){const Q=l8($,this.size,4);J.uniform4fv(this.addr,Q)},RF=function(J,$){const Q=l8($,this.size,4);J.uniformMatrix2fv(this.addr,!1,Q)},EF=function(J,$){const Q=l8($,this.size,9);J.uniformMatrix3fv(this.addr,!1,Q)},OF=function(J,$){const Q=l8($,this.size,16);J.uniformMatrix4fv(this.addr,!1,Q)},BF=function(J,$){J.uniform1iv(this.addr,$)},MF=function(J,$){J.uniform2iv(this.addr,$)},IF=function(J,$){J.uniform3iv(this.addr,$)},LF=function(J,$){J.uniform4iv(this.addr,$)},kF=function(J,$){J.uniform1uiv(this.addr,$)},AF=function(J,$){J.uniform2uiv(this.addr,$)},PF=function(J,$){J.uniform3uiv(this.addr,$)},TF=function(J,$){J.uniform4uiv(this.addr,$)},wF=function(J,$,Q){const Z=this.cache,H=$.length,Y=h5(Q,H);if(!wJ(Z,Y))J.uniform1iv(this.addr,Y),SJ(Z,Y);for(let K=0;K!==H;++K)Q.setTexture2D($[K]||e4,Y[K])},SF=function(J,$,Q){const Z=this.cache,H=$.length,Y=h5(Q,H);if(!wJ(Z,Y))J.uniform1iv(this.addr,Y),SJ(Z,Y);for(let K=0;K!==H;++K)Q.setTexture3D($[K]||QH,Y[K])},CF=function(J,$,Q){const Z=this.cache,H=$.length,Y=h5(Q,H);if(!wJ(Z,Y))J.uniform1iv(this.addr,Y),SJ(Z,Y);for(let K=0;K!==H;++K)Q.setTextureCube($[K]||ZH,Y[K])},fF=function(J,$,Q){const Z=this.cache,H=$.length,Y=h5(Q,H);if(!wJ(Z,Y))J.uniform1iv(this.addr,Y),SJ(Z,Y);for(let K=0;K!==H;++K)Q.setTexture2DArray($[K]||$H,Y[K])},jF=function(J){switch(J){case 5126:return DF;case 35664:return zF;case 35665:return NF;case 35666:return _F;case 35674:return RF;case 35675:return EF;case 35676:return OF;case 5124:case 35670:return BF;case 35667:case 35671:return MF;case 35668:case 35672:return IF;case 35669:case 35673:return LF;case 5125:return kF;case 36294:return AF;case 36295:return PF;case 36296:return TF;case 35678:case 36198:case 36298:case 36306:case 35682:return wF;case 35679:case 36299:case 36307:return SF;case 35680:case 36300:case 36308:case 36293:return CF;case 36289:case 36303:case 36311:case 36292:return fF}},L4=function(J,$){J.seq.push($),J.map[$.id]=$},yF=function(J,$,Q){const Z=J.name,H=Z.length;U$.lastIndex=0;while(!0){const Y=U$.exec(Z),K=U$.lastIndex;let G=Y[1];const U=Y[2]==="]",q=Y[3];if(U)G=G|0;if(q===void 0||q==="["&&K+2===H){L4(Q,q===void 0?new HH(G,J,$):new YH(G,J,$));break}else{let V=Q.map[G];if(V===void 0)V=new GH(G),L4(Q,V);Q=V}}},k4=function(J,$,Q){const Z=J.createShader($);return J.shaderSource(Z,Q),J.compileShader(Z),Z},hF=function(J,$){const Q=J.split("\n"),Z=[],H=Math.max($-6,0),Y=Math.min($+6,Q.length);for(let K=H;K<Y;K++){const G=K+1;Z.push(`${G===$?">":" "} ${G}: ${Q[K]}`)}return Z.join("\n")},gF=function(J){const $=XJ.getPrimaries(XJ.workingColorSpace),Q=XJ.getPrimaries(J);let Z;if($===Q)Z="";else if($==="p3"&&Q==="rec709")Z="LinearDisplayP3ToLinearSRGB";else if($==="rec709"&&Q==="p3")Z="LinearSRGBToLinearDisplayP3";switch(J){case"srgb-linear":case"display-p3-linear":return[Z,"LinearTransferOETF"];case"srgb":case"display-p3":return[Z,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",J),[Z,"LinearTransferOETF"]}},A4=function(J,$,Q){const Z=J.getShaderParameter($,J.COMPILE_STATUS),H=J.getShaderInfoLog($).trim();if(Z&&H==="")return"";const Y=/ERROR: 0:(\d+)/.exec(H);if(Y){const K=parseInt(Y[1]);return Q.toUpperCase()+"\n\n"+H+"\n\n"+hF(J.getShaderSource($),K)}else return H},vF=function(J,$){const Q=gF($);return`vec4 ${J}( vec4 value ) { return ${Q[0]}( ${Q[1]}( value ) ); }`},mF=function(J,$){let Q;switch($){case 1:Q="Linear";break;case 2:Q="Reinhard";break;case 3:Q="OptimizedCineon";break;case 4:Q="ACESFilmic";break;case 6:Q="AgX";break;case 5:Q="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",$),Q="Linear"}return"vec3 "+J+"( vec3 color ) { return "+Q+"ToneMapping( color ); }"},pF=function(J){return[J.extensionDerivatives||!!J.envMapCubeUVHeight||J.bumpMap||J.normalMapTangentSpace||J.clearcoatNormalMap||J.flatShading||J.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(J.extensionFragDepth||J.logarithmicDepthBuffer)&&J.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",J.extensionDrawBuffers&&J.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(J.extensionShaderTextureLOD||J.envMap||J.transmission)&&J.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(p8).join("\n")},dF=function(J){return[J.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(p8).join("\n")},cF=function(J){const $=[];for(let Q in J){const Z=J[Q];if(Z===!1)continue;$.push("#define "+Q+" "+Z)}return $.join("\n")},uF=function(J,$){const Q={},Z=J.getProgramParameter($,J.ACTIVE_ATTRIBUTES);for(let H=0;H<Z;H++){const Y=J.getActiveAttrib($,H),K=Y.name;let G=1;if(Y.type===J.FLOAT_MAT2)G=2;if(Y.type===J.FLOAT_MAT3)G=3;if(Y.type===J.FLOAT_MAT4)G=4;Q[K]={type:Y.type,location:J.getAttribLocation($,K),locationSize:G}}return Q},p8=function(J){return J!==""},P4=function(J,$){const Q=$.numSpotLightShadows+$.numSpotLightMaps-$.numSpotLightShadowsWithMaps;return J.replace(/NUM_DIR_LIGHTS/g,$.numDirLights).replace(/NUM_SPOT_LIGHTS/g,$.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,$.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,Q).replace(/NUM_RECT_AREA_LIGHTS/g,$.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,$.numPointLights).replace(/NUM_HEMI_LIGHTS/g,$.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,$.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,$.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,$.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,$.numPointLightShadows)},T4=function(J,$){return J.replace(/NUM_CLIPPING_PLANES/g,$.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,$.numClippingPlanes-$.numClipIntersection)},D$=function(J){return J.replace(lF,oF)},oF=function(J,$){let Q=n0[$];if(Q===void 0){const Z=nF.get($);if(Z!==void 0)Q=n0[Z],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',$,Z);else throw new Error("Can not resolve #include <"+$+">")}return D$(Q)},w4=function(J){return J.replace(iF,rF)},rF=function(J,$,Q,Z){let H="";for(let Y=parseInt($);Y<parseInt(Q);Y++)H+=Z.replace(/\[\s*i\s*\]/g,"[ "+Y+" ]").replace(/UNROLLED_LOOP_INDEX/g,Y);return H},S4=function(J){let $="precision "+J.precision+" float;\nprecision "+J.precision+" int;";if(J.precision==="highp")$+="\n#define HIGH_PRECISION";else if(J.precision==="mediump")$+="\n#define MEDIUM_PRECISION";else if(J.precision==="lowp")$+="\n#define LOW_PRECISION";return $},sF=function(J){let $="SHADOWMAP_TYPE_BASIC";if(J.shadowMapType===1)$="SHADOWMAP_TYPE_PCF";else if(J.shadowMapType===2)$="SHADOWMAP_TYPE_PCF_SOFT";else if(J.shadowMapType===3)$="SHADOWMAP_TYPE_VSM";return $},aF=function(J){let $="ENVMAP_TYPE_CUBE";if(J.envMap)switch(J.envMapMode){case 301:case 302:$="ENVMAP_TYPE_CUBE";break;case 306:$="ENVMAP_TYPE_CUBE_UV";break}return $},tF=function(J){let $="ENVMAP_MODE_REFLECTION";if(J.envMap)switch(J.envMapMode){case 302:$="ENVMAP_MODE_REFRACTION";break}return $},eF=function(J){let $="ENVMAP_BLENDING_NONE";if(J.envMap)switch(J.combine){case 0:$="ENVMAP_BLENDING_MULTIPLY";break;case 1:$="ENVMAP_BLENDING_MIX";break;case 2:$="ENVMAP_BLENDING_ADD";break}return $},JW=function(J){const $=J.envMapCubeUVHeight;if($===null)return null;const Q=Math.log2($)-2,Z=1/$;return{texelWidth:1/(3*Math.max(Math.pow(2,Q),112)),texelHeight:Z,maxMip:Q}},$W=function(J,$,Q,Z){const H=J.getContext(),Y=Q.defines;let{vertexShader:K,fragmentShader:G}=Q;const U=sF(Q),q=aF(Q),W=tF(Q),V=eF(Q),D=JW(Q),_=Q.isWebGL2?"":pF(Q),R=dF(Q),E=cF(Y),z=H.createProgram();let N,k,M=Q.glslVersion?"#version "+Q.glslVersion+"\n":"";if(Q.isRawShaderMaterial){if(N=["#define SHADER_TYPE "+Q.shaderType,"#define SHADER_NAME "+Q.shaderName,E].filter(p8).join("\n"),N.length>0)N+="\n";if(k=[_,"#define SHADER_TYPE "+Q.shaderType,"#define SHADER_NAME "+Q.shaderName,E].filter(p8).join("\n"),k.length>0)k+="\n"}else N=[S4(Q),"#define SHADER_TYPE "+Q.shaderType,"#define SHADER_NAME "+Q.shaderName,E,Q.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",Q.batching?"#define USE_BATCHING":"",Q.instancing?"#define USE_INSTANCING":"",Q.instancingColor?"#define USE_INSTANCING_COLOR":"",Q.useFog&&Q.fog?"#define USE_FOG":"",Q.useFog&&Q.fogExp2?"#define FOG_EXP2":"",Q.map?"#define USE_MAP":"",Q.envMap?"#define USE_ENVMAP":"",Q.envMap?"#define "+W:"",Q.lightMap?"#define USE_LIGHTMAP":"",Q.aoMap?"#define USE_AOMAP":"",Q.bumpMap?"#define USE_BUMPMAP":"",Q.normalMap?"#define USE_NORMALMAP":"",Q.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",Q.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",Q.displacementMap?"#define USE_DISPLACEMENTMAP":"",Q.emissiveMap?"#define USE_EMISSIVEMAP":"",Q.anisotropy?"#define USE_ANISOTROPY":"",Q.anisotropyMap?"#define USE_ANISOTROPYMAP":"",Q.clearcoatMap?"#define USE_CLEARCOATMAP":"",Q.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Q.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Q.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",Q.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",Q.specularMap?"#define USE_SPECULARMAP":"",Q.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",Q.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",Q.roughnessMap?"#define USE_ROUGHNESSMAP":"",Q.metalnessMap?"#define USE_METALNESSMAP":"",Q.alphaMap?"#define USE_ALPHAMAP":"",Q.alphaHash?"#define USE_ALPHAHASH":"",Q.transmission?"#define USE_TRANSMISSION":"",Q.transmissionMap?"#define USE_TRANSMISSIONMAP":"",Q.thicknessMap?"#define USE_THICKNESSMAP":"",Q.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",Q.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",Q.mapUv?"#define MAP_UV "+Q.mapUv:"",Q.alphaMapUv?"#define ALPHAMAP_UV "+Q.alphaMapUv:"",Q.lightMapUv?"#define LIGHTMAP_UV "+Q.lightMapUv:"",Q.aoMapUv?"#define AOMAP_UV "+Q.aoMapUv:"",Q.emissiveMapUv?"#define EMISSIVEMAP_UV "+Q.emissiveMapUv:"",Q.bumpMapUv?"#define BUMPMAP_UV "+Q.bumpMapUv:"",Q.normalMapUv?"#define NORMALMAP_UV "+Q.normalMapUv:"",Q.displacementMapUv?"#define DISPLACEMENTMAP_UV "+Q.displacementMapUv:"",Q.metalnessMapUv?"#define METALNESSMAP_UV "+Q.metalnessMapUv:"",Q.roughnessMapUv?"#define ROUGHNESSMAP_UV "+Q.roughnessMapUv:"",Q.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+Q.anisotropyMapUv:"",Q.clearcoatMapUv?"#define CLEARCOATMAP_UV "+Q.clearcoatMapUv:"",Q.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+Q.clearcoatNormalMapUv:"",Q.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+Q.clearcoatRoughnessMapUv:"",Q.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+Q.iridescenceMapUv:"",Q.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+Q.iridescenceThicknessMapUv:"",Q.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+Q.sheenColorMapUv:"",Q.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+Q.sheenRoughnessMapUv:"",Q.specularMapUv?"#define SPECULARMAP_UV "+Q.specularMapUv:"",Q.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+Q.specularColorMapUv:"",Q.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+Q.specularIntensityMapUv:"",Q.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+Q.transmissionMapUv:"",Q.thicknessMapUv?"#define THICKNESSMAP_UV "+Q.thicknessMapUv:"",Q.vertexTangents&&Q.flatShading===!1?"#define USE_TANGENT":"",Q.vertexColors?"#define USE_COLOR":"",Q.vertexAlphas?"#define USE_COLOR_ALPHA":"",Q.vertexUv1s?"#define USE_UV1":"",Q.vertexUv2s?"#define USE_UV2":"",Q.vertexUv3s?"#define USE_UV3":"",Q.pointsUvs?"#define USE_POINTS_UV":"",Q.flatShading?"#define FLAT_SHADED":"",Q.skinning?"#define USE_SKINNING":"",Q.morphTargets?"#define USE_MORPHTARGETS":"",Q.morphNormals&&Q.flatShading===!1?"#define USE_MORPHNORMALS":"",Q.morphColors&&Q.isWebGL2?"#define USE_MORPHCOLORS":"",Q.morphTargetsCount>0&&Q.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",Q.morphTargetsCount>0&&Q.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+Q.morphTextureStride:"",Q.morphTargetsCount>0&&Q.isWebGL2?"#define MORPHTARGETS_COUNT "+Q.morphTargetsCount:"",Q.doubleSided?"#define DOUBLE_SIDED":"",Q.flipSided?"#define FLIP_SIDED":"",Q.shadowMapEnabled?"#define USE_SHADOWMAP":"",Q.shadowMapEnabled?"#define "+U:"",Q.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Q.numLightProbes>0?"#define USE_LIGHT_PROBES":"",Q.useLegacyLights?"#define LEGACY_LIGHTS":"",Q.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Q.logarithmicDepthBuffer&&Q.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(p8).join("\n"),k=[_,S4(Q),"#define SHADER_TYPE "+Q.shaderType,"#define SHADER_NAME "+Q.shaderName,E,Q.useFog&&Q.fog?"#define USE_FOG":"",Q.useFog&&Q.fogExp2?"#define FOG_EXP2":"",Q.map?"#define USE_MAP":"",Q.matcap?"#define USE_MATCAP":"",Q.envMap?"#define USE_ENVMAP":"",Q.envMap?"#define "+q:"",Q.envMap?"#define "+W:"",Q.envMap?"#define "+V:"",D?"#define CUBEUV_TEXEL_WIDTH "+D.texelWidth:"",D?"#define CUBEUV_TEXEL_HEIGHT "+D.texelHeight:"",D?"#define CUBEUV_MAX_MIP "+D.maxMip+".0":"",Q.lightMap?"#define USE_LIGHTMAP":"",Q.aoMap?"#define USE_AOMAP":"",Q.bumpMap?"#define USE_BUMPMAP":"",Q.normalMap?"#define USE_NORMALMAP":"",Q.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",Q.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",Q.emissiveMap?"#define USE_EMISSIVEMAP":"",Q.anisotropy?"#define USE_ANISOTROPY":"",Q.anisotropyMap?"#define USE_ANISOTROPYMAP":"",Q.clearcoat?"#define USE_CLEARCOAT":"",Q.clearcoatMap?"#define USE_CLEARCOATMAP":"",Q.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",Q.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",Q.iridescence?"#define USE_IRIDESCENCE":"",Q.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",Q.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",Q.specularMap?"#define USE_SPECULARMAP":"",Q.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",Q.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",Q.roughnessMap?"#define USE_ROUGHNESSMAP":"",Q.metalnessMap?"#define USE_METALNESSMAP":"",Q.alphaMap?"#define USE_ALPHAMAP":"",Q.alphaTest?"#define USE_ALPHATEST":"",Q.alphaHash?"#define USE_ALPHAHASH":"",Q.sheen?"#define USE_SHEEN":"",Q.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",Q.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",Q.transmission?"#define USE_TRANSMISSION":"",Q.transmissionMap?"#define USE_TRANSMISSIONMAP":"",Q.thicknessMap?"#define USE_THICKNESSMAP":"",Q.vertexTangents&&Q.flatShading===!1?"#define USE_TANGENT":"",Q.vertexColors||Q.instancingColor?"#define USE_COLOR":"",Q.vertexAlphas?"#define USE_COLOR_ALPHA":"",Q.vertexUv1s?"#define USE_UV1":"",Q.vertexUv2s?"#define USE_UV2":"",Q.vertexUv3s?"#define USE_UV3":"",Q.pointsUvs?"#define USE_POINTS_UV":"",Q.gradientMap?"#define USE_GRADIENTMAP":"",Q.flatShading?"#define FLAT_SHADED":"",Q.doubleSided?"#define DOUBLE_SIDED":"",Q.flipSided?"#define FLIP_SIDED":"",Q.shadowMapEnabled?"#define USE_SHADOWMAP":"",Q.shadowMapEnabled?"#define "+U:"",Q.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Q.numLightProbes>0?"#define USE_LIGHT_PROBES":"",Q.useLegacyLights?"#define LEGACY_LIGHTS":"",Q.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",Q.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Q.logarithmicDepthBuffer&&Q.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",Q.toneMapping!==0?"#define TONE_MAPPING":"",Q.toneMapping!==0?n0.tonemapping_pars_fragment:"",Q.toneMapping!==0?mF("toneMapping",Q.toneMapping):"",Q.dithering?"#define DITHERING":"",Q.opaque?"#define OPAQUE":"",n0.colorspace_pars_fragment,vF("linearToOutputTexel",Q.outputColorSpace),Q.useDepthPacking?"#define DEPTH_PACKING "+Q.depthPacking:"","\n"].filter(p8).join("\n");if(K=D$(K),K=P4(K,Q),K=T4(K,Q),G=D$(G),G=P4(G,Q),G=T4(G,Q),K=w4(K),G=w4(G),Q.isWebGL2&&Q.isRawShaderMaterial!==!0)M="#version 300 es\n",N=[R,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+N,k=["precision mediump sampler2DArray;","#define varying in",Q.glslVersion==="300 es"?"":"layout(location = 0) out highp vec4 pc_fragColor;",Q.glslVersion==="300 es"?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+k;const C=M+N+K,m=M+k+G,P=k4(H,H.VERTEX_SHADER,C),b=k4(H,H.FRAGMENT_SHADER,m);if(H.attachShader(z,P),H.attachShader(z,b),Q.index0AttributeName!==void 0)H.bindAttribLocation(z,0,Q.index0AttributeName);else if(Q.morphTargets===!0)H.bindAttribLocation(z,0,"position");H.linkProgram(z);function a(K0){if(J.debug.checkShaderErrors){const z0=H.getProgramInfoLog(z).trim(),y=H.getShaderInfoLog(P).trim(),r=H.getShaderInfoLog(b).trim();let e=!0,Y0=!0;if(H.getProgramParameter(z,H.LINK_STATUS)===!1)if(e=!1,typeof J.debug.onShaderError==="function")J.debug.onShaderError(H,z,P,b);else{const t=A4(H,P,"vertex"),i=A4(H,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+H.getError()+" - VALIDATE_STATUS "+H.getProgramParameter(z,H.VALIDATE_STATUS)+"\n\nProgram Info Log: "+z0+"\n"+t+"\n"+i)}else if(z0!=="")console.warn("THREE.WebGLProgram: Program Info Log:",z0);else if(y===""||r==="")Y0=!1;if(Y0)K0.diagnostics={runnable:e,programLog:z0,vertexShader:{log:y,prefix:N},fragmentShader:{log:r,prefix:k}}}H.deleteShader(P),H.deleteShader(b),I=new M7(H,z),T=uF(H,z)}let I;this.getUniforms=function(){if(I===void 0)a(this);return I};let T;this.getAttributes=function(){if(T===void 0)a(this);return T};let p=Q.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){if(p===!1)p=H.getProgramParameter(z,xF);return p},this.destroy=function(){Z.releaseStatesOfProgram(this),H.deleteProgram(z),this.program=void 0},this.type=Q.shaderType,this.name=Q.shaderName,this.id=bF++,this.cacheKey=$,this.usedTimes=1,this.program=z,this.vertexShader=P,this.fragmentShader=b,this},ZW=function(J,$,Q,Z,H,Y,K){const G=new O$,U=new KH,q=[],W=H.isWebGL2,V=H.logarithmicDepthBuffer,D=H.vertexTextures;let _=H.precision;const R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(I){if(I===0)return"uv";return`uv${I}`}function z(I,T,p,K0,z0){const y=K0.fog,r=z0.geometry,e=I.isMeshStandardMaterial?K0.environment:null,Y0=(I.isMeshStandardMaterial?Q:$).get(I.envMap||e),t=!!Y0&&Y0.mapping===306?Y0.image.height:null,i=R[I.type];if(I.precision!==null){if(_=H.getMaxPrecision(I.precision),_!==I.precision)console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",_,"instead.")}const O=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,x=O!==void 0?O.length:0;let S=0;if(r.morphAttributes.position!==void 0)S=1;if(r.morphAttributes.normal!==void 0)S=2;if(r.morphAttributes.color!==void 0)S=3;let g,$0,Q0,V0;if(i){const pJ=B6[i];g=pJ.vertexShader,$0=pJ.fragmentShader}else g=I.vertexShader,$0=I.fragmentShader,U.update(I),Q0=U.getVertexShaderID(I),V0=U.getFragmentShaderID(I);const R0=J.getRenderTarget(),b0=z0.isInstancedMesh===!0,y0=z0.isBatchedMesh===!0,e0=!!I.map,u=!!I.matcap,CJ=!!Y0,t0=!!I.aoMap,T0=!!I.lightMap,x0=!!I.bumpMap,p0=!!I.normalMap,o0=!!I.displacementMap,d0=!!I.emissiveMap,A=!!I.metalnessMap,B=!!I.roughnessMap,l=I.anisotropy>0,q0=I.clearcoat>0,Z0=I.iridescence>0,U0=I.sheen>0,j0=I.transmission>0,O0=l&&!!I.anisotropyMap,A0=q0&&!!I.clearcoatMap,w0=q0&&!!I.clearcoatNormalMap,m0=q0&&!!I.clearcoatRoughnessMap,H0=Z0&&!!I.iridescenceMap,f=Z0&&!!I.iridescenceThicknessMap,G0=U0&&!!I.sheenColorMap,M0=U0&&!!I.sheenRoughnessMap,F0=!!I.specularMap,B0=!!I.specularColorMap,g0=!!I.specularIntensityMap,l0=j0&&!!I.transmissionMap,JJ=j0&&!!I.thicknessMap,YJ=!!I.gradientMap,N0=!!I.alphaMap,j=I.alphaTest>0,D0=!!I.alphaHash,E0=!!I.extensions,f0=!!r.attributes.uv1,P0=!!r.attributes.uv2,$J=!!r.attributes.uv3;let WJ=0;if(I.toneMapped){if(R0===null||R0.isXRRenderTarget===!0)WJ=J.toneMapping}return{isWebGL2:W,shaderID:i,shaderType:I.type,shaderName:I.name,vertexShader:g,fragmentShader:$0,defines:I.defines,customVertexShaderID:Q0,customFragmentShaderID:V0,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:_,batching:y0,instancing:b0,instancingColor:b0&&z0.instanceColor!==null,supportsVertexTextures:D,outputColorSpace:R0===null?J.outputColorSpace:R0.isXRRenderTarget===!0?R0.texture.colorSpace:"srgb-linear",map:e0,matcap:u,envMap:CJ,envMapMode:CJ&&Y0.mapping,envMapCubeUVHeight:t,aoMap:t0,lightMap:T0,bumpMap:x0,normalMap:p0,displacementMap:D&&o0,emissiveMap:d0,normalMapObjectSpace:p0&&I.normalMapType===1,normalMapTangentSpace:p0&&I.normalMapType===0,metalnessMap:A,roughnessMap:B,anisotropy:l,anisotropyMap:O0,clearcoat:q0,clearcoatMap:A0,clearcoatNormalMap:w0,clearcoatRoughnessMap:m0,iridescence:Z0,iridescenceMap:H0,iridescenceThicknessMap:f,sheen:U0,sheenColorMap:G0,sheenRoughnessMap:M0,specularMap:F0,specularColorMap:B0,specularIntensityMap:g0,transmission:j0,transmissionMap:l0,thicknessMap:JJ,gradientMap:YJ,opaque:I.transparent===!1&&I.blending===1,alphaMap:N0,alphaTest:j,alphaHash:D0,combine:I.combine,mapUv:e0&&E(I.map.channel),aoMapUv:t0&&E(I.aoMap.channel),lightMapUv:T0&&E(I.lightMap.channel),bumpMapUv:x0&&E(I.bumpMap.channel),normalMapUv:p0&&E(I.normalMap.channel),displacementMapUv:o0&&E(I.displacementMap.channel),emissiveMapUv:d0&&E(I.emissiveMap.channel),metalnessMapUv:A&&E(I.metalnessMap.channel),roughnessMapUv:B&&E(I.roughnessMap.channel),anisotropyMapUv:O0&&E(I.anisotropyMap.channel),clearcoatMapUv:A0&&E(I.clearcoatMap.channel),clearcoatNormalMapUv:w0&&E(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:m0&&E(I.clearcoatRoughnessMap.channel),iridescenceMapUv:H0&&E(I.iridescenceMap.channel),iridescenceThicknessMapUv:f&&E(I.iridescenceThicknessMap.channel),sheenColorMapUv:G0&&E(I.sheenColorMap.channel),sheenRoughnessMapUv:M0&&E(I.sheenRoughnessMap.channel),specularMapUv:F0&&E(I.specularMap.channel),specularColorMapUv:B0&&E(I.specularColorMap.channel),specularIntensityMapUv:g0&&E(I.specularIntensityMap.channel),transmissionMapUv:l0&&E(I.transmissionMap.channel),thicknessMapUv:JJ&&E(I.thicknessMap.channel),alphaMapUv:N0&&E(I.alphaMap.channel),vertexTangents:!!r.attributes.tangent&&(p0||l),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!r.attributes.color&&r.attributes.color.itemSize===4,vertexUv1s:f0,vertexUv2s:P0,vertexUv3s:$J,pointsUvs:z0.isPoints===!0&&!!r.attributes.uv&&(e0||N0),fog:!!y,useFog:I.fog===!0,fogExp2:y&&y.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:V,skinning:z0.isSkinnedMesh===!0,morphTargets:r.morphAttributes.position!==void 0,morphNormals:r.morphAttributes.normal!==void 0,morphColors:r.morphAttributes.color!==void 0,morphTargetsCount:x,morphTextureStride:S,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:K.numPlanes,numClipIntersection:K.numIntersection,dithering:I.dithering,shadowMapEnabled:J.shadowMap.enabled&&p.length>0,shadowMapType:J.shadowMap.type,toneMapping:WJ,useLegacyLights:J._useLegacyLights,decodeVideoTexture:e0&&I.map.isVideoTexture===!0&&XJ.getTransfer(I.map.colorSpace)==="srgb",premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===2,flipSided:I.side===1,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:E0&&I.extensions.derivatives===!0,extensionFragDepth:E0&&I.extensions.fragDepth===!0,extensionDrawBuffers:E0&&I.extensions.drawBuffers===!0,extensionShaderTextureLOD:E0&&I.extensions.shaderTextureLOD===!0,extensionClipCullDistance:E0&&I.extensions.clipCullDistance&&Z.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:W||Z.has("EXT_frag_depth"),rendererExtensionDrawBuffers:W||Z.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:W||Z.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:Z.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()}}function N(I){const T=[];if(I.shaderID)T.push(I.shaderID);else T.push(I.customVertexShaderID),T.push(I.customFragmentShaderID);if(I.defines!==void 0)for(let p in I.defines)T.push(p),T.push(I.defines[p]);if(I.isRawShaderMaterial===!1)k(T,I),M(T,I),T.push(J.outputColorSpace);return T.push(I.customProgramCacheKey),T.join()}function k(I,T){I.push(T.precision),I.push(T.outputColorSpace),I.push(T.envMapMode),I.push(T.envMapCubeUVHeight),I.push(T.mapUv),I.push(T.alphaMapUv),I.push(T.lightMapUv),I.push(T.aoMapUv),I.push(T.bumpMapUv),I.push(T.normalMapUv),I.push(T.displacementMapUv),I.push(T.emissiveMapUv),I.push(T.metalnessMapUv),I.push(T.roughnessMapUv),I.push(T.anisotropyMapUv),I.push(T.clearcoatMapUv),I.push(T.clearcoatNormalMapUv),I.push(T.clearcoatRoughnessMapUv),I.push(T.iridescenceMapUv),I.push(T.iridescenceThicknessMapUv),I.push(T.sheenColorMapUv),I.push(T.sheenRoughnessMapUv),I.push(T.specularMapUv),I.push(T.specularColorMapUv),I.push(T.specularIntensityMapUv),I.push(T.transmissionMapUv),I.push(T.thicknessMapUv),I.push(T.combine),I.push(T.fogExp2),I.push(T.sizeAttenuation),I.push(T.morphTargetsCount),I.push(T.morphAttributeCount),I.push(T.numDirLights),I.push(T.numPointLights),I.push(T.numSpotLights),I.push(T.numSpotLightMaps),I.push(T.numHemiLights),I.push(T.numRectAreaLights),I.push(T.numDirLightShadows),I.push(T.numPointLightShadows),I.push(T.numSpotLightShadows),I.push(T.numSpotLightShadowsWithMaps),I.push(T.numLightProbes),I.push(T.shadowMapType),I.push(T.toneMapping),I.push(T.numClippingPlanes),I.push(T.numClipIntersection),I.push(T.depthPacking)}function M(I,T){if(G.disableAll(),T.isWebGL2)G.enable(0);if(T.supportsVertexTextures)G.enable(1);if(T.instancing)G.enable(2);if(T.instancingColor)G.enable(3);if(T.matcap)G.enable(4);if(T.envMap)G.enable(5);if(T.normalMapObjectSpace)G.enable(6);if(T.normalMapTangentSpace)G.enable(7);if(T.clearcoat)G.enable(8);if(T.iridescence)G.enable(9);if(T.alphaTest)G.enable(10);if(T.vertexColors)G.enable(11);if(T.vertexAlphas)G.enable(12);if(T.vertexUv1s)G.enable(13);if(T.vertexUv2s)G.enable(14);if(T.vertexUv3s)G.enable(15);if(T.vertexTangents)G.enable(16);if(T.anisotropy)G.enable(17);if(T.alphaHash)G.enable(18);if(T.batching)G.enable(19);if(I.push(G.mask),G.disableAll(),T.fog)G.enable(0);if(T.useFog)G.enable(1);if(T.flatShading)G.enable(2);if(T.logarithmicDepthBuffer)G.enable(3);if(T.skinning)G.enable(4);if(T.morphTargets)G.enable(5);if(T.morphNormals)G.enable(6);if(T.morphColors)G.enable(7);if(T.premultipliedAlpha)G.enable(8);if(T.shadowMapEnabled)G.enable(9);if(T.useLegacyLights)G.enable(10);if(T.doubleSided)G.enable(11);if(T.flipSided)G.enable(12);if(T.useDepthPacking)G.enable(13);if(T.dithering)G.enable(14);if(T.transmission)G.enable(15);if(T.sheen)G.enable(16);if(T.opaque)G.enable(17);if(T.pointsUvs)G.enable(18);if(T.decodeVideoTexture)G.enable(19);I.push(G.mask)}function C(I){const T=R[I.type];let p;if(T){const K0=B6[T];p=L$.clone(K0.uniforms)}else p=I.uniforms;return p}function m(I,T){let p;for(let K0=0,z0=q.length;K0<z0;K0++){const y=q[K0];if(y.cacheKey===T){p=y,++p.usedTimes;break}}if(p===void 0)p=new $W(J,T,I,Y),q.push(p);return p}function P(I){if(--I.usedTimes===0){const T=q.indexOf(I);q[T]=q[q.length-1],q.pop(),I.destroy()}}function b(I){U.remove(I)}function a(){U.dispose()}return{getParameters:z,getProgramCacheKey:N,getUniforms:C,acquireProgram:m,releaseProgram:P,releaseShaderCache:b,programs:q,dispose:a}},HW=function(){let J=new WeakMap;function $(Y){let K=J.get(Y);if(K===void 0)K={},J.set(Y,K);return K}function Q(Y){J.delete(Y)}function Z(Y,K,G){J.get(Y)[K]=G}function H(){J=new WeakMap}return{get:$,remove:Q,update:Z,dispose:H}},YW=function(J,$){if(J.groupOrder!==$.groupOrder)return J.groupOrder-$.groupOrder;else if(J.renderOrder!==$.renderOrder)return J.renderOrder-$.renderOrder;else if(J.material.id!==$.material.id)return J.material.id-$.material.id;else if(J.z!==$.z)return J.z-$.z;else return J.id-$.id},C4=function(J,$){if(J.groupOrder!==$.groupOrder)return J.groupOrder-$.groupOrder;else if(J.renderOrder!==$.renderOrder)return J.renderOrder-$.renderOrder;else if(J.z!==$.z)return $.z-J.z;else return J.id-$.id},f4=function(){const J=[];let $=0;const Q=[],Z=[],H=[];function Y(){$=0,Q.length=0,Z.length=0,H.length=0}function K(V,D,_,R,E,z){let N=J[$];if(N===void 0)N={id:V.id,object:V,geometry:D,material:_,groupOrder:R,renderOrder:V.renderOrder,z:E,group:z},J[$]=N;else N.id=V.id,N.object=V,N.geometry=D,N.material=_,N.groupOrder=R,N.renderOrder=V.renderOrder,N.z=E,N.group=z;return $++,N}function G(V,D,_,R,E,z){const N=K(V,D,_,R,E,z);if(_.transmission>0)Z.push(N);else if(_.transparent===!0)H.push(N);else Q.push(N)}function U(V,D,_,R,E,z){const N=K(V,D,_,R,E,z);if(_.transmission>0)Z.unshift(N);else if(_.transparent===!0)H.unshift(N);else Q.unshift(N)}function q(V,D){if(Q.length>1)Q.sort(V||YW);if(Z.length>1)Z.sort(D||C4);if(H.length>1)H.sort(D||C4)}function W(){for(let V=$,D=J.length;V<D;V++){const _=J[V];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:Q,transmissive:Z,transparent:H,init:Y,push:G,unshift:U,finish:W,sort:q}},GW=function(){let J=new WeakMap;function $(Z,H){const Y=J.get(Z);let K;if(Y===void 0)K=new f4,J.set(Z,[K]);else if(H>=Y.length)K=new f4,Y.push(K);else K=Y[H];return K}function Q(){J=new WeakMap}return{get:$,dispose:Q}},KW=function(){const J={};return{get:function($){if(J[$.id]!==void 0)return J[$.id];let Q;switch($.type){case"DirectionalLight":Q={direction:new v,color:new a0};break;case"SpotLight":Q={position:new v,direction:new v,color:new a0,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":Q={position:new v,color:new a0,distance:0,decay:0};break;case"HemisphereLight":Q={direction:new v,skyColor:new a0,groundColor:new a0};break;case"RectAreaLight":Q={color:new a0,position:new v,halfWidth:new v,halfHeight:new v};break}return J[$.id]=Q,Q}}},UW=function(){const J={};return{get:function($){if(J[$.id]!==void 0)return J[$.id];let Q;switch($.type){case"DirectionalLight":Q={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new k0};break;case"SpotLight":Q={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new k0};break;case"PointLight":Q={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new k0,shadowCameraNear:1,shadowCameraFar:1000};break}return J[$.id]=Q,Q}}},XW=function(J,$){return($.castShadow?2:0)-(J.castShadow?2:0)+($.map?1:0)-(J.map?1:0)},FW=function(J,$){const Q=new KW,Z=UW(),H={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let W=0;W<9;W++)H.probe.push(new v);const Y=new v,K=new IJ,G=new IJ;function U(W,V){let D=0,_=0,R=0;for(let K0=0;K0<9;K0++)H.probe[K0].set(0,0,0);let E=0,z=0,N=0,k=0,M=0,C=0,m=0,P=0,b=0,a=0,I=0;W.sort(XW);const T=V===!0?Math.PI:1;for(let K0=0,z0=W.length;K0<z0;K0++){const y=W[K0],r=y.color,e=y.intensity,Y0=y.distance,t=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)D+=r.r*e*T,_+=r.g*e*T,R+=r.b*e*T;else if(y.isLightProbe){for(let i=0;i<9;i++)H.probe[i].addScaledVector(y.sh.coefficients[i],e);I++}else if(y.isDirectionalLight){const i=Q.get(y);if(i.color.copy(y.color).multiplyScalar(y.intensity*T),y.castShadow){const O=y.shadow,x=Z.get(y);x.shadowBias=O.bias,x.shadowNormalBias=O.normalBias,x.shadowRadius=O.radius,x.shadowMapSize=O.mapSize,H.directionalShadow[E]=x,H.directionalShadowMap[E]=t,H.directionalShadowMatrix[E]=y.shadow.matrix,C++}H.directional[E]=i,E++}else if(y.isSpotLight){const i=Q.get(y);i.position.setFromMatrixPosition(y.matrixWorld),i.color.copy(r).multiplyScalar(e*T),i.distance=Y0,i.coneCos=Math.cos(y.angle),i.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),i.decay=y.decay,H.spot[N]=i;const O=y.shadow;if(y.map){if(H.spotLightMap[b]=y.map,b++,O.updateMatrices(y),y.castShadow)a++}if(H.spotLightMatrix[N]=O.matrix,y.castShadow){const x=Z.get(y);x.shadowBias=O.bias,x.shadowNormalBias=O.normalBias,x.shadowRadius=O.radius,x.shadowMapSize=O.mapSize,H.spotShadow[N]=x,H.spotShadowMap[N]=t,P++}N++}else if(y.isRectAreaLight){const i=Q.get(y);i.color.copy(r).multiplyScalar(e),i.halfWidth.set(y.width*0.5,0,0),i.halfHeight.set(0,y.height*0.5,0),H.rectArea[k]=i,k++}else if(y.isPointLight){const i=Q.get(y);if(i.color.copy(y.color).multiplyScalar(y.intensity*T),i.distance=y.distance,i.decay=y.decay,y.castShadow){const O=y.shadow,x=Z.get(y);x.shadowBias=O.bias,x.shadowNormalBias=O.normalBias,x.shadowRadius=O.radius,x.shadowMapSize=O.mapSize,x.shadowCameraNear=O.camera.near,x.shadowCameraFar=O.camera.far,H.pointShadow[z]=x,H.pointShadowMap[z]=t,H.pointShadowMatrix[z]=y.shadow.matrix,m++}H.point[z]=i,z++}else if(y.isHemisphereLight){const i=Q.get(y);i.skyColor.copy(y.color).multiplyScalar(e*T),i.groundColor.copy(y.groundColor).multiplyScalar(e*T),H.hemi[M]=i,M++}}if(k>0)if($.isWebGL2)if(J.has("OES_texture_float_linear")===!0)H.rectAreaLTC1=_0.LTC_FLOAT_1,H.rectAreaLTC2=_0.LTC_FLOAT_2;else H.rectAreaLTC1=_0.LTC_HALF_1,H.rectAreaLTC2=_0.LTC_HALF_2;else if(J.has("OES_texture_float_linear")===!0)H.rectAreaLTC1=_0.LTC_FLOAT_1,H.rectAreaLTC2=_0.LTC_FLOAT_2;else if(J.has("OES_texture_half_float_linear")===!0)H.rectAreaLTC1=_0.LTC_HALF_1,H.rectAreaLTC2=_0.LTC_HALF_2;else console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.");H.ambient[0]=D,H.ambient[1]=_,H.ambient[2]=R;const p=H.hash;if(p.directionalLength!==E||p.pointLength!==z||p.spotLength!==N||p.rectAreaLength!==k||p.hemiLength!==M||p.numDirectionalShadows!==C||p.numPointShadows!==m||p.numSpotShadows!==P||p.numSpotMaps!==b||p.numLightProbes!==I)H.directional.length=E,H.spot.length=N,H.rectArea.length=k,H.point.length=z,H.hemi.length=M,H.directionalShadow.length=C,H.directionalShadowMap.length=C,H.pointShadow.length=m,H.pointShadowMap.length=m,H.spotShadow.length=P,H.spotShadowMap.length=P,H.directionalShadowMatrix.length=C,H.pointShadowMatrix.length=m,H.spotLightMatrix.length=P+b-a,H.spotLightMap.length=b,H.numSpotLightShadowsWithMaps=a,H.numLightProbes=I,p.directionalLength=E,p.pointLength=z,p.spotLength=N,p.rectAreaLength=k,p.hemiLength=M,p.numDirectionalShadows=C,p.numPointShadows=m,p.numSpotShadows=P,p.numSpotMaps=b,p.numLightProbes=I,H.version=qW++}function q(W,V){let D=0,_=0,R=0,E=0,z=0;const N=V.matrixWorldInverse;for(let k=0,M=W.length;k<M;k++){const C=W[k];if(C.isDirectionalLight){const m=H.directional[D];m.direction.setFromMatrixPosition(C.matrixWorld),Y.setFromMatrixPosition(C.target.matrixWorld),m.direction.sub(Y),m.direction.transformDirection(N),D++}else if(C.isSpotLight){const m=H.spot[R];m.position.setFromMatrixPosition(C.matrixWorld),m.position.applyMatrix4(N),m.direction.setFromMatrixPosition(C.matrixWorld),Y.setFromMatrixPosition(C.target.matrixWorld),m.direction.sub(Y),m.direction.transformDirection(N),R++}else if(C.isRectAreaLight){const m=H.rectArea[E];m.position.setFromMatrixPosition(C.matrixWorld),m.position.applyMatrix4(N),G.identity(),K.copy(C.matrixWorld),K.premultiply(N),G.extractRotation(K),m.halfWidth.set(C.width*0.5,0,0),m.halfHeight.set(0,C.height*0.5,0),m.halfWidth.applyMatrix4(G),m.halfHeight.applyMatrix4(G),E++}else if(C.isPointLight){const m=H.point[_];m.position.setFromMatrixPosition(C.matrixWorld),m.position.applyMatrix4(N),_++}else if(C.isHemisphereLight){const m=H.hemi[z];m.direction.setFromMatrixPosition(C.matrixWorld),m.direction.transformDirection(N),z++}}}return{setup:U,setupView:q,state:H}},j4=function(J,$){const Q=new FW(J,$),Z=[],H=[];function Y(){Z.length=0,H.length=0}function K(V){Z.push(V)}function G(V){H.push(V)}function U(V){Q.setup(Z,V)}function q(V){Q.setupView(Z,V)}return{init:Y,state:{lightsArray:Z,shadowsArray:H,lights:Q},setupLights:U,setupLightsView:q,pushLight:K,pushShadow:G}},WW=function(J,$){let Q=new WeakMap;function Z(Y,K=0){const G=Q.get(Y);let U;if(G===void 0)U=new j4(J,$),Q.set(Y,[U]);else if(K>=G.length)U=new j4(J,$),G.push(U);else U=G[K];return U}function H(){Q=new WeakMap}return{get:Z,dispose:H}},zW=function(J,$,Q){let Z=new x5;const H=new k0,Y=new k0,K=new DJ,G=new qH({depthPacking:3201}),U=new XH,q={},W=Q.maxTextureSize,V={[0]:1,[1]:0,[2]:2},D=new V6({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new k0},radius:{value:4}},vertexShader:VW,fragmentShader:DW}),_=D.clone();_.defines.HORIZONTAL_PASS=1;const R=new k6;R.setAttribute("position",new H6(new Float32Array([-1,-1,0.5,3,-1,0.5,-1,3,0.5]),3));const E=new KJ(R,D),z=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let N=this.type;this.render=function(P,b,a){if(z.enabled===!1)return;if(z.autoUpdate===!1&&z.needsUpdate===!1)return;if(P.length===0)return;const I=J.getRenderTarget(),T=J.getActiveCubeFace(),p=J.getActiveMipmapLevel(),K0=J.state;K0.setBlending(0),K0.buffers.color.setClear(1,1,1,1),K0.buffers.depth.setTest(!0),K0.setScissorTest(!1);const z0=N!==3&&this.type===3,y=N===3&&this.type!==3;for(let r=0,e=P.length;r<e;r++){const Y0=P[r],t=Y0.shadow;if(t===void 0){console.warn("THREE.WebGLShadowMap:",Y0,"has no shadow.");continue}if(t.autoUpdate===!1&&t.needsUpdate===!1)continue;H.copy(t.mapSize);const i=t.getFrameExtents();if(H.multiply(i),Y.copy(t.mapSize),H.x>W||H.y>W){if(H.x>W)Y.x=Math.floor(W/i.x),H.x=Y.x*i.x,t.mapSize.x=Y.x;if(H.y>W)Y.y=Math.floor(W/i.y),H.y=Y.y*i.y,t.mapSize.y=Y.y}if(t.map===null||z0===!0||y===!0){const x=this.type!==3?{minFilter:1003,magFilter:1003}:{};if(t.map!==null)t.map.dispose();t.map=new Y6(H.x,H.y,x),t.map.texture.name=Y0.name+".shadowMap",t.camera.updateProjectionMatrix()}J.setRenderTarget(t.map),J.clear();const O=t.getViewportCount();for(let x=0;x<O;x++){const S=t.getViewport(x);K.set(Y.x*S.x,Y.y*S.y,Y.x*S.z,Y.y*S.w),K0.viewport(K),t.updateMatrices(Y0,x),Z=t.getFrustum(),C(b,a,t.camera,Y0,this.type)}if(t.isPointLightShadow!==!0&&this.type===3)k(t,a);t.needsUpdate=!1}N=this.type,z.needsUpdate=!1,J.setRenderTarget(I,T,p)};function k(P,b){const a=$.update(E);if(D.defines.VSM_SAMPLES!==P.blurSamples)D.defines.VSM_SAMPLES=P.blurSamples,_.defines.VSM_SAMPLES=P.blurSamples,D.needsUpdate=!0,_.needsUpdate=!0;if(P.mapPass===null)P.mapPass=new Y6(H.x,H.y);D.uniforms.shadow_pass.value=P.map.texture,D.uniforms.resolution.value=P.mapSize,D.uniforms.radius.value=P.radius,J.setRenderTarget(P.mapPass),J.clear(),J.renderBufferDirect(b,null,a,D,E,null),_.uniforms.shadow_pass.value=P.mapPass.texture,_.uniforms.resolution.value=P.mapSize,_.uniforms.radius.value=P.radius,J.setRenderTarget(P.map),J.clear(),J.renderBufferDirect(b,null,a,_,E,null)}function M(P,b,a,I){let T=null;const p=a.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(p!==void 0)T=p;else if(T=a.isPointLight===!0?U:G,J.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const K0=T.uuid,z0=b.uuid;let y=q[K0];if(y===void 0)y={},q[K0]=y;let r=y[z0];if(r===void 0)r=T.clone(),y[z0]=r,b.addEventListener("dispose",m);T=r}if(T.visible=b.visible,T.wireframe=b.wireframe,I===3)T.side=b.shadowSide!==null?b.shadowSide:b.side;else T.side=b.shadowSide!==null?b.shadowSide:V[b.side];if(T.alphaMap=b.alphaMap,T.alphaTest=b.alphaTest,T.map=b.map,T.clipShadows=b.clipShadows,T.clippingPlanes=b.clippingPlanes,T.clipIntersection=b.clipIntersection,T.displacementMap=b.displacementMap,T.displacementScale=b.displacementScale,T.displacementBias=b.displacementBias,T.wireframeLinewidth=b.wireframeLinewidth,T.linewidth=b.linewidth,a.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const K0=J.properties.get(T);K0.light=a}return T}function C(P,b,a,I,T){if(P.visible===!1)return;if(P.layers.test(b.layers)&&(P.isMesh||P.isLine||P.isPoints)){if((P.castShadow||P.receiveShadow&&T===3)&&(!P.frustumCulled||Z.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,P.matrixWorld);const z0=$.update(P),y=P.material;if(Array.isArray(y)){const r=z0.groups;for(let e=0,Y0=r.length;e<Y0;e++){const t=r[e],i=y[t.materialIndex];if(i&&i.visible){const O=M(P,i,I,T);P.onBeforeShadow(J,P,b,a,z0,O,t),J.renderBufferDirect(a,null,z0,O,P,t),P.onAfterShadow(J,P,b,a,z0,O,t)}}}else if(y.visible){const r=M(P,y,I,T);P.onBeforeShadow(J,P,b,a,z0,r,null),J.renderBufferDirect(a,null,z0,r,P,null),P.onAfterShadow(J,P,b,a,z0,r,null)}}}const K0=P.children;for(let z0=0,y=K0.length;z0<y;z0++)C(K0[z0],b,a,I,T)}function m(P){P.target.removeEventListener("dispose",m);for(let a in q){const I=q[a],T=P.target.uuid;if(T in I)I[T].dispose(),delete I[T]}}},NW=function(J,$,Q){const Z=Q.isWebGL2;function H(){let j=!1;const D0=new DJ;let E0=null;const f0=new DJ(0,0,0,0);return{setMask:function(P0){if(E0!==P0&&!j)J.colorMask(P0,P0,P0,P0),E0=P0},setLocked:function(P0){j=P0},setClear:function(P0,$J,WJ,TJ,pJ){if(pJ===!0)P0*=TJ,$J*=TJ,WJ*=TJ;if(D0.set(P0,$J,WJ,TJ),f0.equals(D0)===!1)J.clearColor(P0,$J,WJ,TJ),f0.copy(D0)},reset:function(){j=!1,E0=null,f0.set(-1,0,0,0)}}}function Y(){let j=!1,D0=null,E0=null,f0=null;return{setTest:function(P0){if(P0)y0(J.DEPTH_TEST);else e0(J.DEPTH_TEST)},setMask:function(P0){if(D0!==P0&&!j)J.depthMask(P0),D0=P0},setFunc:function(P0){if(E0!==P0){switch(P0){case 0:J.depthFunc(J.NEVER);break;case 1:J.depthFunc(J.ALWAYS);break;case 2:J.depthFunc(J.LESS);break;case 3:J.depthFunc(J.LEQUAL);break;case 4:J.depthFunc(J.EQUAL);break;case 5:J.depthFunc(J.GEQUAL);break;case 6:J.depthFunc(J.GREATER);break;case 7:J.depthFunc(J.NOTEQUAL);break;default:J.depthFunc(J.LEQUAL)}E0=P0}},setLocked:function(P0){j=P0},setClear:function(P0){if(f0!==P0)J.clearDepth(P0),f0=P0},reset:function(){j=!1,D0=null,E0=null,f0=null}}}function K(){let j=!1,D0=null,E0=null,f0=null,P0=null,$J=null,WJ=null,TJ=null,pJ=null;return{setTest:function(QJ){if(!j)if(QJ)y0(J.STENCIL_TEST);else e0(J.STENCIL_TEST)},setMask:function(QJ){if(D0!==QJ&&!j)J.stencilMask(QJ),D0=QJ},setFunc:function(QJ,D6,z6){if(E0!==QJ||f0!==D6||P0!==z6)J.stencilFunc(QJ,D6,z6),E0=QJ,f0=D6,P0=z6},setOp:function(QJ,D6,z6){if($J!==QJ||WJ!==D6||TJ!==z6)J.stencilOp(QJ,D6,z6),$J=QJ,WJ=D6,TJ=z6},setLocked:function(QJ){j=QJ},setClear:function(QJ){if(pJ!==QJ)J.clearStencil(QJ),pJ=QJ},reset:function(){j=!1,D0=null,E0=null,f0=null,P0=null,$J=null,WJ=null,TJ=null,pJ=null}}}const G=new H,U=new Y,q=new K,W=new WeakMap,V=new WeakMap;let D={},_={},R=new WeakMap,E=[],z=null,N=!1,k=null,M=null,C=null,m=null,P=null,b=null,a=null,I=new a0(0,0,0),T=0,p=!1,K0=null,z0=null,y=null,r=null,e=null;const Y0=J.getParameter(J.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let t=!1,i=0;const O=J.getParameter(J.VERSION);if(O.indexOf("WebGL")!==-1)i=parseFloat(/^WebGL (\d)/.exec(O)[1]),t=i>=1;else if(O.indexOf("OpenGL ES")!==-1)i=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),t=i>=2;let x=null,S={};const g=J.getParameter(J.SCISSOR_BOX),$0=J.getParameter(J.VIEWPORT),Q0=new DJ().fromArray(g),V0=new DJ().fromArray($0);function R0(j,D0,E0,f0){const P0=new Uint8Array(4),$J=J.createTexture();J.bindTexture(j,$J),J.texParameteri(j,J.TEXTURE_MIN_FILTER,J.NEAREST),J.texParameteri(j,J.TEXTURE_MAG_FILTER,J.NEAREST);for(let WJ=0;WJ<E0;WJ++)if(Z&&(j===J.TEXTURE_3D||j===J.TEXTURE_2D_ARRAY))J.texImage3D(D0,0,J.RGBA,1,1,f0,0,J.RGBA,J.UNSIGNED_BYTE,P0);else J.texImage2D(D0+WJ,0,J.RGBA,1,1,0,J.RGBA,J.UNSIGNED_BYTE,P0);return $J}const b0={};if(b0[J.TEXTURE_2D]=R0(J.TEXTURE_2D,J.TEXTURE_2D,1),b0[J.TEXTURE_CUBE_MAP]=R0(J.TEXTURE_CUBE_MAP,J.TEXTURE_CUBE_MAP_POSITIVE_X,6),Z)b0[J.TEXTURE_2D_ARRAY]=R0(J.TEXTURE_2D_ARRAY,J.TEXTURE_2D_ARRAY,1,1),b0[J.TEXTURE_3D]=R0(J.TEXTURE_3D,J.TEXTURE_3D,1,1);G.setClear(0,0,0,1),U.setClear(1),q.setClear(0),y0(J.DEPTH_TEST),U.setFunc(3),d0(!1),A(1),y0(J.CULL_FACE),p0(0);function y0(j){if(D[j]!==!0)J.enable(j),D[j]=!0}function e0(j){if(D[j]!==!1)J.disable(j),D[j]=!1}function u(j,D0){if(_[j]!==D0){if(J.bindFramebuffer(j,D0),_[j]=D0,Z){if(j===J.DRAW_FRAMEBUFFER)_[J.FRAMEBUFFER]=D0;if(j===J.FRAMEBUFFER)_[J.DRAW_FRAMEBUFFER]=D0}return!0}return!1}function CJ(j,D0){let E0=E,f0=!1;if(j){if(E0=R.get(D0),E0===void 0)E0=[],R.set(D0,E0);if(j.isWebGLMultipleRenderTargets){const P0=j.texture;if(E0.length!==P0.length||E0[0]!==J.COLOR_ATTACHMENT0){for(let $J=0,WJ=P0.length;$J<WJ;$J++)E0[$J]=J.COLOR_ATTACHMENT0+$J;E0.length=P0.length,f0=!0}}else if(E0[0]!==J.COLOR_ATTACHMENT0)E0[0]=J.COLOR_ATTACHMENT0,f0=!0}else if(E0[0]!==J.BACK)E0[0]=J.BACK,f0=!0;if(f0)if(Q.isWebGL2)J.drawBuffers(E0);else $.get("WEBGL_draw_buffers").drawBuffersWEBGL(E0)}function t0(j){if(z!==j)return J.useProgram(j),z=j,!0;return!1}const T0={[100]:J.FUNC_ADD,[101]:J.FUNC_SUBTRACT,[102]:J.FUNC_REVERSE_SUBTRACT};if(Z)T0[103]=J.MIN,T0[104]=J.MAX;else{const j=$.get("EXT_blend_minmax");if(j!==null)T0[103]=j.MIN_EXT,T0[104]=j.MAX_EXT}const x0={[200]:J.ZERO,[201]:J.ONE,[202]:J.SRC_COLOR,[204]:J.SRC_ALPHA,[210]:J.SRC_ALPHA_SATURATE,[208]:J.DST_COLOR,[206]:J.DST_ALPHA,[203]:J.ONE_MINUS_SRC_COLOR,[205]:J.ONE_MINUS_SRC_ALPHA,[209]:J.ONE_MINUS_DST_COLOR,[207]:J.ONE_MINUS_DST_ALPHA,[211]:J.CONSTANT_COLOR,[212]:J.ONE_MINUS_CONSTANT_COLOR,[213]:J.CONSTANT_ALPHA,[214]:J.ONE_MINUS_CONSTANT_ALPHA};function p0(j,D0,E0,f0,P0,$J,WJ,TJ,pJ,QJ){if(j===0){if(N===!0)e0(J.BLEND),N=!1;return}if(N===!1)y0(J.BLEND),N=!0;if(j!==5){if(j!==k||QJ!==p){if(M!==100||P!==100)J.blendEquation(J.FUNC_ADD),M=100,P=100;if(QJ)switch(j){case 1:J.blendFuncSeparate(J.ONE,J.ONE_MINUS_SRC_ALPHA,J.ONE,J.ONE_MINUS_SRC_ALPHA);break;case 2:J.blendFunc(J.ONE,J.ONE);break;case 3:J.blendFuncSeparate(J.ZERO,J.ONE_MINUS_SRC_COLOR,J.ZERO,J.ONE);break;case 4:J.blendFuncSeparate(J.ZERO,J.SRC_COLOR,J.ZERO,J.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case 1:J.blendFuncSeparate(J.SRC_ALPHA,J.ONE_MINUS_SRC_ALPHA,J.ONE,J.ONE_MINUS_SRC_ALPHA);break;case 2:J.blendFunc(J.SRC_ALPHA,J.ONE);break;case 3:J.blendFuncSeparate(J.ZERO,J.ONE_MINUS_SRC_COLOR,J.ZERO,J.ONE);break;case 4:J.blendFunc(J.ZERO,J.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}C=null,m=null,b=null,a=null,I.set(0,0,0),T=0,k=j,p=QJ}return}if(P0=P0||D0,$J=$J||E0,WJ=WJ||f0,D0!==M||P0!==P)J.blendEquationSeparate(T0[D0],T0[P0]),M=D0,P=P0;if(E0!==C||f0!==m||$J!==b||WJ!==a)J.blendFuncSeparate(x0[E0],x0[f0],x0[$J],x0[WJ]),C=E0,m=f0,b=$J,a=WJ;if(TJ.equals(I)===!1||pJ!==T)J.blendColor(TJ.r,TJ.g,TJ.b,pJ),I.copy(TJ),T=pJ;k=j,p=!1}function o0(j,D0){j.side===2?e0(J.CULL_FACE):y0(J.CULL_FACE);let E0=j.side===1;if(D0)E0=!E0;d0(E0),j.blending===1&&j.transparent===!1?p0(0):p0(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),U.setFunc(j.depthFunc),U.setTest(j.depthTest),U.setMask(j.depthWrite),G.setMask(j.colorWrite);const f0=j.stencilWrite;if(q.setTest(f0),f0)q.setMask(j.stencilWriteMask),q.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),q.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass);l(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?y0(J.SAMPLE_ALPHA_TO_COVERAGE):e0(J.SAMPLE_ALPHA_TO_COVERAGE)}function d0(j){if(K0!==j){if(j)J.frontFace(J.CW);else J.frontFace(J.CCW);K0=j}}function A(j){if(j!==0){if(y0(J.CULL_FACE),j!==z0)if(j===1)J.cullFace(J.BACK);else if(j===2)J.cullFace(J.FRONT);else J.cullFace(J.FRONT_AND_BACK)}else e0(J.CULL_FACE);z0=j}function B(j){if(j!==y){if(t)J.lineWidth(j);y=j}}function l(j,D0,E0){if(j){if(y0(J.POLYGON_OFFSET_FILL),r!==D0||e!==E0)J.polygonOffset(D0,E0),r=D0,e=E0}else e0(J.POLYGON_OFFSET_FILL)}function q0(j){if(j)y0(J.SCISSOR_TEST);else e0(J.SCISSOR_TEST)}function Z0(j){if(j===void 0)j=J.TEXTURE0+Y0-1;if(x!==j)J.activeTexture(j),x=j}function U0(j,D0,E0){if(E0===void 0)if(x===null)E0=J.TEXTURE0+Y0-1;else E0=x;let f0=S[E0];if(f0===void 0)f0={type:void 0,texture:void 0},S[E0]=f0;if(f0.type!==j||f0.texture!==D0){if(x!==E0)J.activeTexture(E0),x=E0;J.bindTexture(j,D0||b0[j]),f0.type=j,f0.texture=D0}}function j0(){const j=S[x];if(j!==void 0&&j.type!==void 0)J.bindTexture(j.type,null),j.type=void 0,j.texture=void 0}function O0(){try{J.compressedTexImage2D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function A0(){try{J.compressedTexImage3D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function w0(){try{J.texSubImage2D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function m0(){try{J.texSubImage3D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function H0(){try{J.compressedTexSubImage2D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function f(){try{J.compressedTexSubImage3D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function G0(){try{J.texStorage2D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function M0(){try{J.texStorage3D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function F0(){try{J.texImage2D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function B0(){try{J.texImage3D.apply(J,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function g0(j){if(Q0.equals(j)===!1)J.scissor(j.x,j.y,j.z,j.w),Q0.copy(j)}function l0(j){if(V0.equals(j)===!1)J.viewport(j.x,j.y,j.z,j.w),V0.copy(j)}function JJ(j,D0){let E0=V.get(D0);if(E0===void 0)E0=new WeakMap,V.set(D0,E0);let f0=E0.get(j);if(f0===void 0)f0=J.getUniformBlockIndex(D0,j.name),E0.set(j,f0)}function YJ(j,D0){const f0=V.get(D0).get(j);if(W.get(D0)!==f0)J.uniformBlockBinding(D0,f0,j.__bindingPointIndex),W.set(D0,f0)}function N0(){if(J.disable(J.BLEND),J.disable(J.CULL_FACE),J.disable(J.DEPTH_TEST),J.disable(J.POLYGON_OFFSET_FILL),J.disable(J.SCISSOR_TEST),J.disable(J.STENCIL_TEST),J.disable(J.SAMPLE_ALPHA_TO_COVERAGE),J.blendEquation(J.FUNC_ADD),J.blendFunc(J.ONE,J.ZERO),J.blendFuncSeparate(J.ONE,J.ZERO,J.ONE,J.ZERO),J.blendColor(0,0,0,0),J.colorMask(!0,!0,!0,!0),J.clearColor(0,0,0,0),J.depthMask(!0),J.depthFunc(J.LESS),J.clearDepth(1),J.stencilMask(4294967295),J.stencilFunc(J.ALWAYS,0,4294967295),J.stencilOp(J.KEEP,J.KEEP,J.KEEP),J.clearStencil(0),J.cullFace(J.BACK),J.frontFace(J.CCW),J.polygonOffset(0,0),J.activeTexture(J.TEXTURE0),J.bindFramebuffer(J.FRAMEBUFFER,null),Z===!0)J.bindFramebuffer(J.DRAW_FRAMEBUFFER,null),J.bindFramebuffer(J.READ_FRAMEBUFFER,null);J.useProgram(null),J.lineWidth(1),J.scissor(0,0,J.canvas.width,J.canvas.height),J.viewport(0,0,J.canvas.width,J.canvas.height),D={},x=null,S={},_={},R=new WeakMap,E=[],z=null,N=!1,k=null,M=null,C=null,m=null,P=null,b=null,a=null,I=new a0(0,0,0),T=0,p=!1,K0=null,z0=null,y=null,r=null,e=null,Q0.set(0,0,J.canvas.width,J.canvas.height),V0.set(0,0,J.canvas.width,J.canvas.height),G.reset(),U.reset(),q.reset()}return{buffers:{color:G,depth:U,stencil:q},enable:y0,disable:e0,bindFramebuffer:u,drawBuffers:CJ,useProgram:t0,setBlending:p0,setMaterial:o0,setFlipSided:d0,setCullFace:A,setLineWidth:B,setPolygonOffset:l,setScissorTest:q0,activeTexture:Z0,bindTexture:U0,unbindTexture:j0,compressedTexImage2D:O0,compressedTexImage3D:A0,texImage2D:F0,texImage3D:B0,updateUBOMapping:JJ,uniformBlockBinding:YJ,texStorage2D:G0,texStorage3D:M0,texSubImage2D:w0,texSubImage3D:m0,compressedTexSubImage2D:H0,compressedTexSubImage3D:f,scissor:g0,viewport:l0,reset:N0}},_W=function(J,$,Q,Z,H,Y,K){const G=H.isWebGL2,U=$.has("WEBGL_multisampled_render_to_texture")?$.get("WEBGL_multisampled_render_to_texture"):null,q=typeof navigator==="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),W=new WeakMap;let V;const D=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas!=="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(A){}function R(A,B){return _?new OffscreenCanvas(A,B):w5("canvas")}function E(A,B,l,q0){let Z0=1;if(A.width>q0||A.height>q0)Z0=q0/Math.max(A.width,A.height);if(Z0<1||B===!0)if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap){const U0=B?T5:Math.floor,j0=U0(Z0*A.width),O0=U0(Z0*A.height);if(V===void 0)V=R(j0,O0);const A0=l?R(j0,O0):V;return A0.width=j0,A0.height=O0,A0.getContext("2d").drawImage(A,0,0,j0,O0),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+A.width+"x"+A.height+") to ("+j0+"x"+O0+")."),A0}else{if("data"in A)console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+A.width+"x"+A.height+").");return A}return A}function z(A){return W$(A.width)&&W$(A.height)}function N(A){if(G)return!1;return A.wrapS!==1001||A.wrapT!==1001||A.minFilter!==1003&&A.minFilter!==1006}function k(A,B){return A.generateMipmaps&&B&&A.minFilter!==1003&&A.minFilter!==1006}function M(A){J.generateMipmap(A)}function C(A,B,l,q0,Z0=!1){if(G===!1)return B;if(A!==null){if(J[A]!==void 0)return J[A];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \'"+A+"\'")}let U0=B;if(B===J.RED){if(l===J.FLOAT)U0=J.R32F;if(l===J.HALF_FLOAT)U0=J.R16F;if(l===J.UNSIGNED_BYTE)U0=J.R8}if(B===J.RED_INTEGER){if(l===J.UNSIGNED_BYTE)U0=J.R8UI;if(l===J.UNSIGNED_SHORT)U0=J.R16UI;if(l===J.UNSIGNED_INT)U0=J.R32UI;if(l===J.BYTE)U0=J.R8I;if(l===J.SHORT)U0=J.R16I;if(l===J.INT)U0=J.R32I}if(B===J.RG){if(l===J.FLOAT)U0=J.RG32F;if(l===J.HALF_FLOAT)U0=J.RG16F;if(l===J.UNSIGNED_BYTE)U0=J.RG8}if(B===J.RGBA){const j0=Z0?"linear":XJ.getTransfer(q0);if(l===J.FLOAT)U0=J.RGBA32F;if(l===J.HALF_FLOAT)U0=J.RGBA16F;if(l===J.UNSIGNED_BYTE)U0=j0==="srgb"?J.SRGB8_ALPHA8:J.RGBA8;if(l===J.UNSIGNED_SHORT_4_4_4_4)U0=J.RGBA4;if(l===J.UNSIGNED_SHORT_5_5_5_1)U0=J.RGB5_A1}if(U0===J.R16F||U0===J.R32F||U0===J.RG16F||U0===J.RG32F||U0===J.RGBA16F||U0===J.RGBA32F)$.get("EXT_color_buffer_float");return U0}function m(A,B,l){if(k(A,l)===!0||A.isFramebufferTexture&&A.minFilter!==1003&&A.minFilter!==1006)return Math.log2(Math.max(B.width,B.height))+1;else if(A.mipmaps!==void 0&&A.mipmaps.length>0)return A.mipmaps.length;else if(A.isCompressedTexture&&Array.isArray(A.image))return B.mipmaps.length;else return 1}function P(A){if(A===1003||A===1004||A===1005)return J.NEAREST;return J.LINEAR}function b(A){const B=A.target;if(B.removeEventListener("dispose",b),I(B),B.isVideoTexture)W.delete(B)}function a(A){const B=A.target;B.removeEventListener("dispose",a),p(B)}function I(A){const B=Z.get(A);if(B.__webglInit===void 0)return;const l=A.source,q0=D.get(l);if(q0){const Z0=q0[B.__cacheKey];if(Z0.usedTimes--,Z0.usedTimes===0)T(A);if(Object.keys(q0).length===0)D.delete(l)}Z.remove(A)}function T(A){const B=Z.get(A);J.deleteTexture(B.__webglTexture);const l=A.source,q0=D.get(l);delete q0[B.__cacheKey],K.memory.textures--}function p(A){const B=A.texture,l=Z.get(A),q0=Z.get(B);if(q0.__webglTexture!==void 0)J.deleteTexture(q0.__webglTexture),K.memory.textures--;if(A.depthTexture)A.depthTexture.dispose();if(A.isWebGLCubeRenderTarget)for(let Z0=0;Z0<6;Z0++){if(Array.isArray(l.__webglFramebuffer[Z0]))for(let U0=0;U0<l.__webglFramebuffer[Z0].length;U0++)J.deleteFramebuffer(l.__webglFramebuffer[Z0][U0]);else J.deleteFramebuffer(l.__webglFramebuffer[Z0]);if(l.__webglDepthbuffer)J.deleteRenderbuffer(l.__webglDepthbuffer[Z0])}else{if(Array.isArray(l.__webglFramebuffer))for(let Z0=0;Z0<l.__webglFramebuffer.length;Z0++)J.deleteFramebuffer(l.__webglFramebuffer[Z0]);else J.deleteFramebuffer(l.__webglFramebuffer);if(l.__webglDepthbuffer)J.deleteRenderbuffer(l.__webglDepthbuffer);if(l.__webglMultisampledFramebuffer)J.deleteFramebuffer(l.__webglMultisampledFramebuffer);if(l.__webglColorRenderbuffer){for(let Z0=0;Z0<l.__webglColorRenderbuffer.length;Z0++)if(l.__webglColorRenderbuffer[Z0])J.deleteRenderbuffer(l.__webglColorRenderbuffer[Z0])}if(l.__webglDepthRenderbuffer)J.deleteRenderbuffer(l.__webglDepthRenderbuffer)}if(A.isWebGLMultipleRenderTargets)for(let Z0=0,U0=B.length;Z0<U0;Z0++){const j0=Z.get(B[Z0]);if(j0.__webglTexture)J.deleteTexture(j0.__webglTexture),K.memory.textures--;Z.remove(B[Z0])}Z.remove(B),Z.remove(A)}let K0=0;function z0(){K0=0}function y(){const A=K0;if(A>=H.maxTextures)console.warn("THREE.WebGLTextures: Trying to use "+A+" texture units while this GPU supports only "+H.maxTextures);return K0+=1,A}function r(A){const B=[];return B.push(A.wrapS),B.push(A.wrapT),B.push(A.wrapR||0),B.push(A.magFilter),B.push(A.minFilter),B.push(A.anisotropy),B.push(A.internalFormat),B.push(A.format),B.push(A.type),B.push(A.generateMipmaps),B.push(A.premultiplyAlpha),B.push(A.flipY),B.push(A.unpackAlignment),B.push(A.colorSpace),B.join()}function e(A,B){const l=Z.get(A);if(A.isVideoTexture)o0(A);if(A.isRenderTargetTexture===!1&&A.version>0&&l.__version!==A.version){const q0=A.image;if(q0===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(q0.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Q0(l,A,B);return}}Q.bindTexture(J.TEXTURE_2D,l.__webglTexture,J.TEXTURE0+B)}function Y0(A,B){const l=Z.get(A);if(A.version>0&&l.__version!==A.version){Q0(l,A,B);return}Q.bindTexture(J.TEXTURE_2D_ARRAY,l.__webglTexture,J.TEXTURE0+B)}function t(A,B){const l=Z.get(A);if(A.version>0&&l.__version!==A.version){Q0(l,A,B);return}Q.bindTexture(J.TEXTURE_3D,l.__webglTexture,J.TEXTURE0+B)}function i(A,B){const l=Z.get(A);if(A.version>0&&l.__version!==A.version){V0(l,A,B);return}Q.bindTexture(J.TEXTURE_CUBE_MAP,l.__webglTexture,J.TEXTURE0+B)}const O={[1000]:J.REPEAT,[1001]:J.CLAMP_TO_EDGE,[1002]:J.MIRRORED_REPEAT},x={[1003]:J.NEAREST,[1004]:J.NEAREST_MIPMAP_NEAREST,[1005]:J.NEAREST_MIPMAP_LINEAR,[1006]:J.LINEAR,[1007]:J.LINEAR_MIPMAP_NEAREST,[1008]:J.LINEAR_MIPMAP_LINEAR},S={[512]:J.NEVER,[519]:J.ALWAYS,[513]:J.LESS,[515]:J.LEQUAL,[514]:J.EQUAL,[518]:J.GEQUAL,[516]:J.GREATER,[517]:J.NOTEQUAL};function g(A,B,l){if(l){if(J.texParameteri(A,J.TEXTURE_WRAP_S,O[B.wrapS]),J.texParameteri(A,J.TEXTURE_WRAP_T,O[B.wrapT]),A===J.TEXTURE_3D||A===J.TEXTURE_2D_ARRAY)J.texParameteri(A,J.TEXTURE_WRAP_R,O[B.wrapR]);J.texParameteri(A,J.TEXTURE_MAG_FILTER,x[B.magFilter]),J.texParameteri(A,J.TEXTURE_MIN_FILTER,x[B.minFilter])}else{if(J.texParameteri(A,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(A,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),A===J.TEXTURE_3D||A===J.TEXTURE_2D_ARRAY)J.texParameteri(A,J.TEXTURE_WRAP_R,J.CLAMP_TO_EDGE);if(B.wrapS!==1001||B.wrapT!==1001)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.");if(J.texParameteri(A,J.TEXTURE_MAG_FILTER,P(B.magFilter)),J.texParameteri(A,J.TEXTURE_MIN_FILTER,P(B.minFilter)),B.minFilter!==1003&&B.minFilter!==1006)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")}if(B.compareFunction)J.texParameteri(A,J.TEXTURE_COMPARE_MODE,J.COMPARE_REF_TO_TEXTURE),J.texParameteri(A,J.TEXTURE_COMPARE_FUNC,S[B.compareFunction]);if($.has("EXT_texture_filter_anisotropic")===!0){const q0=$.get("EXT_texture_filter_anisotropic");if(B.magFilter===1003)return;if(B.minFilter!==1005&&B.minFilter!==1008)return;if(B.type===1015&&$.has("OES_texture_float_linear")===!1)return;if(G===!1&&(B.type===1016&&$.has("OES_texture_half_float_linear")===!1))return;if(B.anisotropy>1||Z.get(B).__currentAnisotropy)J.texParameterf(A,q0.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,H.getMaxAnisotropy())),Z.get(B).__currentAnisotropy=B.anisotropy}}function $0(A,B){let l=!1;if(A.__webglInit===void 0)A.__webglInit=!0,B.addEventListener("dispose",b);const q0=B.source;let Z0=D.get(q0);if(Z0===void 0)Z0={},D.set(q0,Z0);const U0=r(B);if(U0!==A.__cacheKey){if(Z0[U0]===void 0)Z0[U0]={texture:J.createTexture(),usedTimes:0},K.memory.textures++,l=!0;Z0[U0].usedTimes++;const j0=Z0[A.__cacheKey];if(j0!==void 0){if(Z0[A.__cacheKey].usedTimes--,j0.usedTimes===0)T(B)}A.__cacheKey=U0,A.__webglTexture=Z0[U0].texture}return l}function Q0(A,B,l){let q0=J.TEXTURE_2D;if(B.isDataArrayTexture||B.isCompressedArrayTexture)q0=J.TEXTURE_2D_ARRAY;if(B.isData3DTexture)q0=J.TEXTURE_3D;const Z0=$0(A,B),U0=B.source;Q.bindTexture(q0,A.__webglTexture,J.TEXTURE0+l);const j0=Z.get(U0);if(U0.version!==j0.__version||Z0===!0){Q.activeTexture(J.TEXTURE0+l);const O0=XJ.getPrimaries(XJ.workingColorSpace),A0=B.colorSpace===""?null:XJ.getPrimaries(B.colorSpace),w0=B.colorSpace===""||O0===A0?J.NONE:J.BROWSER_DEFAULT_WEBGL;J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,B.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,B.unpackAlignment),J.pixelStorei(J.UNPACK_COLORSPACE_CONVERSION_WEBGL,w0);const m0=N(B)&&z(B.image)===!1;let H0=E(B.image,m0,!1,H.maxTextureSize);H0=d0(B,H0);const f=z(H0)||G,G0=Y.convert(B.format,B.colorSpace);let M0=Y.convert(B.type),F0=C(B.internalFormat,G0,M0,B.colorSpace,B.isVideoTexture);g(q0,B,f);let B0;const g0=B.mipmaps,l0=G&&B.isVideoTexture!==!0&&F0!==36196,JJ=j0.__version===void 0||Z0===!0,YJ=m(B,H0,f);if(B.isDepthTexture){if(F0=J.DEPTH_COMPONENT,G)if(B.type===1015)F0=J.DEPTH_COMPONENT32F;else if(B.type===1014)F0=J.DEPTH_COMPONENT24;else if(B.type===1020)F0=J.DEPTH24_STENCIL8;else F0=J.DEPTH_COMPONENT16;else if(B.type===1015)console.error("WebGLRenderer: Floating point depth texture requires WebGL2.");if(B.format===1026&&F0===J.DEPTH_COMPONENT){if(B.type!==1012&&B.type!==1014)console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=1014,M0=Y.convert(B.type)}if(B.format===1027&&F0===J.DEPTH_COMPONENT){if(F0=J.DEPTH_STENCIL,B.type!==1020)console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=1020,M0=Y.convert(B.type)}if(JJ)if(l0)Q.texStorage2D(J.TEXTURE_2D,1,F0,H0.width,H0.height);else Q.texImage2D(J.TEXTURE_2D,0,F0,H0.width,H0.height,0,G0,M0,null)}else if(B.isDataTexture)if(g0.length>0&&f){if(l0&&JJ)Q.texStorage2D(J.TEXTURE_2D,YJ,F0,g0[0].width,g0[0].height);for(let N0=0,j=g0.length;N0<j;N0++)if(B0=g0[N0],l0)Q.texSubImage2D(J.TEXTURE_2D,N0,0,0,B0.width,B0.height,G0,M0,B0.data);else Q.texImage2D(J.TEXTURE_2D,N0,F0,B0.width,B0.height,0,G0,M0,B0.data);B.generateMipmaps=!1}else if(l0){if(JJ)Q.texStorage2D(J.TEXTURE_2D,YJ,F0,H0.width,H0.height);Q.texSubImage2D(J.TEXTURE_2D,0,0,0,H0.width,H0.height,G0,M0,H0.data)}else Q.texImage2D(J.TEXTURE_2D,0,F0,H0.width,H0.height,0,G0,M0,H0.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){if(l0&&JJ)Q.texStorage3D(J.TEXTURE_2D_ARRAY,YJ,F0,g0[0].width,g0[0].height,H0.depth);for(let N0=0,j=g0.length;N0<j;N0++)if(B0=g0[N0],B.format!==1023)if(G0!==null)if(l0)Q.compressedTexSubImage3D(J.TEXTURE_2D_ARRAY,N0,0,0,0,B0.width,B0.height,H0.depth,G0,B0.data,0,0);else Q.compressedTexImage3D(J.TEXTURE_2D_ARRAY,N0,F0,B0.width,B0.height,H0.depth,0,B0.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(l0)Q.texSubImage3D(J.TEXTURE_2D_ARRAY,N0,0,0,0,B0.width,B0.height,H0.depth,G0,M0,B0.data);else Q.texImage3D(J.TEXTURE_2D_ARRAY,N0,F0,B0.width,B0.height,H0.depth,0,G0,M0,B0.data)}else{if(l0&&JJ)Q.texStorage2D(J.TEXTURE_2D,YJ,F0,g0[0].width,g0[0].height);for(let N0=0,j=g0.length;N0<j;N0++)if(B0=g0[N0],B.format!==1023)if(G0!==null)if(l0)Q.compressedTexSubImage2D(J.TEXTURE_2D,N0,0,0,B0.width,B0.height,G0,B0.data);else Q.compressedTexImage2D(J.TEXTURE_2D,N0,F0,B0.width,B0.height,0,B0.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(l0)Q.texSubImage2D(J.TEXTURE_2D,N0,0,0,B0.width,B0.height,G0,M0,B0.data);else Q.texImage2D(J.TEXTURE_2D,N0,F0,B0.width,B0.height,0,G0,M0,B0.data)}else if(B.isDataArrayTexture)if(l0){if(JJ)Q.texStorage3D(J.TEXTURE_2D_ARRAY,YJ,F0,H0.width,H0.height,H0.depth);Q.texSubImage3D(J.TEXTURE_2D_ARRAY,0,0,0,0,H0.width,H0.height,H0.depth,G0,M0,H0.data)}else Q.texImage3D(J.TEXTURE_2D_ARRAY,0,F0,H0.width,H0.height,H0.depth,0,G0,M0,H0.data);else if(B.isData3DTexture)if(l0){if(JJ)Q.texStorage3D(J.TEXTURE_3D,YJ,F0,H0.width,H0.height,H0.depth);Q.texSubImage3D(J.TEXTURE_3D,0,0,0,0,H0.width,H0.height,H0.depth,G0,M0,H0.data)}else Q.texImage3D(J.TEXTURE_3D,0,F0,H0.width,H0.height,H0.depth,0,G0,M0,H0.data);else if(B.isFramebufferTexture){if(JJ)if(l0)Q.texStorage2D(J.TEXTURE_2D,YJ,F0,H0.width,H0.height);else{let{width:N0,height:j}=H0;for(let D0=0;D0<YJ;D0++)Q.texImage2D(J.TEXTURE_2D,D0,F0,N0,j,0,G0,M0,null),N0>>=1,j>>=1}}else if(g0.length>0&&f){if(l0&&JJ)Q.texStorage2D(J.TEXTURE_2D,YJ,F0,g0[0].width,g0[0].height);for(let N0=0,j=g0.length;N0<j;N0++)if(B0=g0[N0],l0)Q.texSubImage2D(J.TEXTURE_2D,N0,0,0,G0,M0,B0);else Q.texImage2D(J.TEXTURE_2D,N0,F0,G0,M0,B0);B.generateMipmaps=!1}else if(l0){if(JJ)Q.texStorage2D(J.TEXTURE_2D,YJ,F0,H0.width,H0.height);Q.texSubImage2D(J.TEXTURE_2D,0,0,0,G0,M0,H0)}else Q.texImage2D(J.TEXTURE_2D,0,F0,G0,M0,H0);if(k(B,f))M(q0);if(j0.__version=U0.version,B.onUpdate)B.onUpdate(B)}A.__version=B.version}function V0(A,B,l){if(B.image.length!==6)return;const q0=$0(A,B),Z0=B.source;Q.bindTexture(J.TEXTURE_CUBE_MAP,A.__webglTexture,J.TEXTURE0+l);const U0=Z.get(Z0);if(Z0.version!==U0.__version||q0===!0){Q.activeTexture(J.TEXTURE0+l);const j0=XJ.getPrimaries(XJ.workingColorSpace),O0=B.colorSpace===""?null:XJ.getPrimaries(B.colorSpace),A0=B.colorSpace===""||j0===O0?J.NONE:J.BROWSER_DEFAULT_WEBGL;J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,B.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,B.unpackAlignment),J.pixelStorei(J.UNPACK_COLORSPACE_CONVERSION_WEBGL,A0);const w0=B.isCompressedTexture||B.image[0].isCompressedTexture,m0=B.image[0]&&B.image[0].isDataTexture,H0=[];for(let N0=0;N0<6;N0++){if(!w0&&!m0)H0[N0]=E(B.image[N0],!1,!0,H.maxCubemapSize);else H0[N0]=m0?B.image[N0].image:B.image[N0];H0[N0]=d0(B,H0[N0])}const f=H0[0],G0=z(f)||G,M0=Y.convert(B.format,B.colorSpace),F0=Y.convert(B.type),B0=C(B.internalFormat,M0,F0,B.colorSpace),g0=G&&B.isVideoTexture!==!0,l0=U0.__version===void 0||q0===!0;let JJ=m(B,f,G0);g(J.TEXTURE_CUBE_MAP,B,G0);let YJ;if(w0){if(g0&&l0)Q.texStorage2D(J.TEXTURE_CUBE_MAP,JJ,B0,f.width,f.height);for(let N0=0;N0<6;N0++){YJ=H0[N0].mipmaps;for(let j=0;j<YJ.length;j++){const D0=YJ[j];if(B.format!==1023)if(M0!==null)if(g0)Q.compressedTexSubImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j,0,0,D0.width,D0.height,M0,D0.data);else Q.compressedTexImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j,B0,D0.width,D0.height,0,D0.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()");else if(g0)Q.texSubImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j,0,0,D0.width,D0.height,M0,F0,D0.data);else Q.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j,B0,D0.width,D0.height,0,M0,F0,D0.data)}}}else{if(YJ=B.mipmaps,g0&&l0){if(YJ.length>0)JJ++;Q.texStorage2D(J.TEXTURE_CUBE_MAP,JJ,B0,H0[0].width,H0[0].height)}for(let N0=0;N0<6;N0++)if(m0){if(g0)Q.texSubImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,0,0,0,H0[N0].width,H0[N0].height,M0,F0,H0[N0].data);else Q.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,0,B0,H0[N0].width,H0[N0].height,0,M0,F0,H0[N0].data);for(let j=0;j<YJ.length;j++){const E0=YJ[j].image[N0].image;if(g0)Q.texSubImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j+1,0,0,E0.width,E0.height,M0,F0,E0.data);else Q.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j+1,B0,E0.width,E0.height,0,M0,F0,E0.data)}}else{if(g0)Q.texSubImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,0,0,0,M0,F0,H0[N0]);else Q.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,0,B0,M0,F0,H0[N0]);for(let j=0;j<YJ.length;j++){const D0=YJ[j];if(g0)Q.texSubImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j+1,0,0,M0,F0,D0.image[N0]);else Q.texImage2D(J.TEXTURE_CUBE_MAP_POSITIVE_X+N0,j+1,B0,M0,F0,D0.image[N0])}}}if(k(B,G0))M(J.TEXTURE_CUBE_MAP);if(U0.__version=Z0.version,B.onUpdate)B.onUpdate(B)}A.__version=B.version}function R0(A,B,l,q0,Z0,U0){const j0=Y.convert(l.format,l.colorSpace),O0=Y.convert(l.type),A0=C(l.internalFormat,j0,O0,l.colorSpace);if(!Z.get(B).__hasExternalTextures){const m0=Math.max(1,B.width>>U0),H0=Math.max(1,B.height>>U0);if(Z0===J.TEXTURE_3D||Z0===J.TEXTURE_2D_ARRAY)Q.texImage3D(Z0,U0,A0,m0,H0,B.depth,0,j0,O0,null);else Q.texImage2D(Z0,U0,A0,m0,H0,0,j0,O0,null)}if(Q.bindFramebuffer(J.FRAMEBUFFER,A),p0(B))U.framebufferTexture2DMultisampleEXT(J.FRAMEBUFFER,q0,Z0,Z.get(l).__webglTexture,0,x0(B));else if(Z0===J.TEXTURE_2D||Z0>=J.TEXTURE_CUBE_MAP_POSITIVE_X&&Z0<=J.TEXTURE_CUBE_MAP_NEGATIVE_Z)J.framebufferTexture2D(J.FRAMEBUFFER,q0,Z0,Z.get(l).__webglTexture,U0);Q.bindFramebuffer(J.FRAMEBUFFER,null)}function b0(A,B,l){if(J.bindRenderbuffer(J.RENDERBUFFER,A),B.depthBuffer&&!B.stencilBuffer){let q0=G===!0?J.DEPTH_COMPONENT24:J.DEPTH_COMPONENT16;if(l||p0(B)){const Z0=B.depthTexture;if(Z0&&Z0.isDepthTexture){if(Z0.type===1015)q0=J.DEPTH_COMPONENT32F;else if(Z0.type===1014)q0=J.DEPTH_COMPONENT24}const U0=x0(B);if(p0(B))U.renderbufferStorageMultisampleEXT(J.RENDERBUFFER,U0,q0,B.width,B.height);else J.renderbufferStorageMultisample(J.RENDERBUFFER,U0,q0,B.width,B.height)}else J.renderbufferStorage(J.RENDERBUFFER,q0,B.width,B.height);J.framebufferRenderbuffer(J.FRAMEBUFFER,J.DEPTH_ATTACHMENT,J.RENDERBUFFER,A)}else if(B.depthBuffer&&B.stencilBuffer){const q0=x0(B);if(l&&p0(B)===!1)J.renderbufferStorageMultisample(J.RENDERBUFFER,q0,J.DEPTH24_STENCIL8,B.width,B.height);else if(p0(B))U.renderbufferStorageMultisampleEXT(J.RENDERBUFFER,q0,J.DEPTH24_STENCIL8,B.width,B.height);else J.renderbufferStorage(J.RENDERBUFFER,J.DEPTH_STENCIL,B.width,B.height);J.framebufferRenderbuffer(J.FRAMEBUFFER,J.DEPTH_STENCIL_ATTACHMENT,J.RENDERBUFFER,A)}else{const q0=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Z0=0;Z0<q0.length;Z0++){const U0=q0[Z0],j0=Y.convert(U0.format,U0.colorSpace),O0=Y.convert(U0.type),A0=C(U0.internalFormat,j0,O0,U0.colorSpace),w0=x0(B);if(l&&p0(B)===!1)J.renderbufferStorageMultisample(J.RENDERBUFFER,w0,A0,B.width,B.height);else if(p0(B))U.renderbufferStorageMultisampleEXT(J.RENDERBUFFER,w0,A0,B.width,B.height);else J.renderbufferStorage(J.RENDERBUFFER,A0,B.width,B.height)}}J.bindRenderbuffer(J.RENDERBUFFER,null)}function y0(A,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(Q.bindFramebuffer(J.FRAMEBUFFER,A),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(!Z.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0;e(B.depthTexture,0);const q0=Z.get(B.depthTexture).__webglTexture,Z0=x0(B);if(B.depthTexture.format===1026)if(p0(B))U.framebufferTexture2DMultisampleEXT(J.FRAMEBUFFER,J.DEPTH_ATTACHMENT,J.TEXTURE_2D,q0,0,Z0);else J.framebufferTexture2D(J.FRAMEBUFFER,J.DEPTH_ATTACHMENT,J.TEXTURE_2D,q0,0);else if(B.depthTexture.format===1027)if(p0(B))U.framebufferTexture2DMultisampleEXT(J.FRAMEBUFFER,J.DEPTH_STENCIL_ATTACHMENT,J.TEXTURE_2D,q0,0,Z0);else J.framebufferTexture2D(J.FRAMEBUFFER,J.DEPTH_STENCIL_ATTACHMENT,J.TEXTURE_2D,q0,0);else throw new Error("Unknown depthTexture format")}function e0(A){const B=Z.get(A),l=A.isWebGLCubeRenderTarget===!0;if(A.depthTexture&&!B.__autoAllocateDepthBuffer){if(l)throw new Error("target.depthTexture not supported in Cube render targets");y0(B.__webglFramebuffer,A)}else if(l){B.__webglDepthbuffer=[];for(let q0=0;q0<6;q0++)Q.bindFramebuffer(J.FRAMEBUFFER,B.__webglFramebuffer[q0]),B.__webglDepthbuffer[q0]=J.createRenderbuffer(),b0(B.__webglDepthbuffer[q0],A,!1)}else Q.bindFramebuffer(J.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer=J.createRenderbuffer(),b0(B.__webglDepthbuffer,A,!1);Q.bindFramebuffer(J.FRAMEBUFFER,null)}function u(A,B,l){const q0=Z.get(A);if(B!==void 0)R0(q0.__webglFramebuffer,A,A.texture,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,0);if(l!==void 0)e0(A)}function CJ(A){const B=A.texture,l=Z.get(A),q0=Z.get(B);if(A.addEventListener("dispose",a),A.isWebGLMultipleRenderTargets!==!0){if(q0.__webglTexture===void 0)q0.__webglTexture=J.createTexture();q0.__version=B.version,K.memory.textures++}const Z0=A.isWebGLCubeRenderTarget===!0,U0=A.isWebGLMultipleRenderTargets===!0,j0=z(A)||G;if(Z0){l.__webglFramebuffer=[];for(let O0=0;O0<6;O0++)if(G&&B.mipmaps&&B.mipmaps.length>0){l.__webglFramebuffer[O0]=[];for(let A0=0;A0<B.mipmaps.length;A0++)l.__webglFramebuffer[O0][A0]=J.createFramebuffer()}else l.__webglFramebuffer[O0]=J.createFramebuffer()}else{if(G&&B.mipmaps&&B.mipmaps.length>0){l.__webglFramebuffer=[];for(let O0=0;O0<B.mipmaps.length;O0++)l.__webglFramebuffer[O0]=J.createFramebuffer()}else l.__webglFramebuffer=J.createFramebuffer();if(U0)if(H.drawBuffers){const O0=A.texture;for(let A0=0,w0=O0.length;A0<w0;A0++){const m0=Z.get(O0[A0]);if(m0.__webglTexture===void 0)m0.__webglTexture=J.createTexture(),K.memory.textures++}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(G&&A.samples>0&&p0(A)===!1){const O0=U0?B:[B];l.__webglMultisampledFramebuffer=J.createFramebuffer(),l.__webglColorRenderbuffer=[],Q.bindFramebuffer(J.FRAMEBUFFER,l.__webglMultisampledFramebuffer);for(let A0=0;A0<O0.length;A0++){const w0=O0[A0];l.__webglColorRenderbuffer[A0]=J.createRenderbuffer(),J.bindRenderbuffer(J.RENDERBUFFER,l.__webglColorRenderbuffer[A0]);const m0=Y.convert(w0.format,w0.colorSpace),H0=Y.convert(w0.type),f=C(w0.internalFormat,m0,H0,w0.colorSpace,A.isXRRenderTarget===!0),G0=x0(A);J.renderbufferStorageMultisample(J.RENDERBUFFER,G0,f,A.width,A.height),J.framebufferRenderbuffer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+A0,J.RENDERBUFFER,l.__webglColorRenderbuffer[A0])}if(J.bindRenderbuffer(J.RENDERBUFFER,null),A.depthBuffer)l.__webglDepthRenderbuffer=J.createRenderbuffer(),b0(l.__webglDepthRenderbuffer,A,!0);Q.bindFramebuffer(J.FRAMEBUFFER,null)}}if(Z0){Q.bindTexture(J.TEXTURE_CUBE_MAP,q0.__webglTexture),g(J.TEXTURE_CUBE_MAP,B,j0);for(let O0=0;O0<6;O0++)if(G&&B.mipmaps&&B.mipmaps.length>0)for(let A0=0;A0<B.mipmaps.length;A0++)R0(l.__webglFramebuffer[O0][A0],A,B,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+O0,A0);else R0(l.__webglFramebuffer[O0],A,B,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+O0,0);if(k(B,j0))M(J.TEXTURE_CUBE_MAP);Q.unbindTexture()}else if(U0){const O0=A.texture;for(let A0=0,w0=O0.length;A0<w0;A0++){const m0=O0[A0],H0=Z.get(m0);if(Q.bindTexture(J.TEXTURE_2D,H0.__webglTexture),g(J.TEXTURE_2D,m0,j0),R0(l.__webglFramebuffer,A,m0,J.COLOR_ATTACHMENT0+A0,J.TEXTURE_2D,0),k(m0,j0))M(J.TEXTURE_2D)}Q.unbindTexture()}else{let O0=J.TEXTURE_2D;if(A.isWebGL3DRenderTarget||A.isWebGLArrayRenderTarget)if(G)O0=A.isWebGL3DRenderTarget?J.TEXTURE_3D:J.TEXTURE_2D_ARRAY;else console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.");if(Q.bindTexture(O0,q0.__webglTexture),g(O0,B,j0),G&&B.mipmaps&&B.mipmaps.length>0)for(let A0=0;A0<B.mipmaps.length;A0++)R0(l.__webglFramebuffer[A0],A,B,J.COLOR_ATTACHMENT0,O0,A0);else R0(l.__webglFramebuffer,A,B,J.COLOR_ATTACHMENT0,O0,0);if(k(B,j0))M(O0);Q.unbindTexture()}if(A.depthBuffer)e0(A)}function t0(A){const B=z(A)||G,l=A.isWebGLMultipleRenderTargets===!0?A.texture:[A.texture];for(let q0=0,Z0=l.length;q0<Z0;q0++){const U0=l[q0];if(k(U0,B)){const j0=A.isWebGLCubeRenderTarget?J.TEXTURE_CUBE_MAP:J.TEXTURE_2D,O0=Z.get(U0).__webglTexture;Q.bindTexture(j0,O0),M(j0),Q.unbindTexture()}}}function T0(A){if(G&&A.samples>0&&p0(A)===!1){const B=A.isWebGLMultipleRenderTargets?A.texture:[A.texture],l=A.width,q0=A.height;let Z0=J.COLOR_BUFFER_BIT;const U0=[],j0=A.stencilBuffer?J.DEPTH_STENCIL_ATTACHMENT:J.DEPTH_ATTACHMENT,O0=Z.get(A),A0=A.isWebGLMultipleRenderTargets===!0;if(A0)for(let w0=0;w0<B.length;w0++)Q.bindFramebuffer(J.FRAMEBUFFER,O0.__webglMultisampledFramebuffer),J.framebufferRenderbuffer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+w0,J.RENDERBUFFER,null),Q.bindFramebuffer(J.FRAMEBUFFER,O0.__webglFramebuffer),J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0+w0,J.TEXTURE_2D,null,0);Q.bindFramebuffer(J.READ_FRAMEBUFFER,O0.__webglMultisampledFramebuffer),Q.bindFramebuffer(J.DRAW_FRAMEBUFFER,O0.__webglFramebuffer);for(let w0=0;w0<B.length;w0++){if(U0.push(J.COLOR_ATTACHMENT0+w0),A.depthBuffer)U0.push(j0);const m0=O0.__ignoreDepthValues!==void 0?O0.__ignoreDepthValues:!1;if(m0===!1){if(A.depthBuffer)Z0|=J.DEPTH_BUFFER_BIT;if(A.stencilBuffer)Z0|=J.STENCIL_BUFFER_BIT}if(A0)J.framebufferRenderbuffer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.RENDERBUFFER,O0.__webglColorRenderbuffer[w0]);if(m0===!0)J.invalidateFramebuffer(J.READ_FRAMEBUFFER,[j0]),J.invalidateFramebuffer(J.DRAW_FRAMEBUFFER,[j0]);if(A0){const H0=Z.get(B[w0]).__webglTexture;J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,H0,0)}if(J.blitFramebuffer(0,0,l,q0,0,0,l,q0,Z0,J.NEAREST),q)J.invalidateFramebuffer(J.READ_FRAMEBUFFER,U0)}if(Q.bindFramebuffer(J.READ_FRAMEBUFFER,null),Q.bindFramebuffer(J.DRAW_FRAMEBUFFER,null),A0)for(let w0=0;w0<B.length;w0++){Q.bindFramebuffer(J.FRAMEBUFFER,O0.__webglMultisampledFramebuffer),J.framebufferRenderbuffer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+w0,J.RENDERBUFFER,O0.__webglColorRenderbuffer[w0]);const m0=Z.get(B[w0]).__webglTexture;Q.bindFramebuffer(J.FRAMEBUFFER,O0.__webglFramebuffer),J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0+w0,J.TEXTURE_2D,m0,0)}Q.bindFramebuffer(J.DRAW_FRAMEBUFFER,O0.__webglMultisampledFramebuffer)}}function x0(A){return Math.min(H.maxSamples,A.samples)}function p0(A){const B=Z.get(A);return G&&A.samples>0&&$.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function o0(A){const B=K.render.frame;if(W.get(A)!==B)W.set(A,B),A.update()}function d0(A,B){const{colorSpace:l,format:q0,type:Z0}=A;if(A.isCompressedTexture===!0||A.isVideoTexture===!0||A.format===1035)return B;if(l!=="srgb-linear"&&l!=="")if(XJ.getTransfer(l)==="srgb"){if(G===!1)if($.has("EXT_sRGB")===!0&&q0===1023)A.format=1035,A.minFilter=1006,A.generateMipmaps=!1;else B=_$.sRGBToLinear(B);else if(q0!==1023||Z0!==1009)console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.")}else console.error("THREE.WebGLTextures: Unsupported texture color space:",l);return B}this.allocateTextureUnit=y,this.resetTextureUnits=z0,this.setTexture2D=e,this.setTexture2DArray=Y0,this.setTexture3D=t,this.setTextureCube=i,this.rebindTextures=u,this.setupRenderTarget=CJ,this.updateRenderTargetMipmap=t0,this.updateMultisampleRenderTarget=T0,this.setupDepthRenderbuffer=e0,this.setupFrameBufferTexture=R0,this.useMultisampledRTT=p0},RW=function(J,$,Q){const Z=Q.isWebGL2;function H(Y,K=""){let G;const U=XJ.getTransfer(K);if(Y===1009)return J.UNSIGNED_BYTE;if(Y===1017)return J.UNSIGNED_SHORT_4_4_4_4;if(Y===1018)return J.UNSIGNED_SHORT_5_5_5_1;if(Y===1010)return J.BYTE;if(Y===1011)return J.SHORT;if(Y===1012)return J.UNSIGNED_SHORT;if(Y===1013)return J.INT;if(Y===1014)return J.UNSIGNED_INT;if(Y===1015)return J.FLOAT;if(Y===1016){if(Z)return J.HALF_FLOAT;if(G=$.get("OES_texture_half_float"),G!==null)return G.HALF_FLOAT_OES;else return null}if(Y===1021)return J.ALPHA;if(Y===1023)return J.RGBA;if(Y===1024)return J.LUMINANCE;if(Y===1025)return J.LUMINANCE_ALPHA;if(Y===1026)return J.DEPTH_COMPONENT;if(Y===1027)return J.DEPTH_STENCIL;if(Y===1035)if(G=$.get("EXT_sRGB"),G!==null)return G.SRGB_ALPHA_EXT;else return null;if(Y===1028)return J.RED;if(Y===1029)return J.RED_INTEGER;if(Y===1030)return J.RG;if(Y===1031)return J.RG_INTEGER;if(Y===1033)return J.RGBA_INTEGER;if(Y===33776||Y===33777||Y===33778||Y===33779)if(U==="srgb")if(G=$.get("WEBGL_compressed_texture_s3tc_srgb"),G!==null){if(Y===33776)return G.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(Y===33777)return G.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(Y===33778)return G.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(Y===33779)return G.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(G=$.get("WEBGL_compressed_texture_s3tc"),G!==null){if(Y===33776)return G.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Y===33777)return G.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Y===33778)return G.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Y===33779)return G.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Y===35840||Y===35841||Y===35842||Y===35843)if(G=$.get("WEBGL_compressed_texture_pvrtc"),G!==null){if(Y===35840)return G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Y===35841)return G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Y===35842)return G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Y===35843)return G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Y===36196)if(G=$.get("WEBGL_compressed_texture_etc1"),G!==null)return G.COMPRESSED_RGB_ETC1_WEBGL;else return null;if(Y===37492||Y===37496)if(G=$.get("WEBGL_compressed_texture_etc"),G!==null){if(Y===37492)return U==="srgb"?G.COMPRESSED_SRGB8_ETC2:G.COMPRESSED_RGB8_ETC2;if(Y===37496)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:G.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(Y===37808||Y===37809||Y===37810||Y===37811||Y===37812||Y===37813||Y===37814||Y===37815||Y===37816||Y===37817||Y===37818||Y===37819||Y===37820||Y===37821)if(G=$.get("WEBGL_compressed_texture_astc"),G!==null){if(Y===37808)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:G.COMPRESSED_RGBA_ASTC_4x4_KHR;if(Y===37809)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:G.COMPRESSED_RGBA_ASTC_5x4_KHR;if(Y===37810)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:G.COMPRESSED_RGBA_ASTC_5x5_KHR;if(Y===37811)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:G.COMPRESSED_RGBA_ASTC_6x5_KHR;if(Y===37812)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:G.COMPRESSED_RGBA_ASTC_6x6_KHR;if(Y===37813)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:G.COMPRESSED_RGBA_ASTC_8x5_KHR;if(Y===37814)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:G.COMPRESSED_RGBA_ASTC_8x6_KHR;if(Y===37815)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:G.COMPRESSED_RGBA_ASTC_8x8_KHR;if(Y===37816)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:G.COMPRESSED_RGBA_ASTC_10x5_KHR;if(Y===37817)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:G.COMPRESSED_RGBA_ASTC_10x6_KHR;if(Y===37818)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:G.COMPRESSED_RGBA_ASTC_10x8_KHR;if(Y===37819)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:G.COMPRESSED_RGBA_ASTC_10x10_KHR;if(Y===37820)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:G.COMPRESSED_RGBA_ASTC_12x10_KHR;if(Y===37821)return U==="srgb"?G.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:G.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(Y===36492||Y===36494||Y===36495)if(G=$.get("EXT_texture_compression_bptc"),G!==null){if(Y===36492)return U==="srgb"?G.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:G.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(Y===36494)return G.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(Y===36495)return G.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(Y===36283||Y===36284||Y===36285||Y===36286)if(G=$.get("EXT_texture_compression_rgtc"),G!==null){if(Y===36492)return G.COMPRESSED_RED_RGTC1_EXT;if(Y===36284)return G.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(Y===36285)return G.COMPRESSED_RED_GREEN_RGTC2_EXT;if(Y===36286)return G.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;if(Y===1020){if(Z)return J.UNSIGNED_INT_24_8;if(G=$.get("WEBGL_depth_texture"),G!==null)return G.UNSIGNED_INT_24_8_WEBGL;else return null}return J[Y]!==void 0?J[Y]:null}return{convert:H}},OW=function(J,$){function Q(z,N){if(z.matrixAutoUpdate===!0)z.updateMatrix();N.value.copy(z.matrix)}function Z(z,N){if(N.color.getRGB(z.fogColor.value,r4(J)),N.isFog)z.fogNear.value=N.near,z.fogFar.value=N.far;else if(N.isFogExp2)z.fogDensity.value=N.density}function H(z,N,k,M,C){if(N.isMeshBasicMaterial)Y(z,N);else if(N.isMeshLambertMaterial)Y(z,N);else if(N.isMeshToonMaterial)Y(z,N),V(z,N);else if(N.isMeshPhongMaterial)Y(z,N),W(z,N);else if(N.isMeshStandardMaterial){if(Y(z,N),D(z,N),N.isMeshPhysicalMaterial)_(z,N,C)}else if(N.isMeshMatcapMaterial)Y(z,N),R(z,N);else if(N.isMeshDepthMaterial)Y(z,N);else if(N.isMeshDistanceMaterial)Y(z,N),E(z,N);else if(N.isMeshNormalMaterial)Y(z,N);else if(N.isLineBasicMaterial){if(K(z,N),N.isLineDashedMaterial)G(z,N)}else if(N.isPointsMaterial)U(z,N,k,M);else if(N.isSpriteMaterial)q(z,N);else if(N.isShadowMaterial)z.color.value.copy(N.color),z.opacity.value=N.opacity;else if(N.isShaderMaterial)N.uniformsNeedUpdate=!1}function Y(z,N){if(z.opacity.value=N.opacity,N.color)z.diffuse.value.copy(N.color);if(N.emissive)z.emissive.value.copy(N.emissive).multiplyScalar(N.emissiveIntensity);if(N.map)z.map.value=N.map,Q(N.map,z.mapTransform);if(N.alphaMap)z.alphaMap.value=N.alphaMap,Q(N.alphaMap,z.alphaMapTransform);if(N.bumpMap){if(z.bumpMap.value=N.bumpMap,Q(N.bumpMap,z.bumpMapTransform),z.bumpScale.value=N.bumpScale,N.side===1)z.bumpScale.value*=-1}if(N.normalMap){if(z.normalMap.value=N.normalMap,Q(N.normalMap,z.normalMapTransform),z.normalScale.value.copy(N.normalScale),N.side===1)z.normalScale.value.negate()}if(N.displacementMap)z.displacementMap.value=N.displacementMap,Q(N.displacementMap,z.displacementMapTransform),z.displacementScale.value=N.displacementScale,z.displacementBias.value=N.displacementBias;if(N.emissiveMap)z.emissiveMap.value=N.emissiveMap,Q(N.emissiveMap,z.emissiveMapTransform);if(N.specularMap)z.specularMap.value=N.specularMap,Q(N.specularMap,z.specularMapTransform);if(N.alphaTest>0)z.alphaTest.value=N.alphaTest;const k=$.get(N).envMap;if(k)z.envMap.value=k,z.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,z.reflectivity.value=N.reflectivity,z.ior.value=N.ior,z.refractionRatio.value=N.refractionRatio;if(N.lightMap){z.lightMap.value=N.lightMap;const M=J._useLegacyLights===!0?Math.PI:1;z.lightMapIntensity.value=N.lightMapIntensity*M,Q(N.lightMap,z.lightMapTransform)}if(N.aoMap)z.aoMap.value=N.aoMap,z.aoMapIntensity.value=N.aoMapIntensity,Q(N.aoMap,z.aoMapTransform)}function K(z,N){if(z.diffuse.value.copy(N.color),z.opacity.value=N.opacity,N.map)z.map.value=N.map,Q(N.map,z.mapTransform)}function G(z,N){z.dashSize.value=N.dashSize,z.totalSize.value=N.dashSize+N.gapSize,z.scale.value=N.scale}function U(z,N,k,M){if(z.diffuse.value.copy(N.color),z.opacity.value=N.opacity,z.size.value=N.size*k,z.scale.value=M*0.5,N.map)z.map.value=N.map,Q(N.map,z.uvTransform);if(N.alphaMap)z.alphaMap.value=N.alphaMap,Q(N.alphaMap,z.alphaMapTransform);if(N.alphaTest>0)z.alphaTest.value=N.alphaTest}function q(z,N){if(z.diffuse.value.copy(N.color),z.opacity.value=N.opacity,z.rotation.value=N.rotation,N.map)z.map.value=N.map,Q(N.map,z.mapTransform);if(N.alphaMap)z.alphaMap.value=N.alphaMap,Q(N.alphaMap,z.alphaMapTransform);if(N.alphaTest>0)z.alphaTest.value=N.alphaTest}function W(z,N){z.specular.value.copy(N.specular),z.shininess.value=Math.max(N.shininess,0.0001)}function V(z,N){if(N.gradientMap)z.gradientMap.value=N.gradientMap}function D(z,N){if(z.metalness.value=N.metalness,N.metalnessMap)z.metalnessMap.value=N.metalnessMap,Q(N.metalnessMap,z.metalnessMapTransform);if(z.roughness.value=N.roughness,N.roughnessMap)z.roughnessMap.value=N.roughnessMap,Q(N.roughnessMap,z.roughnessMapTransform);if($.get(N).envMap)z.envMapIntensity.value=N.envMapIntensity}function _(z,N,k){if(z.ior.value=N.ior,N.sheen>0){if(z.sheenColor.value.copy(N.sheenColor).multiplyScalar(N.sheen),z.sheenRoughness.value=N.sheenRoughness,N.sheenColorMap)z.sheenColorMap.value=N.sheenColorMap,Q(N.sheenColorMap,z.sheenColorMapTransform);if(N.sheenRoughnessMap)z.sheenRoughnessMap.value=N.sheenRoughnessMap,Q(N.sheenRoughnessMap,z.sheenRoughnessMapTransform)}if(N.clearcoat>0){if(z.clearcoat.value=N.clearcoat,z.clearcoatRoughness.value=N.clearcoatRoughness,N.clearcoatMap)z.clearcoatMap.value=N.clearcoatMap,Q(N.clearcoatMap,z.clearcoatMapTransform);if(N.clearcoatRoughnessMap)z.clearcoatRoughnessMap.value=N.clearcoatRoughnessMap,Q(N.clearcoatRoughnessMap,z.clearcoatRoughnessMapTransform);if(N.clearcoatNormalMap){if(z.clearcoatNormalMap.value=N.clearcoatNormalMap,Q(N.clearcoatNormalMap,z.clearcoatNormalMapTransform),z.clearcoatNormalScale.value.copy(N.clearcoatNormalScale),N.side===1)z.clearcoatNormalScale.value.negate()}}if(N.iridescence>0){if(z.iridescence.value=N.iridescence,z.iridescenceIOR.value=N.iridescenceIOR,z.iridescenceThicknessMinimum.value=N.iridescenceThicknessRange[0],z.iridescenceThicknessMaximum.value=N.iridescenceThicknessRange[1],N.iridescenceMap)z.iridescenceMap.value=N.iridescenceMap,Q(N.iridescenceMap,z.iridescenceMapTransform);if(N.iridescenceThicknessMap)z.iridescenceThicknessMap.value=N.iridescenceThicknessMap,Q(N.iridescenceThicknessMap,z.iridescenceThicknessMapTransform)}if(N.transmission>0){if(z.transmission.value=N.transmission,z.transmissionSamplerMap.value=k.texture,z.transmissionSamplerSize.value.set(k.width,k.height),N.transmissionMap)z.transmissionMap.value=N.transmissionMap,Q(N.transmissionMap,z.transmissionMapTransform);if(z.thickness.value=N.thickness,N.thicknessMap)z.thicknessMap.value=N.thicknessMap,Q(N.thicknessMap,z.thicknessMapTransform);z.attenuationDistance.value=N.attenuationDistance,z.attenuationColor.value.copy(N.attenuationColor)}if(N.anisotropy>0){if(z.anisotropyVector.value.set(N.anisotropy*Math.cos(N.anisotropyRotation),N.anisotropy*Math.sin(N.anisotropyRotation)),N.anisotropyMap)z.anisotropyMap.value=N.anisotropyMap,Q(N.anisotropyMap,z.anisotropyMapTransform)}if(z.specularIntensity.value=N.specularIntensity,z.specularColor.value.copy(N.specularColor),N.specularColorMap)z.specularColorMap.value=N.specularColorMap,Q(N.specularColorMap,z.specularColorMapTransform);if(N.specularIntensityMap)z.specularIntensityMap.value=N.specularIntensityMap,Q(N.specularIntensityMap,z.specularIntensityMapTransform)}function R(z,N){if(N.matcap)z.matcap.value=N.matcap}function E(z,N){const k=$.get(N).light;z.referencePosition.value.setFromMatrixPosition(k.matrixWorld),z.nearDistance.value=k.shadow.camera.near,z.farDistance.value=k.shadow.camera.far}return{refreshFogUniforms:Z,refreshMaterialUniforms:H}},BW=function(J,$,Q,Z){let H={},Y={},K=[];const G=Q.isWebGL2?J.getParameter(J.MAX_UNIFORM_BUFFER_BINDINGS):0;function U(k,M){const C=M.program;Z.uniformBlockBinding(k,C)}function q(k,M){let C=H[k.id];if(C===void 0)R(k),C=W(k),H[k.id]=C,k.addEventListener("dispose",z);const m=M.program;Z.updateUBOMapping(k,m);const P=$.render.frame;if(Y[k.id]!==P)D(k),Y[k.id]=P}function W(k){const M=V();k.__bindingPointIndex=M;const C=J.createBuffer(),m=k.__size,P=k.usage;return J.bindBuffer(J.UNIFORM_BUFFER,C),J.bufferData(J.UNIFORM_BUFFER,m,P),J.bindBuffer(J.UNIFORM_BUFFER,null),J.bindBufferBase(J.UNIFORM_BUFFER,M,C),C}function V(){for(let k=0;k<G;k++)if(K.indexOf(k)===-1)return K.push(k),k;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function D(k){const M=H[k.id],C=k.uniforms,m=k.__cache;J.bindBuffer(J.UNIFORM_BUFFER,M);for(let P=0,b=C.length;P<b;P++){const a=Array.isArray(C[P])?C[P]:[C[P]];for(let I=0,T=a.length;I<T;I++){const p=a[I];if(_(p,P,I,m)===!0){const K0=p.__offset,z0=Array.isArray(p.value)?p.value:[p.value];let y=0;for(let r=0;r<z0.length;r++){const e=z0[r],Y0=E(e);if(typeof e==="number"||typeof e==="boolean")p.__data[0]=e,J.bufferSubData(J.UNIFORM_BUFFER,K0+y,p.__data);else if(e.isMatrix3)p.__data[0]=e.elements[0],p.__data[1]=e.elements[1],p.__data[2]=e.elements[2],p.__data[3]=0,p.__data[4]=e.elements[3],p.__data[5]=e.elements[4],p.__data[6]=e.elements[5],p.__data[7]=0,p.__data[8]=e.elements[6],p.__data[9]=e.elements[7],p.__data[10]=e.elements[8],p.__data[11]=0;else e.toArray(p.__data,y),y+=Y0.storage/Float32Array.BYTES_PER_ELEMENT}J.bufferSubData(J.UNIFORM_BUFFER,K0,p.__data)}}}J.bindBuffer(J.UNIFORM_BUFFER,null)}function _(k,M,C,m){const P=k.value,b=M+"_"+C;if(m[b]===void 0){if(typeof P==="number"||typeof P==="boolean")m[b]=P;else m[b]=P.clone();return!0}else{const a=m[b];if(typeof P==="number"||typeof P==="boolean"){if(a!==P)return m[b]=P,!0}else if(a.equals(P)===!1)return a.copy(P),!0}return!1}function R(k){const M=k.uniforms;let C=0;const m=16;for(let b=0,a=M.length;b<a;b++){const I=Array.isArray(M[b])?M[b]:[M[b]];for(let T=0,p=I.length;T<p;T++){const K0=I[T],z0=Array.isArray(K0.value)?K0.value:[K0.value];for(let y=0,r=z0.length;y<r;y++){const e=z0[y],Y0=E(e),t=C%m;if(t!==0&&m-t<Y0.boundary)C+=m-t;K0.__data=new Float32Array(Y0.storage/Float32Array.BYTES_PER_ELEMENT),K0.__offset=C,C+=Y0.storage}}}const P=C%m;if(P>0)C+=m-P;return k.__size=C,k.__cache={},this}function E(k){const M={boundary:0,storage:0};if(typeof k==="number"||typeof k==="boolean")M.boundary=4,M.storage=4;else if(k.isVector2)M.boundary=8,M.storage=8;else if(k.isVector3||k.isColor)M.boundary=16,M.storage=12;else if(k.isVector4)M.boundary=16,M.storage=16;else if(k.isMatrix3)M.boundary=48,M.storage=48;else if(k.isMatrix4)M.boundary=64,M.storage=64;else if(k.isTexture)console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.");else console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",k);return M}function z(k){const M=k.target;M.removeEventListener("dispose",z);const C=K.indexOf(M.__bindingPointIndex);K.splice(C,1),J.deleteBuffer(H[M.id]),delete H[M.id],delete Y[M.id]}function N(){for(let k in H)J.deleteBuffer(H[k]);K=[],H={},Y={}}return{bind:U,update:q,dispose:N}},k5=function(J,$,Q,Z,H,Y){if(v8.subVectors(J,Q).addScalar(0.5).multiply(Z),H!==void 0)N7.x=Y*v8.x-H*v8.y,N7.y=H*v8.x+Y*v8.y;else N7.copy(v8);J.copy($),J.x+=N7.x,J.y+=N7.y,J.applyMatrix4(zH)};var A5=function(J,$,Q){if(!J||!Q&&J.constructor===$)return J;if(typeof $.BYTES_PER_ELEMENT==="number")return new $(J);return Array.prototype.slice.call(J)},MW=function(J){return ArrayBuffer.isView(J)&&!(J instanceof DataView)};var v4=function(){return(typeof performance==="undefined"?Date:performance).now()};var q8={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},X8={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};var z$=0;var C5=2;var m4=0;var p4=303;var I6=1003;var d4=1015,c4=1016;class v6{addEventListener(J,$){if(this._listeners===void 0)this._listeners={};const Q=this._listeners;if(Q[J]===void 0)Q[J]=[];if(Q[J].indexOf($)===-1)Q[J].push($)}hasEventListener(J,$){if(this._listeners===void 0)return!1;const Q=this._listeners;return Q[J]!==void 0&&Q[J].indexOf($)!==-1}removeEventListener(J,$){if(this._listeners===void 0)return;const Z=this._listeners[J];if(Z!==void 0){const H=Z.indexOf($);if(H!==-1)Z.splice(H,1)}}dispatchEvent(J){if(this._listeners===void 0)return;const Q=this._listeners[J.type];if(Q!==void 0){J.target=this;const Z=Q.slice(0);for(let H=0,Y=Z.length;H<Y;H++)Z[H].call(this,J);J.target=null}}}var gJ=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],sZ=1234567,E7=Math.PI/180,I7=180/Math.PI,u4={DEG2RAD:E7,RAD2DEG:I7,generateUUID:g6,clamp:mJ,euclideanModulo:N$,mapLinear:_U,inverseLerp:RU,lerp:O7,damp:EU,pingpong:OU,smoothstep:BU,smootherstep:MU,randInt:IU,randFloat:LU,randFloatSpread:kU,seededRandom:AU,degToRad:PU,radToDeg:TU,isPowerOfTwo:W$,ceilPowerOfTwo:wU,floorPowerOfTwo:T5,setQuaternionFromProperEuler:SU,normalize:UJ,denormalize:M6};class k0{constructor(J=0,$=0){k0.prototype.isVector2=!0,this.x=J,this.y=$}get width(){return this.x}set width(J){this.x=J}get height(){return this.y}set height(J){this.y=J}set(J,$){return this.x=J,this.y=$,this}setScalar(J){return this.x=J,this.y=J,this}setX(J){return this.x=J,this}setY(J){return this.y=J,this}setComponent(J,$){switch(J){case 0:this.x=$;break;case 1:this.y=$;break;default:throw new Error("index is out of range: "+J)}return this}getComponent(J){switch(J){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+J)}}clone(){return new this.constructor(this.x,this.y)}copy(J){return this.x=J.x,this.y=J.y,this}add(J){return this.x+=J.x,this.y+=J.y,this}addScalar(J){return this.x+=J,this.y+=J,this}addVectors(J,$){return this.x=J.x+$.x,this.y=J.y+$.y,this}addScaledVector(J,$){return this.x+=J.x*$,this.y+=J.y*$,this}sub(J){return this.x-=J.x,this.y-=J.y,this}subScalar(J){return this.x-=J,this.y-=J,this}subVectors(J,$){return this.x=J.x-$.x,this.y=J.y-$.y,this}multiply(J){return this.x*=J.x,this.y*=J.y,this}multiplyScalar(J){return this.x*=J,this.y*=J,this}divide(J){return this.x/=J.x,this.y/=J.y,this}divideScalar(J){return this.multiplyScalar(1/J)}applyMatrix3(J){const $=this.x,Q=this.y,Z=J.elements;return this.x=Z[0]*$+Z[3]*Q+Z[6],this.y=Z[1]*$+Z[4]*Q+Z[7],this}min(J){return this.x=Math.min(this.x,J.x),this.y=Math.min(this.y,J.y),this}max(J){return this.x=Math.max(this.x,J.x),this.y=Math.max(this.y,J.y),this}clamp(J,$){return this.x=Math.max(J.x,Math.min($.x,this.x)),this.y=Math.max(J.y,Math.min($.y,this.y)),this}clampScalar(J,$){return this.x=Math.max(J,Math.min($,this.x)),this.y=Math.max(J,Math.min($,this.y)),this}clampLength(J,$){const Q=this.length();return this.divideScalar(Q||1).multiplyScalar(Math.max(J,Math.min($,Q)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(J){return this.x*J.x+this.y*J.y}cross(J){return this.x*J.y-this.y*J.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(J){const $=Math.sqrt(this.lengthSq()*J.lengthSq());if($===0)return Math.PI/2;const Q=this.dot(J)/$;return Math.acos(mJ(Q,-1,1))}distanceTo(J){return Math.sqrt(this.distanceToSquared(J))}distanceToSquared(J){const $=this.x-J.x,Q=this.y-J.y;return $*$+Q*Q}manhattanDistanceTo(J){return Math.abs(this.x-J.x)+Math.abs(this.y-J.y)}setLength(J){return this.normalize().multiplyScalar(J)}lerp(J,$){return this.x+=(J.x-this.x)*$,this.y+=(J.y-this.y)*$,this}lerpVectors(J,$,Q){return this.x=J.x+($.x-J.x)*Q,this.y=J.y+($.y-J.y)*Q,this}equals(J){return J.x===this.x&&J.y===this.y}fromArray(J,$=0){return this.x=J[$],this.y=J[$+1],this}toArray(J=[],$=0){return J[$]=this.x,J[$+1]=this.y,J}fromBufferAttribute(J,$){return this.x=J.getX($),this.y=J.getY($),this}rotateAround(J,$){const Q=Math.cos($),Z=Math.sin($),H=this.x-J.x,Y=this.y-J.y;return this.x=H*Q-Y*Z+J.x,this.y=H*Z+Y*Q+J.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class s0{constructor(J,$,Q,Z,H,Y,K,G,U){if(s0.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],J!==void 0)this.set(J,$,Q,Z,H,Y,K,G,U)}set(J,$,Q,Z,H,Y,K,G,U){const q=this.elements;return q[0]=J,q[1]=Z,q[2]=K,q[3]=$,q[4]=H,q[5]=G,q[6]=Q,q[7]=Y,q[8]=U,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(J){const $=this.elements,Q=J.elements;return $[0]=Q[0],$[1]=Q[1],$[2]=Q[2],$[3]=Q[3],$[4]=Q[4],$[5]=Q[5],$[6]=Q[6],$[7]=Q[7],$[8]=Q[8],this}extractBasis(J,$,Q){return J.setFromMatrix3Column(this,0),$.setFromMatrix3Column(this,1),Q.setFromMatrix3Column(this,2),this}setFromMatrix4(J){const $=J.elements;return this.set($[0],$[4],$[8],$[1],$[5],$[9],$[2],$[6],$[10]),this}multiply(J){return this.multiplyMatrices(this,J)}premultiply(J){return this.multiplyMatrices(J,this)}multiplyMatrices(J,$){const Q=J.elements,Z=$.elements,H=this.elements,Y=Q[0],K=Q[3],G=Q[6],U=Q[1],q=Q[4],W=Q[7],V=Q[2],D=Q[5],_=Q[8],R=Z[0],E=Z[3],z=Z[6],N=Z[1],k=Z[4],M=Z[7],C=Z[2],m=Z[5],P=Z[8];return H[0]=Y*R+K*N+G*C,H[3]=Y*E+K*k+G*m,H[6]=Y*z+K*M+G*P,H[1]=U*R+q*N+W*C,H[4]=U*E+q*k+W*m,H[7]=U*z+q*M+W*P,H[2]=V*R+D*N+_*C,H[5]=V*E+D*k+_*m,H[8]=V*z+D*M+_*P,this}multiplyScalar(J){const $=this.elements;return $[0]*=J,$[3]*=J,$[6]*=J,$[1]*=J,$[4]*=J,$[7]*=J,$[2]*=J,$[5]*=J,$[8]*=J,this}determinant(){const J=this.elements,$=J[0],Q=J[1],Z=J[2],H=J[3],Y=J[4],K=J[5],G=J[6],U=J[7],q=J[8];return $*Y*q-$*K*U-Q*H*q+Q*K*G+Z*H*U-Z*Y*G}invert(){const J=this.elements,$=J[0],Q=J[1],Z=J[2],H=J[3],Y=J[4],K=J[5],G=J[6],U=J[7],q=J[8],W=q*Y-K*U,V=K*G-q*H,D=U*H-Y*G,_=$*W+Q*V+Z*D;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/_;return J[0]=W*R,J[1]=(Z*U-q*Q)*R,J[2]=(K*Q-Z*Y)*R,J[3]=V*R,J[4]=(q*$-Z*G)*R,J[5]=(Z*H-K*$)*R,J[6]=D*R,J[7]=(Q*G-U*$)*R,J[8]=(Y*$-Q*H)*R,this}transpose(){let J;const $=this.elements;return J=$[1],$[1]=$[3],$[3]=J,J=$[2],$[2]=$[6],$[6]=J,J=$[5],$[5]=$[7],$[7]=J,this}getNormalMatrix(J){return this.setFromMatrix4(J).invert().transpose()}transposeIntoArray(J){const $=this.elements;return J[0]=$[0],J[1]=$[3],J[2]=$[6],J[3]=$[1],J[4]=$[4],J[5]=$[7],J[6]=$[2],J[7]=$[5],J[8]=$[8],this}setUvTransform(J,$,Q,Z,H,Y,K){const G=Math.cos(H),U=Math.sin(H);return this.set(Q*G,Q*U,-Q*(G*Y+U*K)+Y+J,-Z*U,Z*G,-Z*(-U*Y+G*K)+K+$,0,0,1),this}scale(J,$){return this.premultiply(p9.makeScale(J,$)),this}rotate(J){return this.premultiply(p9.makeRotation(-J)),this}translate(J,$){return this.premultiply(p9.makeTranslation(J,$)),this}makeTranslation(J,$){if(J.isVector2)this.set(1,0,J.x,0,1,J.y,0,0,1);else this.set(1,0,J,0,1,$,0,0,1);return this}makeRotation(J){const $=Math.cos(J),Q=Math.sin(J);return this.set($,-Q,0,Q,$,0,0,0,1),this}makeScale(J,$){return this.set(J,0,0,0,$,0,0,0,1),this}equals(J){const $=this.elements,Q=J.elements;for(let Z=0;Z<9;Z++)if($[Z]!==Q[Z])return!1;return!0}fromArray(J,$=0){for(let Q=0;Q<9;Q++)this.elements[Q]=J[Q+$];return this}toArray(J=[],$=0){const Q=this.elements;return J[$]=Q[0],J[$+1]=Q[1],J[$+2]=Q[2],J[$+3]=Q[3],J[$+4]=Q[4],J[$+5]=Q[5],J[$+6]=Q[6],J[$+7]=Q[7],J[$+8]=Q[8],J}clone(){return new this.constructor().fromArray(this.elements)}}var p9=new s0;var aZ={},tZ=new s0().set(0.8224621,0.177538,0,0.0331941,0.9668058,0,0.0170827,0.0723974,0.9105199),eZ=new s0().set(1.2249401,-0.2249404,0,-0.0420569,1.0420571,0,-0.0196376,-0.0786361,1.0982735),$5={["srgb-linear"]:{transfer:"linear",primaries:"rec709",toReference:(J)=>J,fromReference:(J)=>J},["srgb"]:{transfer:"srgb",primaries:"rec709",toReference:(J)=>J.convertSRGBToLinear(),fromReference:(J)=>J.convertLinearToSRGB()},["display-p3-linear"]:{transfer:"linear",primaries:"p3",toReference:(J)=>J.applyMatrix3(eZ),fromReference:(J)=>J.applyMatrix3(tZ)},["display-p3"]:{transfer:"srgb",primaries:"p3",toReference:(J)=>J.convertSRGBToLinear().applyMatrix3(eZ),fromReference:(J)=>J.applyMatrix3(tZ).convertLinearToSRGB()}},fU=new Set(["srgb-linear","display-p3-linear"]),XJ={enabled:!0,_workingColorSpace:"srgb-linear",get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(J){if(!fU.has(J))throw new Error(`Unsupported working color space, "${J}".`);this._workingColorSpace=J},convert:function(J,$,Q){if(this.enabled===!1||$===Q||!$||!Q)return J;const Z=$5[$].toReference,H=$5[Q].fromReference;return H(Z(J))},fromWorkingColorSpace:function(J,$){return this.convert(J,this._workingColorSpace,$)},toWorkingColorSpace:function(J,$){return this.convert(J,$,this._workingColorSpace)},getPrimaries:function(J){return $5[J].primaries},getTransfer:function(J){if(J==="")return"linear";return $5[J].transfer}},B8;class _${static getDataURL(J){if(/^data:/i.test(J.src))return J.src;if(typeof HTMLCanvasElement==="undefined")return J.src;let $;if(J instanceof HTMLCanvasElement)$=J;else{if(B8===void 0)B8=w5("canvas");B8.width=J.width,B8.height=J.height;const Q=B8.getContext("2d");if(J instanceof ImageData)Q.putImageData(J,0,0);else Q.drawImage(J,0,0,J.width,J.height);$=B8}if($.width>2048||$.height>2048)return console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",J),$.toDataURL("image/jpeg",0.6);else return $.toDataURL("image/png")}static sRGBToLinear(J){if(typeof HTMLImageElement!=="undefined"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&J instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&J instanceof ImageBitmap){const $=w5("canvas");$.width=J.width,$.height=J.height;const Q=$.getContext("2d");Q.drawImage(J,0,0,J.width,J.height);const Z=Q.getImageData(0,0,J.width,J.height),H=Z.data;for(let Y=0;Y<H.length;Y++)H[Y]=d8(H[Y]/255)*255;return Q.putImageData(Z,0,0),$}else if(J.data){const $=J.data.slice(0);for(let Q=0;Q<$.length;Q++)if($ instanceof Uint8Array||$ instanceof Uint8ClampedArray)$[Q]=Math.floor(d8($[Q]/255)*255);else $[Q]=d8($[Q]);return{data:$,width:J.width,height:J.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),J}}var jU=0;class R${constructor(J=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jU++}),this.uuid=g6(),this.data=J,this.version=0}set needsUpdate(J){if(J===!0)this.version++}toJSON(J){const $=J===void 0||typeof J==="string";if(!$&&J.images[this.uuid]!==void 0)return J.images[this.uuid];const Q={uuid:this.uuid,url:""},Z=this.data;if(Z!==null){let H;if(Array.isArray(Z)){H=[];for(let Y=0,K=Z.length;Y<K;Y++)if(Z[Y].isDataTexture)H.push(c9(Z[Y].image));else H.push(c9(Z[Y]))}else H=c9(Z);Q.url=H}if(!$)J.images[this.uuid]=Q;return Q}}var yU=0;class xJ extends v6{constructor(J=xJ.DEFAULT_IMAGE,$=xJ.DEFAULT_MAPPING,Q=1001,Z=1001,H=1006,Y=1008,K=1023,G=1009,U=xJ.DEFAULT_ANISOTROPY,q=""){super();if(this.isTexture=!0,Object.defineProperty(this,"id",{value:yU++}),this.uuid=g6(),this.name="",this.source=new R$(J),this.mipmaps=[],this.mapping=$,this.channel=0,this.wrapS=Q,this.wrapT=Z,this.magFilter=H,this.minFilter=Y,this.anisotropy=U,this.format=K,this.internalFormat=null,this.type=G,this.offset=new k0(0,0),this.repeat=new k0(1,1),this.center=new k0(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s0,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof q==="string")this.colorSpace=q;else B7("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=q===3001?"srgb":"";this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(J=null){this.source.data=J}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(J){return this.name=J.name,this.source=J.source,this.mipmaps=J.mipmaps.slice(0),this.mapping=J.mapping,this.channel=J.channel,this.wrapS=J.wrapS,this.wrapT=J.wrapT,this.magFilter=J.magFilter,this.minFilter=J.minFilter,this.anisotropy=J.anisotropy,this.format=J.format,this.internalFormat=J.internalFormat,this.type=J.type,this.offset.copy(J.offset),this.repeat.copy(J.repeat),this.center.copy(J.center),this.rotation=J.rotation,this.matrixAutoUpdate=J.matrixAutoUpdate,this.matrix.copy(J.matrix),this.generateMipmaps=J.generateMipmaps,this.premultiplyAlpha=J.premultiplyAlpha,this.flipY=J.flipY,this.unpackAlignment=J.unpackAlignment,this.colorSpace=J.colorSpace,this.userData=JSON.parse(JSON.stringify(J.userData)),this.needsUpdate=!0,this}toJSON(J){const $=J===void 0||typeof J==="string";if(!$&&J.textures[this.uuid]!==void 0)return J.textures[this.uuid];const Q={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(J).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(Object.keys(this.userData).length>0)Q.userData=this.userData;if(!$)J.textures[this.uuid]=Q;return Q}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(J){if(this.mapping!==300)return J;if(J.applyMatrix3(this.matrix),J.x<0||J.x>1)switch(this.wrapS){case 1000:J.x=J.x-Math.floor(J.x);break;case 1001:J.x=J.x<0?0:1;break;case 1002:if(Math.abs(Math.floor(J.x)%2)===1)J.x=Math.ceil(J.x)-J.x;else J.x=J.x-Math.floor(J.x);break}if(J.y<0||J.y>1)switch(this.wrapT){case 1000:J.y=J.y-Math.floor(J.y);break;case 1001:J.y=J.y<0?0:1;break;case 1002:if(Math.abs(Math.floor(J.y)%2)===1)J.y=Math.ceil(J.y)-J.y;else J.y=J.y-Math.floor(J.y);break}if(this.flipY)J.y=1-J.y;return J}set needsUpdate(J){if(J===!0)this.version++,this.source.needsUpdate=!0}get encoding(){return B7("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace==="srgb"?3001:3000}set encoding(J){B7("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=J===3001?"srgb":""}}xJ.DEFAULT_IMAGE=null;xJ.DEFAULT_MAPPING=300;xJ.DEFAULT_ANISOTROPY=1;class DJ{constructor(J=0,$=0,Q=0,Z=1){DJ.prototype.isVector4=!0,this.x=J,this.y=$,this.z=Q,this.w=Z}get width(){return this.z}set width(J){this.z=J}get height(){return this.w}set height(J){this.w=J}set(J,$,Q,Z){return this.x=J,this.y=$,this.z=Q,this.w=Z,this}setScalar(J){return this.x=J,this.y=J,this.z=J,this.w=J,this}setX(J){return this.x=J,this}setY(J){return this.y=J,this}setZ(J){return this.z=J,this}setW(J){return this.w=J,this}setComponent(J,$){switch(J){case 0:this.x=$;break;case 1:this.y=$;break;case 2:this.z=$;break;case 3:this.w=$;break;default:throw new Error("index is out of range: "+J)}return this}getComponent(J){switch(J){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+J)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(J){return this.x=J.x,this.y=J.y,this.z=J.z,this.w=J.w!==void 0?J.w:1,this}add(J){return this.x+=J.x,this.y+=J.y,this.z+=J.z,this.w+=J.w,this}addScalar(J){return this.x+=J,this.y+=J,this.z+=J,this.w+=J,this}addVectors(J,$){return this.x=J.x+$.x,this.y=J.y+$.y,this.z=J.z+$.z,this.w=J.w+$.w,this}addScaledVector(J,$){return this.x+=J.x*$,this.y+=J.y*$,this.z+=J.z*$,this.w+=J.w*$,this}sub(J){return this.x-=J.x,this.y-=J.y,this.z-=J.z,this.w-=J.w,this}subScalar(J){return this.x-=J,this.y-=J,this.z-=J,this.w-=J,this}subVectors(J,$){return this.x=J.x-$.x,this.y=J.y-$.y,this.z=J.z-$.z,this.w=J.w-$.w,this}multiply(J){return this.x*=J.x,this.y*=J.y,this.z*=J.z,this.w*=J.w,this}multiplyScalar(J){return this.x*=J,this.y*=J,this.z*=J,this.w*=J,this}applyMatrix4(J){const $=this.x,Q=this.y,Z=this.z,H=this.w,Y=J.elements;return this.x=Y[0]*$+Y[4]*Q+Y[8]*Z+Y[12]*H,this.y=Y[1]*$+Y[5]*Q+Y[9]*Z+Y[13]*H,this.z=Y[2]*$+Y[6]*Q+Y[10]*Z+Y[14]*H,this.w=Y[3]*$+Y[7]*Q+Y[11]*Z+Y[15]*H,this}divideScalar(J){return this.multiplyScalar(1/J)}setAxisAngleFromQuaternion(J){this.w=2*Math.acos(J.w);const $=Math.sqrt(1-J.w*J.w);if($<0.0001)this.x=1,this.y=0,this.z=0;else this.x=J.x/$,this.y=J.y/$,this.z=J.z/$;return this}setAxisAngleFromRotationMatrix(J){let $,Q,Z,H;const Y=0.01,K=0.1,G=J.elements,U=G[0],q=G[4],W=G[8],V=G[1],D=G[5],_=G[9],R=G[2],E=G[6],z=G[10];if(Math.abs(q-V)<0.01&&Math.abs(W-R)<0.01&&Math.abs(_-E)<0.01){if(Math.abs(q+V)<0.1&&Math.abs(W+R)<0.1&&Math.abs(_+E)<0.1&&Math.abs(U+D+z-3)<0.1)return this.set(1,0,0,0),this;$=Math.PI;const k=(U+1)/2,M=(D+1)/2,C=(z+1)/2,m=(q+V)/4,P=(W+R)/4,b=(_+E)/4;if(k>M&&k>C)if(k<0.01)Q=0,Z=0.707106781,H=0.707106781;else Q=Math.sqrt(k),Z=m/Q,H=P/Q;else if(M>C)if(M<0.01)Q=0.707106781,Z=0,H=0.707106781;else Z=Math.sqrt(M),Q=m/Z,H=b/Z;else if(C<0.01)Q=0.707106781,Z=0.707106781,H=0;else H=Math.sqrt(C),Q=P/H,Z=b/H;return this.set(Q,Z,H,$),this}let N=Math.sqrt((E-_)*(E-_)+(W-R)*(W-R)+(V-q)*(V-q));if(Math.abs(N)<0.001)N=1;return this.x=(E-_)/N,this.y=(W-R)/N,this.z=(V-q)/N,this.w=Math.acos((U+D+z-1)/2),this}min(J){return this.x=Math.min(this.x,J.x),this.y=Math.min(this.y,J.y),this.z=Math.min(this.z,J.z),this.w=Math.min(this.w,J.w),this}max(J){return this.x=Math.max(this.x,J.x),this.y=Math.max(this.y,J.y),this.z=Math.max(this.z,J.z),this.w=Math.max(this.w,J.w),this}clamp(J,$){return this.x=Math.max(J.x,Math.min($.x,this.x)),this.y=Math.max(J.y,Math.min($.y,this.y)),this.z=Math.max(J.z,Math.min($.z,this.z)),this.w=Math.max(J.w,Math.min($.w,this.w)),this}clampScalar(J,$){return this.x=Math.max(J,Math.min($,this.x)),this.y=Math.max(J,Math.min($,this.y)),this.z=Math.max(J,Math.min($,this.z)),this.w=Math.max(J,Math.min($,this.w)),this}clampLength(J,$){const Q=this.length();return this.divideScalar(Q||1).multiplyScalar(Math.max(J,Math.min($,Q)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(J){return this.x*J.x+this.y*J.y+this.z*J.z+this.w*J.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(J){return this.normalize().multiplyScalar(J)}lerp(J,$){return this.x+=(J.x-this.x)*$,this.y+=(J.y-this.y)*$,this.z+=(J.z-this.z)*$,this.w+=(J.w-this.w)*$,this}lerpVectors(J,$,Q){return this.x=J.x+($.x-J.x)*Q,this.y=J.y+($.y-J.y)*Q,this.z=J.z+($.z-J.z)*Q,this.w=J.w+($.w-J.w)*Q,this}equals(J){return J.x===this.x&&J.y===this.y&&J.z===this.z&&J.w===this.w}fromArray(J,$=0){return this.x=J[$],this.y=J[$+1],this.z=J[$+2],this.w=J[$+3],this}toArray(J=[],$=0){return J[$]=this.x,J[$+1]=this.y,J[$+2]=this.z,J[$+3]=this.w,J}fromBufferAttribute(J,$){return this.x=J.getX($),this.y=J.getY($),this.z=J.getZ($),this.w=J.getW($),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class n4 extends v6{constructor(J=1,$=1,Q={}){super();this.isRenderTarget=!0,this.width=J,this.height=$,this.depth=1,this.scissor=new DJ(0,0,J,$),this.scissorTest=!1,this.viewport=new DJ(0,0,J,$);const Z={width:J,height:$,depth:1};if(Q.encoding!==void 0)B7("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),Q.colorSpace=Q.encoding===3001?"srgb":"";Q=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},Q),this.texture=new xJ(Z,Q.mapping,Q.wrapS,Q.wrapT,Q.magFilter,Q.minFilter,Q.format,Q.type,Q.anisotropy,Q.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=Q.generateMipmaps,this.texture.internalFormat=Q.internalFormat,this.depthBuffer=Q.depthBuffer,this.stencilBuffer=Q.stencilBuffer,this.depthTexture=Q.depthTexture,this.samples=Q.samples}setSize(J,$,Q=1){if(this.width!==J||this.height!==$||this.depth!==Q)this.width=J,this.height=$,this.depth=Q,this.texture.image.width=J,this.texture.image.height=$,this.texture.image.depth=Q,this.dispose();this.viewport.set(0,0,J,$),this.scissor.set(0,0,J,$)}clone(){return new this.constructor().copy(this)}copy(J){this.width=J.width,this.height=J.height,this.depth=J.depth,this.scissor.copy(J.scissor),this.scissorTest=J.scissorTest,this.viewport.copy(J.viewport),this.texture=J.texture.clone(),this.texture.isRenderTargetTexture=!0;const $=Object.assign({},J.texture.image);if(this.texture.source=new R$($),this.depthBuffer=J.depthBuffer,this.stencilBuffer=J.stencilBuffer,J.depthTexture!==null)this.depthTexture=J.depthTexture.clone();return this.samples=J.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Y6 extends n4{constructor(J=1,$=1,Q={}){super(J,$,Q);this.isWebGLRenderTarget=!0}}class E$ extends xJ{constructor(J=null,$=1,Q=1,Z=1){super(null);this.isDataArrayTexture=!0,this.image={data:J,width:$,height:Q,depth:Z},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class o4 extends xJ{constructor(J=null,$=1,Q=1,Z=1){super(null);this.isData3DTexture=!0,this.image={data:J,width:$,height:Q,depth:Z},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class L6{constructor(J=0,$=0,Q=0,Z=1){this.isQuaternion=!0,this._x=J,this._y=$,this._z=Q,this._w=Z}static slerpFlat(J,$,Q,Z,H,Y,K){let G=Q[Z+0],U=Q[Z+1],q=Q[Z+2],W=Q[Z+3];const V=H[Y+0],D=H[Y+1],_=H[Y+2],R=H[Y+3];if(K===0){J[$+0]=G,J[$+1]=U,J[$+2]=q,J[$+3]=W;return}if(K===1){J[$+0]=V,J[$+1]=D,J[$+2]=_,J[$+3]=R;return}if(W!==R||G!==V||U!==D||q!==_){let E=1-K;const z=G*V+U*D+q*_+W*R,N=z>=0?1:-1,k=1-z*z;if(k>Number.EPSILON){const C=Math.sqrt(k),m=Math.atan2(C,z*N);E=Math.sin(E*m)/C,K=Math.sin(K*m)/C}const M=K*N;if(G=G*E+V*M,U=U*E+D*M,q=q*E+_*M,W=W*E+R*M,E===1-K){const C=1/Math.sqrt(G*G+U*U+q*q+W*W);G*=C,U*=C,q*=C,W*=C}}J[$]=G,J[$+1]=U,J[$+2]=q,J[$+3]=W}static multiplyQuaternionsFlat(J,$,Q,Z,H,Y){const K=Q[Z],G=Q[Z+1],U=Q[Z+2],q=Q[Z+3],W=H[Y],V=H[Y+1],D=H[Y+2],_=H[Y+3];return J[$]=K*_+q*W+G*D-U*V,J[$+1]=G*_+q*V+U*W-K*D,J[$+2]=U*_+q*D+K*V-G*W,J[$+3]=q*_-K*W-G*V-U*D,J}get x(){return this._x}set x(J){this._x=J,this._onChangeCallback()}get y(){return this._y}set y(J){this._y=J,this._onChangeCallback()}get z(){return this._z}set z(J){this._z=J,this._onChangeCallback()}get w(){return this._w}set w(J){this._w=J,this._onChangeCallback()}set(J,$,Q,Z){return this._x=J,this._y=$,this._z=Q,this._w=Z,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(J){return this._x=J.x,this._y=J.y,this._z=J.z,this._w=J.w,this._onChangeCallback(),this}setFromEuler(J,$=!0){const{_x:Q,_y:Z,_z:H,_order:Y}=J,K=Math.cos,G=Math.sin,U=K(Q/2),q=K(Z/2),W=K(H/2),V=G(Q/2),D=G(Z/2),_=G(H/2);switch(Y){case"XYZ":this._x=V*q*W+U*D*_,this._y=U*D*W-V*q*_,this._z=U*q*_+V*D*W,this._w=U*q*W-V*D*_;break;case"YXZ":this._x=V*q*W+U*D*_,this._y=U*D*W-V*q*_,this._z=U*q*_-V*D*W,this._w=U*q*W+V*D*_;break;case"ZXY":this._x=V*q*W-U*D*_,this._y=U*D*W+V*q*_,this._z=U*q*_+V*D*W,this._w=U*q*W-V*D*_;break;case"ZYX":this._x=V*q*W-U*D*_,this._y=U*D*W+V*q*_,this._z=U*q*_-V*D*W,this._w=U*q*W+V*D*_;break;case"YZX":this._x=V*q*W+U*D*_,this._y=U*D*W+V*q*_,this._z=U*q*_-V*D*W,this._w=U*q*W-V*D*_;break;case"XZY":this._x=V*q*W-U*D*_,this._y=U*D*W-V*q*_,this._z=U*q*_+V*D*W,this._w=U*q*W+V*D*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Y)}if($===!0)this._onChangeCallback();return this}setFromAxisAngle(J,$){const Q=$/2,Z=Math.sin(Q);return this._x=J.x*Z,this._y=J.y*Z,this._z=J.z*Z,this._w=Math.cos(Q),this._onChangeCallback(),this}setFromRotationMatrix(J){const $=J.elements,Q=$[0],Z=$[4],H=$[8],Y=$[1],K=$[5],G=$[9],U=$[2],q=$[6],W=$[10],V=Q+K+W;if(V>0){const D=0.5/Math.sqrt(V+1);this._w=0.25/D,this._x=(q-G)*D,this._y=(H-U)*D,this._z=(Y-Z)*D}else if(Q>K&&Q>W){const D=2*Math.sqrt(1+Q-K-W);this._w=(q-G)/D,this._x=0.25*D,this._y=(Z+Y)/D,this._z=(H+U)/D}else if(K>W){const D=2*Math.sqrt(1+K-Q-W);this._w=(H-U)/D,this._x=(Z+Y)/D,this._y=0.25*D,this._z=(G+q)/D}else{const D=2*Math.sqrt(1+W-Q-K);this._w=(Y-Z)/D,this._x=(H+U)/D,this._y=(G+q)/D,this._z=0.25*D}return this._onChangeCallback(),this}setFromUnitVectors(J,$){let Q=J.dot($)+1;if(Q<Number.EPSILON)if(Q=0,Math.abs(J.x)>Math.abs(J.z))this._x=-J.y,this._y=J.x,this._z=0,this._w=Q;else this._x=0,this._y=-J.z,this._z=J.y,this._w=Q;else this._x=J.y*$.z-J.z*$.y,this._y=J.z*$.x-J.x*$.z,this._z=J.x*$.y-J.y*$.x,this._w=Q;return this.normalize()}angleTo(J){return 2*Math.acos(Math.abs(mJ(this.dot(J),-1,1)))}rotateTowards(J,$){const Q=this.angleTo(J);if(Q===0)return this;const Z=Math.min(1,$/Q);return this.slerp(J,Z),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(J){return this._x*J._x+this._y*J._y+this._z*J._z+this._w*J._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let J=this.length();if(J===0)this._x=0,this._y=0,this._z=0,this._w=1;else J=1/J,this._x=this._x*J,this._y=this._y*J,this._z=this._z*J,this._w=this._w*J;return this._onChangeCallback(),this}multiply(J){return this.multiplyQuaternions(this,J)}premultiply(J){return this.multiplyQuaternions(J,this)}multiplyQuaternions(J,$){const{_x:Q,_y:Z,_z:H,_w:Y}=J,K=$._x,G=$._y,U=$._z,q=$._w;return this._x=Q*q+Y*K+Z*U-H*G,this._y=Z*q+Y*G+H*K-Q*U,this._z=H*q+Y*U+Q*G-Z*K,this._w=Y*q-Q*K-Z*G-H*U,this._onChangeCallback(),this}slerp(J,$){if($===0)return this;if($===1)return this.copy(J);const Q=this._x,Z=this._y,H=this._z,Y=this._w;let K=Y*J._w+Q*J._x+Z*J._y+H*J._z;if(K<0)this._w=-J._w,this._x=-J._x,this._y=-J._y,this._z=-J._z,K=-K;else this.copy(J);if(K>=1)return this._w=Y,this._x=Q,this._y=Z,this._z=H,this;const G=1-K*K;if(G<=Number.EPSILON){const D=1-$;return this._w=D*Y+$*this._w,this._x=D*Q+$*this._x,this._y=D*Z+$*this._y,this._z=D*H+$*this._z,this.normalize(),this}const U=Math.sqrt(G),q=Math.atan2(U,K),W=Math.sin((1-$)*q)/U,V=Math.sin($*q)/U;return this._w=Y*W+this._w*V,this._x=Q*W+this._x*V,this._y=Z*W+this._y*V,this._z=H*W+this._z*V,this._onChangeCallback(),this}slerpQuaternions(J,$,Q){return this.copy(J).slerp($,Q)}random(){const J=Math.random(),$=Math.sqrt(1-J),Q=Math.sqrt(J),Z=2*Math.PI*Math.random(),H=2*Math.PI*Math.random();return this.set($*Math.cos(Z),Q*Math.sin(H),Q*Math.cos(H),$*Math.sin(Z))}equals(J){return J._x===this._x&&J._y===this._y&&J._z===this._z&&J._w===this._w}fromArray(J,$=0){return this._x=J[$],this._y=J[$+1],this._z=J[$+2],this._w=J[$+3],this._onChangeCallback(),this}toArray(J=[],$=0){return J[$]=this._x,J[$+1]=this._y,J[$+2]=this._z,J[$+3]=this._w,J}fromBufferAttribute(J,$){return this._x=J.getX($),this._y=J.getY($),this._z=J.getZ($),this._w=J.getW($),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(J){return this._onChangeCallback=J,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class v{constructor(J=0,$=0,Q=0){v.prototype.isVector3=!0,this.x=J,this.y=$,this.z=Q}set(J,$,Q){if(Q===void 0)Q=this.z;return this.x=J,this.y=$,this.z=Q,this}setScalar(J){return this.x=J,this.y=J,this.z=J,this}setX(J){return this.x=J,this}setY(J){return this.y=J,this}setZ(J){return this.z=J,this}setComponent(J,$){switch(J){case 0:this.x=$;break;case 1:this.y=$;break;case 2:this.z=$;break;default:throw new Error("index is out of range: "+J)}return this}getComponent(J){switch(J){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+J)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(J){return this.x=J.x,this.y=J.y,this.z=J.z,this}add(J){return this.x+=J.x,this.y+=J.y,this.z+=J.z,this}addScalar(J){return this.x+=J,this.y+=J,this.z+=J,this}addVectors(J,$){return this.x=J.x+$.x,this.y=J.y+$.y,this.z=J.z+$.z,this}addScaledVector(J,$){return this.x+=J.x*$,this.y+=J.y*$,this.z+=J.z*$,this}sub(J){return this.x-=J.x,this.y-=J.y,this.z-=J.z,this}subScalar(J){return this.x-=J,this.y-=J,this.z-=J,this}subVectors(J,$){return this.x=J.x-$.x,this.y=J.y-$.y,this.z=J.z-$.z,this}multiply(J){return this.x*=J.x,this.y*=J.y,this.z*=J.z,this}multiplyScalar(J){return this.x*=J,this.y*=J,this.z*=J,this}multiplyVectors(J,$){return this.x=J.x*$.x,this.y=J.y*$.y,this.z=J.z*$.z,this}applyEuler(J){return this.applyQuaternion(J4.setFromEuler(J))}applyAxisAngle(J,$){return this.applyQuaternion(J4.setFromAxisAngle(J,$))}applyMatrix3(J){const $=this.x,Q=this.y,Z=this.z,H=J.elements;return this.x=H[0]*$+H[3]*Q+H[6]*Z,this.y=H[1]*$+H[4]*Q+H[7]*Z,this.z=H[2]*$+H[5]*Q+H[8]*Z,this}applyNormalMatrix(J){return this.applyMatrix3(J).normalize()}applyMatrix4(J){const $=this.x,Q=this.y,Z=this.z,H=J.elements,Y=1/(H[3]*$+H[7]*Q+H[11]*Z+H[15]);return this.x=(H[0]*$+H[4]*Q+H[8]*Z+H[12])*Y,this.y=(H[1]*$+H[5]*Q+H[9]*Z+H[13])*Y,this.z=(H[2]*$+H[6]*Q+H[10]*Z+H[14])*Y,this}applyQuaternion(J){const $=this.x,Q=this.y,Z=this.z,H=J.x,Y=J.y,K=J.z,G=J.w,U=2*(Y*Z-K*Q),q=2*(K*$-H*Z),W=2*(H*Q-Y*$);return this.x=$+G*U+Y*W-K*q,this.y=Q+G*q+K*U-H*W,this.z=Z+G*W+H*q-Y*U,this}project(J){return this.applyMatrix4(J.matrixWorldInverse).applyMatrix4(J.projectionMatrix)}unproject(J){return this.applyMatrix4(J.projectionMatrixInverse).applyMatrix4(J.matrixWorld)}transformDirection(J){const $=this.x,Q=this.y,Z=this.z,H=J.elements;return this.x=H[0]*$+H[4]*Q+H[8]*Z,this.y=H[1]*$+H[5]*Q+H[9]*Z,this.z=H[2]*$+H[6]*Q+H[10]*Z,this.normalize()}divide(J){return this.x/=J.x,this.y/=J.y,this.z/=J.z,this}divideScalar(J){return this.multiplyScalar(1/J)}min(J){return this.x=Math.min(this.x,J.x),this.y=Math.min(this.y,J.y),this.z=Math.min(this.z,J.z),this}max(J){return this.x=Math.max(this.x,J.x),this.y=Math.max(this.y,J.y),this.z=Math.max(this.z,J.z),this}clamp(J,$){return this.x=Math.max(J.x,Math.min($.x,this.x)),this.y=Math.max(J.y,Math.min($.y,this.y)),this.z=Math.max(J.z,Math.min($.z,this.z)),this}clampScalar(J,$){return this.x=Math.max(J,Math.min($,this.x)),this.y=Math.max(J,Math.min($,this.y)),this.z=Math.max(J,Math.min($,this.z)),this}clampLength(J,$){const Q=this.length();return this.divideScalar(Q||1).multiplyScalar(Math.max(J,Math.min($,Q)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(J){return this.x*J.x+this.y*J.y+this.z*J.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(J){return this.normalize().multiplyScalar(J)}lerp(J,$){return this.x+=(J.x-this.x)*$,this.y+=(J.y-this.y)*$,this.z+=(J.z-this.z)*$,this}lerpVectors(J,$,Q){return this.x=J.x+($.x-J.x)*Q,this.y=J.y+($.y-J.y)*Q,this.z=J.z+($.z-J.z)*Q,this}cross(J){return this.crossVectors(this,J)}crossVectors(J,$){const{x:Q,y:Z,z:H}=J,Y=$.x,K=$.y,G=$.z;return this.x=Z*G-H*K,this.y=H*Y-Q*G,this.z=Q*K-Z*Y,this}projectOnVector(J){const $=J.lengthSq();if($===0)return this.set(0,0,0);const Q=J.dot(this)/$;return this.copy(J).multiplyScalar(Q)}projectOnPlane(J){return u9.copy(this).projectOnVector(J),this.sub(u9)}reflect(J){return this.sub(u9.copy(J).multiplyScalar(2*this.dot(J)))}angleTo(J){const $=Math.sqrt(this.lengthSq()*J.lengthSq());if($===0)return Math.PI/2;const Q=this.dot(J)/$;return Math.acos(mJ(Q,-1,1))}distanceTo(J){return Math.sqrt(this.distanceToSquared(J))}distanceToSquared(J){const $=this.x-J.x,Q=this.y-J.y,Z=this.z-J.z;return $*$+Q*Q+Z*Z}manhattanDistanceTo(J){return Math.abs(this.x-J.x)+Math.abs(this.y-J.y)+Math.abs(this.z-J.z)}setFromSpherical(J){return this.setFromSphericalCoords(J.radius,J.phi,J.theta)}setFromSphericalCoords(J,$,Q){const Z=Math.sin($)*J;return this.x=Z*Math.sin(Q),this.y=Math.cos($)*J,this.z=Z*Math.cos(Q),this}setFromCylindrical(J){return this.setFromCylindricalCoords(J.radius,J.theta,J.y)}setFromCylindricalCoords(J,$,Q){return this.x=J*Math.sin($),this.y=Q,this.z=J*Math.cos($),this}setFromMatrixPosition(J){const $=J.elements;return this.x=$[12],this.y=$[13],this.z=$[14],this}setFromMatrixScale(J){const $=this.setFromMatrixColumn(J,0).length(),Q=this.setFromMatrixColumn(J,1).length(),Z=this.setFromMatrixColumn(J,2).length();return this.x=$,this.y=Q,this.z=Z,this}setFromMatrixColumn(J,$){return this.fromArray(J.elements,$*4)}setFromMatrix3Column(J,$){return this.fromArray(J.elements,$*3)}setFromEuler(J){return this.x=J._x,this.y=J._y,this.z=J._z,this}setFromColor(J){return this.x=J.r,this.y=J.g,this.z=J.b,this}equals(J){return J.x===this.x&&J.y===this.y&&J.z===this.z}fromArray(J,$=0){return this.x=J[$],this.y=J[$+1],this.z=J[$+2],this}toArray(J=[],$=0){return J[$]=this.x,J[$+1]=this.y,J[$+2]=this.z,J}fromBufferAttribute(J,$){return this.x=J.getX($),this.y=J.getY($),this.z=J.getZ($),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const J=(Math.random()-0.5)*2,$=Math.random()*Math.PI*2,Q=Math.sqrt(1-J**2);return this.x=Q*Math.cos($),this.y=Q*Math.sin($),this.z=J,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}var u9=new v,J4=new L6;class u8{constructor(J=new v(Infinity,Infinity,Infinity),$=new v((-Infinity),(-Infinity),(-Infinity))){this.isBox3=!0,this.min=J,this.max=$}set(J,$){return this.min.copy(J),this.max.copy($),this}setFromArray(J){this.makeEmpty();for(let $=0,Q=J.length;$<Q;$+=3)this.expandByPoint(q6.fromArray(J,$));return this}setFromBufferAttribute(J){this.makeEmpty();for(let $=0,Q=J.count;$<Q;$++)this.expandByPoint(q6.fromBufferAttribute(J,$));return this}setFromPoints(J){this.makeEmpty();for(let $=0,Q=J.length;$<Q;$++)this.expandByPoint(J[$]);return this}setFromCenterAndSize(J,$){const Q=q6.copy($).multiplyScalar(0.5);return this.min.copy(J).sub(Q),this.max.copy(J).add(Q),this}setFromObject(J,$=!1){return this.makeEmpty(),this.expandByObject(J,$)}clone(){return new this.constructor().copy(this)}copy(J){return this.min.copy(J.min),this.max.copy(J.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=(-Infinity),this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(J){return this.isEmpty()?J.set(0,0,0):J.addVectors(this.min,this.max).multiplyScalar(0.5)}getSize(J){return this.isEmpty()?J.set(0,0,0):J.subVectors(this.max,this.min)}expandByPoint(J){return this.min.min(J),this.max.max(J),this}expandByVector(J){return this.min.sub(J),this.max.add(J),this}expandByScalar(J){return this.min.addScalar(-J),this.max.addScalar(J),this}expandByObject(J,$=!1){J.updateWorldMatrix(!1,!1);const Q=J.geometry;if(Q!==void 0){const H=Q.getAttribute("position");if($===!0&&H!==void 0&&J.isInstancedMesh!==!0)for(let Y=0,K=H.count;Y<K;Y++){if(J.isMesh===!0)J.getVertexPosition(Y,q6);else q6.fromBufferAttribute(H,Y);q6.applyMatrix4(J.matrixWorld),this.expandByPoint(q6)}else{if(J.boundingBox!==void 0){if(J.boundingBox===null)J.computeBoundingBox();Q5.copy(J.boundingBox)}else{if(Q.boundingBox===null)Q.computeBoundingBox();Q5.copy(Q.boundingBox)}Q5.applyMatrix4(J.matrixWorld),this.union(Q5)}}const Z=J.children;for(let H=0,Y=Z.length;H<Y;H++)this.expandByObject(Z[H],$);return this}containsPoint(J){return J.x<this.min.x||J.x>this.max.x||J.y<this.min.y||J.y>this.max.y||J.z<this.min.z||J.z>this.max.z?!1:!0}containsBox(J){return this.min.x<=J.min.x&&J.max.x<=this.max.x&&this.min.y<=J.min.y&&J.max.y<=this.max.y&&this.min.z<=J.min.z&&J.max.z<=this.max.z}getParameter(J,$){return $.set((J.x-this.min.x)/(this.max.x-this.min.x),(J.y-this.min.y)/(this.max.y-this.min.y),(J.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(J){return J.max.x<this.min.x||J.min.x>this.max.x||J.max.y<this.min.y||J.min.y>this.max.y||J.max.z<this.min.z||J.min.z>this.max.z?!1:!0}intersectsSphere(J){return this.clampPoint(J.center,q6),q6.distanceToSquared(J.center)<=J.radius*J.radius}intersectsPlane(J){let $,Q;if(J.normal.x>0)$=J.normal.x*this.min.x,Q=J.normal.x*this.max.x;else $=J.normal.x*this.max.x,Q=J.normal.x*this.min.x;if(J.normal.y>0)$+=J.normal.y*this.min.y,Q+=J.normal.y*this.max.y;else $+=J.normal.y*this.max.y,Q+=J.normal.y*this.min.y;if(J.normal.z>0)$+=J.normal.z*this.min.z,Q+=J.normal.z*this.max.z;else $+=J.normal.z*this.max.z,Q+=J.normal.z*this.min.z;return $<=-J.constant&&Q>=-J.constant}intersectsTriangle(J){if(this.isEmpty())return!1;this.getCenter(F7),Z5.subVectors(this.max,F7),M8.subVectors(J.a,F7),I8.subVectors(J.b,F7),L8.subVectors(J.c,F7),l6.subVectors(I8,M8),n6.subVectors(L8,I8),Z8.subVectors(M8,L8);let $=[0,-l6.z,l6.y,0,-n6.z,n6.y,0,-Z8.z,Z8.y,l6.z,0,-l6.x,n6.z,0,-n6.x,Z8.z,0,-Z8.x,-l6.y,l6.x,0,-n6.y,n6.x,0,-Z8.y,Z8.x,0];if(!l9($,M8,I8,L8,Z5))return!1;if($=[1,0,0,0,1,0,0,0,1],!l9($,M8,I8,L8,Z5))return!1;return H5.crossVectors(l6,n6),$=[H5.x,H5.y,H5.z],l9($,M8,I8,L8,Z5)}clampPoint(J,$){return $.copy(J).clamp(this.min,this.max)}distanceToPoint(J){return this.clampPoint(J,q6).distanceTo(J)}getBoundingSphere(J){if(this.isEmpty())J.makeEmpty();else this.getCenter(J.center),J.radius=this.getSize(q6).length()*0.5;return J}intersect(J){if(this.min.max(J.min),this.max.min(J.max),this.isEmpty())this.makeEmpty();return this}union(J){return this.min.min(J.min),this.max.max(J.max),this}applyMatrix4(J){if(this.isEmpty())return this;return j6[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(J),j6[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(J),j6[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(J),j6[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(J),j6[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(J),j6[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(J),j6[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(J),j6[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(J),this.setFromPoints(j6),this}translate(J){return this.min.add(J),this.max.add(J),this}equals(J){return J.min.equals(this.min)&&J.max.equals(this.max)}}var j6=[new v,new v,new v,new v,new v,new v,new v,new v],q6=new v,Q5=new u8,M8=new v,I8=new v,L8=new v,l6=new v,n6=new v,Z8=new v,F7=new v,Z5=new v,H5=new v,H8=new v,xU=new u8,W7=new v,n9=new v;class f5{constructor(J=new v,$=-1){this.isSphere=!0,this.center=J,this.radius=$}set(J,$){return this.center.copy(J),this.radius=$,this}setFromPoints(J,$){const Q=this.center;if($!==void 0)Q.copy($);else xU.setFromPoints(J).getCenter(Q);let Z=0;for(let H=0,Y=J.length;H<Y;H++)Z=Math.max(Z,Q.distanceToSquared(J[H]));return this.radius=Math.sqrt(Z),this}copy(J){return this.center.copy(J.center),this.radius=J.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(J){return J.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(J){return J.distanceTo(this.center)-this.radius}intersectsSphere(J){const $=this.radius+J.radius;return J.center.distanceToSquared(this.center)<=$*$}intersectsBox(J){return J.intersectsSphere(this)}intersectsPlane(J){return Math.abs(J.distanceToPoint(this.center))<=this.radius}clampPoint(J,$){const Q=this.center.distanceToSquared(J);if($.copy(J),Q>this.radius*this.radius)$.sub(this.center).normalize(),$.multiplyScalar(this.radius).add(this.center);return $}getBoundingBox(J){if(this.isEmpty())return J.makeEmpty(),J;return J.set(this.center,this.center),J.expandByScalar(this.radius),J}applyMatrix4(J){return this.center.applyMatrix4(J),this.radius=this.radius*J.getMaxScaleOnAxis(),this}translate(J){return this.center.add(J),this}expandByPoint(J){if(this.isEmpty())return this.center.copy(J),this.radius=0,this;W7.subVectors(J,this.center);const $=W7.lengthSq();if($>this.radius*this.radius){const Q=Math.sqrt($),Z=(Q-this.radius)*0.5;this.center.addScaledVector(W7,Z/Q),this.radius+=Z}return this}union(J){if(J.isEmpty())return this;if(this.isEmpty())return this.copy(J),this;if(this.center.equals(J.center)===!0)this.radius=Math.max(this.radius,J.radius);else n9.subVectors(J.center,this.center).setLength(J.radius),this.expandByPoint(W7.copy(J.center).add(n9)),this.expandByPoint(W7.copy(J.center).sub(n9));return this}equals(J){return J.center.equals(this.center)&&J.radius===this.radius}clone(){return new this.constructor().copy(this)}}var y6=new v,o9=new v,Y5=new v,o6=new v,i9=new v,G5=new v,r9=new v;class j5{constructor(J=new v,$=new v(0,0,-1)){this.origin=J,this.direction=$}set(J,$){return this.origin.copy(J),this.direction.copy($),this}copy(J){return this.origin.copy(J.origin),this.direction.copy(J.direction),this}at(J,$){return $.copy(this.origin).addScaledVector(this.direction,J)}lookAt(J){return this.direction.copy(J).sub(this.origin).normalize(),this}recast(J){return this.origin.copy(this.at(J,y6)),this}closestPointToPoint(J,$){$.subVectors(J,this.origin);const Q=$.dot(this.direction);if(Q<0)return $.copy(this.origin);return $.copy(this.origin).addScaledVector(this.direction,Q)}distanceToPoint(J){return Math.sqrt(this.distanceSqToPoint(J))}distanceSqToPoint(J){const $=y6.subVectors(J,this.origin).dot(this.direction);if($<0)return this.origin.distanceToSquared(J);return y6.copy(this.origin).addScaledVector(this.direction,$),y6.distanceToSquared(J)}distanceSqToSegment(J,$,Q,Z){o9.copy(J).add($).multiplyScalar(0.5),Y5.copy($).sub(J).normalize(),o6.copy(this.origin).sub(o9);const H=J.distanceTo($)*0.5,Y=-this.direction.dot(Y5),K=o6.dot(this.direction),G=-o6.dot(Y5),U=o6.lengthSq(),q=Math.abs(1-Y*Y);let W,V,D,_;if(q>0)if(W=Y*G-K,V=Y*K-G,_=H*q,W>=0)if(V>=-_)if(V<=_){const R=1/q;W*=R,V*=R,D=W*(W+Y*V+2*K)+V*(Y*W+V+2*G)+U}else V=H,W=Math.max(0,-(Y*V+K)),D=-W*W+V*(V+2*G)+U;else V=-H,W=Math.max(0,-(Y*V+K)),D=-W*W+V*(V+2*G)+U;else if(V<=-_)W=Math.max(0,-(-Y*H+K)),V=W>0?-H:Math.min(Math.max(-H,-G),H),D=-W*W+V*(V+2*G)+U;else if(V<=_)W=0,V=Math.min(Math.max(-H,-G),H),D=V*(V+2*G)+U;else W=Math.max(0,-(Y*H+K)),V=W>0?H:Math.min(Math.max(-H,-G),H),D=-W*W+V*(V+2*G)+U;else V=Y>0?-H:H,W=Math.max(0,-(Y*V+K)),D=-W*W+V*(V+2*G)+U;if(Q)Q.copy(this.origin).addScaledVector(this.direction,W);if(Z)Z.copy(o9).addScaledVector(Y5,V);return D}intersectSphere(J,$){y6.subVectors(J.center,this.origin);const Q=y6.dot(this.direction),Z=y6.dot(y6)-Q*Q,H=J.radius*J.radius;if(Z>H)return null;const Y=Math.sqrt(H-Z),K=Q-Y,G=Q+Y;if(G<0)return null;if(K<0)return this.at(G,$);return this.at(K,$)}intersectsSphere(J){return this.distanceSqToPoint(J.center)<=J.radius*J.radius}distanceToPlane(J){const $=J.normal.dot(this.direction);if($===0){if(J.distanceToPoint(this.origin)===0)return 0;return null}const Q=-(this.origin.dot(J.normal)+J.constant)/$;return Q>=0?Q:null}intersectPlane(J,$){const Q=this.distanceToPlane(J);if(Q===null)return null;return this.at(Q,$)}intersectsPlane(J){const $=J.distanceToPoint(this.origin);if($===0)return!0;if(J.normal.dot(this.direction)*$<0)return!0;return!1}intersectBox(J,$){let Q,Z,H,Y,K,G;const U=1/this.direction.x,q=1/this.direction.y,W=1/this.direction.z,V=this.origin;if(U>=0)Q=(J.min.x-V.x)*U,Z=(J.max.x-V.x)*U;else Q=(J.max.x-V.x)*U,Z=(J.min.x-V.x)*U;if(q>=0)H=(J.min.y-V.y)*q,Y=(J.max.y-V.y)*q;else H=(J.max.y-V.y)*q,Y=(J.min.y-V.y)*q;if(Q>Y||H>Z)return null;if(H>Q||isNaN(Q))Q=H;if(Y<Z||isNaN(Z))Z=Y;if(W>=0)K=(J.min.z-V.z)*W,G=(J.max.z-V.z)*W;else K=(J.max.z-V.z)*W,G=(J.min.z-V.z)*W;if(Q>G||K>Z)return null;if(K>Q||Q!==Q)Q=K;if(G<Z||Z!==Z)Z=G;if(Z<0)return null;return this.at(Q>=0?Q:Z,$)}intersectsBox(J){return this.intersectBox(J,y6)!==null}intersectTriangle(J,$,Q,Z,H){i9.subVectors($,J),G5.subVectors(Q,J),r9.crossVectors(i9,G5);let Y=this.direction.dot(r9),K;if(Y>0){if(Z)return null;K=1}else if(Y<0)K=-1,Y=-Y;else return null;o6.subVectors(this.origin,J);const G=K*this.direction.dot(G5.crossVectors(o6,G5));if(G<0)return null;const U=K*this.direction.dot(i9.cross(o6));if(U<0)return null;if(G+U>Y)return null;const q=-K*o6.dot(r9);if(q<0)return null;return this.at(q/Y,H)}applyMatrix4(J){return this.origin.applyMatrix4(J),this.direction.transformDirection(J),this}equals(J){return J.origin.equals(this.origin)&&J.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class IJ{constructor(J,$,Q,Z,H,Y,K,G,U,q,W,V,D,_,R,E){if(IJ.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J!==void 0)this.set(J,$,Q,Z,H,Y,K,G,U,q,W,V,D,_,R,E)}set(J,$,Q,Z,H,Y,K,G,U,q,W,V,D,_,R,E){const z=this.elements;return z[0]=J,z[4]=$,z[8]=Q,z[12]=Z,z[1]=H,z[5]=Y,z[9]=K,z[13]=G,z[2]=U,z[6]=q,z[10]=W,z[14]=V,z[3]=D,z[7]=_,z[11]=R,z[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new IJ().fromArray(this.elements)}copy(J){const $=this.elements,Q=J.elements;return $[0]=Q[0],$[1]=Q[1],$[2]=Q[2],$[3]=Q[3],$[4]=Q[4],$[5]=Q[5],$[6]=Q[6],$[7]=Q[7],$[8]=Q[8],$[9]=Q[9],$[10]=Q[10],$[11]=Q[11],$[12]=Q[12],$[13]=Q[13],$[14]=Q[14],$[15]=Q[15],this}copyPosition(J){const $=this.elements,Q=J.elements;return $[12]=Q[12],$[13]=Q[13],$[14]=Q[14],this}setFromMatrix3(J){const $=J.elements;return this.set($[0],$[3],$[6],0,$[1],$[4],$[7],0,$[2],$[5],$[8],0,0,0,0,1),this}extractBasis(J,$,Q){return J.setFromMatrixColumn(this,0),$.setFromMatrixColumn(this,1),Q.setFromMatrixColumn(this,2),this}makeBasis(J,$,Q){return this.set(J.x,$.x,Q.x,0,J.y,$.y,Q.y,0,J.z,$.z,Q.z,0,0,0,0,1),this}extractRotation(J){const $=this.elements,Q=J.elements,Z=1/k8.setFromMatrixColumn(J,0).length(),H=1/k8.setFromMatrixColumn(J,1).length(),Y=1/k8.setFromMatrixColumn(J,2).length();return $[0]=Q[0]*Z,$[1]=Q[1]*Z,$[2]=Q[2]*Z,$[3]=0,$[4]=Q[4]*H,$[5]=Q[5]*H,$[6]=Q[6]*H,$[7]=0,$[8]=Q[8]*Y,$[9]=Q[9]*Y,$[10]=Q[10]*Y,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,this}makeRotationFromEuler(J){const $=this.elements,Q=J.x,Z=J.y,H=J.z,Y=Math.cos(Q),K=Math.sin(Q),G=Math.cos(Z),U=Math.sin(Z),q=Math.cos(H),W=Math.sin(H);if(J.order==="XYZ"){const V=Y*q,D=Y*W,_=K*q,R=K*W;$[0]=G*q,$[4]=-G*W,$[8]=U,$[1]=D+_*U,$[5]=V-R*U,$[9]=-K*G,$[2]=R-V*U,$[6]=_+D*U,$[10]=Y*G}else if(J.order==="YXZ"){const V=G*q,D=G*W,_=U*q,R=U*W;$[0]=V+R*K,$[4]=_*K-D,$[8]=Y*U,$[1]=Y*W,$[5]=Y*q,$[9]=-K,$[2]=D*K-_,$[6]=R+V*K,$[10]=Y*G}else if(J.order==="ZXY"){const V=G*q,D=G*W,_=U*q,R=U*W;$[0]=V-R*K,$[4]=-Y*W,$[8]=_+D*K,$[1]=D+_*K,$[5]=Y*q,$[9]=R-V*K,$[2]=-Y*U,$[6]=K,$[10]=Y*G}else if(J.order==="ZYX"){const V=Y*q,D=Y*W,_=K*q,R=K*W;$[0]=G*q,$[4]=_*U-D,$[8]=V*U+R,$[1]=G*W,$[5]=R*U+V,$[9]=D*U-_,$[2]=-U,$[6]=K*G,$[10]=Y*G}else if(J.order==="YZX"){const V=Y*G,D=Y*U,_=K*G,R=K*U;$[0]=G*q,$[4]=R-V*W,$[8]=_*W+D,$[1]=W,$[5]=Y*q,$[9]=-K*q,$[2]=-U*q,$[6]=D*W+_,$[10]=V-R*W}else if(J.order==="XZY"){const V=Y*G,D=Y*U,_=K*G,R=K*U;$[0]=G*q,$[4]=-W,$[8]=U*q,$[1]=V*W+R,$[5]=Y*q,$[9]=D*W-_,$[2]=_*W-D,$[6]=K*q,$[10]=R*W+V}return $[3]=0,$[7]=0,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,this}makeRotationFromQuaternion(J){return this.compose(bU,J,hU)}lookAt(J,$,Q){const Z=this.elements;if(sJ.subVectors(J,$),sJ.lengthSq()===0)sJ.z=1;if(sJ.normalize(),i6.crossVectors(Q,sJ),i6.lengthSq()===0){if(Math.abs(Q.z)===1)sJ.x+=0.0001;else sJ.z+=0.0001;sJ.normalize(),i6.crossVectors(Q,sJ)}return i6.normalize(),K5.crossVectors(sJ,i6),Z[0]=i6.x,Z[4]=K5.x,Z[8]=sJ.x,Z[1]=i6.y,Z[5]=K5.y,Z[9]=sJ.y,Z[2]=i6.z,Z[6]=K5.z,Z[10]=sJ.z,this}multiply(J){return this.multiplyMatrices(this,J)}premultiply(J){return this.multiplyMatrices(J,this)}multiplyMatrices(J,$){const Q=J.elements,Z=$.elements,H=this.elements,Y=Q[0],K=Q[4],G=Q[8],U=Q[12],q=Q[1],W=Q[5],V=Q[9],D=Q[13],_=Q[2],R=Q[6],E=Q[10],z=Q[14],N=Q[3],k=Q[7],M=Q[11],C=Q[15],m=Z[0],P=Z[4],b=Z[8],a=Z[12],I=Z[1],T=Z[5],p=Z[9],K0=Z[13],z0=Z[2],y=Z[6],r=Z[10],e=Z[14],Y0=Z[3],t=Z[7],i=Z[11],O=Z[15];return H[0]=Y*m+K*I+G*z0+U*Y0,H[4]=Y*P+K*T+G*y+U*t,H[8]=Y*b+K*p+G*r+U*i,H[12]=Y*a+K*K0+G*e+U*O,H[1]=q*m+W*I+V*z0+D*Y0,H[5]=q*P+W*T+V*y+D*t,H[9]=q*b+W*p+V*r+D*i,H[13]=q*a+W*K0+V*e+D*O,H[2]=_*m+R*I+E*z0+z*Y0,H[6]=_*P+R*T+E*y+z*t,H[10]=_*b+R*p+E*r+z*i,H[14]=_*a+R*K0+E*e+z*O,H[3]=N*m+k*I+M*z0+C*Y0,H[7]=N*P+k*T+M*y+C*t,H[11]=N*b+k*p+M*r+C*i,H[15]=N*a+k*K0+M*e+C*O,this}multiplyScalar(J){const $=this.elements;return $[0]*=J,$[4]*=J,$[8]*=J,$[12]*=J,$[1]*=J,$[5]*=J,$[9]*=J,$[13]*=J,$[2]*=J,$[6]*=J,$[10]*=J,$[14]*=J,$[3]*=J,$[7]*=J,$[11]*=J,$[15]*=J,this}determinant(){const J=this.elements,$=J[0],Q=J[4],Z=J[8],H=J[12],Y=J[1],K=J[5],G=J[9],U=J[13],q=J[2],W=J[6],V=J[10],D=J[14],_=J[3],R=J[7],E=J[11],z=J[15];return _*(+H*G*W-Z*U*W-H*K*V+Q*U*V+Z*K*D-Q*G*D)+R*(+$*G*D-$*U*V+H*Y*V-Z*Y*D+Z*U*q-H*G*q)+E*(+$*U*W-$*K*D-H*Y*W+Q*Y*D+H*K*q-Q*U*q)+z*(-Z*K*q-$*G*W+$*K*V+Z*Y*W-Q*Y*V+Q*G*q)}transpose(){const J=this.elements;let $;return $=J[1],J[1]=J[4],J[4]=$,$=J[2],J[2]=J[8],J[8]=$,$=J[6],J[6]=J[9],J[9]=$,$=J[3],J[3]=J[12],J[12]=$,$=J[7],J[7]=J[13],J[13]=$,$=J[11],J[11]=J[14],J[14]=$,this}setPosition(J,$,Q){const Z=this.elements;if(J.isVector3)Z[12]=J.x,Z[13]=J.y,Z[14]=J.z;else Z[12]=J,Z[13]=$,Z[14]=Q;return this}invert(){const J=this.elements,$=J[0],Q=J[1],Z=J[2],H=J[3],Y=J[4],K=J[5],G=J[6],U=J[7],q=J[8],W=J[9],V=J[10],D=J[11],_=J[12],R=J[13],E=J[14],z=J[15],N=W*E*U-R*V*U+R*G*D-K*E*D-W*G*z+K*V*z,k=_*V*U-q*E*U-_*G*D+Y*E*D+q*G*z-Y*V*z,M=q*R*U-_*W*U+_*K*D-Y*R*D-q*K*z+Y*W*z,C=_*W*G-q*R*G-_*K*V+Y*R*V+q*K*E-Y*W*E,m=$*N+Q*k+Z*M+H*C;if(m===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/m;return J[0]=N*P,J[1]=(R*V*H-W*E*H-R*Z*D+Q*E*D+W*Z*z-Q*V*z)*P,J[2]=(K*E*H-R*G*H+R*Z*U-Q*E*U-K*Z*z+Q*G*z)*P,J[3]=(W*G*H-K*V*H-W*Z*U+Q*V*U+K*Z*D-Q*G*D)*P,J[4]=k*P,J[5]=(q*E*H-_*V*H+_*Z*D-$*E*D-q*Z*z+$*V*z)*P,J[6]=(_*G*H-Y*E*H-_*Z*U+$*E*U+Y*Z*z-$*G*z)*P,J[7]=(Y*V*H-q*G*H+q*Z*U-$*V*U-Y*Z*D+$*G*D)*P,J[8]=M*P,J[9]=(_*W*H-q*R*H-_*Q*D+$*R*D+q*Q*z-$*W*z)*P,J[10]=(Y*R*H-_*K*H+_*Q*U-$*R*U-Y*Q*z+$*K*z)*P,J[11]=(q*K*H-Y*W*H-q*Q*U+$*W*U+Y*Q*D-$*K*D)*P,J[12]=C*P,J[13]=(q*R*Z-_*W*Z+_*Q*V-$*R*V-q*Q*E+$*W*E)*P,J[14]=(_*K*Z-Y*R*Z-_*Q*G+$*R*G+Y*Q*E-$*K*E)*P,J[15]=(Y*W*Z-q*K*Z+q*Q*G-$*W*G-Y*Q*V+$*K*V)*P,this}scale(J){const $=this.elements,Q=J.x,Z=J.y,H=J.z;return $[0]*=Q,$[4]*=Z,$[8]*=H,$[1]*=Q,$[5]*=Z,$[9]*=H,$[2]*=Q,$[6]*=Z,$[10]*=H,$[3]*=Q,$[7]*=Z,$[11]*=H,this}getMaxScaleOnAxis(){const J=this.elements,$=J[0]*J[0]+J[1]*J[1]+J[2]*J[2],Q=J[4]*J[4]+J[5]*J[5]+J[6]*J[6],Z=J[8]*J[8]+J[9]*J[9]+J[10]*J[10];return Math.sqrt(Math.max($,Q,Z))}makeTranslation(J,$,Q){if(J.isVector3)this.set(1,0,0,J.x,0,1,0,J.y,0,0,1,J.z,0,0,0,1);else this.set(1,0,0,J,0,1,0,$,0,0,1,Q,0,0,0,1);return this}makeRotationX(J){const $=Math.cos(J),Q=Math.sin(J);return this.set(1,0,0,0,0,$,-Q,0,0,Q,$,0,0,0,0,1),this}makeRotationY(J){const $=Math.cos(J),Q=Math.sin(J);return this.set($,0,Q,0,0,1,0,0,-Q,0,$,0,0,0,0,1),this}makeRotationZ(J){const $=Math.cos(J),Q=Math.sin(J);return this.set($,-Q,0,0,Q,$,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(J,$){const Q=Math.cos($),Z=Math.sin($),H=1-Q,Y=J.x,K=J.y,G=J.z,U=H*Y,q=H*K;return this.set(U*Y+Q,U*K-Z*G,U*G+Z*K,0,U*K+Z*G,q*K+Q,q*G-Z*Y,0,U*G-Z*K,q*G+Z*Y,H*G*G+Q,0,0,0,0,1),this}makeScale(J,$,Q){return this.set(J,0,0,0,0,$,0,0,0,0,Q,0,0,0,0,1),this}makeShear(J,$,Q,Z,H,Y){return this.set(1,Q,H,0,J,1,Y,0,$,Z,1,0,0,0,0,1),this}compose(J,$,Q){const Z=this.elements,H=$._x,Y=$._y,K=$._z,G=$._w,U=H+H,q=Y+Y,W=K+K,V=H*U,D=H*q,_=H*W,R=Y*q,E=Y*W,z=K*W,N=G*U,k=G*q,M=G*W,C=Q.x,m=Q.y,P=Q.z;return Z[0]=(1-(R+z))*C,Z[1]=(D+M)*C,Z[2]=(_-k)*C,Z[3]=0,Z[4]=(D-M)*m,Z[5]=(1-(V+z))*m,Z[6]=(E+N)*m,Z[7]=0,Z[8]=(_+k)*P,Z[9]=(E-N)*P,Z[10]=(1-(V+R))*P,Z[11]=0,Z[12]=J.x,Z[13]=J.y,Z[14]=J.z,Z[15]=1,this}decompose(J,$,Q){const Z=this.elements;let H=k8.set(Z[0],Z[1],Z[2]).length();const Y=k8.set(Z[4],Z[5],Z[6]).length(),K=k8.set(Z[8],Z[9],Z[10]).length();if(this.determinant()<0)H=-H;J.x=Z[12],J.y=Z[13],J.z=Z[14],X6.copy(this);const U=1/H,q=1/Y,W=1/K;return X6.elements[0]*=U,X6.elements[1]*=U,X6.elements[2]*=U,X6.elements[4]*=q,X6.elements[5]*=q,X6.elements[6]*=q,X6.elements[8]*=W,X6.elements[9]*=W,X6.elements[10]*=W,$.setFromRotationMatrix(X6),Q.x=H,Q.y=Y,Q.z=K,this}makePerspective(J,$,Q,Z,H,Y,K=2000){const G=this.elements,U=2*H/($-J),q=2*H/(Q-Z),W=($+J)/($-J),V=(Q+Z)/(Q-Z);let D,_;if(K===2000)D=-(Y+H)/(Y-H),_=-2*Y*H/(Y-H);else if(K===2001)D=-Y/(Y-H),_=-Y*H/(Y-H);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+K);return G[0]=U,G[4]=0,G[8]=W,G[12]=0,G[1]=0,G[5]=q,G[9]=V,G[13]=0,G[2]=0,G[6]=0,G[10]=D,G[14]=_,G[3]=0,G[7]=0,G[11]=-1,G[15]=0,this}makeOrthographic(J,$,Q,Z,H,Y,K=2000){const G=this.elements,U=1/($-J),q=1/(Q-Z),W=1/(Y-H),V=($+J)*U,D=(Q+Z)*q;let _,R;if(K===2000)_=(Y+H)*W,R=-2*W;else if(K===2001)_=H*W,R=-1*W;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+K);return G[0]=2*U,G[4]=0,G[8]=0,G[12]=-V,G[1]=0,G[5]=2*q,G[9]=0,G[13]=-D,G[2]=0,G[6]=0,G[10]=R,G[14]=-_,G[3]=0,G[7]=0,G[11]=0,G[15]=1,this}equals(J){const $=this.elements,Q=J.elements;for(let Z=0;Z<16;Z++)if($[Z]!==Q[Z])return!1;return!0}fromArray(J,$=0){for(let Q=0;Q<16;Q++)this.elements[Q]=J[Q+$];return this}toArray(J=[],$=0){const Q=this.elements;return J[$]=Q[0],J[$+1]=Q[1],J[$+2]=Q[2],J[$+3]=Q[3],J[$+4]=Q[4],J[$+5]=Q[5],J[$+6]=Q[6],J[$+7]=Q[7],J[$+8]=Q[8],J[$+9]=Q[9],J[$+10]=Q[10],J[$+11]=Q[11],J[$+12]=Q[12],J[$+13]=Q[13],J[$+14]=Q[14],J[$+15]=Q[15],J}}var k8=new v,X6=new IJ,bU=new v(0,0,0),hU=new v(1,1,1),i6=new v,K5=new v,sJ=new v,$4=new IJ,Q4=new L6;class y5{constructor(J=0,$=0,Q=0,Z=y5.DEFAULT_ORDER){this.isEuler=!0,this._x=J,this._y=$,this._z=Q,this._order=Z}get x(){return this._x}set x(J){this._x=J,this._onChangeCallback()}get y(){return this._y}set y(J){this._y=J,this._onChangeCallback()}get z(){return this._z}set z(J){this._z=J,this._onChangeCallback()}get order(){return this._order}set order(J){this._order=J,this._onChangeCallback()}set(J,$,Q,Z=this._order){return this._x=J,this._y=$,this._z=Q,this._order=Z,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(J){return this._x=J._x,this._y=J._y,this._z=J._z,this._order=J._order,this._onChangeCallback(),this}setFromRotationMatrix(J,$=this._order,Q=!0){const Z=J.elements,H=Z[0],Y=Z[4],K=Z[8],G=Z[1],U=Z[5],q=Z[9],W=Z[2],V=Z[6],D=Z[10];switch($){case"XYZ":if(this._y=Math.asin(mJ(K,-1,1)),Math.abs(K)<0.9999999)this._x=Math.atan2(-q,D),this._z=Math.atan2(-Y,H);else this._x=Math.atan2(V,U),this._z=0;break;case"YXZ":if(this._x=Math.asin(-mJ(q,-1,1)),Math.abs(q)<0.9999999)this._y=Math.atan2(K,D),this._z=Math.atan2(G,U);else this._y=Math.atan2(-W,H),this._z=0;break;case"ZXY":if(this._x=Math.asin(mJ(V,-1,1)),Math.abs(V)<0.9999999)this._y=Math.atan2(-W,D),this._z=Math.atan2(-Y,U);else this._y=0,this._z=Math.atan2(G,H);break;case"ZYX":if(this._y=Math.asin(-mJ(W,-1,1)),Math.abs(W)<0.9999999)this._x=Math.atan2(V,D),this._z=Math.atan2(G,H);else this._x=0,this._z=Math.atan2(-Y,U);break;case"YZX":if(this._z=Math.asin(mJ(G,-1,1)),Math.abs(G)<0.9999999)this._x=Math.atan2(-q,U),this._y=Math.atan2(-W,H);else this._x=0,this._y=Math.atan2(K,D);break;case"XZY":if(this._z=Math.asin(-mJ(Y,-1,1)),Math.abs(Y)<0.9999999)this._x=Math.atan2(V,U),this._y=Math.atan2(K,H);else this._x=Math.atan2(-q,D),this._y=0;break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+$)}if(this._order=$,Q===!0)this._onChangeCallback();return this}setFromQuaternion(J,$,Q){return $4.makeRotationFromQuaternion(J),this.setFromRotationMatrix($4,$,Q)}setFromVector3(J,$=this._order){return this.set(J.x,J.y,J.z,$)}reorder(J){return Q4.setFromEuler(this),this.setFromQuaternion(Q4,J)}equals(J){return J._x===this._x&&J._y===this._y&&J._z===this._z&&J._order===this._order}fromArray(J){if(this._x=J[0],this._y=J[1],this._z=J[2],J[3]!==void 0)this._order=J[3];return this._onChangeCallback(),this}toArray(J=[],$=0){return J[$]=this._x,J[$+1]=this._y,J[$+2]=this._z,J[$+3]=this._order,J}_onChange(J){return this._onChangeCallback=J,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}y5.DEFAULT_ORDER="XYZ";class O${constructor(){this.mask=1|0}set(J){this.mask=(1<<J|0)>>>0}enable(J){this.mask|=1<<J|0}enableAll(){this.mask=4294967295|0}toggle(J){this.mask^=1<<J|0}disable(J){this.mask&=~(1<<J|0)}disableAll(){this.mask=0}test(J){return(this.mask&J.mask)!==0}isEnabled(J){return(this.mask&(1<<J|0))!==0}}var gU=0,Z4=new v,A8=new L6,x6=new IJ,U5=new v,V7=new v,vU=new v,mU=new L6,H4=new v(1,0,0),Y4=new v(0,1,0),G4=new v(0,0,1),pU={type:"added"},dU={type:"removed"};class bJ extends v6{constructor(){super();this.isObject3D=!0,Object.defineProperty(this,"id",{value:gU++}),this.uuid=g6(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bJ.DEFAULT_UP.clone();const J=new v,$=new y5,Q=new L6,Z=new v(1,1,1);function H(){Q.setFromEuler($,!1)}function Y(){$.setFromQuaternion(Q,void 0,!1)}$._onChange(H),Q._onChange(Y),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:J},rotation:{configurable:!0,enumerable:!0,value:$},quaternion:{configurable:!0,enumerable:!0,value:Q},scale:{configurable:!0,enumerable:!0,value:Z},modelViewMatrix:{value:new IJ},normalMatrix:{value:new s0}}),this.matrix=new IJ,this.matrixWorld=new IJ,this.matrixAutoUpdate=bJ.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=bJ.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new O$,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(J){if(this.matrixAutoUpdate)this.updateMatrix();this.matrix.premultiply(J),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(J){return this.quaternion.premultiply(J),this}setRotationFromAxisAngle(J,$){this.quaternion.setFromAxisAngle(J,$)}setRotationFromEuler(J){this.quaternion.setFromEuler(J,!0)}setRotationFromMatrix(J){this.quaternion.setFromRotationMatrix(J)}setRotationFromQuaternion(J){this.quaternion.copy(J)}rotateOnAxis(J,$){return A8.setFromAxisAngle(J,$),this.quaternion.multiply(A8),this}rotateOnWorldAxis(J,$){return A8.setFromAxisAngle(J,$),this.quaternion.premultiply(A8),this}rotateX(J){return this.rotateOnAxis(H4,J)}rotateY(J){return this.rotateOnAxis(Y4,J)}rotateZ(J){return this.rotateOnAxis(G4,J)}translateOnAxis(J,$){return Z4.copy(J).applyQuaternion(this.quaternion),this.position.add(Z4.multiplyScalar($)),this}translateX(J){return this.translateOnAxis(H4,J)}translateY(J){return this.translateOnAxis(Y4,J)}translateZ(J){return this.translateOnAxis(G4,J)}localToWorld(J){return this.updateWorldMatrix(!0,!1),J.applyMatrix4(this.matrixWorld)}worldToLocal(J){return this.updateWorldMatrix(!0,!1),J.applyMatrix4(x6.copy(this.matrixWorld).invert())}lookAt(J,$,Q){if(J.isVector3)U5.copy(J);else U5.set(J,$,Q);const Z=this.parent;if(this.updateWorldMatrix(!0,!1),V7.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight)x6.lookAt(V7,U5,this.up);else x6.lookAt(U5,V7,this.up);if(this.quaternion.setFromRotationMatrix(x6),Z)x6.extractRotation(Z.matrixWorld),A8.setFromRotationMatrix(x6),this.quaternion.premultiply(A8.invert())}add(J){if(arguments.length>1){for(let $=0;$<arguments.length;$++)this.add(arguments[$]);return this}if(J===this)return console.error("THREE.Object3D.add: object can\'t be added as a child of itself.",J),this;if(J&&J.isObject3D){if(J.parent!==null)J.parent.remove(J);J.parent=this,this.children.push(J),J.dispatchEvent(pU)}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",J);return this}remove(J){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.remove(arguments[Q]);return this}const $=this.children.indexOf(J);if($!==-1)J.parent=null,this.children.splice($,1),J.dispatchEvent(dU);return this}removeFromParent(){const J=this.parent;if(J!==null)J.remove(this);return this}clear(){return this.remove(...this.children)}attach(J){if(this.updateWorldMatrix(!0,!1),x6.copy(this.matrixWorld).invert(),J.parent!==null)J.parent.updateWorldMatrix(!0,!1),x6.multiply(J.parent.matrixWorld);return J.applyMatrix4(x6),this.add(J),J.updateWorldMatrix(!1,!0),this}getObjectById(J){return this.getObjectByProperty("id",J)}getObjectByName(J){return this.getObjectByProperty("name",J)}getObjectByProperty(J,$){if(this[J]===$)return this;for(let Q=0,Z=this.children.length;Q<Z;Q++){const Y=this.children[Q].getObjectByProperty(J,$);if(Y!==void 0)return Y}return}getObjectsByProperty(J,$,Q=[]){if(this[J]===$)Q.push(this);const Z=this.children;for(let H=0,Y=Z.length;H<Y;H++)Z[H].getObjectsByProperty(J,$,Q);return Q}getWorldPosition(J){return this.updateWorldMatrix(!0,!1),J.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(J){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(V7,J,vU),J}getWorldScale(J){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(V7,mU,J),J}getWorldDirection(J){this.updateWorldMatrix(!0,!1);const $=this.matrixWorld.elements;return J.set($[8],$[9],$[10]).normalize()}raycast(){}traverse(J){J(this);const $=this.children;for(let Q=0,Z=$.length;Q<Z;Q++)$[Q].traverse(J)}traverseVisible(J){if(this.visible===!1)return;J(this);const $=this.children;for(let Q=0,Z=$.length;Q<Z;Q++)$[Q].traverseVisible(J)}traverseAncestors(J){const $=this.parent;if($!==null)J($),$.traverseAncestors(J)}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(J){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||J){if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorldNeedsUpdate=!1,J=!0}const $=this.children;for(let Q=0,Z=$.length;Q<Z;Q++){const H=$[Q];if(H.matrixWorldAutoUpdate===!0||J===!0)H.updateMatrixWorld(J)}}updateWorldMatrix(J,$){const Q=this.parent;if(J===!0&&Q!==null&&Q.matrixWorldAutoUpdate===!0)Q.updateWorldMatrix(!0,!1);if(this.matrixAutoUpdate)this.updateMatrix();if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if($===!0){const Z=this.children;for(let H=0,Y=Z.length;H<Y;H++){const K=Z[H];if(K.matrixWorldAutoUpdate===!0)K.updateWorldMatrix(!1,!0)}}}toJSON(J){const $=J===void 0||typeof J==="string",Q={};if($)J={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},Q.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"};const Z={};if(Z.uuid=this.uuid,Z.type=this.type,this.name!=="")Z.name=this.name;if(this.castShadow===!0)Z.castShadow=!0;if(this.receiveShadow===!0)Z.receiveShadow=!0;if(this.visible===!1)Z.visible=!1;if(this.frustumCulled===!1)Z.frustumCulled=!1;if(this.renderOrder!==0)Z.renderOrder=this.renderOrder;if(Object.keys(this.userData).length>0)Z.userData=this.userData;if(Z.layers=this.layers.mask,Z.matrix=this.matrix.toArray(),Z.up=this.up.toArray(),this.matrixAutoUpdate===!1)Z.matrixAutoUpdate=!1;if(this.isInstancedMesh){if(Z.type="InstancedMesh",Z.count=this.count,Z.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null)Z.instanceColor=this.instanceColor.toJSON()}if(this.isBatchedMesh){if(Z.type="BatchedMesh",Z.perObjectFrustumCulled=this.perObjectFrustumCulled,Z.sortObjects=this.sortObjects,Z.drawRanges=this._drawRanges,Z.reservedRanges=this._reservedRanges,Z.visibility=this._visibility,Z.active=this._active,Z.bounds=this._bounds.map((K)=>({boxInitialized:K.boxInitialized,boxMin:K.box.min.toArray(),boxMax:K.box.max.toArray(),sphereInitialized:K.sphereInitialized,sphereRadius:K.sphere.radius,sphereCenter:K.sphere.center.toArray()})),Z.maxGeometryCount=this._maxGeometryCount,Z.maxVertexCount=this._maxVertexCount,Z.maxIndexCount=this._maxIndexCount,Z.geometryInitialized=this._geometryInitialized,Z.geometryCount=this._geometryCount,Z.matricesTexture=this._matricesTexture.toJSON(J),this.boundingSphere!==null)Z.boundingSphere={center:Z.boundingSphere.center.toArray(),radius:Z.boundingSphere.radius};if(this.boundingBox!==null)Z.boundingBox={min:Z.boundingBox.min.toArray(),max:Z.boundingBox.max.toArray()}}function H(K,G){if(K[G.uuid]===void 0)K[G.uuid]=G.toJSON(J);return G.uuid}if(this.isScene){if(this.background){if(this.background.isColor)Z.background=this.background.toJSON();else if(this.background.isTexture)Z.background=this.background.toJSON(J).uuid}if(this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0)Z.environment=this.environment.toJSON(J).uuid}else if(this.isMesh||this.isLine||this.isPoints){Z.geometry=H(J.geometries,this.geometry);const K=this.geometry.parameters;if(K!==void 0&&K.shapes!==void 0){const G=K.shapes;if(Array.isArray(G))for(let U=0,q=G.length;U<q;U++){const W=G[U];H(J.shapes,W)}else H(J.shapes,G)}}if(this.isSkinnedMesh){if(Z.bindMode=this.bindMode,Z.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0)H(J.skeletons,this.skeleton),Z.skeleton=this.skeleton.uuid}if(this.material!==void 0)if(Array.isArray(this.material)){const K=[];for(let G=0,U=this.material.length;G<U;G++)K.push(H(J.materials,this.material[G]));Z.material=K}else Z.material=H(J.materials,this.material);if(this.children.length>0){Z.children=[];for(let K=0;K<this.children.length;K++)Z.children.push(this.children[K].toJSON(J).object)}if(this.animations.length>0){Z.animations=[];for(let K=0;K<this.animations.length;K++){const G=this.animations[K];Z.animations.push(H(J.animations,G))}}if($){const K=Y(J.geometries),G=Y(J.materials),U=Y(J.textures),q=Y(J.images),W=Y(J.shapes),V=Y(J.skeletons),D=Y(J.animations),_=Y(J.nodes);if(K.length>0)Q.geometries=K;if(G.length>0)Q.materials=G;if(U.length>0)Q.textures=U;if(q.length>0)Q.images=q;if(W.length>0)Q.shapes=W;if(V.length>0)Q.skeletons=V;if(D.length>0)Q.animations=D;if(_.length>0)Q.nodes=_}return Q.object=Z,Q;function Y(K){const G=[];for(let U in K){const q=K[U];delete q.metadata,G.push(q)}return G}}clone(J){return new this.constructor().copy(this,J)}copy(J,$=!0){if(this.name=J.name,this.up.copy(J.up),this.position.copy(J.position),this.rotation.order=J.rotation.order,this.quaternion.copy(J.quaternion),this.scale.copy(J.scale),this.matrix.copy(J.matrix),this.matrixWorld.copy(J.matrixWorld),this.matrixAutoUpdate=J.matrixAutoUpdate,this.matrixWorldAutoUpdate=J.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=J.matrixWorldNeedsUpdate,this.layers.mask=J.layers.mask,this.visible=J.visible,this.castShadow=J.castShadow,this.receiveShadow=J.receiveShadow,this.frustumCulled=J.frustumCulled,this.renderOrder=J.renderOrder,this.animations=J.animations.slice(),this.userData=JSON.parse(JSON.stringify(J.userData)),$===!0)for(let Q=0;Q<J.children.length;Q++){const Z=J.children[Q];this.add(Z.clone())}return this}}bJ.DEFAULT_UP=new v(0,1,0);bJ.DEFAULT_MATRIX_AUTO_UPDATE=!0;bJ.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var F6=new v,b6=new v,s9=new v,h6=new v,P8=new v,T8=new v,K4=new v,a9=new v,t9=new v,e9=new v,q5=!1;class Z6{constructor(J=new v,$=new v,Q=new v){this.a=J,this.b=$,this.c=Q}static getNormal(J,$,Q,Z){Z.subVectors(Q,$),F6.subVectors(J,$),Z.cross(F6);const H=Z.lengthSq();if(H>0)return Z.multiplyScalar(1/Math.sqrt(H));return Z.set(0,0,0)}static getBarycoord(J,$,Q,Z,H){F6.subVectors(Z,$),b6.subVectors(Q,$),s9.subVectors(J,$);const Y=F6.dot(F6),K=F6.dot(b6),G=F6.dot(s9),U=b6.dot(b6),q=b6.dot(s9),W=Y*U-K*K;if(W===0)return H.set(0,0,0),null;const V=1/W,D=(U*G-K*q)*V,_=(Y*q-K*G)*V;return H.set(1-D-_,_,D)}static containsPoint(J,$,Q,Z){if(this.getBarycoord(J,$,Q,Z,h6)===null)return!1;return h6.x>=0&&h6.y>=0&&h6.x+h6.y<=1}static getUV(J,$,Q,Z,H,Y,K,G){if(q5===!1)console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),q5=!0;return this.getInterpolation(J,$,Q,Z,H,Y,K,G)}static getInterpolation(J,$,Q,Z,H,Y,K,G){if(this.getBarycoord(J,$,Q,Z,h6)===null){if(G.x=0,G.y=0,"z"in G)G.z=0;if("w"in G)G.w=0;return null}return G.setScalar(0),G.addScaledVector(H,h6.x),G.addScaledVector(Y,h6.y),G.addScaledVector(K,h6.z),G}static isFrontFacing(J,$,Q,Z){return F6.subVectors(Q,$),b6.subVectors(J,$),F6.cross(b6).dot(Z)<0?!0:!1}set(J,$,Q){return this.a.copy(J),this.b.copy($),this.c.copy(Q),this}setFromPointsAndIndices(J,$,Q,Z){return this.a.copy(J[$]),this.b.copy(J[Q]),this.c.copy(J[Z]),this}setFromAttributeAndIndices(J,$,Q,Z){return this.a.fromBufferAttribute(J,$),this.b.fromBufferAttribute(J,Q),this.c.fromBufferAttribute(J,Z),this}clone(){return new this.constructor().copy(this)}copy(J){return this.a.copy(J.a),this.b.copy(J.b),this.c.copy(J.c),this}getArea(){return F6.subVectors(this.c,this.b),b6.subVectors(this.a,this.b),F6.cross(b6).length()*0.5}getMidpoint(J){return J.addVectors(this.a,this.b).add(this.c).multiplyScalar(0.3333333333333333)}getNormal(J){return Z6.getNormal(this.a,this.b,this.c,J)}getPlane(J){return J.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(J,$){return Z6.getBarycoord(J,this.a,this.b,this.c,$)}getUV(J,$,Q,Z,H){if(q5===!1)console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),q5=!0;return Z6.getInterpolation(J,this.a,this.b,this.c,$,Q,Z,H)}getInterpolation(J,$,Q,Z,H){return Z6.getInterpolation(J,this.a,this.b,this.c,$,Q,Z,H)}containsPoint(J){return Z6.containsPoint(J,this.a,this.b,this.c)}isFrontFacing(J){return Z6.isFrontFacing(this.a,this.b,this.c,J)}intersectsBox(J){return J.intersectsTriangle(this)}closestPointToPoint(J,$){const Q=this.a,Z=this.b,H=this.c;let Y,K;P8.subVectors(Z,Q),T8.subVectors(H,Q),a9.subVectors(J,Q);const G=P8.dot(a9),U=T8.dot(a9);if(G<=0&&U<=0)return $.copy(Q);t9.subVectors(J,Z);const q=P8.dot(t9),W=T8.dot(t9);if(q>=0&&W<=q)return $.copy(Z);const V=G*W-q*U;if(V<=0&&G>=0&&q<=0)return Y=G/(G-q),$.copy(Q).addScaledVector(P8,Y);e9.subVectors(J,H);const D=P8.dot(e9),_=T8.dot(e9);if(_>=0&&D<=_)return $.copy(H);const R=D*U-G*_;if(R<=0&&U>=0&&_<=0)return K=U/(U-_),$.copy(Q).addScaledVector(T8,K);const E=q*_-D*W;if(E<=0&&W-q>=0&&D-_>=0)return K4.subVectors(H,Z),K=(W-q)/(W-q+(D-_)),$.copy(Z).addScaledVector(K4,K);const z=1/(E+R+V);return Y=R*z,K=V*z,$.copy(Q).addScaledVector(P8,Y).addScaledVector(T8,K)}equals(J){return J.a.equals(this.a)&&J.b.equals(this.b)&&J.c.equals(this.c)}}var i4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},r6={h:0,s:0,l:0},X5={h:0,s:0,l:0};class a0{constructor(J,$,Q){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(J,$,Q)}set(J,$,Q){if($===void 0&&Q===void 0){const Z=J;if(Z&&Z.isColor)this.copy(Z);else if(typeof Z==="number")this.setHex(Z);else if(typeof Z==="string")this.setStyle(Z)}else this.setRGB(J,$,Q);return this}setScalar(J){return this.r=J,this.g=J,this.b=J,this}setHex(J,$="srgb"){return J=Math.floor(J),this.r=(J>>16&255)/255,this.g=(J>>8&255)/255,this.b=(J&255)/255,XJ.toWorkingColorSpace(this,$),this}setRGB(J,$,Q,Z=XJ.workingColorSpace){return this.r=J,this.g=$,this.b=Q,XJ.toWorkingColorSpace(this,Z),this}setHSL(J,$,Q,Z=XJ.workingColorSpace){if(J=N$(J,1),$=mJ($,0,1),Q=mJ(Q,0,1),$===0)this.r=this.g=this.b=Q;else{const H=Q<=0.5?Q*(1+$):Q+$-Q*$,Y=2*Q-H;this.r=J$(Y,H,J+0.3333333333333333),this.g=J$(Y,H,J),this.b=J$(Y,H,J-0.3333333333333333)}return XJ.toWorkingColorSpace(this,Z),this}setStyle(J,$="srgb"){function Q(H){if(H===void 0)return;if(parseFloat(H)<1)console.warn("THREE.Color: Alpha component of "+J+" will be ignored.")}let Z;if(Z=/^(\w+)\(([^\)]*)\)/.exec(J)){let H;const Y=Z[1],K=Z[2];switch(Y){case"rgb":case"rgba":if(H=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return Q(H[4]),this.setRGB(Math.min(255,parseInt(H[1],10))/255,Math.min(255,parseInt(H[2],10))/255,Math.min(255,parseInt(H[3],10))/255,$);if(H=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return Q(H[4]),this.setRGB(Math.min(100,parseInt(H[1],10))/100,Math.min(100,parseInt(H[2],10))/100,Math.min(100,parseInt(H[3],10))/100,$);break;case"hsl":case"hsla":if(H=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return Q(H[4]),this.setHSL(parseFloat(H[1])/360,parseFloat(H[2])/100,parseFloat(H[3])/100,$);break;default:console.warn("THREE.Color: Unknown color model "+J)}}else if(Z=/^\#([A-Fa-f\d]+)$/.exec(J)){const H=Z[1],Y=H.length;if(Y===3)return this.setRGB(parseInt(H.charAt(0),16)/15,parseInt(H.charAt(1),16)/15,parseInt(H.charAt(2),16)/15,$);else if(Y===6)return this.setHex(parseInt(H,16),$);else console.warn("THREE.Color: Invalid hex color "+J)}else if(J&&J.length>0)return this.setColorName(J,$);return this}setColorName(J,$="srgb"){const Q=i4[J.toLowerCase()];if(Q!==void 0)this.setHex(Q,$);else console.warn("THREE.Color: Unknown color "+J);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(J){return this.r=J.r,this.g=J.g,this.b=J.b,this}copySRGBToLinear(J){return this.r=d8(J.r),this.g=d8(J.g),this.b=d8(J.b),this}copyLinearToSRGB(J){return this.r=d9(J.r),this.g=d9(J.g),this.b=d9(J.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(J="srgb"){return XJ.fromWorkingColorSpace(vJ.copy(this),J),Math.round(mJ(vJ.r*255,0,255))*65536+Math.round(mJ(vJ.g*255,0,255))*256+Math.round(mJ(vJ.b*255,0,255))}getHexString(J="srgb"){return("000000"+this.getHex(J).toString(16)).slice(-6)}getHSL(J,$=XJ.workingColorSpace){XJ.fromWorkingColorSpace(vJ.copy(this),$);const{r:Q,g:Z,b:H}=vJ,Y=Math.max(Q,Z,H),K=Math.min(Q,Z,H);let G,U;const q=(K+Y)/2;if(K===Y)G=0,U=0;else{const W=Y-K;switch(U=q<=0.5?W/(Y+K):W/(2-Y-K),Y){case Q:G=(Z-H)/W+(Z<H?6:0);break;case Z:G=(H-Q)/W+2;break;case H:G=(Q-Z)/W+4;break}G/=6}return J.h=G,J.s=U,J.l=q,J}getRGB(J,$=XJ.workingColorSpace){return XJ.fromWorkingColorSpace(vJ.copy(this),$),J.r=vJ.r,J.g=vJ.g,J.b=vJ.b,J}getStyle(J="srgb"){XJ.fromWorkingColorSpace(vJ.copy(this),J);const{r:$,g:Q,b:Z}=vJ;if(J!=="srgb")return`color(${J} ${$.toFixed(3)} ${Q.toFixed(3)} ${Z.toFixed(3)})`;return`rgb(${Math.round($*255)},${Math.round(Q*255)},${Math.round(Z*255)})`}offsetHSL(J,$,Q){return this.getHSL(r6),this.setHSL(r6.h+J,r6.s+$,r6.l+Q)}add(J){return this.r+=J.r,this.g+=J.g,this.b+=J.b,this}addColors(J,$){return this.r=J.r+$.r,this.g=J.g+$.g,this.b=J.b+$.b,this}addScalar(J){return this.r+=J,this.g+=J,this.b+=J,this}sub(J){return this.r=Math.max(0,this.r-J.r),this.g=Math.max(0,this.g-J.g),this.b=Math.max(0,this.b-J.b),this}multiply(J){return this.r*=J.r,this.g*=J.g,this.b*=J.b,this}multiplyScalar(J){return this.r*=J,this.g*=J,this.b*=J,this}lerp(J,$){return this.r+=(J.r-this.r)*$,this.g+=(J.g-this.g)*$,this.b+=(J.b-this.b)*$,this}lerpColors(J,$,Q){return this.r=J.r+($.r-J.r)*Q,this.g=J.g+($.g-J.g)*Q,this.b=J.b+($.b-J.b)*Q,this}lerpHSL(J,$){this.getHSL(r6),J.getHSL(X5);const Q=O7(r6.h,X5.h,$),Z=O7(r6.s,X5.s,$),H=O7(r6.l,X5.l,$);return this.setHSL(Q,Z,H),this}setFromVector3(J){return this.r=J.x,this.g=J.y,this.b=J.z,this}applyMatrix3(J){const $=this.r,Q=this.g,Z=this.b,H=J.elements;return this.r=H[0]*$+H[3]*Q+H[6]*Z,this.g=H[1]*$+H[4]*Q+H[7]*Z,this.b=H[2]*$+H[5]*Q+H[8]*Z,this}equals(J){return J.r===this.r&&J.g===this.g&&J.b===this.b}fromArray(J,$=0){return this.r=J[$],this.g=J[$+1],this.b=J[$+2],this}toArray(J=[],$=0){return J[$]=this.r,J[$+1]=this.g,J[$+2]=this.b,J}fromBufferAttribute(J,$){return this.r=J.getX($),this.g=J.getY($),this.b=J.getZ($),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}var vJ=new a0;a0.NAMES=i4;var cU=0;class F8 extends v6{constructor(){super();this.isMaterial=!0,Object.defineProperty(this,"id",{value:cU++}),this.uuid=g6(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new a0(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(J){if(this._alphaTest>0!==J>0)this.version++;this._alphaTest=J}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(J){if(J===void 0)return;for(let $ in J){const Q=J[$];if(Q===void 0){console.warn(`THREE.Material: parameter '${$}' has value of undefined.`);continue}const Z=this[$];if(Z===void 0){console.warn(`THREE.Material: '${$}' is not a property of THREE.${this.type}.`);continue}if(Z&&Z.isColor)Z.set(Q);else if(Z&&Z.isVector3&&(Q&&Q.isVector3))Z.copy(Q);else this[$]=Q}}toJSON(J){const $=J===void 0||typeof J==="string";if($)J={textures:{},images:{}};const Q={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};if(Q.uuid=this.uuid,Q.type=this.type,this.name!=="")Q.name=this.name;if(this.color&&this.color.isColor)Q.color=this.color.getHex();if(this.roughness!==void 0)Q.roughness=this.roughness;if(this.metalness!==void 0)Q.metalness=this.metalness;if(this.sheen!==void 0)Q.sheen=this.sheen;if(this.sheenColor&&this.sheenColor.isColor)Q.sheenColor=this.sheenColor.getHex();if(this.sheenRoughness!==void 0)Q.sheenRoughness=this.sheenRoughness;if(this.emissive&&this.emissive.isColor)Q.emissive=this.emissive.getHex();if(this.emissiveIntensity&&this.emissiveIntensity!==1)Q.emissiveIntensity=this.emissiveIntensity;if(this.specular&&this.specular.isColor)Q.specular=this.specular.getHex();if(this.specularIntensity!==void 0)Q.specularIntensity=this.specularIntensity;if(this.specularColor&&this.specularColor.isColor)Q.specularColor=this.specularColor.getHex();if(this.shininess!==void 0)Q.shininess=this.shininess;if(this.clearcoat!==void 0)Q.clearcoat=this.clearcoat;if(this.clearcoatRoughness!==void 0)Q.clearcoatRoughness=this.clearcoatRoughness;if(this.clearcoatMap&&this.clearcoatMap.isTexture)Q.clearcoatMap=this.clearcoatMap.toJSON(J).uuid;if(this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture)Q.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(J).uuid;if(this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture)Q.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(J).uuid,Q.clearcoatNormalScale=this.clearcoatNormalScale.toArray();if(this.iridescence!==void 0)Q.iridescence=this.iridescence;if(this.iridescenceIOR!==void 0)Q.iridescenceIOR=this.iridescenceIOR;if(this.iridescenceThicknessRange!==void 0)Q.iridescenceThicknessRange=this.iridescenceThicknessRange;if(this.iridescenceMap&&this.iridescenceMap.isTexture)Q.iridescenceMap=this.iridescenceMap.toJSON(J).uuid;if(this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture)Q.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(J).uuid;if(this.anisotropy!==void 0)Q.anisotropy=this.anisotropy;if(this.anisotropyRotation!==void 0)Q.anisotropyRotation=this.anisotropyRotation;if(this.anisotropyMap&&this.anisotropyMap.isTexture)Q.anisotropyMap=this.anisotropyMap.toJSON(J).uuid;if(this.map&&this.map.isTexture)Q.map=this.map.toJSON(J).uuid;if(this.matcap&&this.matcap.isTexture)Q.matcap=this.matcap.toJSON(J).uuid;if(this.alphaMap&&this.alphaMap.isTexture)Q.alphaMap=this.alphaMap.toJSON(J).uuid;if(this.lightMap&&this.lightMap.isTexture)Q.lightMap=this.lightMap.toJSON(J).uuid,Q.lightMapIntensity=this.lightMapIntensity;if(this.aoMap&&this.aoMap.isTexture)Q.aoMap=this.aoMap.toJSON(J).uuid,Q.aoMapIntensity=this.aoMapIntensity;if(this.bumpMap&&this.bumpMap.isTexture)Q.bumpMap=this.bumpMap.toJSON(J).uuid,Q.bumpScale=this.bumpScale;if(this.normalMap&&this.normalMap.isTexture)Q.normalMap=this.normalMap.toJSON(J).uuid,Q.normalMapType=this.normalMapType,Q.normalScale=this.normalScale.toArray();if(this.displacementMap&&this.displacementMap.isTexture)Q.displacementMap=this.displacementMap.toJSON(J).uuid,Q.displacementScale=this.displacementScale,Q.displacementBias=this.displacementBias;if(this.roughnessMap&&this.roughnessMap.isTexture)Q.roughnessMap=this.roughnessMap.toJSON(J).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)Q.metalnessMap=this.metalnessMap.toJSON(J).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)Q.emissiveMap=this.emissiveMap.toJSON(J).uuid;if(this.specularMap&&this.specularMap.isTexture)Q.specularMap=this.specularMap.toJSON(J).uuid;if(this.specularIntensityMap&&this.specularIntensityMap.isTexture)Q.specularIntensityMap=this.specularIntensityMap.toJSON(J).uuid;if(this.specularColorMap&&this.specularColorMap.isTexture)Q.specularColorMap=this.specularColorMap.toJSON(J).uuid;if(this.envMap&&this.envMap.isTexture){if(Q.envMap=this.envMap.toJSON(J).uuid,this.combine!==void 0)Q.combine=this.combine}if(this.envMapIntensity!==void 0)Q.envMapIntensity=this.envMapIntensity;if(this.reflectivity!==void 0)Q.reflectivity=this.reflectivity;if(this.refractionRatio!==void 0)Q.refractionRatio=this.refractionRatio;if(this.gradientMap&&this.gradientMap.isTexture)Q.gradientMap=this.gradientMap.toJSON(J).uuid;if(this.transmission!==void 0)Q.transmission=this.transmission;if(this.transmissionMap&&this.transmissionMap.isTexture)Q.transmissionMap=this.transmissionMap.toJSON(J).uuid;if(this.thickness!==void 0)Q.thickness=this.thickness;if(this.thicknessMap&&this.thicknessMap.isTexture)Q.thicknessMap=this.thicknessMap.toJSON(J).uuid;if(this.attenuationDistance!==void 0&&this.attenuationDistance!==Infinity)Q.attenuationDistance=this.attenuationDistance;if(this.attenuationColor!==void 0)Q.attenuationColor=this.attenuationColor.getHex();if(this.size!==void 0)Q.size=this.size;if(this.shadowSide!==null)Q.shadowSide=this.shadowSide;if(this.sizeAttenuation!==void 0)Q.sizeAttenuation=this.sizeAttenuation;if(this.blending!==1)Q.blending=this.blending;if(this.side!==0)Q.side=this.side;if(this.vertexColors===!0)Q.vertexColors=!0;if(this.opacity<1)Q.opacity=this.opacity;if(this.transparent===!0)Q.transparent=!0;if(this.blendSrc!==204)Q.blendSrc=this.blendSrc;if(this.blendDst!==205)Q.blendDst=this.blendDst;if(this.blendEquation!==100)Q.blendEquation=this.blendEquation;if(this.blendSrcAlpha!==null)Q.blendSrcAlpha=this.blendSrcAlpha;if(this.blendDstAlpha!==null)Q.blendDstAlpha=this.blendDstAlpha;if(this.blendEquationAlpha!==null)Q.blendEquationAlpha=this.blendEquationAlpha;if(this.blendColor&&this.blendColor.isColor)Q.blendColor=this.blendColor.getHex();if(this.blendAlpha!==0)Q.blendAlpha=this.blendAlpha;if(this.depthFunc!==3)Q.depthFunc=this.depthFunc;if(this.depthTest===!1)Q.depthTest=this.depthTest;if(this.depthWrite===!1)Q.depthWrite=this.depthWrite;if(this.colorWrite===!1)Q.colorWrite=this.colorWrite;if(this.stencilWriteMask!==255)Q.stencilWriteMask=this.stencilWriteMask;if(this.stencilFunc!==519)Q.stencilFunc=this.stencilFunc;if(this.stencilRef!==0)Q.stencilRef=this.stencilRef;if(this.stencilFuncMask!==255)Q.stencilFuncMask=this.stencilFuncMask;if(this.stencilFail!==7680)Q.stencilFail=this.stencilFail;if(this.stencilZFail!==7680)Q.stencilZFail=this.stencilZFail;if(this.stencilZPass!==7680)Q.stencilZPass=this.stencilZPass;if(this.stencilWrite===!0)Q.stencilWrite=this.stencilWrite;if(this.rotation!==void 0&&this.rotation!==0)Q.rotation=this.rotation;if(this.polygonOffset===!0)Q.polygonOffset=!0;if(this.polygonOffsetFactor!==0)Q.polygonOffsetFactor=this.polygonOffsetFactor;if(this.polygonOffsetUnits!==0)Q.polygonOffsetUnits=this.polygonOffsetUnits;if(this.linewidth!==void 0&&this.linewidth!==1)Q.linewidth=this.linewidth;if(this.dashSize!==void 0)Q.dashSize=this.dashSize;if(this.gapSize!==void 0)Q.gapSize=this.gapSize;if(this.scale!==void 0)Q.scale=this.scale;if(this.dithering===!0)Q.dithering=!0;if(this.alphaTest>0)Q.alphaTest=this.alphaTest;if(this.alphaHash===!0)Q.alphaHash=!0;if(this.alphaToCoverage===!0)Q.alphaToCoverage=!0;if(this.premultipliedAlpha===!0)Q.premultipliedAlpha=!0;if(this.forceSinglePass===!0)Q.forceSinglePass=!0;if(this.wireframe===!0)Q.wireframe=!0;if(this.wireframeLinewidth>1)Q.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")Q.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")Q.wireframeLinejoin=this.wireframeLinejoin;if(this.flatShading===!0)Q.flatShading=!0;if(this.visible===!1)Q.visible=!1;if(this.toneMapped===!1)Q.toneMapped=!1;if(this.fog===!1)Q.fog=!1;if(Object.keys(this.userData).length>0)Q.userData=this.userData;function Z(H){const Y=[];for(let K in H){const G=H[K];delete G.metadata,Y.push(G)}return Y}if($){const H=Z(J.textures),Y=Z(J.images);if(H.length>0)Q.textures=H;if(Y.length>0)Q.images=Y}return Q}clone(){return new this.constructor().copy(this)}copy(J){this.name=J.name,this.blending=J.blending,this.side=J.side,this.vertexColors=J.vertexColors,this.opacity=J.opacity,this.transparent=J.transparent,this.blendSrc=J.blendSrc,this.blendDst=J.blendDst,this.blendEquation=J.blendEquation,this.blendSrcAlpha=J.blendSrcAlpha,this.blendDstAlpha=J.blendDstAlpha,this.blendEquationAlpha=J.blendEquationAlpha,this.blendColor.copy(J.blendColor),this.blendAlpha=J.blendAlpha,this.depthFunc=J.depthFunc,this.depthTest=J.depthTest,this.depthWrite=J.depthWrite,this.stencilWriteMask=J.stencilWriteMask,this.stencilFunc=J.stencilFunc,this.stencilRef=J.stencilRef,this.stencilFuncMask=J.stencilFuncMask,this.stencilFail=J.stencilFail,this.stencilZFail=J.stencilZFail,this.stencilZPass=J.stencilZPass,this.stencilWrite=J.stencilWrite;const $=J.clippingPlanes;let Q=null;if($!==null){const Z=$.length;Q=new Array(Z);for(let H=0;H!==Z;++H)Q[H]=$[H].clone()}return this.clippingPlanes=Q,this.clipIntersection=J.clipIntersection,this.clipShadows=J.clipShadows,this.shadowSide=J.shadowSide,this.colorWrite=J.colorWrite,this.precision=J.precision,this.polygonOffset=J.polygonOffset,this.polygonOffsetFactor=J.polygonOffsetFactor,this.polygonOffsetUnits=J.polygonOffsetUnits,this.dithering=J.dithering,this.alphaTest=J.alphaTest,this.alphaHash=J.alphaHash,this.alphaToCoverage=J.alphaToCoverage,this.premultipliedAlpha=J.premultipliedAlpha,this.forceSinglePass=J.forceSinglePass,this.visible=J.visible,this.toneMapped=J.toneMapped,this.userData=JSON.parse(JSON.stringify(J.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(J){if(J===!0)this.version++}}class B$ extends F8{constructor(J){super();this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new a0(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(J)}copy(J){return super.copy(J),this.color.copy(J.color),this.map=J.map,this.lightMap=J.lightMap,this.lightMapIntensity=J.lightMapIntensity,this.aoMap=J.aoMap,this.aoMapIntensity=J.aoMapIntensity,this.specularMap=J.specularMap,this.alphaMap=J.alphaMap,this.envMap=J.envMap,this.combine=J.combine,this.reflectivity=J.reflectivity,this.refractionRatio=J.refractionRatio,this.wireframe=J.wireframe,this.wireframeLinewidth=J.wireframeLinewidth,this.wireframeLinecap=J.wireframeLinecap,this.wireframeLinejoin=J.wireframeLinejoin,this.fog=J.fog,this}}var kJ=new v,F5=new k0;class H6{constructor(J,$,Q=!1){if(Array.isArray(J))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=J,this.itemSize=$,this.count=J!==void 0?J.length/$:0,this.normalized=Q,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(J){if(J===!0)this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(J){return this.usage=J,this}addUpdateRange(J,$){this.updateRanges.push({start:J,count:$})}clearUpdateRanges(){this.updateRanges.length=0}copy(J){return this.name=J.name,this.array=new J.array.constructor(J.array),this.itemSize=J.itemSize,this.count=J.count,this.normalized=J.normalized,this.usage=J.usage,this.gpuType=J.gpuType,this}copyAt(J,$,Q){J*=this.itemSize,Q*=$.itemSize;for(let Z=0,H=this.itemSize;Z<H;Z++)this.array[J+Z]=$.array[Q+Z];return this}copyArray(J){return this.array.set(J),this}applyMatrix3(J){if(this.itemSize===2)for(let $=0,Q=this.count;$<Q;$++)F5.fromBufferAttribute(this,$),F5.applyMatrix3(J),this.setXY($,F5.x,F5.y);else if(this.itemSize===3)for(let $=0,Q=this.count;$<Q;$++)kJ.fromBufferAttribute(this,$),kJ.applyMatrix3(J),this.setXYZ($,kJ.x,kJ.y,kJ.z);return this}applyMatrix4(J){for(let $=0,Q=this.count;$<Q;$++)kJ.fromBufferAttribute(this,$),kJ.applyMatrix4(J),this.setXYZ($,kJ.x,kJ.y,kJ.z);return this}applyNormalMatrix(J){for(let $=0,Q=this.count;$<Q;$++)kJ.fromBufferAttribute(this,$),kJ.applyNormalMatrix(J),this.setXYZ($,kJ.x,kJ.y,kJ.z);return this}transformDirection(J){for(let $=0,Q=this.count;$<Q;$++)kJ.fromBufferAttribute(this,$),kJ.transformDirection(J),this.setXYZ($,kJ.x,kJ.y,kJ.z);return this}set(J,$=0){return this.array.set(J,$),this}getComponent(J,$){let Q=this.array[J*this.itemSize+$];if(this.normalized)Q=M6(Q,this.array);return Q}setComponent(J,$,Q){if(this.normalized)Q=UJ(Q,this.array);return this.array[J*this.itemSize+$]=Q,this}getX(J){let $=this.array[J*this.itemSize];if(this.normalized)$=M6($,this.array);return $}setX(J,$){if(this.normalized)$=UJ($,this.array);return this.array[J*this.itemSize]=$,this}getY(J){let $=this.array[J*this.itemSize+1];if(this.normalized)$=M6($,this.array);return $}setY(J,$){if(this.normalized)$=UJ($,this.array);return this.array[J*this.itemSize+1]=$,this}getZ(J){let $=this.array[J*this.itemSize+2];if(this.normalized)$=M6($,this.array);return $}setZ(J,$){if(this.normalized)$=UJ($,this.array);return this.array[J*this.itemSize+2]=$,this}getW(J){let $=this.array[J*this.itemSize+3];if(this.normalized)$=M6($,this.array);return $}setW(J,$){if(this.normalized)$=UJ($,this.array);return this.array[J*this.itemSize+3]=$,this}setXY(J,$,Q){if(J*=this.itemSize,this.normalized)$=UJ($,this.array),Q=UJ(Q,this.array);return this.array[J+0]=$,this.array[J+1]=Q,this}setXYZ(J,$,Q,Z){if(J*=this.itemSize,this.normalized)$=UJ($,this.array),Q=UJ(Q,this.array),Z=UJ(Z,this.array);return this.array[J+0]=$,this.array[J+1]=Q,this.array[J+2]=Z,this}setXYZW(J,$,Q,Z,H){if(J*=this.itemSize,this.normalized)$=UJ($,this.array),Q=UJ(Q,this.array),Z=UJ(Z,this.array),H=UJ(H,this.array);return this.array[J+0]=$,this.array[J+1]=Q,this.array[J+2]=Z,this.array[J+3]=H,this}onUpload(J){return this.onUploadCallback=J,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const J={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};if(this.name!=="")J.name=this.name;if(this.usage!==35044)J.usage=this.usage;return J}}class M$ extends H6{constructor(J,$,Q){super(new Uint16Array(J),$,Q)}}class I$ extends H6{constructor(J,$,Q){super(new Uint32Array(J),$,Q)}}class W6 extends H6{constructor(J,$,Q){super(new Float32Array(J),$,Q)}}var uU=0,Q6=new IJ,$$=new bJ,w8=new v,aJ=new u8,D7=new u8,yJ=new v;class k6 extends v6{constructor(){super();this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uU++}),this.uuid=g6(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity},this.userData={}}getIndex(){return this.index}setIndex(J){if(Array.isArray(J))this.index=new((l4(J))?I$:M$)(J,1);else this.index=J;return this}getAttribute(J){return this.attributes[J]}setAttribute(J,$){return this.attributes[J]=$,this}deleteAttribute(J){return delete this.attributes[J],this}hasAttribute(J){return this.attributes[J]!==void 0}addGroup(J,$,Q=0){this.groups.push({start:J,count:$,materialIndex:Q})}clearGroups(){this.groups=[]}setDrawRange(J,$){this.drawRange.start=J,this.drawRange.count=$}applyMatrix4(J){const $=this.attributes.position;if($!==void 0)$.applyMatrix4(J),$.needsUpdate=!0;const Q=this.attributes.normal;if(Q!==void 0){const H=new s0().getNormalMatrix(J);Q.applyNormalMatrix(H),Q.needsUpdate=!0}const Z=this.attributes.tangent;if(Z!==void 0)Z.transformDirection(J),Z.needsUpdate=!0;if(this.boundingBox!==null)this.computeBoundingBox();if(this.boundingSphere!==null)this.computeBoundingSphere();return this}applyQuaternion(J){return Q6.makeRotationFromQuaternion(J),this.applyMatrix4(Q6),this}rotateX(J){return Q6.makeRotationX(J),this.applyMatrix4(Q6),this}rotateY(J){return Q6.makeRotationY(J),this.applyMatrix4(Q6),this}rotateZ(J){return Q6.makeRotationZ(J),this.applyMatrix4(Q6),this}translate(J,$,Q){return Q6.makeTranslation(J,$,Q),this.applyMatrix4(Q6),this}scale(J,$,Q){return Q6.makeScale(J,$,Q),this.applyMatrix4(Q6),this}lookAt(J){return $$.lookAt(J),$$.updateMatrix(),this.applyMatrix4($$.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(w8).negate(),this.translate(w8.x,w8.y,w8.z),this}setFromPoints(J){const $=[];for(let Q=0,Z=J.length;Q<Z;Q++){const H=J[Q];$.push(H.x,H.y,H.z||0)}return this.setAttribute("position",new W6($,3)),this}computeBoundingBox(){if(this.boundingBox===null)this.boundingBox=new u8;const J=this.attributes.position,$=this.morphAttributes.position;if(J&&J.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new v((-Infinity),(-Infinity),(-Infinity)),new v(Infinity,Infinity,Infinity));return}if(J!==void 0){if(this.boundingBox.setFromBufferAttribute(J),$)for(let Q=0,Z=$.length;Q<Z;Q++){const H=$[Q];if(aJ.setFromBufferAttribute(H),this.morphTargetsRelative)yJ.addVectors(this.boundingBox.min,aJ.min),this.boundingBox.expandByPoint(yJ),yJ.addVectors(this.boundingBox.max,aJ.max),this.boundingBox.expandByPoint(yJ);else this.boundingBox.expandByPoint(aJ.min),this.boundingBox.expandByPoint(aJ.max)}}else this.boundingBox.makeEmpty();if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){if(this.boundingSphere===null)this.boundingSphere=new f5;const J=this.attributes.position,$=this.morphAttributes.position;if(J&&J.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new v,Infinity);return}if(J){const Q=this.boundingSphere.center;if(aJ.setFromBufferAttribute(J),$)for(let H=0,Y=$.length;H<Y;H++){const K=$[H];if(D7.setFromBufferAttribute(K),this.morphTargetsRelative)yJ.addVectors(aJ.min,D7.min),aJ.expandByPoint(yJ),yJ.addVectors(aJ.max,D7.max),aJ.expandByPoint(yJ);else aJ.expandByPoint(D7.min),aJ.expandByPoint(D7.max)}aJ.getCenter(Q);let Z=0;for(let H=0,Y=J.count;H<Y;H++)yJ.fromBufferAttribute(J,H),Z=Math.max(Z,Q.distanceToSquared(yJ));if($)for(let H=0,Y=$.length;H<Y;H++){const K=$[H],G=this.morphTargetsRelative;for(let U=0,q=K.count;U<q;U++){if(yJ.fromBufferAttribute(K,U),G)w8.fromBufferAttribute(J,U),yJ.add(w8);Z=Math.max(Z,Q.distanceToSquared(yJ))}}if(this.boundingSphere.radius=Math.sqrt(Z),isNaN(this.boundingSphere.radius))console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const J=this.index,$=this.attributes;if(J===null||$.position===void 0||$.normal===void 0||$.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const Q=J.array,Z=$.position.array,H=$.normal.array,Y=$.uv.array,K=Z.length/3;if(this.hasAttribute("tangent")===!1)this.setAttribute("tangent",new H6(new Float32Array(4*K),4));const G=this.getAttribute("tangent").array,U=[],q=[];for(let I=0;I<K;I++)U[I]=new v,q[I]=new v;const W=new v,V=new v,D=new v,_=new k0,R=new k0,E=new k0,z=new v,N=new v;function k(I,T,p){W.fromArray(Z,I*3),V.fromArray(Z,T*3),D.fromArray(Z,p*3),_.fromArray(Y,I*2),R.fromArray(Y,T*2),E.fromArray(Y,p*2),V.sub(W),D.sub(W),R.sub(_),E.sub(_);const K0=1/(R.x*E.y-E.x*R.y);if(!isFinite(K0))return;z.copy(V).multiplyScalar(E.y).addScaledVector(D,-R.y).multiplyScalar(K0),N.copy(D).multiplyScalar(R.x).addScaledVector(V,-E.x).multiplyScalar(K0),U[I].add(z),U[T].add(z),U[p].add(z),q[I].add(N),q[T].add(N),q[p].add(N)}let M=this.groups;if(M.length===0)M=[{start:0,count:Q.length}];for(let I=0,T=M.length;I<T;++I){const p=M[I],K0=p.start,z0=p.count;for(let y=K0,r=K0+z0;y<r;y+=3)k(Q[y+0],Q[y+1],Q[y+2])}const C=new v,m=new v,P=new v,b=new v;function a(I){P.fromArray(H,I*3),b.copy(P);const T=U[I];C.copy(T),C.sub(P.multiplyScalar(P.dot(T))).normalize(),m.crossVectors(b,T);const K0=m.dot(q[I])<0?-1:1;G[I*4]=C.x,G[I*4+1]=C.y,G[I*4+2]=C.z,G[I*4+3]=K0}for(let I=0,T=M.length;I<T;++I){const p=M[I],K0=p.start,z0=p.count;for(let y=K0,r=K0+z0;y<r;y+=3)a(Q[y+0]),a(Q[y+1]),a(Q[y+2])}}computeVertexNormals(){const J=this.index,$=this.getAttribute("position");if($!==void 0){let Q=this.getAttribute("normal");if(Q===void 0)Q=new H6(new Float32Array($.count*3),3),this.setAttribute("normal",Q);else for(let V=0,D=Q.count;V<D;V++)Q.setXYZ(V,0,0,0);const Z=new v,H=new v,Y=new v,K=new v,G=new v,U=new v,q=new v,W=new v;if(J)for(let V=0,D=J.count;V<D;V+=3){const _=J.getX(V+0),R=J.getX(V+1),E=J.getX(V+2);Z.fromBufferAttribute($,_),H.fromBufferAttribute($,R),Y.fromBufferAttribute($,E),q.subVectors(Y,H),W.subVectors(Z,H),q.cross(W),K.fromBufferAttribute(Q,_),G.fromBufferAttribute(Q,R),U.fromBufferAttribute(Q,E),K.add(q),G.add(q),U.add(q),Q.setXYZ(_,K.x,K.y,K.z),Q.setXYZ(R,G.x,G.y,G.z),Q.setXYZ(E,U.x,U.y,U.z)}else for(let V=0,D=$.count;V<D;V+=3)Z.fromBufferAttribute($,V+0),H.fromBufferAttribute($,V+1),Y.fromBufferAttribute($,V+2),q.subVectors(Y,H),W.subVectors(Z,H),q.cross(W),Q.setXYZ(V+0,q.x,q.y,q.z),Q.setXYZ(V+1,q.x,q.y,q.z),Q.setXYZ(V+2,q.x,q.y,q.z);this.normalizeNormals(),Q.needsUpdate=!0}}normalizeNormals(){const J=this.attributes.normal;for(let $=0,Q=J.count;$<Q;$++)yJ.fromBufferAttribute(J,$),yJ.normalize(),J.setXYZ($,yJ.x,yJ.y,yJ.z)}toNonIndexed(){function J(K,G){const{array:U,itemSize:q,normalized:W}=K,V=new U.constructor(G.length*q);let D=0,_=0;for(let R=0,E=G.length;R<E;R++){if(K.isInterleavedBufferAttribute)D=G[R]*K.data.stride+K.offset;else D=G[R]*q;for(let z=0;z<q;z++)V[_++]=U[D++]}return new H6(V,q,W)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const $=new k6,Q=this.index.array,Z=this.attributes;for(let K in Z){const G=Z[K],U=J(G,Q);$.setAttribute(K,U)}const H=this.morphAttributes;for(let K in H){const G=[],U=H[K];for(let q=0,W=U.length;q<W;q++){const V=U[q],D=J(V,Q);G.push(D)}$.morphAttributes[K]=G}$.morphTargetsRelative=this.morphTargetsRelative;const Y=this.groups;for(let K=0,G=Y.length;K<G;K++){const U=Y[K];$.addGroup(U.start,U.count,U.materialIndex)}return $}toJSON(){const J={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(J.uuid=this.uuid,J.type=this.type,this.name!=="")J.name=this.name;if(Object.keys(this.userData).length>0)J.userData=this.userData;if(this.parameters!==void 0){const G=this.parameters;for(let U in G)if(G[U]!==void 0)J[U]=G[U];return J}J.data={attributes:{}};const $=this.index;if($!==null)J.data.index={type:$.array.constructor.name,array:Array.prototype.slice.call($.array)};const Q=this.attributes;for(let G in Q){const U=Q[G];J.data.attributes[G]=U.toJSON(J.data)}const Z={};let H=!1;for(let G in this.morphAttributes){const U=this.morphAttributes[G],q=[];for(let W=0,V=U.length;W<V;W++){const D=U[W];q.push(D.toJSON(J.data))}if(q.length>0)Z[G]=q,H=!0}if(H)J.data.morphAttributes=Z,J.data.morphTargetsRelative=this.morphTargetsRelative;const Y=this.groups;if(Y.length>0)J.data.groups=JSON.parse(JSON.stringify(Y));const K=this.boundingSphere;if(K!==null)J.data.boundingSphere={center:K.center.toArray(),radius:K.radius};return J}clone(){return new this.constructor().copy(this)}copy(J){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const $={};this.name=J.name;const Q=J.index;if(Q!==null)this.setIndex(Q.clone($));const Z=J.attributes;for(let U in Z){const q=Z[U];this.setAttribute(U,q.clone($))}const H=J.morphAttributes;for(let U in H){const q=[],W=H[U];for(let V=0,D=W.length;V<D;V++)q.push(W[V].clone($));this.morphAttributes[U]=q}this.morphTargetsRelative=J.morphTargetsRelative;const Y=J.groups;for(let U=0,q=Y.length;U<q;U++){const W=Y[U];this.addGroup(W.start,W.count,W.materialIndex)}const K=J.boundingBox;if(K!==null)this.boundingBox=K.clone();const G=J.boundingSphere;if(G!==null)this.boundingSphere=G.clone();return this.drawRange.start=J.drawRange.start,this.drawRange.count=J.drawRange.count,this.userData=J.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}var U4=new IJ,Y8=new j5,W5=new f5,q4=new v,S8=new v,C8=new v,f8=new v,Q$=new v,V5=new v,D5=new k0,z5=new k0,N5=new k0,X4=new v,F4=new v,W4=new v,_5=new v,R5=new v;class KJ extends bJ{constructor(J=new k6,$=new B$){super();this.isMesh=!0,this.type="Mesh",this.geometry=J,this.material=$,this.updateMorphTargets()}copy(J,$){if(super.copy(J,$),J.morphTargetInfluences!==void 0)this.morphTargetInfluences=J.morphTargetInfluences.slice();if(J.morphTargetDictionary!==void 0)this.morphTargetDictionary=Object.assign({},J.morphTargetDictionary);return this.material=Array.isArray(J.material)?J.material.slice():J.material,this.geometry=J.geometry,this}updateMorphTargets(){const $=this.geometry.morphAttributes,Q=Object.keys($);if(Q.length>0){const Z=$[Q[0]];if(Z!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let H=0,Y=Z.length;H<Y;H++){const K=Z[H].name||String(H);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=H}}}}getVertexPosition(J,$){const Q=this.geometry,Z=Q.attributes.position,H=Q.morphAttributes.position,Y=Q.morphTargetsRelative;$.fromBufferAttribute(Z,J);const K=this.morphTargetInfluences;if(H&&K){V5.set(0,0,0);for(let G=0,U=H.length;G<U;G++){const q=K[G],W=H[G];if(q===0)continue;if(Q$.fromBufferAttribute(W,J),Y)V5.addScaledVector(Q$,q);else V5.addScaledVector(Q$.sub($),q)}$.add(V5)}return $}raycast(J,$){const Q=this.geometry,Z=this.material,H=this.matrixWorld;if(Z===void 0)return;if(Q.boundingSphere===null)Q.computeBoundingSphere();if(W5.copy(Q.boundingSphere),W5.applyMatrix4(H),Y8.copy(J.ray).recast(J.near),W5.containsPoint(Y8.origin)===!1){if(Y8.intersectSphere(W5,q4)===null)return;if(Y8.origin.distanceToSquared(q4)>(J.far-J.near)**2)return}if(U4.copy(H).invert(),Y8.copy(J.ray).applyMatrix4(U4),Q.boundingBox!==null){if(Y8.intersectsBox(Q.boundingBox)===!1)return}this._computeIntersections(J,$,Y8)}_computeIntersections(J,$,Q){let Z;const H=this.geometry,Y=this.material,K=H.index,G=H.attributes.position,U=H.attributes.uv,q=H.attributes.uv1,W=H.attributes.normal,V=H.groups,D=H.drawRange;if(K!==null)if(Array.isArray(Y))for(let _=0,R=V.length;_<R;_++){const E=V[_],z=Y[E.materialIndex],N=Math.max(E.start,D.start),k=Math.min(K.count,Math.min(E.start+E.count,D.start+D.count));for(let M=N,C=k;M<C;M+=3){const m=K.getX(M),P=K.getX(M+1),b=K.getX(M+2);if(Z=E5(this,z,J,Q,U,q,W,m,P,b),Z)Z.faceIndex=Math.floor(M/3),Z.face.materialIndex=E.materialIndex,$.push(Z)}}else{const _=Math.max(0,D.start),R=Math.min(K.count,D.start+D.count);for(let E=_,z=R;E<z;E+=3){const N=K.getX(E),k=K.getX(E+1),M=K.getX(E+2);if(Z=E5(this,Y,J,Q,U,q,W,N,k,M),Z)Z.faceIndex=Math.floor(E/3),$.push(Z)}}else if(G!==void 0)if(Array.isArray(Y))for(let _=0,R=V.length;_<R;_++){const E=V[_],z=Y[E.materialIndex],N=Math.max(E.start,D.start),k=Math.min(G.count,Math.min(E.start+E.count,D.start+D.count));for(let M=N,C=k;M<C;M+=3){const m=M,P=M+1,b=M+2;if(Z=E5(this,z,J,Q,U,q,W,m,P,b),Z)Z.faceIndex=Math.floor(M/3),Z.face.materialIndex=E.materialIndex,$.push(Z)}}else{const _=Math.max(0,D.start),R=Math.min(G.count,D.start+D.count);for(let E=_,z=R;E<z;E+=3){const N=E,k=E+1,M=E+2;if(Z=E5(this,Y,J,Q,U,q,W,N,k,M),Z)Z.faceIndex=Math.floor(E/3),$.push(Z)}}}}class OJ extends k6{constructor(J=1,$=1,Q=1,Z=1,H=1,Y=1){super();this.type="BoxGeometry",this.parameters={width:J,height:$,depth:Q,widthSegments:Z,heightSegments:H,depthSegments:Y};const K=this;Z=Math.floor(Z),H=Math.floor(H),Y=Math.floor(Y);const G=[],U=[],q=[],W=[];let V=0,D=0;_("z","y","x",-1,-1,Q,$,J,Y,H,0),_("z","y","x",1,-1,Q,$,-J,Y,H,1),_("x","z","y",1,1,J,Q,$,Z,Y,2),_("x","z","y",1,-1,J,Q,-$,Z,Y,3),_("x","y","z",1,-1,J,$,Q,Z,H,4),_("x","y","z",-1,-1,J,$,-Q,Z,H,5),this.setIndex(G),this.setAttribute("position",new W6(U,3)),this.setAttribute("normal",new W6(q,3)),this.setAttribute("uv",new W6(W,2));function _(R,E,z,N,k,M,C,m,P,b,a){const I=M/P,T=C/b,p=M/2,K0=C/2,z0=m/2,y=P+1,r=b+1;let e=0,Y0=0;const t=new v;for(let i=0;i<r;i++){const O=i*T-K0;for(let x=0;x<y;x++){const S=x*I-p;t[R]=S*N,t[E]=O*k,t[z]=z0,U.push(t.x,t.y,t.z),t[R]=0,t[E]=0,t[z]=m>0?1:-1,q.push(t.x,t.y,t.z),W.push(x/P),W.push(1-i/b),e+=1}}for(let i=0;i<b;i++)for(let O=0;O<P;O++){const x=V+O+y*i,S=V+O+y*(i+1),g=V+(O+1)+y*(i+1),$0=V+(O+1)+y*i;G.push(x,S,$0),G.push(S,g,$0),Y0+=6}K.addGroup(D,Y0,a),D+=Y0,V+=e}}copy(J){return super.copy(J),this.parameters=Object.assign({},J.parameters),this}static fromJSON(J){return new OJ(J.width,J.height,J.depth,J.widthSegments,J.heightSegments,J.depthSegments)}}var L$={clone:c8,merge:cJ},oU="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",iU="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class V6 extends F8{constructor(J){super();if(this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=oU,this.fragmentShader=iU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,J!==void 0)this.setValues(J)}copy(J){return super.copy(J),this.fragmentShader=J.fragmentShader,this.vertexShader=J.vertexShader,this.uniforms=c8(J.uniforms),this.uniformsGroups=nU(J.uniformsGroups),this.defines=Object.assign({},J.defines),this.wireframe=J.wireframe,this.wireframeLinewidth=J.wireframeLinewidth,this.fog=J.fog,this.lights=J.lights,this.clipping=J.clipping,this.extensions=Object.assign({},J.extensions),this.glslVersion=J.glslVersion,this}toJSON(J){const $=super.toJSON(J);$.glslVersion=this.glslVersion,$.uniforms={};for(let Z in this.uniforms){const Y=this.uniforms[Z].value;if(Y&&Y.isTexture)$.uniforms[Z]={type:"t",value:Y.toJSON(J).uuid};else if(Y&&Y.isColor)$.uniforms[Z]={type:"c",value:Y.getHex()};else if(Y&&Y.isVector2)$.uniforms[Z]={type:"v2",value:Y.toArray()};else if(Y&&Y.isVector3)$.uniforms[Z]={type:"v3",value:Y.toArray()};else if(Y&&Y.isVector4)$.uniforms[Z]={type:"v4",value:Y.toArray()};else if(Y&&Y.isMatrix3)$.uniforms[Z]={type:"m3",value:Y.toArray()};else if(Y&&Y.isMatrix4)$.uniforms[Z]={type:"m4",value:Y.toArray()};else $.uniforms[Z]={value:Y}}if(Object.keys(this.defines).length>0)$.defines=this.defines;$.vertexShader=this.vertexShader,$.fragmentShader=this.fragmentShader,$.lights=this.lights,$.clipping=this.clipping;const Q={};for(let Z in this.extensions)if(this.extensions[Z]===!0)Q[Z]=!0;if(Object.keys(Q).length>0)$.extensions=Q;return $}}class k$ extends bJ{constructor(){super();this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new IJ,this.projectionMatrix=new IJ,this.projectionMatrixInverse=new IJ,this.coordinateSystem=2000}copy(J,$){return super.copy(J,$),this.matrixWorldInverse.copy(J.matrixWorldInverse),this.projectionMatrix.copy(J.projectionMatrix),this.projectionMatrixInverse.copy(J.projectionMatrixInverse),this.coordinateSystem=J.coordinateSystem,this}getWorldDirection(J){return super.getWorldDirection(J).negate()}updateMatrixWorld(J){super.updateMatrixWorld(J),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(J,$){super.updateWorldMatrix(J,$),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class uJ extends k${constructor(J=50,$=1,Q=0.1,Z=2000){super();this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=J,this.zoom=1,this.near=Q,this.far=Z,this.focus=10,this.aspect=$,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(J,$){return super.copy(J,$),this.fov=J.fov,this.zoom=J.zoom,this.near=J.near,this.far=J.far,this.focus=J.focus,this.aspect=J.aspect,this.view=J.view===null?null:Object.assign({},J.view),this.filmGauge=J.filmGauge,this.filmOffset=J.filmOffset,this}setFocalLength(J){const $=0.5*this.getFilmHeight()/J;this.fov=I7*2*Math.atan($),this.updateProjectionMatrix()}getFocalLength(){const J=Math.tan(E7*0.5*this.fov);return 0.5*this.getFilmHeight()/J}getEffectiveFOV(){return I7*2*Math.atan(Math.tan(E7*0.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(J,$,Q,Z,H,Y){if(this.aspect=J/$,this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=J,this.view.fullHeight=$,this.view.offsetX=Q,this.view.offsetY=Z,this.view.width=H,this.view.height=Y,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){const J=this.near;let $=J*Math.tan(E7*0.5*this.fov)/this.zoom,Q=2*$,Z=this.aspect*Q,H=-0.5*Z;const Y=this.view;if(this.view!==null&&this.view.enabled){const{fullWidth:G,fullHeight:U}=Y;H+=Y.offsetX*Z/G,$-=Y.offsetY*Q/U,Z*=Y.width/G,Q*=Y.height/U}const K=this.filmOffset;if(K!==0)H+=J*K/this.getFilmWidth();this.projectionMatrix.makePerspective(H,H+Z,$,$-Q,J,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(J){const $=super.toJSON(J);if($.object.fov=this.fov,$.object.zoom=this.zoom,$.object.near=this.near,$.object.far=this.far,$.object.focus=this.focus,$.object.aspect=this.aspect,this.view!==null)$.object.view=Object.assign({},this.view);return $.object.filmGauge=this.filmGauge,$.object.filmOffset=this.filmOffset,$}}var j8=-90,y8=1;class s4 extends bJ{constructor(J,$,Q){super();this.type="CubeCamera",this.renderTarget=Q,this.coordinateSystem=null,this.activeMipmapLevel=0;const Z=new uJ(j8,y8,J,$);Z.layers=this.layers,this.add(Z);const H=new uJ(j8,y8,J,$);H.layers=this.layers,this.add(H);const Y=new uJ(j8,y8,J,$);Y.layers=this.layers,this.add(Y);const K=new uJ(j8,y8,J,$);K.layers=this.layers,this.add(K);const G=new uJ(j8,y8,J,$);G.layers=this.layers,this.add(G);const U=new uJ(j8,y8,J,$);U.layers=this.layers,this.add(U)}updateCoordinateSystem(){const J=this.coordinateSystem,$=this.children.concat(),[Q,Z,H,Y,K,G]=$;for(let U of $)this.remove(U);if(J===2000)Q.up.set(0,1,0),Q.lookAt(1,0,0),Z.up.set(0,1,0),Z.lookAt(-1,0,0),H.up.set(0,0,-1),H.lookAt(0,1,0),Y.up.set(0,0,1),Y.lookAt(0,-1,0),K.up.set(0,1,0),K.lookAt(0,0,1),G.up.set(0,1,0),G.lookAt(0,0,-1);else if(J===2001)Q.up.set(0,-1,0),Q.lookAt(-1,0,0),Z.up.set(0,-1,0),Z.lookAt(1,0,0),H.up.set(0,0,1),H.lookAt(0,1,0),Y.up.set(0,0,-1),Y.lookAt(0,-1,0),K.up.set(0,-1,0),K.lookAt(0,0,1),G.up.set(0,-1,0),G.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+J);for(let U of $)this.add(U),U.updateMatrixWorld()}update(J,$){if(this.parent===null)this.updateMatrixWorld();const{renderTarget:Q,activeMipmapLevel:Z}=this;if(this.coordinateSystem!==J.coordinateSystem)this.coordinateSystem=J.coordinateSystem,this.updateCoordinateSystem();const[H,Y,K,G,U,q]=this.children,W=J.getRenderTarget(),V=J.getActiveCubeFace(),D=J.getActiveMipmapLevel(),_=J.xr.enabled;J.xr.enabled=!1;const R=Q.texture.generateMipmaps;Q.texture.generateMipmaps=!1,J.setRenderTarget(Q,0,Z),J.render($,H),J.setRenderTarget(Q,1,Z),J.render($,Y),J.setRenderTarget(Q,2,Z),J.render($,K),J.setRenderTarget(Q,3,Z),J.render($,G),J.setRenderTarget(Q,4,Z),J.render($,U),Q.texture.generateMipmaps=R,J.setRenderTarget(Q,5,Z),J.render($,q),J.setRenderTarget(W,V,D),J.xr.enabled=_,Q.texture.needsPMREMUpdate=!0}}class A$ extends xJ{constructor(J,$,Q,Z,H,Y,K,G,U,q){J=J!==void 0?J:[],$=$!==void 0?$:301;super(J,$,Q,Z,H,Y,K,G,U,q);this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(J){this.image=J}}class a4 extends Y6{constructor(J=1,$={}){super(J,J,$);this.isWebGLCubeRenderTarget=!0;const Q={width:J,height:J,depth:1},Z=[Q,Q,Q,Q,Q,Q];if($.encoding!==void 0)B7("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),$.colorSpace=$.encoding===3001?"srgb":"";this.texture=new A$(Z,$.mapping,$.wrapS,$.wrapT,$.magFilter,$.minFilter,$.format,$.type,$.anisotropy,$.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=$.generateMipmaps!==void 0?$.generateMipmaps:!1,this.texture.minFilter=$.minFilter!==void 0?$.minFilter:1006}fromEquirectangularTexture(J,$){this.texture.type=$.type,this.texture.colorSpace=$.colorSpace,this.texture.generateMipmaps=$.generateMipmaps,this.texture.minFilter=$.minFilter,this.texture.magFilter=$.magFilter;const Q={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},Z=new OJ(5,5,5),H=new V6({name:"CubemapFromEquirect",uniforms:c8(Q.uniforms),vertexShader:Q.vertexShader,fragmentShader:Q.fragmentShader,side:1,blending:0});H.uniforms.tEquirect.value=$;const Y=new KJ(Z,H),K=$.minFilter;if($.minFilter===1008)$.minFilter=1006;return new s4(1,10,this).update(J,Y),$.minFilter=K,Y.geometry.dispose(),Y.material.dispose(),this}clear(J,$,Q,Z){const H=J.getRenderTarget();for(let Y=0;Y<6;Y++)J.setRenderTarget(this,Y),J.clear($,Q,Z);J.setRenderTarget(H)}}var Z$=new v,rU=new v,sU=new s0;class O6{constructor(J=new v(1,0,0),$=0){this.isPlane=!0,this.normal=J,this.constant=$}set(J,$){return this.normal.copy(J),this.constant=$,this}setComponents(J,$,Q,Z){return this.normal.set(J,$,Q),this.constant=Z,this}setFromNormalAndCoplanarPoint(J,$){return this.normal.copy(J),this.constant=-$.dot(this.normal),this}setFromCoplanarPoints(J,$,Q){const Z=Z$.subVectors(Q,$).cross(rU.subVectors(J,$)).normalize();return this.setFromNormalAndCoplanarPoint(Z,J),this}copy(J){return this.normal.copy(J.normal),this.constant=J.constant,this}normalize(){const J=1/this.normal.length();return this.normal.multiplyScalar(J),this.constant*=J,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(J){return this.normal.dot(J)+this.constant}distanceToSphere(J){return this.distanceToPoint(J.center)-J.radius}projectPoint(J,$){return $.copy(J).addScaledVector(this.normal,-this.distanceToPoint(J))}intersectLine(J,$){const Q=J.delta(Z$),Z=this.normal.dot(Q);if(Z===0){if(this.distanceToPoint(J.start)===0)return $.copy(J.start);return null}const H=-(J.start.dot(this.normal)+this.constant)/Z;if(H<0||H>1)return null;return $.copy(J.start).addScaledVector(Q,H)}intersectsLine(J){const $=this.distanceToPoint(J.start),Q=this.distanceToPoint(J.end);return $<0&&Q>0||Q<0&&$>0}intersectsBox(J){return J.intersectsPlane(this)}intersectsSphere(J){return J.intersectsPlane(this)}coplanarPoint(J){return J.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(J,$){const Q=$||sU.getNormalMatrix(J),Z=this.coplanarPoint(Z$).applyMatrix4(J),H=this.normal.applyMatrix3(Q).normalize();return this.constant=-Z.dot(H),this}translate(J){return this.constant-=J.dot(this.normal),this}equals(J){return J.normal.equals(this.normal)&&J.constant===this.constant}clone(){return new this.constructor().copy(this)}}var G8=new f5,O5=new v;class x5{constructor(J=new O6,$=new O6,Q=new O6,Z=new O6,H=new O6,Y=new O6){this.planes=[J,$,Q,Z,H,Y]}set(J,$,Q,Z,H,Y){const K=this.planes;return K[0].copy(J),K[1].copy($),K[2].copy(Q),K[3].copy(Z),K[4].copy(H),K[5].copy(Y),this}copy(J){const $=this.planes;for(let Q=0;Q<6;Q++)$[Q].copy(J.planes[Q]);return this}setFromProjectionMatrix(J,$=2000){const Q=this.planes,Z=J.elements,H=Z[0],Y=Z[1],K=Z[2],G=Z[3],U=Z[4],q=Z[5],W=Z[6],V=Z[7],D=Z[8],_=Z[9],R=Z[10],E=Z[11],z=Z[12],N=Z[13],k=Z[14],M=Z[15];if(Q[0].setComponents(G-H,V-U,E-D,M-z).normalize(),Q[1].setComponents(G+H,V+U,E+D,M+z).normalize(),Q[2].setComponents(G+Y,V+q,E+_,M+N).normalize(),Q[3].setComponents(G-Y,V-q,E-_,M-N).normalize(),Q[4].setComponents(G-K,V-W,E-R,M-k).normalize(),$===2000)Q[5].setComponents(G+K,V+W,E+R,M+k).normalize();else if($===2001)Q[5].setComponents(K,W,R,k).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+$);return this}intersectsObject(J){if(J.boundingSphere!==void 0){if(J.boundingSphere===null)J.computeBoundingSphere();G8.copy(J.boundingSphere).applyMatrix4(J.matrixWorld)}else{const $=J.geometry;if($.boundingSphere===null)$.computeBoundingSphere();G8.copy($.boundingSphere).applyMatrix4(J.matrixWorld)}return this.intersectsSphere(G8)}intersectsSprite(J){return G8.center.set(0,0,0),G8.radius=0.7071067811865476,G8.applyMatrix4(J.matrixWorld),this.intersectsSphere(G8)}intersectsSphere(J){const $=this.planes,Q=J.center,Z=-J.radius;for(let H=0;H<6;H++)if($[H].distanceToPoint(Q)<Z)return!1;return!0}intersectsBox(J){const $=this.planes;for(let Q=0;Q<6;Q++){const Z=$[Q];if(O5.x=Z.normal.x>0?J.max.x:J.min.x,O5.y=Z.normal.y>0?J.max.y:J.min.y,O5.z=Z.normal.z>0?J.max.z:J.min.z,Z.distanceToPoint(O5)<0)return!1}return!0}containsPoint(J){const $=this.planes;for(let Q=0;Q<6;Q++)if($[Q].distanceToPoint(J)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class P$ extends k6{constructor(J=1,$=1,Q=1,Z=1){super();this.type="PlaneGeometry",this.parameters={width:J,height:$,widthSegments:Q,heightSegments:Z};const H=J/2,Y=$/2,K=Math.floor(Q),G=Math.floor(Z),U=K+1,q=G+1,W=J/K,V=$/G,D=[],_=[],R=[],E=[];for(let z=0;z<q;z++){const N=z*V-Y;for(let k=0;k<U;k++){const M=k*W-H;_.push(M,-N,0),R.push(0,0,1),E.push(k/K),E.push(1-z/G)}}for(let z=0;z<G;z++)for(let N=0;N<K;N++){const k=N+U*z,M=N+U*(z+1),C=N+1+U*(z+1),m=N+1+U*z;D.push(k,M,m),D.push(M,C,m)}this.setIndex(D),this.setAttribute("position",new W6(_,3)),this.setAttribute("normal",new W6(R,3)),this.setAttribute("uv",new W6(E,2))}copy(J){return super.copy(J),this.parameters=Object.assign({},J.parameters),this}static fromJSON(J){return new P$(J.width,J.height,J.widthSegments,J.heightSegments)}}var tU="#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",eU="#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",Jq="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",$q="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Qq="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",Zq="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",Hq="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Yq="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Gq="#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",Kq="#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",Uq="vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",qq="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Xq="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",Fq="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",Wq="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Vq="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Dq="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",zq="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Nq="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",_q="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Rq="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Eq="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Oq="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Bq="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",Mq="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Iq="vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Lq="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",kq="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",Aq="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Pq="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Tq="gl_FragColor = linearToOutputTexel( gl_FragColor );",wq="\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",Sq="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Cq="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",fq="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",jq="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",yq="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",xq="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",bq="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",hq="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",gq="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",vq="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",mq="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",pq="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",dq="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",cq="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",uq="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lq="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",nq="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",oq="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",iq="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",rq="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",sq="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",aq="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",tq="\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",eq="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",JX="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",$X="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",QX="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",ZX="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",HX="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",YX="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",GX="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",KX="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",UX="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",qX="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",XX="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",FX="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",WX="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",VX="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",DX="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",zX="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",NX="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",_X="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",RX="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",EX="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",OX="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",BX="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",MX="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",IX="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",LX="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",kX="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",AX="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",PX="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",TX="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",wX="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",SX="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",CX="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",fX="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",jX="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",yX="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",xX="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",bX="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",hX="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",gX="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",vX="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",mX="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",pX="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",dX="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",cX="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",uX="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",lX="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",nX="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",oX="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",iX="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",rX="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",sX="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",aX="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",tX="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",eX="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",J1="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",$1="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Q1="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",Z1="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",H1="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Y1="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",G1="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",K1="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",U1="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",q1="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",X1="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",F1="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",W1="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",V1="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",D1="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",z1="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",N1="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",_1="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",R1="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",E1="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",O1="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",B1="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",M1="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",I1="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",L1="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",k1="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",A1="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",P1="#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",T1="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",w1="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",S1="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",n0={alphahash_fragment:tU,alphahash_pars_fragment:eU,alphamap_fragment:Jq,alphamap_pars_fragment:$q,alphatest_fragment:Qq,alphatest_pars_fragment:Zq,aomap_fragment:Hq,aomap_pars_fragment:Yq,batching_pars_vertex:Gq,batching_vertex:Kq,begin_vertex:Uq,beginnormal_vertex:qq,bsdfs:Xq,iridescence_fragment:Fq,bumpmap_pars_fragment:Wq,clipping_planes_fragment:Vq,clipping_planes_pars_fragment:Dq,clipping_planes_pars_vertex:zq,clipping_planes_vertex:Nq,color_fragment:_q,color_pars_fragment:Rq,color_pars_vertex:Eq,color_vertex:Oq,common:Bq,cube_uv_reflection_fragment:Mq,defaultnormal_vertex:Iq,displacementmap_pars_vertex:Lq,displacementmap_vertex:kq,emissivemap_fragment:Aq,emissivemap_pars_fragment:Pq,colorspace_fragment:Tq,colorspace_pars_fragment:wq,envmap_fragment:Sq,envmap_common_pars_fragment:Cq,envmap_pars_fragment:fq,envmap_pars_vertex:jq,envmap_physical_pars_fragment:lq,envmap_vertex:yq,fog_vertex:xq,fog_pars_vertex:bq,fog_fragment:hq,fog_pars_fragment:gq,gradientmap_pars_fragment:vq,lightmap_fragment:mq,lightmap_pars_fragment:pq,lights_lambert_fragment:dq,lights_lambert_pars_fragment:cq,lights_pars_begin:uq,lights_toon_fragment:nq,lights_toon_pars_fragment:oq,lights_phong_fragment:iq,lights_phong_pars_fragment:rq,lights_physical_fragment:sq,lights_physical_pars_fragment:aq,lights_fragment_begin:tq,lights_fragment_maps:eq,lights_fragment_end:JX,logdepthbuf_fragment:$X,logdepthbuf_pars_fragment:QX,logdepthbuf_pars_vertex:ZX,logdepthbuf_vertex:HX,map_fragment:YX,map_pars_fragment:GX,map_particle_fragment:KX,map_particle_pars_fragment:UX,metalnessmap_fragment:qX,metalnessmap_pars_fragment:XX,morphcolor_vertex:FX,morphnormal_vertex:WX,morphtarget_pars_vertex:VX,morphtarget_vertex:DX,normal_fragment_begin:zX,normal_fragment_maps:NX,normal_pars_fragment:_X,normal_pars_vertex:RX,normal_vertex:EX,normalmap_pars_fragment:OX,clearcoat_normal_fragment_begin:BX,clearcoat_normal_fragment_maps:MX,clearcoat_pars_fragment:IX,iridescence_pars_fragment:LX,opaque_fragment:kX,packing:AX,premultiplied_alpha_fragment:PX,project_vertex:TX,dithering_fragment:wX,dithering_pars_fragment:SX,roughnessmap_fragment:CX,roughnessmap_pars_fragment:fX,shadowmap_pars_fragment:jX,shadowmap_pars_vertex:yX,shadowmap_vertex:xX,shadowmask_pars_fragment:bX,skinbase_vertex:hX,skinning_pars_vertex:gX,skinning_vertex:vX,skinnormal_vertex:mX,specularmap_fragment:pX,specularmap_pars_fragment:dX,tonemapping_fragment:cX,tonemapping_pars_fragment:uX,transmission_fragment:lX,transmission_pars_fragment:nX,uv_pars_fragment:oX,uv_pars_vertex:iX,uv_vertex:rX,worldpos_vertex:sX,background_vert:aX,background_frag:tX,backgroundCube_vert:eX,backgroundCube_frag:J1,cube_vert:$1,cube_frag:Q1,depth_vert:Z1,depth_frag:H1,distanceRGBA_vert:Y1,distanceRGBA_frag:G1,equirect_vert:K1,equirect_frag:U1,linedashed_vert:q1,linedashed_frag:X1,meshbasic_vert:F1,meshbasic_frag:W1,meshlambert_vert:V1,meshlambert_frag:D1,meshmatcap_vert:z1,meshmatcap_frag:N1,meshnormal_vert:_1,meshnormal_frag:R1,meshphong_vert:E1,meshphong_frag:O1,meshphysical_vert:B1,meshphysical_frag:M1,meshtoon_vert:I1,meshtoon_frag:L1,points_vert:k1,points_frag:A1,shadow_vert:P1,shadow_frag:T1,sprite_vert:w1,sprite_frag:S1},_0={common:{diffuse:{value:new a0(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new s0},alphaMap:{value:null},alphaMapTransform:{value:new s0},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new s0}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new s0}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new s0}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new s0},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new s0},normalScale:{value:new k0(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new s0},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new s0}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new s0}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new s0}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:0.00025},fogNear:{value:1},fogFar:{value:2000},fogColor:{value:new a0(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new a0(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new s0},alphaTest:{value:0},uvTransform:{value:new s0}},sprite:{diffuse:{value:new a0(16777215)},opacity:{value:1},center:{value:new k0(0.5,0.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new s0},alphaMap:{value:null},alphaMapTransform:{value:new s0},alphaTest:{value:0}}},B6={basic:{uniforms:cJ([_0.common,_0.specularmap,_0.envmap,_0.aomap,_0.lightmap,_0.fog]),vertexShader:n0.meshbasic_vert,fragmentShader:n0.meshbasic_frag},lambert:{uniforms:cJ([_0.common,_0.specularmap,_0.envmap,_0.aomap,_0.lightmap,_0.emissivemap,_0.bumpmap,_0.normalmap,_0.displacementmap,_0.fog,_0.lights,{emissive:{value:new a0(0)}}]),vertexShader:n0.meshlambert_vert,fragmentShader:n0.meshlambert_frag},phong:{uniforms:cJ([_0.common,_0.specularmap,_0.envmap,_0.aomap,_0.lightmap,_0.emissivemap,_0.bumpmap,_0.normalmap,_0.displacementmap,_0.fog,_0.lights,{emissive:{value:new a0(0)},specular:{value:new a0(1118481)},shininess:{value:30}}]),vertexShader:n0.meshphong_vert,fragmentShader:n0.meshphong_frag},standard:{uniforms:cJ([_0.common,_0.envmap,_0.aomap,_0.lightmap,_0.emissivemap,_0.bumpmap,_0.normalmap,_0.displacementmap,_0.roughnessmap,_0.metalnessmap,_0.fog,_0.lights,{emissive:{value:new a0(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:n0.meshphysical_vert,fragmentShader:n0.meshphysical_frag},toon:{uniforms:cJ([_0.common,_0.aomap,_0.lightmap,_0.emissivemap,_0.bumpmap,_0.normalmap,_0.displacementmap,_0.gradientmap,_0.fog,_0.lights,{emissive:{value:new a0(0)}}]),vertexShader:n0.meshtoon_vert,fragmentShader:n0.meshtoon_frag},matcap:{uniforms:cJ([_0.common,_0.bumpmap,_0.normalmap,_0.displacementmap,_0.fog,{matcap:{value:null}}]),vertexShader:n0.meshmatcap_vert,fragmentShader:n0.meshmatcap_frag},points:{uniforms:cJ([_0.points,_0.fog]),vertexShader:n0.points_vert,fragmentShader:n0.points_frag},dashed:{uniforms:cJ([_0.common,_0.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:n0.linedashed_vert,fragmentShader:n0.linedashed_frag},depth:{uniforms:cJ([_0.common,_0.displacementmap]),vertexShader:n0.depth_vert,fragmentShader:n0.depth_frag},normal:{uniforms:cJ([_0.common,_0.bumpmap,_0.normalmap,_0.displacementmap,{opacity:{value:1}}]),vertexShader:n0.meshnormal_vert,fragmentShader:n0.meshnormal_frag},sprite:{uniforms:cJ([_0.sprite,_0.fog]),vertexShader:n0.sprite_vert,fragmentShader:n0.sprite_frag},background:{uniforms:{uvTransform:{value:new s0},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:n0.background_vert,fragmentShader:n0.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:n0.backgroundCube_vert,fragmentShader:n0.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:n0.cube_vert,fragmentShader:n0.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:n0.equirect_vert,fragmentShader:n0.equirect_frag},distanceRGBA:{uniforms:cJ([_0.common,_0.displacementmap,{referencePosition:{value:new v},nearDistance:{value:1},farDistance:{value:1000}}]),vertexShader:n0.distanceRGBA_vert,fragmentShader:n0.distanceRGBA_frag},shadow:{uniforms:cJ([_0.lights,_0.fog,{color:{value:new a0(0)},opacity:{value:1}}]),vertexShader:n0.shadow_vert,fragmentShader:n0.shadow_frag}};B6.physical={uniforms:cJ([B6.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new s0},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new s0},clearcoatNormalScale:{value:new k0(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new s0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new s0},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new s0},sheen:{value:0},sheenColor:{value:new a0(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new s0},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new s0},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new s0},transmissionSamplerSize:{value:new k0},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new s0},attenuationDistance:{value:0},attenuationColor:{value:new a0(0)},specularColor:{value:new a0(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new s0},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new s0},anisotropyVector:{value:new k0},anisotropyMap:{value:null},anisotropyMapTransform:{value:new s0}}]),vertexShader:n0.meshphysical_vert,fragmentShader:n0.meshphysical_frag};var B5={r:0,b:0,g:0};class b5 extends k${constructor(J=-1,$=1,Q=1,Z=-1,H=0.1,Y=2000){super();this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=J,this.right=$,this.top=Q,this.bottom=Z,this.near=H,this.far=Y,this.updateProjectionMatrix()}copy(J,$){return super.copy(J,$),this.left=J.left,this.right=J.right,this.top=J.top,this.bottom=J.bottom,this.near=J.near,this.far=J.far,this.zoom=J.zoom,this.view=J.view===null?null:Object.assign({},J.view),this}setViewOffset(J,$,Q,Z,H,Y){if(this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=J,this.view.fullHeight=$,this.view.offsetX=Q,this.view.offsetY=Z,this.view.width=H,this.view.height=Y,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){const J=(this.right-this.left)/(2*this.zoom),$=(this.top-this.bottom)/(2*this.zoom),Q=(this.right+this.left)/2,Z=(this.top+this.bottom)/2;let H=Q-J,Y=Q+J,K=Z+$,G=Z-$;if(this.view!==null&&this.view.enabled){const U=(this.right-this.left)/this.view.fullWidth/this.zoom,q=(this.top-this.bottom)/this.view.fullHeight/this.zoom;H+=U*this.view.offsetX,Y=H+U*this.view.width,K-=q*this.view.offsetY,G=K-q*this.view.height}this.projectionMatrix.makeOrthographic(H,Y,K,G,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(J){const $=super.toJSON(J);if($.object.zoom=this.zoom,$.object.left=this.left,$.object.right=this.right,$.object.top=this.top,$.object.bottom=this.bottom,$.object.near=this.near,$.object.far=this.far,this.view!==null)$.object.view=Object.assign({},this.view);return $}}var m8=4,V4=[0.125,0.215,0.35,0.446,0.526,0.582],U8=20,H$=new b5,D4=new a0,Y$=null,G$=0,K$=0,K8=(1+Math.sqrt(5))/2,x8=1/K8,z4=[new v(1,1,1),new v(-1,1,1),new v(1,1,-1),new v(-1,1,-1),new v(0,K8,x8),new v(0,K8,-x8),new v(x8,0,K8),new v(-x8,0,K8),new v(K8,x8,0),new v(-K8,x8,0)];class V${constructor(J){this._renderer=J,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(J,$=0,Q=0.1,Z=100){Y$=this._renderer.getRenderTarget(),G$=this._renderer.getActiveCubeFace(),K$=this._renderer.getActiveMipmapLevel(),this._setSize(256);const H=this._allocateTargets();if(H.depthBuffer=!0,this._sceneToCubeUV(J,Q,Z,H),$>0)this._blur(H,0,0,$);return this._applyPMREM(H),this._cleanup(H),H}fromEquirectangular(J,$=null){return this._fromTexture(J,$)}fromCubemap(J,$=null){return this._fromTexture(J,$)}compileCubemapShader(){if(this._cubemapMaterial===null)this._cubemapMaterial=R4(),this._compileMaterial(this._cubemapMaterial)}compileEquirectangularShader(){if(this._equirectMaterial===null)this._equirectMaterial=_4(),this._compileMaterial(this._equirectMaterial)}dispose(){if(this._dispose(),this._cubemapMaterial!==null)this._cubemapMaterial.dispose();if(this._equirectMaterial!==null)this._equirectMaterial.dispose()}_setSize(J){this._lodMax=Math.floor(Math.log2(J)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){if(this._blurMaterial!==null)this._blurMaterial.dispose();if(this._pingPongRenderTarget!==null)this._pingPongRenderTarget.dispose();for(let J=0;J<this._lodPlanes.length;J++)this._lodPlanes[J].dispose()}_cleanup(J){this._renderer.setRenderTarget(Y$,G$,K$),J.scissorTest=!1,M5(J,0,0,J.width,J.height)}_fromTexture(J,$){if(J.mapping===301||J.mapping===302)this._setSize(J.image.length===0?16:J.image[0].width||J.image[0].image.width);else this._setSize(J.image.width/4);Y$=this._renderer.getRenderTarget(),G$=this._renderer.getActiveCubeFace(),K$=this._renderer.getActiveMipmapLevel();const Q=$||this._allocateTargets();return this._textureToCubeUV(J,Q),this._applyPMREM(Q),this._cleanup(Q),Q}_allocateTargets(){const J=3*Math.max(this._cubeSize,112),$=4*this._cubeSize,Q={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:"srgb-linear",depthBuffer:!1},Z=N4(J,$,Q);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==J||this._pingPongRenderTarget.height!==$){if(this._pingPongRenderTarget!==null)this._dispose();this._pingPongRenderTarget=N4(J,$,Q);const{_lodMax:H}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=h1(H)),this._blurMaterial=g1(H,J,$)}return Z}_compileMaterial(J){const $=new KJ(this._lodPlanes[0],J);this._renderer.compile($,H$)}_sceneToCubeUV(J,$,Q,Z){const K=new uJ(90,1,$,Q),G=[1,-1,1,1,1,1],U=[1,1,1,-1,-1,-1],q=this._renderer,W=q.autoClear,V=q.toneMapping;q.getClearColor(D4),q.toneMapping=0,q.autoClear=!1;const D=new B$({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new KJ(new OJ,D);let R=!1;const E=J.background;if(E){if(E.isColor)D.color.copy(E),J.background=null,R=!0}else D.color.copy(D4),R=!0;for(let z=0;z<6;z++){const N=z%3;if(N===0)K.up.set(0,G[z],0),K.lookAt(U[z],0,0);else if(N===1)K.up.set(0,0,G[z]),K.lookAt(0,U[z],0);else K.up.set(0,G[z],0),K.lookAt(0,0,U[z]);const k=this._cubeSize;if(M5(Z,N*k,z>2?k:0,k,k),q.setRenderTarget(Z),R)q.render(_,K);q.render(J,K)}_.geometry.dispose(),_.material.dispose(),q.toneMapping=V,q.autoClear=W,J.background=E}_textureToCubeUV(J,$){const Q=this._renderer,Z=J.mapping===301||J.mapping===302;if(Z){if(this._cubemapMaterial===null)this._cubemapMaterial=R4();this._cubemapMaterial.uniforms.flipEnvMap.value=J.isRenderTargetTexture===!1?-1:1}else if(this._equirectMaterial===null)this._equirectMaterial=_4();const H=Z?this._cubemapMaterial:this._equirectMaterial,Y=new KJ(this._lodPlanes[0],H),K=H.uniforms;K.envMap.value=J;const G=this._cubeSize;M5($,0,0,3*G,2*G),Q.setRenderTarget($),Q.render(Y,H$)}_applyPMREM(J){const $=this._renderer,Q=$.autoClear;$.autoClear=!1;for(let Z=1;Z<this._lodPlanes.length;Z++){const H=Math.sqrt(this._sigmas[Z]*this._sigmas[Z]-this._sigmas[Z-1]*this._sigmas[Z-1]),Y=z4[(Z-1)%z4.length];this._blur(J,Z-1,Z,H,Y)}$.autoClear=Q}_blur(J,$,Q,Z,H){const Y=this._pingPongRenderTarget;this._halfBlur(J,Y,$,Q,Z,"latitudinal",H),this._halfBlur(Y,J,Q,Q,Z,"longitudinal",H)}_halfBlur(J,$,Q,Z,H,Y,K){const G=this._renderer,U=this._blurMaterial;if(Y!=="latitudinal"&&Y!=="longitudinal")console.error("blur direction must be either latitudinal or longitudinal!");const q=3,W=new KJ(this._lodPlanes[Z],U),V=U.uniforms,D=this._sizeLods[Q]-1,_=isFinite(H)?Math.PI/(2*D):2*Math.PI/(2*U8-1),R=H/_,E=isFinite(H)?1+Math.floor(q*R):U8;if(E>U8)console.warn(`sigmaRadians, ${H}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${U8}`);const z=[];let N=0;for(let P=0;P<U8;++P){const b=P/R,a=Math.exp(-b*b/2);if(z.push(a),P===0)N+=a;else if(P<E)N+=2*a}for(let P=0;P<z.length;P++)z[P]=z[P]/N;if(V.envMap.value=J.texture,V.samples.value=E,V.weights.value=z,V.latitudinal.value=Y==="latitudinal",K)V.poleAxis.value=K;const{_lodMax:k}=this;V.dTheta.value=_,V.mipInt.value=k-Q;const M=this._sizeLods[Z],C=3*M*(Z>k-m8?Z-k+m8:0),m=4*(this._cubeSize-M);M5($,C,m,3*M,2*M),G.setRenderTarget($),G.render(W,H$)}}class L7 extends xJ{constructor(J,$,Q,Z,H,Y,K,G,U,q){if(q=q!==void 0?q:1026,q!==1026&&q!==1027)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");if(Q===void 0&&q===1026)Q=1014;if(Q===void 0&&q===1027)Q=1020;super(null,Z,H,Y,K,G,q,Q,U);this.isDepthTexture=!0,this.image={width:J,height:$},this.magFilter=K!==void 0?K:1003,this.minFilter=G!==void 0?G:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(J){return super.copy(J),this.compareFunction=J.compareFunction,this}toJSON(J){const $=super.toJSON(J);if(this.compareFunction!==null)$.compareFunction=this.compareFunction;return $}}var e4=new xJ,JH=new L7(1,1);JH.compareFunction=515;var $H=new E$,QH=new o4,ZH=new A$,E4=[],O4=[],B4=new Float32Array(16),M4=new Float32Array(9),I4=new Float32Array(4);class HH{constructor(J,$,Q){this.id=J,this.addr=Q,this.cache=[],this.type=$.type,this.setValue=VF($.type)}}class YH{constructor(J,$,Q){this.id=J,this.addr=Q,this.cache=[],this.type=$.type,this.size=$.size,this.setValue=jF($.type)}}class GH{constructor(J){this.id=J,this.seq=[],this.map={}}setValue(J,$,Q){const Z=this.seq;for(let H=0,Y=Z.length;H!==Y;++H){const K=Z[H];K.setValue(J,$[K.id],Q)}}}var U$=/(\w+)(\])?(\[|\.)?/g;class M7{constructor(J,$){this.seq=[],this.map={};const Q=J.getProgramParameter($,J.ACTIVE_UNIFORMS);for(let Z=0;Z<Q;++Z){const H=J.getActiveUniform($,Z),Y=J.getUniformLocation($,H.name);yF(H,Y,this)}}setValue(J,$,Q,Z){const H=this.map[$];if(H!==void 0)H.setValue(J,Q,Z)}setOptional(J,$,Q){const Z=$[Q];if(Z!==void 0)this.setValue(J,Q,Z)}static upload(J,$,Q,Z){for(let H=0,Y=$.length;H!==Y;++H){const K=$[H],G=Q[K.id];if(G.needsUpdate!==!1)K.setValue(J,G.value,Z)}}static seqWithValue(J,$){const Q=[];for(let Z=0,H=J.length;Z!==H;++Z){const Y=J[Z];if(Y.id in $)Q.push(Y)}return Q}}var xF=37297,bF=0,lF=/^[ \t]*#include +<([\w\d./]+)>/gm,nF=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]),iF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,QW=0;class KH{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(J){const{vertexShader:$,fragmentShader:Q}=J,Z=this._getShaderStage($),H=this._getShaderStage(Q),Y=this._getShaderCacheForMaterial(J);if(Y.has(Z)===!1)Y.add(Z),Z.usedTimes++;if(Y.has(H)===!1)Y.add(H),H.usedTimes++;return this}remove(J){const $=this.materialCache.get(J);for(let Q of $)if(Q.usedTimes--,Q.usedTimes===0)this.shaderCache.delete(Q.code);return this.materialCache.delete(J),this}getVertexShaderID(J){return this._getShaderStage(J.vertexShader).id}getFragmentShaderID(J){return this._getShaderStage(J.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(J){const $=this.materialCache;let Q=$.get(J);if(Q===void 0)Q=new Set,$.set(J,Q);return Q}_getShaderStage(J){const $=this.shaderCache;let Q=$.get(J);if(Q===void 0)Q=new UH(J),$.set(J,Q);return Q}}class UH{constructor(J){this.id=QW++,this.code=J,this.usedTimes=0}}var qW=0;class qH extends F8{constructor(J){super();this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(J)}copy(J){return super.copy(J),this.depthPacking=J.depthPacking,this.map=J.map,this.alphaMap=J.alphaMap,this.displacementMap=J.displacementMap,this.displacementScale=J.displacementScale,this.displacementBias=J.displacementBias,this.wireframe=J.wireframe,this.wireframeLinewidth=J.wireframeLinewidth,this}}class XH extends F8{constructor(J){super();this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(J)}copy(J){return super.copy(J),this.map=J.map,this.alphaMap=J.alphaMap,this.displacementMap=J.displacementMap,this.displacementScale=J.displacementScale,this.displacementBias=J.displacementBias,this}}var VW="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",DW="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";class FH extends uJ{constructor(J=[]){super();this.isArrayCamera=!0,this.cameras=J}}class AJ extends bJ{constructor(){super();this.isGroup=!0,this.type="Group"}}var EW={type:"move"};class P5{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){if(this._hand===null)this._hand=new AJ,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1};return this._hand}getTargetRaySpace(){if(this._targetRay===null)this._targetRay=new AJ,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new v,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new v;return this._targetRay}getGripSpace(){if(this._grip===null)this._grip=new AJ,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new v,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new v;return this._grip}dispatchEvent(J){if(this._targetRay!==null)this._targetRay.dispatchEvent(J);if(this._grip!==null)this._grip.dispatchEvent(J);if(this._hand!==null)this._hand.dispatchEvent(J);return this}connect(J){if(J&&J.hand){const $=this._hand;if($)for(let Q of J.hand.values())this._getHandJoint($,Q)}return this.dispatchEvent({type:"connected",data:J}),this}disconnect(J){if(this.dispatchEvent({type:"disconnected",data:J}),this._targetRay!==null)this._targetRay.visible=!1;if(this._grip!==null)this._grip.visible=!1;if(this._hand!==null)this._hand.visible=!1;return this}update(J,$,Q){let Z=null,H=null,Y=null;const K=this._targetRay,G=this._grip,U=this._hand;if(J&&$.session.visibilityState!=="visible-blurred"){if(U&&J.hand){Y=!0;for(let R of J.hand.values()){const E=$.getJointPose(R,Q),z=this._getHandJoint(U,R);if(E!==null)z.matrix.fromArray(E.transform.matrix),z.matrix.decompose(z.position,z.rotation,z.scale),z.matrixWorldNeedsUpdate=!0,z.jointRadius=E.radius;z.visible=E!==null}const q=U.joints["index-finger-tip"],W=U.joints["thumb-tip"],V=q.position.distanceTo(W.position),D=0.02,_=0.005;if(U.inputState.pinching&&V>D+_)U.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:J.handedness,target:this});else if(!U.inputState.pinching&&V<=D-_)U.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:J.handedness,target:this})}else if(G!==null&&J.gripSpace){if(H=$.getPose(J.gripSpace,Q),H!==null){if(G.matrix.fromArray(H.transform.matrix),G.matrix.decompose(G.position,G.rotation,G.scale),G.matrixWorldNeedsUpdate=!0,H.linearVelocity)G.hasLinearVelocity=!0,G.linearVelocity.copy(H.linearVelocity);else G.hasLinearVelocity=!1;if(H.angularVelocity)G.hasAngularVelocity=!0,G.angularVelocity.copy(H.angularVelocity);else G.hasAngularVelocity=!1}}if(K!==null){if(Z=$.getPose(J.targetRaySpace,Q),Z===null&&H!==null)Z=H;if(Z!==null){if(K.matrix.fromArray(Z.transform.matrix),K.matrix.decompose(K.position,K.rotation,K.scale),K.matrixWorldNeedsUpdate=!0,Z.linearVelocity)K.hasLinearVelocity=!0,K.linearVelocity.copy(Z.linearVelocity);else K.hasLinearVelocity=!1;if(Z.angularVelocity)K.hasAngularVelocity=!0,K.angularVelocity.copy(Z.angularVelocity);else K.hasAngularVelocity=!1;this.dispatchEvent(EW)}}}if(K!==null)K.visible=Z!==null;if(G!==null)G.visible=H!==null;if(U!==null)U.visible=Y!==null;return this}_getHandJoint(J,$){if(J.joints[$.jointName]===void 0){const Q=new AJ;Q.matrixAutoUpdate=!1,Q.visible=!1,J.joints[$.jointName]=Q,J.add(Q)}return J.joints[$.jointName]}}class WH extends v6{constructor(J,$){super();const Q=this;let Z=null,H=1,Y=null,K="local-floor",G=1,U=null,q=null,W=null,V=null,D=null,_=null;const R=$.getContextAttributes();let E=null,z=null;const N=[],k=[],M=new k0;let C=null;const m=new uJ;m.layers.enable(1),m.viewport=new DJ;const P=new uJ;P.layers.enable(2),P.viewport=new DJ;const b=[m,P],a=new FH;a.layers.enable(1),a.layers.enable(2);let I=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(S){let g=N[S];if(g===void 0)g=new P5,N[S]=g;return g.getTargetRaySpace()},this.getControllerGrip=function(S){let g=N[S];if(g===void 0)g=new P5,N[S]=g;return g.getGripSpace()},this.getHand=function(S){let g=N[S];if(g===void 0)g=new P5,N[S]=g;return g.getHandSpace()};function p(S){const g=k.indexOf(S.inputSource);if(g===-1)return;const $0=N[g];if($0!==void 0)$0.update(S.inputSource,S.frame,U||Y),$0.dispatchEvent({type:S.type,data:S.inputSource})}function K0(){Z.removeEventListener("select",p),Z.removeEventListener("selectstart",p),Z.removeEventListener("selectend",p),Z.removeEventListener("squeeze",p),Z.removeEventListener("squeezestart",p),Z.removeEventListener("squeezeend",p),Z.removeEventListener("end",K0),Z.removeEventListener("inputsourceschange",z0);for(let S=0;S<N.length;S++){const g=k[S];if(g===null)continue;k[S]=null,N[S].disconnect(g)}I=null,T=null,J.setRenderTarget(E),D=null,V=null,W=null,Z=null,z=null,x.stop(),Q.isPresenting=!1,J.setPixelRatio(C),J.setSize(M.width,M.height,!1),Q.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(S){if(H=S,Q.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(S){if(K=S,Q.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return U||Y},this.setReferenceSpace=function(S){U=S},this.getBaseLayer=function(){return V!==null?V:D},this.getBinding=function(){return W},this.getFrame=function(){return _},this.getSession=function(){return Z},this.setSession=async function(S){if(Z=S,Z!==null){if(E=J.getRenderTarget(),Z.addEventListener("select",p),Z.addEventListener("selectstart",p),Z.addEventListener("selectend",p),Z.addEventListener("squeeze",p),Z.addEventListener("squeezestart",p),Z.addEventListener("squeezeend",p),Z.addEventListener("end",K0),Z.addEventListener("inputsourceschange",z0),R.xrCompatible!==!0)await $.makeXRCompatible();if(C=J.getPixelRatio(),J.getSize(M),Z.renderState.layers===void 0||J.capabilities.isWebGL2===!1){const g={antialias:Z.renderState.layers===void 0?R.antialias:!0,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:H};D=new XRWebGLLayer(Z,$,g),Z.updateRenderState({baseLayer:D}),J.setPixelRatio(1),J.setSize(D.framebufferWidth,D.framebufferHeight,!1),z=new Y6(D.framebufferWidth,D.framebufferHeight,{format:1023,type:1009,colorSpace:J.outputColorSpace,stencilBuffer:R.stencil})}else{let g=null,$0=null,Q0=null;if(R.depth)Q0=R.stencil?$.DEPTH24_STENCIL8:$.DEPTH_COMPONENT24,g=R.stencil?1027:1026,$0=R.stencil?1020:1014;const V0={colorFormat:$.RGBA8,depthFormat:Q0,scaleFactor:H};W=new XRWebGLBinding(Z,$),V=W.createProjectionLayer(V0),Z.updateRenderState({layers:[V]}),J.setPixelRatio(1),J.setSize(V.textureWidth,V.textureHeight,!1),z=new Y6(V.textureWidth,V.textureHeight,{format:1023,type:1009,depthTexture:new L7(V.textureWidth,V.textureHeight,$0,void 0,void 0,void 0,void 0,void 0,void 0,g),stencilBuffer:R.stencil,colorSpace:J.outputColorSpace,samples:R.antialias?4:0});const R0=J.properties.get(z);R0.__ignoreDepthValues=V.ignoreDepthValues}z.isXRRenderTarget=!0,this.setFoveation(G),U=null,Y=await Z.requestReferenceSpace(K),x.setContext(Z),x.start(),Q.isPresenting=!0,Q.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(Z!==null)return Z.environmentBlendMode};function z0(S){for(let g=0;g<S.removed.length;g++){const $0=S.removed[g],Q0=k.indexOf($0);if(Q0>=0)k[Q0]=null,N[Q0].disconnect($0)}for(let g=0;g<S.added.length;g++){const $0=S.added[g];let Q0=k.indexOf($0);if(Q0===-1){for(let R0=0;R0<N.length;R0++)if(R0>=k.length){k.push($0),Q0=R0;break}else if(k[R0]===null){k[R0]=$0,Q0=R0;break}if(Q0===-1)break}const V0=N[Q0];if(V0)V0.connect($0)}}const y=new v,r=new v;function e(S,g,$0){y.setFromMatrixPosition(g.matrixWorld),r.setFromMatrixPosition($0.matrixWorld);const Q0=y.distanceTo(r),V0=g.projectionMatrix.elements,R0=$0.projectionMatrix.elements,b0=V0[14]/(V0[10]-1),y0=V0[14]/(V0[10]+1),e0=(V0[9]+1)/V0[5],u=(V0[9]-1)/V0[5],CJ=(V0[8]-1)/V0[0],t0=(R0[8]+1)/R0[0],T0=b0*CJ,x0=b0*t0,p0=Q0/(-CJ+t0),o0=p0*-CJ;g.matrixWorld.decompose(S.position,S.quaternion,S.scale),S.translateX(o0),S.translateZ(p0),S.matrixWorld.compose(S.position,S.quaternion,S.scale),S.matrixWorldInverse.copy(S.matrixWorld).invert();const d0=b0+p0,A=y0+p0,B=T0-o0,l=x0+(Q0-o0),q0=e0*y0/A*d0,Z0=u*y0/A*d0;S.projectionMatrix.makePerspective(B,l,q0,Z0,d0,A),S.projectionMatrixInverse.copy(S.projectionMatrix).invert()}function Y0(S,g){if(g===null)S.matrixWorld.copy(S.matrix);else S.matrixWorld.multiplyMatrices(g.matrixWorld,S.matrix);S.matrixWorldInverse.copy(S.matrixWorld).invert()}this.updateCamera=function(S){if(Z===null)return;if(a.near=P.near=m.near=S.near,a.far=P.far=m.far=S.far,I!==a.near||T!==a.far)Z.updateRenderState({depthNear:a.near,depthFar:a.far}),I=a.near,T=a.far;const g=S.parent,$0=a.cameras;Y0(a,g);for(let Q0=0;Q0<$0.length;Q0++)Y0($0[Q0],g);if($0.length===2)e(a,m,P);else a.projectionMatrix.copy(m.projectionMatrix);t(S,a,g)};function t(S,g,$0){if($0===null)S.matrix.copy(g.matrixWorld);else S.matrix.copy($0.matrixWorld),S.matrix.invert(),S.matrix.multiply(g.matrixWorld);if(S.matrix.decompose(S.position,S.quaternion,S.scale),S.updateMatrixWorld(!0),S.projectionMatrix.copy(g.projectionMatrix),S.projectionMatrixInverse.copy(g.projectionMatrixInverse),S.isPerspectiveCamera)S.fov=I7*2*Math.atan(1/S.projectionMatrix.elements[5]),S.zoom=1}this.getCamera=function(){return a},this.getFoveation=function(){if(V===null&&D===null)return;return G},this.setFoveation=function(S){if(G=S,V!==null)V.fixedFoveation=S;if(D!==null&&D.fixedFoveation!==void 0)D.fixedFoveation=S};let i=null;function O(S,g){if(q=g.getViewerPose(U||Y),_=g,q!==null){const $0=q.views;if(D!==null)J.setRenderTargetFramebuffer(z,D.framebuffer),J.setRenderTarget(z);let Q0=!1;if($0.length!==a.cameras.length)a.cameras.length=0,Q0=!0;for(let V0=0;V0<$0.length;V0++){const R0=$0[V0];let b0=null;if(D!==null)b0=D.getViewport(R0);else{const e0=W.getViewSubImage(V,R0);if(b0=e0.viewport,V0===0)J.setRenderTargetTextures(z,e0.colorTexture,V.ignoreDepthValues?void 0:e0.depthStencilTexture),J.setRenderTarget(z)}let y0=b[V0];if(y0===void 0)y0=new uJ,y0.layers.enable(V0),y0.viewport=new DJ,b[V0]=y0;if(y0.matrix.fromArray(R0.transform.matrix),y0.matrix.decompose(y0.position,y0.quaternion,y0.scale),y0.projectionMatrix.fromArray(R0.projectionMatrix),y0.projectionMatrixInverse.copy(y0.projectionMatrix).invert(),y0.viewport.set(b0.x,b0.y,b0.width,b0.height),V0===0)a.matrix.copy(y0.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale);if(Q0===!0)a.cameras.push(y0)}}for(let $0=0;$0<N.length;$0++){const Q0=k[$0],V0=N[$0];if(Q0!==null&&V0!==void 0)V0.update(Q0,g,U||Y)}if(i)i(S,g);if(g.detectedPlanes)Q.dispatchEvent({type:"planesdetected",data:g});_=null}const x=new t4;x.setAnimationLoop(O),this.setAnimationLoop=function(S){i=S},this.dispose=function(){}}}class g5{constructor(J={}){const{canvas:$=CU(),context:Q=null,depth:Z=!0,stencil:H=!0,alpha:Y=!1,antialias:K=!1,premultipliedAlpha:G=!0,preserveDrawingBuffer:U=!1,powerPreference:q="default",failIfMajorPerformanceCaveat:W=!1}=J;this.isWebGLRenderer=!0;let V;if(Q!==null)V=Q.getContextAttributes().alpha;else V=Y;const D=new Uint32Array(4),_=new Int32Array(4);let R=null,E=null;const z=[],N=[];this.domElement=$,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace="srgb",this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const k=this;let M=!1,C=0,m=0,P=null,b=-1,a=null;const I=new DJ,T=new DJ;let p=null;const K0=new a0(0);let z0=0,y=$.width,r=$.height,e=1,Y0=null,t=null;const i=new DJ(0,0,y,r),O=new DJ(0,0,y,r);let x=!1;const S=new x5;let g=!1,$0=!1,Q0=null;const V0=new IJ,R0=new k0,b0=new v,y0={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function e0(){return P===null?e:1}let u=Q;function CJ(L,d){for(let o=0;o<L.length;o++){const s=L[o],n=$.getContext(s,d);if(n!==null)return n}return null}try{const L={alpha:!0,depth:Z,stencil:H,antialias:K,premultipliedAlpha:G,preserveDrawingBuffer:U,powerPreference:q,failIfMajorPerformanceCaveat:W};if("setAttribute"in $)$.setAttribute("data-engine","three.js r160");if($.addEventListener("webglcontextlost",YJ,!1),$.addEventListener("webglcontextrestored",N0,!1),$.addEventListener("webglcontextcreationerror",j,!1),u===null){const d=["webgl2","webgl","experimental-webgl"];if(k.isWebGL1Renderer===!0)d.shift();if(u=CJ(d,L),u===null)if(CJ(d))throw new Error("Error creating WebGL context with your selected attributes.");else throw new Error("Error creating WebGL context.")}if(typeof WebGLRenderingContext!=="undefined"&&u instanceof WebGLRenderingContext)console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163.");if(u.getShaderPrecisionFormat===void 0)u.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let t0,T0,x0,p0,o0,d0,A,B,l,q0,Z0,U0,j0,O0,A0,w0,m0,H0,f,G0,M0,F0,B0,g0;function l0(){t0=new m1(u),T0=new y1(u,t0,J),t0.init(T0),F0=new RW(u,t0,T0),x0=new NW(u,t0,T0),p0=new c1(u),o0=new HW,d0=new _W(u,t0,x0,o0,T0,F0,p0),A=new b1(k),B=new v1(k),l=new aU(u,T0),B0=new f1(u,t0,l,T0),q0=new p1(u,l,p0,B0),Z0=new o1(u,q0,l,p0),f=new n1(u,T0,d0),w0=new x1(o0),U0=new ZW(k,A,B,t0,T0,B0,w0),j0=new OW(k,o0),O0=new GW,A0=new WW(t0,T0),H0=new C1(k,A,B,x0,Z0,V,G),m0=new zW(k,Z0,T0),g0=new BW(u,p0,T0,x0),G0=new j1(u,t0,p0,T0),M0=new d1(u,t0,p0,T0),p0.programs=U0.programs,k.capabilities=T0,k.extensions=t0,k.properties=o0,k.renderLists=O0,k.shadowMap=m0,k.state=x0,k.info=p0}l0();const JJ=new WH(k,u);this.xr=JJ,this.getContext=function(){return u},this.getContextAttributes=function(){return u.getContextAttributes()},this.forceContextLoss=function(){const L=t0.get("WEBGL_lose_context");if(L)L.loseContext()},this.forceContextRestore=function(){const L=t0.get("WEBGL_lose_context");if(L)L.restoreContext()},this.getPixelRatio=function(){return e},this.setPixelRatio=function(L){if(L===void 0)return;e=L,this.setSize(y,r,!1)},this.getSize=function(L){return L.set(y,r)},this.setSize=function(L,d,o=!0){if(JJ.isPresenting){console.warn("THREE.WebGLRenderer: Can\'t change size while VR device is presenting.");return}if(y=L,r=d,$.width=Math.floor(L*e),$.height=Math.floor(d*e),o===!0)$.style.width=L+"px",$.style.height=d+"px";this.setViewport(0,0,L,d)},this.getDrawingBufferSize=function(L){return L.set(y*e,r*e).floor()},this.setDrawingBufferSize=function(L,d,o){y=L,r=d,e=o,$.width=Math.floor(L*o),$.height=Math.floor(d*o),this.setViewport(0,0,L,d)},this.getCurrentViewport=function(L){return L.copy(I)},this.getViewport=function(L){return L.copy(i)},this.setViewport=function(L,d,o,s){if(L.isVector4)i.set(L.x,L.y,L.z,L.w);else i.set(L,d,o,s);x0.viewport(I.copy(i).multiplyScalar(e).floor())},this.getScissor=function(L){return L.copy(O)},this.setScissor=function(L,d,o,s){if(L.isVector4)O.set(L.x,L.y,L.z,L.w);else O.set(L,d,o,s);x0.scissor(T.copy(O).multiplyScalar(e).floor())},this.getScissorTest=function(){return x},this.setScissorTest=function(L){x0.setScissorTest(x=L)},this.setOpaqueSort=function(L){Y0=L},this.setTransparentSort=function(L){t=L},this.getClearColor=function(L){return L.copy(H0.getClearColor())},this.setClearColor=function(){H0.setClearColor.apply(H0,arguments)},this.getClearAlpha=function(){return H0.getClearAlpha()},this.setClearAlpha=function(){H0.setClearAlpha.apply(H0,arguments)},this.clear=function(L=!0,d=!0,o=!0){let s=0;if(L){let n=!1;if(P!==null){const L0=P.texture.format;n=L0===1033||L0===1031||L0===1029}if(n){const L0=P.texture.type,S0=L0===1009||L0===1014||L0===1012||L0===1020||L0===1017||L0===1018,h0=H0.getClearColor(),v0=H0.getClearAlpha(),i0=h0.r,c0=h0.g,u0=h0.b;if(S0)D[0]=i0,D[1]=c0,D[2]=u0,D[3]=v0,u.clearBufferuiv(u.COLOR,0,D);else _[0]=i0,_[1]=c0,_[2]=u0,_[3]=v0,u.clearBufferiv(u.COLOR,0,_)}else s|=u.COLOR_BUFFER_BIT}if(d)s|=u.DEPTH_BUFFER_BIT;if(o)s|=u.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295);u.clear(s)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){if($.removeEventListener("webglcontextlost",YJ,!1),$.removeEventListener("webglcontextrestored",N0,!1),$.removeEventListener("webglcontextcreationerror",j,!1),O0.dispose(),A0.dispose(),o0.dispose(),A.dispose(),B.dispose(),Z0.dispose(),B0.dispose(),g0.dispose(),U0.dispose(),JJ.dispose(),JJ.removeEventListener("sessionstart",TJ),JJ.removeEventListener("sessionend",pJ),Q0)Q0.dispose(),Q0=null;QJ.stop()};function YJ(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function N0(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const L=p0.autoReset,d=m0.enabled,o=m0.autoUpdate,s=m0.needsUpdate,n=m0.type;l0(),p0.autoReset=L,m0.enabled=d,m0.autoUpdate=o,m0.needsUpdate=s,m0.type=n}function j(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function D0(L){const d=L.target;d.removeEventListener("dispose",D0),E0(d)}function E0(L){f0(L),o0.remove(L)}function f0(L){const d=o0.get(L).programs;if(d!==void 0){if(d.forEach(function(o){U0.releaseProgram(o)}),L.isShaderMaterial)U0.releaseShaderCache(L)}}this.renderBufferDirect=function(L,d,o,s,n,L0){if(d===null)d=y0;const S0=n.isMesh&&n.matrixWorld.determinant()<0,h0=cH(L,d,o,s,n);x0.setMaterial(s,S0);let v0=o.index,i0=1;if(s.wireframe===!0){if(v0=q0.getWireframeAttribute(o),v0===void 0)return;i0=2}const c0=o.drawRange,u0=o.attributes.position;let BJ=c0.start*i0,nJ=(c0.start+c0.count)*i0;if(L0!==null)BJ=Math.max(BJ,L0.start*i0),nJ=Math.min(nJ,(L0.start+L0.count)*i0);if(v0!==null)BJ=Math.max(BJ,0),nJ=Math.min(nJ,v0.count);else if(u0!==void 0&&u0!==null)BJ=Math.max(BJ,0),nJ=Math.min(nJ,u0.count);const fJ=nJ-BJ;if(fJ<0||fJ===Infinity)return;B0.setup(n,s,h0,o,v0);let P6,zJ=G0;if(v0!==null)P6=l.get(v0),zJ=M0,zJ.setIndex(P6);if(n.isMesh)if(s.wireframe===!0)x0.setLineWidth(s.wireframeLinewidth*e0()),zJ.setMode(u.LINES);else zJ.setMode(u.TRIANGLES);else if(n.isLine){let r0=s.linewidth;if(r0===void 0)r0=1;if(x0.setLineWidth(r0*e0()),n.isLineSegments)zJ.setMode(u.LINES);else if(n.isLineLoop)zJ.setMode(u.LINE_LOOP);else zJ.setMode(u.LINE_STRIP)}else if(n.isPoints)zJ.setMode(u.POINTS);else if(n.isSprite)zJ.setMode(u.TRIANGLES);if(n.isBatchedMesh)zJ.renderMultiDraw(n._multiDrawStarts,n._multiDrawCounts,n._multiDrawCount);else if(n.isInstancedMesh)zJ.renderInstances(BJ,fJ,n.count);else if(o.isInstancedBufferGeometry){const r0=o._maxInstanceCount!==void 0?o._maxInstanceCount:Infinity,n5=Math.min(o.instanceCount,r0);zJ.renderInstances(BJ,fJ,n5)}else zJ.render(BJ,fJ)};function P0(L,d,o){if(L.transparent===!0&&L.side===2&&L.forceSinglePass===!1)L.side=1,L.needsUpdate=!0,j7(L,d,o),L.side=0,L.needsUpdate=!0,j7(L,d,o),L.side=2;else j7(L,d,o)}this.compile=function(L,d,o=null){if(o===null)o=L;if(E=A0.get(o),E.init(),N.push(E),o.traverseVisible(function(n){if(n.isLight&&n.layers.test(d.layers)){if(E.pushLight(n),n.castShadow)E.pushShadow(n)}}),L!==o)L.traverseVisible(function(n){if(n.isLight&&n.layers.test(d.layers)){if(E.pushLight(n),n.castShadow)E.pushShadow(n)}});E.setupLights(k._useLegacyLights);const s=new Set;return L.traverse(function(n){const L0=n.material;if(L0)if(Array.isArray(L0))for(let S0=0;S0<L0.length;S0++){const h0=L0[S0];P0(h0,o,n),s.add(h0)}else P0(L0,o,n),s.add(L0)}),N.pop(),E=null,s},this.compileAsync=function(L,d,o=null){const s=this.compile(L,d,o);return new Promise((n)=>{function L0(){if(s.forEach(function(S0){if(o0.get(S0).currentProgram.isReady())s.delete(S0)}),s.size===0){n(L);return}setTimeout(L0,10)}if(t0.get("KHR_parallel_shader_compile")!==null)L0();else setTimeout(L0,10)})};let $J=null;function WJ(L){if($J)$J(L)}function TJ(){QJ.stop()}function pJ(){QJ.start()}const QJ=new t4;if(QJ.setAnimationLoop(WJ),typeof self!=="undefined")QJ.setContext(self);this.setAnimationLoop=function(L){$J=L,JJ.setAnimationLoop(L),L===null?QJ.stop():QJ.start()},JJ.addEventListener("sessionstart",TJ),JJ.addEventListener("sessionend",pJ),this.render=function(L,d){if(d!==void 0&&d.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(L.matrixWorldAutoUpdate===!0)L.updateMatrixWorld();if(d.parent===null&&d.matrixWorldAutoUpdate===!0)d.updateMatrixWorld();if(JJ.enabled===!0&&JJ.isPresenting===!0){if(JJ.cameraAutoUpdate===!0)JJ.updateCamera(d);d=JJ.getCamera()}if(L.isScene===!0)L.onBeforeRender(k,L,d,P);if(E=A0.get(L,N.length),E.init(),N.push(E),V0.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),S.setFromProjectionMatrix(V0),$0=this.localClippingEnabled,g=w0.init(this.clippingPlanes,$0),R=O0.get(L,z.length),R.init(),z.push(R),D6(L,d,0,k.sortObjects),R.finish(),k.sortObjects===!0)R.sort(Y0,t);if(this.info.render.frame++,g===!0)w0.beginShadows();const o=E.state.shadowsArray;if(m0.render(o,L,d),g===!0)w0.endShadows();if(this.info.autoReset===!0)this.info.reset();if(H0.render(R,L),E.setupLights(k._useLegacyLights),d.isArrayCamera){const s=d.cameras;for(let n=0,L0=s.length;n<L0;n++){const S0=s[n];z6(R,L,S0,S0.viewport)}}else z6(R,L,d);if(P!==null)d0.updateMultisampleRenderTarget(P),d0.updateRenderTargetMipmap(P);if(L.isScene===!0)L.onAfterRender(k,L,d);if(B0.resetDefaultState(),b=-1,a=null,N.pop(),N.length>0)E=N[N.length-1];else E=null;if(z.pop(),z.length>0)R=z[z.length-1];else R=null};function D6(L,d,o,s){if(L.visible===!1)return;if(L.layers.test(d.layers)){if(L.isGroup)o=L.renderOrder;else if(L.isLOD){if(L.autoUpdate===!0)L.update(d)}else if(L.isLight){if(E.pushLight(L),L.castShadow)E.pushShadow(L)}else if(L.isSprite){if(!L.frustumCulled||S.intersectsSprite(L)){if(s)b0.setFromMatrixPosition(L.matrixWorld).applyMatrix4(V0);const S0=Z0.update(L),h0=L.material;if(h0.visible)R.push(L,S0,h0,o,b0.z,null)}}else if(L.isMesh||L.isLine||L.isPoints){if(!L.frustumCulled||S.intersectsObject(L)){const S0=Z0.update(L),h0=L.material;if(s){if(L.boundingSphere!==void 0){if(L.boundingSphere===null)L.computeBoundingSphere();b0.copy(L.boundingSphere.center)}else{if(S0.boundingSphere===null)S0.computeBoundingSphere();b0.copy(S0.boundingSphere.center)}b0.applyMatrix4(L.matrixWorld).applyMatrix4(V0)}if(Array.isArray(h0)){const v0=S0.groups;for(let i0=0,c0=v0.length;i0<c0;i0++){const u0=v0[i0],BJ=h0[u0.materialIndex];if(BJ&&BJ.visible)R.push(L,S0,BJ,o,b0.z,u0)}}else if(h0.visible)R.push(L,S0,h0,o,b0.z,null)}}}const L0=L.children;for(let S0=0,h0=L0.length;S0<h0;S0++)D6(L0[S0],d,o,s)}function z6(L,d,o,s){const{opaque:n,transmissive:L0,transparent:S0}=L;if(E.setupLightsView(o),g===!0)w0.setGlobalState(k.clippingPlanes,o);if(L0.length>0)dH(n,L0,d,o);if(s)x0.viewport(I.copy(s));if(n.length>0)f7(n,d,o);if(L0.length>0)f7(L0,d,o);if(S0.length>0)f7(S0,d,o);x0.buffers.depth.setTest(!0),x0.buffers.depth.setMask(!0),x0.buffers.color.setMask(!0),x0.setPolygonOffset(!1)}function dH(L,d,o,s){if((o.isScene===!0?o.overrideMaterial:null)!==null)return;const L0=T0.isWebGL2;if(Q0===null)Q0=new Y6(1,1,{generateMipmaps:!0,type:t0.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:L0?4:0});if(k.getDrawingBufferSize(R0),L0)Q0.setSize(R0.x,R0.y);else Q0.setSize(T5(R0.x),T5(R0.y));const S0=k.getRenderTarget();if(k.setRenderTarget(Q0),k.getClearColor(K0),z0=k.getClearAlpha(),z0<1)k.setClearColor(16777215,0.5);k.clear();const h0=k.toneMapping;k.toneMapping=0,f7(L,o,s),d0.updateMultisampleRenderTarget(Q0),d0.updateRenderTargetMipmap(Q0);let v0=!1;for(let i0=0,c0=d.length;i0<c0;i0++){const u0=d[i0],BJ=u0.object,nJ=u0.geometry,fJ=u0.material,P6=u0.group;if(fJ.side===2&&BJ.layers.test(s.layers)){const zJ=fJ.side;fJ.side=1,fJ.needsUpdate=!0,a$(BJ,o,s,nJ,fJ,P6),fJ.side=zJ,fJ.needsUpdate=!0,v0=!0}}if(v0===!0)d0.updateMultisampleRenderTarget(Q0),d0.updateRenderTargetMipmap(Q0);k.setRenderTarget(S0),k.setClearColor(K0,z0),k.toneMapping=h0}function f7(L,d,o){const s=d.isScene===!0?d.overrideMaterial:null;for(let n=0,L0=L.length;n<L0;n++){const S0=L[n],h0=S0.object,v0=S0.geometry,i0=s===null?S0.material:s,c0=S0.group;if(h0.layers.test(o.layers))a$(h0,d,o,v0,i0,c0)}}function a$(L,d,o,s,n,L0){if(L.onBeforeRender(k,d,o,s,n,L0),L.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),n.onBeforeRender(k,d,o,s,L,L0),n.transparent===!0&&n.side===2&&n.forceSinglePass===!1)n.side=1,n.needsUpdate=!0,k.renderBufferDirect(o,d,s,n,L,L0),n.side=0,n.needsUpdate=!0,k.renderBufferDirect(o,d,s,n,L,L0),n.side=2;else k.renderBufferDirect(o,d,s,n,L,L0);L.onAfterRender(k,d,o,s,n,L0)}function j7(L,d,o){if(d.isScene!==!0)d=y0;const s=o0.get(L),n=E.state.lights,L0=E.state.shadowsArray,S0=n.state.version,h0=U0.getParameters(L,n.state,L0,d,o),v0=U0.getProgramCacheKey(h0);let i0=s.programs;if(s.environment=L.isMeshStandardMaterial?d.environment:null,s.fog=d.fog,s.envMap=(L.isMeshStandardMaterial?B:A).get(L.envMap||s.environment),i0===void 0)L.addEventListener("dispose",D0),i0=new Map,s.programs=i0;let c0=i0.get(v0);if(c0!==void 0){if(s.currentProgram===c0&&s.lightsStateVersion===S0)return e$(L,h0),c0}else h0.uniforms=U0.getUniforms(L),L.onBuild(o,h0,k),L.onBeforeCompile(h0,k),c0=U0.acquireProgram(h0,v0),i0.set(v0,c0),s.uniforms=h0.uniforms;const u0=s.uniforms;if(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)u0.clippingPlanes=w0.uniform;if(e$(L,h0),s.needsLights=lH(L),s.lightsStateVersion=S0,s.needsLights)u0.ambientLightColor.value=n.state.ambient,u0.lightProbe.value=n.state.probe,u0.directionalLights.value=n.state.directional,u0.directionalLightShadows.value=n.state.directionalShadow,u0.spotLights.value=n.state.spot,u0.spotLightShadows.value=n.state.spotShadow,u0.rectAreaLights.value=n.state.rectArea,u0.ltc_1.value=n.state.rectAreaLTC1,u0.ltc_2.value=n.state.rectAreaLTC2,u0.pointLights.value=n.state.point,u0.pointLightShadows.value=n.state.pointShadow,u0.hemisphereLights.value=n.state.hemi,u0.directionalShadowMap.value=n.state.directionalShadowMap,u0.directionalShadowMatrix.value=n.state.directionalShadowMatrix,u0.spotShadowMap.value=n.state.spotShadowMap,u0.spotLightMatrix.value=n.state.spotLightMatrix,u0.spotLightMap.value=n.state.spotLightMap,u0.pointShadowMap.value=n.state.pointShadowMap,u0.pointShadowMatrix.value=n.state.pointShadowMatrix;return s.currentProgram=c0,s.uniformsList=null,c0}function t$(L){if(L.uniformsList===null){const d=L.currentProgram.getUniforms();L.uniformsList=M7.seqWithValue(d.seq,L.uniforms)}return L.uniformsList}function e$(L,d){const o=o0.get(L);o.outputColorSpace=d.outputColorSpace,o.batching=d.batching,o.instancing=d.instancing,o.instancingColor=d.instancingColor,o.skinning=d.skinning,o.morphTargets=d.morphTargets,o.morphNormals=d.morphNormals,o.morphColors=d.morphColors,o.morphTargetsCount=d.morphTargetsCount,o.numClippingPlanes=d.numClippingPlanes,o.numIntersection=d.numClipIntersection,o.vertexAlphas=d.vertexAlphas,o.vertexTangents=d.vertexTangents,o.toneMapping=d.toneMapping}function cH(L,d,o,s,n){if(d.isScene!==!0)d=y0;d0.resetTextureUnits();const L0=d.fog,S0=s.isMeshStandardMaterial?d.environment:null,h0=P===null?k.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:"srgb-linear",v0=(s.isMeshStandardMaterial?B:A).get(s.envMap||S0),i0=s.vertexColors===!0&&!!o.attributes.color&&o.attributes.color.itemSize===4,c0=!!o.attributes.tangent&&(!!s.normalMap||s.anisotropy>0),u0=!!o.morphAttributes.position,BJ=!!o.morphAttributes.normal,nJ=!!o.morphAttributes.color;let fJ=0;if(s.toneMapped){if(P===null||P.isXRRenderTarget===!0)fJ=k.toneMapping}const P6=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,zJ=P6!==void 0?P6.length:0,r0=o0.get(s),n5=E.state.lights;if(g===!0){if($0===!0||L!==a){const tJ=L===a&&s.id===b;w0.setState(s,L,tJ)}}let NJ=!1;if(s.version===r0.__version){if(r0.needsLights&&r0.lightsStateVersion!==n5.state.version)NJ=!0;else if(r0.outputColorSpace!==h0)NJ=!0;else if(n.isBatchedMesh&&r0.batching===!1)NJ=!0;else if(!n.isBatchedMesh&&r0.batching===!0)NJ=!0;else if(n.isInstancedMesh&&r0.instancing===!1)NJ=!0;else if(!n.isInstancedMesh&&r0.instancing===!0)NJ=!0;else if(n.isSkinnedMesh&&r0.skinning===!1)NJ=!0;else if(!n.isSkinnedMesh&&r0.skinning===!0)NJ=!0;else if(n.isInstancedMesh&&r0.instancingColor===!0&&n.instanceColor===null)NJ=!0;else if(n.isInstancedMesh&&r0.instancingColor===!1&&n.instanceColor!==null)NJ=!0;else if(r0.envMap!==v0)NJ=!0;else if(s.fog===!0&&r0.fog!==L0)NJ=!0;else if(r0.numClippingPlanes!==void 0&&(r0.numClippingPlanes!==w0.numPlanes||r0.numIntersection!==w0.numIntersection))NJ=!0;else if(r0.vertexAlphas!==i0)NJ=!0;else if(r0.vertexTangents!==c0)NJ=!0;else if(r0.morphTargets!==u0)NJ=!0;else if(r0.morphNormals!==BJ)NJ=!0;else if(r0.morphColors!==nJ)NJ=!0;else if(r0.toneMapping!==fJ)NJ=!0;else if(T0.isWebGL2===!0&&r0.morphTargetsCount!==zJ)NJ=!0}else NJ=!0,r0.__version=s.version;let t6=r0.currentProgram;if(NJ===!0)t6=j7(s,d,n);let JQ=!1,r8=!1,o5=!1;const hJ=t6.getUniforms(),e6=r0.uniforms;if(x0.useProgram(t6.program))JQ=!0,r8=!0,o5=!0;if(s.id!==b)b=s.id,r8=!0;if(JQ||a!==L){hJ.setValue(u,"projectionMatrix",L.projectionMatrix),hJ.setValue(u,"viewMatrix",L.matrixWorldInverse);const tJ=hJ.map.cameraPosition;if(tJ!==void 0)tJ.setValue(u,b0.setFromMatrixPosition(L.matrixWorld));if(T0.logarithmicDepthBuffer)hJ.setValue(u,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2));if(s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshLambertMaterial||s.isMeshBasicMaterial||s.isMeshStandardMaterial||s.isShaderMaterial)hJ.setValue(u,"isOrthographic",L.isOrthographicCamera===!0);if(a!==L)a=L,r8=!0,o5=!0}if(n.isSkinnedMesh){hJ.setOptional(u,n,"bindMatrix"),hJ.setOptional(u,n,"bindMatrixInverse");const tJ=n.skeleton;if(tJ)if(T0.floatVertexTextures){if(tJ.boneTexture===null)tJ.computeBoneTexture();hJ.setValue(u,"boneTexture",tJ.boneTexture,d0)}else console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.")}if(n.isBatchedMesh)hJ.setOptional(u,n,"batchingTexture"),hJ.setValue(u,"batchingTexture",n._matricesTexture,d0);const i5=o.morphAttributes;if(i5.position!==void 0||i5.normal!==void 0||i5.color!==void 0&&T0.isWebGL2===!0)f.update(n,o,t6);if(r8||r0.receiveShadow!==n.receiveShadow)r0.receiveShadow=n.receiveShadow,hJ.setValue(u,"receiveShadow",n.receiveShadow);if(s.isMeshGouraudMaterial&&s.envMap!==null)e6.envMap.value=v0,e6.flipEnvMap.value=v0.isCubeTexture&&v0.isRenderTargetTexture===!1?-1:1;if(r8){if(hJ.setValue(u,"toneMappingExposure",k.toneMappingExposure),r0.needsLights)uH(e6,o5);if(L0&&s.fog===!0)j0.refreshFogUniforms(e6,L0);j0.refreshMaterialUniforms(e6,s,e,r,Q0),M7.upload(u,t$(r0),e6,d0)}if(s.isShaderMaterial&&s.uniformsNeedUpdate===!0)M7.upload(u,t$(r0),e6,d0),s.uniformsNeedUpdate=!1;if(s.isSpriteMaterial)hJ.setValue(u,"center",n.center);if(hJ.setValue(u,"modelViewMatrix",n.modelViewMatrix),hJ.setValue(u,"normalMatrix",n.normalMatrix),hJ.setValue(u,"modelMatrix",n.matrixWorld),s.isShaderMaterial||s.isRawShaderMaterial){const tJ=s.uniformsGroups;for(let r5=0,nH=tJ.length;r5<nH;r5++)if(T0.isWebGL2){const $Q=tJ[r5];g0.update($Q,t6),g0.bind($Q,t6)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return t6}function uH(L,d){L.ambientLightColor.needsUpdate=d,L.lightProbe.needsUpdate=d,L.directionalLights.needsUpdate=d,L.directionalLightShadows.needsUpdate=d,L.pointLights.needsUpdate=d,L.pointLightShadows.needsUpdate=d,L.spotLights.needsUpdate=d,L.spotLightShadows.needsUpdate=d,L.rectAreaLights.needsUpdate=d,L.hemisphereLights.needsUpdate=d}function lH(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}if(this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(L,d,o){o0.get(L.texture).__webglTexture=d,o0.get(L.depthTexture).__webglTexture=o;const s=o0.get(L);if(s.__hasExternalTextures=!0,s.__hasExternalTextures){if(s.__autoAllocateDepthBuffer=o===void 0,!s.__autoAllocateDepthBuffer){if(t0.has("WEBGL_multisampled_render_to_texture")===!0)console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),s.__useRenderToTexture=!1}}},this.setRenderTargetFramebuffer=function(L,d){const o=o0.get(L);o.__webglFramebuffer=d,o.__useDefaultFramebuffer=d===void 0},this.setRenderTarget=function(L,d=0,o=0){P=L,C=d,m=o;let s=!0,n=null,L0=!1,S0=!1;if(L){const v0=o0.get(L);if(v0.__useDefaultFramebuffer!==void 0)x0.bindFramebuffer(u.FRAMEBUFFER,null),s=!1;else if(v0.__webglFramebuffer===void 0)d0.setupRenderTarget(L);else if(v0.__hasExternalTextures)d0.rebindTextures(L,o0.get(L.texture).__webglTexture,o0.get(L.depthTexture).__webglTexture);const i0=L.texture;if(i0.isData3DTexture||i0.isDataArrayTexture||i0.isCompressedArrayTexture)S0=!0;const c0=o0.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget){if(Array.isArray(c0[d]))n=c0[d][o];else n=c0[d];L0=!0}else if(T0.isWebGL2&&L.samples>0&&d0.useMultisampledRTT(L)===!1)n=o0.get(L).__webglMultisampledFramebuffer;else if(Array.isArray(c0))n=c0[o];else n=c0;I.copy(L.viewport),T.copy(L.scissor),p=L.scissorTest}else I.copy(i).multiplyScalar(e).floor(),T.copy(O).multiplyScalar(e).floor(),p=x;if(x0.bindFramebuffer(u.FRAMEBUFFER,n)&&T0.drawBuffers&&s)x0.drawBuffers(L,n);if(x0.viewport(I),x0.scissor(T),x0.setScissorTest(p),L0){const v0=o0.get(L.texture);u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_CUBE_MAP_POSITIVE_X+d,v0.__webglTexture,o)}else if(S0){const v0=o0.get(L.texture),i0=d||0;u.framebufferTextureLayer(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,v0.__webglTexture,o||0,i0)}b=-1},this.readRenderTargetPixels=function(L,d,o,s,n,L0,S0){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let h0=o0.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&S0!==void 0)h0=h0[S0];if(h0){x0.bindFramebuffer(u.FRAMEBUFFER,h0);try{const v0=L.texture,i0=v0.format,c0=v0.type;if(i0!==1023&&F0.convert(i0)!==u.getParameter(u.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const u0=c0===1016&&(t0.has("EXT_color_buffer_half_float")||T0.isWebGL2&&t0.has("EXT_color_buffer_float"));if(c0!==1009&&F0.convert(c0)!==u.getParameter(u.IMPLEMENTATION_COLOR_READ_TYPE)&&!(c0===1015&&(T0.isWebGL2||t0.has("OES_texture_float")||t0.has("WEBGL_color_buffer_float")))&&!u0){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(d>=0&&d<=L.width-s&&(o>=0&&o<=L.height-n))u.readPixels(d,o,s,n,F0.convert(i0),F0.convert(c0),L0)}finally{const v0=P!==null?o0.get(P).__webglFramebuffer:null;x0.bindFramebuffer(u.FRAMEBUFFER,v0)}}},this.copyFramebufferToTexture=function(L,d,o=0){const s=Math.pow(2,-o),n=Math.floor(d.image.width*s),L0=Math.floor(d.image.height*s);d0.setTexture2D(d,0),u.copyTexSubImage2D(u.TEXTURE_2D,o,0,0,L.x,L.y,n,L0),x0.unbindTexture()},this.copyTextureToTexture=function(L,d,o,s=0){const n=d.image.width,L0=d.image.height,S0=F0.convert(o.format),h0=F0.convert(o.type);if(d0.setTexture2D(o,0),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,o.flipY),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),u.pixelStorei(u.UNPACK_ALIGNMENT,o.unpackAlignment),d.isDataTexture)u.texSubImage2D(u.TEXTURE_2D,s,L.x,L.y,n,L0,S0,h0,d.image.data);else if(d.isCompressedTexture)u.compressedTexSubImage2D(u.TEXTURE_2D,s,L.x,L.y,d.mipmaps[0].width,d.mipmaps[0].height,S0,d.mipmaps[0].data);else u.texSubImage2D(u.TEXTURE_2D,s,L.x,L.y,S0,h0,d.image);if(s===0&&o.generateMipmaps)u.generateMipmap(u.TEXTURE_2D);x0.unbindTexture()},this.copyTextureToTexture3D=function(L,d,o,s,n=0){if(k.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const L0=L.max.x-L.min.x+1,S0=L.max.y-L.min.y+1,h0=L.max.z-L.min.z+1,v0=F0.convert(s.format),i0=F0.convert(s.type);let c0;if(s.isData3DTexture)d0.setTexture3D(s,0),c0=u.TEXTURE_3D;else if(s.isDataArrayTexture||s.isCompressedArrayTexture)d0.setTexture2DArray(s,0),c0=u.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,s.flipY),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),u.pixelStorei(u.UNPACK_ALIGNMENT,s.unpackAlignment);const u0=u.getParameter(u.UNPACK_ROW_LENGTH),BJ=u.getParameter(u.UNPACK_IMAGE_HEIGHT),nJ=u.getParameter(u.UNPACK_SKIP_PIXELS),fJ=u.getParameter(u.UNPACK_SKIP_ROWS),P6=u.getParameter(u.UNPACK_SKIP_IMAGES),zJ=o.isCompressedTexture?o.mipmaps[n]:o.image;if(u.pixelStorei(u.UNPACK_ROW_LENGTH,zJ.width),u.pixelStorei(u.UNPACK_IMAGE_HEIGHT,zJ.height),u.pixelStorei(u.UNPACK_SKIP_PIXELS,L.min.x),u.pixelStorei(u.UNPACK_SKIP_ROWS,L.min.y),u.pixelStorei(u.UNPACK_SKIP_IMAGES,L.min.z),o.isDataTexture||o.isData3DTexture)u.texSubImage3D(c0,n,d.x,d.y,d.z,L0,S0,h0,v0,i0,zJ.data);else if(o.isCompressedArrayTexture)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),u.compressedTexSubImage3D(c0,n,d.x,d.y,d.z,L0,S0,h0,v0,zJ.data);else u.texSubImage3D(c0,n,d.x,d.y,d.z,L0,S0,h0,v0,i0,zJ);if(u.pixelStorei(u.UNPACK_ROW_LENGTH,u0),u.pixelStorei(u.UNPACK_IMAGE_HEIGHT,BJ),u.pixelStorei(u.UNPACK_SKIP_PIXELS,nJ),u.pixelStorei(u.UNPACK_SKIP_ROWS,fJ),u.pixelStorei(u.UNPACK_SKIP_IMAGES,P6),n===0&&s.generateMipmaps)u.generateMipmap(c0);x0.unbindTexture()},this.initTexture=function(L){if(L.isCubeTexture)d0.setTextureCube(L,0);else if(L.isData3DTexture)d0.setTexture3D(L,0);else if(L.isDataArrayTexture||L.isCompressedArrayTexture)d0.setTexture2DArray(L,0);else d0.setTexture2D(L,0);x0.unbindTexture()},this.resetState=function(){C=0,m=0,P=null,x0.reset(),B0.reset()},typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2000}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(J){this._outputColorSpace=J;const $=this.getContext();$.drawingBufferColorSpace=J==="display-p3"?"display-p3":"srgb",$.unpackColorSpace=XJ.workingColorSpace==="display-p3-linear"?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace==="srgb"?3001:3000}set outputEncoding(J){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=J===3001?"srgb":"srgb-linear"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(J){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=J}}class VH extends g5{}VH.prototype.isWebGL1Renderer=!0;class w$ extends bJ{constructor(){super();if(this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(J,$){if(super.copy(J,$),J.background!==null)this.background=J.background.clone();if(J.environment!==null)this.environment=J.environment.clone();if(J.fog!==null)this.fog=J.fog.clone();if(this.backgroundBlurriness=J.backgroundBlurriness,this.backgroundIntensity=J.backgroundIntensity,J.overrideMaterial!==null)this.overrideMaterial=J.overrideMaterial.clone();return this.matrixAutoUpdate=J.matrixAutoUpdate,this}toJSON(J){const $=super.toJSON(J);if(this.fog!==null)$.object.fog=this.fog.toJSON();if(this.backgroundBlurriness>0)$.object.backgroundBlurriness=this.backgroundBlurriness;if(this.backgroundIntensity!==1)$.object.backgroundIntensity=this.backgroundIntensity;return $}}class DH{constructor(J,$){this.isInterleavedBuffer=!0,this.array=J,this.stride=$,this.count=J!==void 0?J.length/$:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=g6()}onUploadCallback(){}set needsUpdate(J){if(J===!0)this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(J){return this.usage=J,this}addUpdateRange(J,$){this.updateRanges.push({start:J,count:$})}clearUpdateRanges(){this.updateRanges.length=0}copy(J){return this.array=new J.array.constructor(J.array),this.count=J.count,this.stride=J.stride,this.usage=J.usage,this}copyAt(J,$,Q){J*=this.stride,Q*=$.stride;for(let Z=0,H=this.stride;Z<H;Z++)this.array[J+Z]=$.array[Q+Z];return this}set(J,$=0){return this.array.set(J,$),this}clone(J){if(J.arrayBuffers===void 0)J.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=g6();if(J.arrayBuffers[this.array.buffer._uuid]===void 0)J.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer;const $=new this.array.constructor(J.arrayBuffers[this.array.buffer._uuid]),Q=new this.constructor($,this.stride);return Q.setUsage(this.usage),Q}onUpload(J){return this.onUploadCallback=J,this}toJSON(J){if(J.arrayBuffers===void 0)J.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=g6();if(J.arrayBuffers[this.array.buffer._uuid]===void 0)J.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer));return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}var dJ=new v;class S5{constructor(J,$,Q,Z=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=J,this.itemSize=$,this.offset=Q,this.normalized=Z}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(J){this.data.needsUpdate=J}applyMatrix4(J){for(let $=0,Q=this.data.count;$<Q;$++)dJ.fromBufferAttribute(this,$),dJ.applyMatrix4(J),this.setXYZ($,dJ.x,dJ.y,dJ.z);return this}applyNormalMatrix(J){for(let $=0,Q=this.count;$<Q;$++)dJ.fromBufferAttribute(this,$),dJ.applyNormalMatrix(J),this.setXYZ($,dJ.x,dJ.y,dJ.z);return this}transformDirection(J){for(let $=0,Q=this.count;$<Q;$++)dJ.fromBufferAttribute(this,$),dJ.transformDirection(J),this.setXYZ($,dJ.x,dJ.y,dJ.z);return this}setX(J,$){if(this.normalized)$=UJ($,this.array);return this.data.array[J*this.data.stride+this.offset]=$,this}setY(J,$){if(this.normalized)$=UJ($,this.array);return this.data.array[J*this.data.stride+this.offset+1]=$,this}setZ(J,$){if(this.normalized)$=UJ($,this.array);return this.data.array[J*this.data.stride+this.offset+2]=$,this}setW(J,$){if(this.normalized)$=UJ($,this.array);return this.data.array[J*this.data.stride+this.offset+3]=$,this}getX(J){let $=this.data.array[J*this.data.stride+this.offset];if(this.normalized)$=M6($,this.array);return $}getY(J){let $=this.data.array[J*this.data.stride+this.offset+1];if(this.normalized)$=M6($,this.array);return $}getZ(J){let $=this.data.array[J*this.data.stride+this.offset+2];if(this.normalized)$=M6($,this.array);return $}getW(J){let $=this.data.array[J*this.data.stride+this.offset+3];if(this.normalized)$=M6($,this.array);return $}setXY(J,$,Q){if(J=J*this.data.stride+this.offset,this.normalized)$=UJ($,this.array),Q=UJ(Q,this.array);return this.data.array[J+0]=$,this.data.array[J+1]=Q,this}setXYZ(J,$,Q,Z){if(J=J*this.data.stride+this.offset,this.normalized)$=UJ($,this.array),Q=UJ(Q,this.array),Z=UJ(Z,this.array);return this.data.array[J+0]=$,this.data.array[J+1]=Q,this.data.array[J+2]=Z,this}setXYZW(J,$,Q,Z,H){if(J=J*this.data.stride+this.offset,this.normalized)$=UJ($,this.array),Q=UJ(Q,this.array),Z=UJ(Z,this.array),H=UJ(H,this.array);return this.data.array[J+0]=$,this.data.array[J+1]=Q,this.data.array[J+2]=Z,this.data.array[J+3]=H,this}clone(J){if(J===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const $=[];for(let Q=0;Q<this.count;Q++){const Z=Q*this.data.stride+this.offset;for(let H=0;H<this.itemSize;H++)$.push(this.data.array[Z+H])}return new H6(new this.array.constructor($),this.itemSize,this.normalized)}else{if(J.interleavedBuffers===void 0)J.interleavedBuffers={};if(J.interleavedBuffers[this.data.uuid]===void 0)J.interleavedBuffers[this.data.uuid]=this.data.clone(J);return new S5(J.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}}toJSON(J){if(J===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const $=[];for(let Q=0;Q<this.count;Q++){const Z=Q*this.data.stride+this.offset;for(let H=0;H<this.itemSize;H++)$.push(this.data.array[Z+H])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:$,normalized:this.normalized}}else{if(J.interleavedBuffers===void 0)J.interleavedBuffers={};if(J.interleavedBuffers[this.data.uuid]===void 0)J.interleavedBuffers[this.data.uuid]=this.data.toJSON(J);return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}}class v5 extends F8{constructor(J){super();this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new a0(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(J)}copy(J){return super.copy(J),this.color.copy(J.color),this.map=J.map,this.alphaMap=J.alphaMap,this.rotation=J.rotation,this.sizeAttenuation=J.sizeAttenuation,this.fog=J.fog,this}}var b8,z7=new v,h8=new v,g8=new v,v8=new k0,N7=new k0,zH=new IJ,I5=new v,_7=new v,L5=new v,y4=new k0,q$=new k0,x4=new k0;class S$ extends bJ{constructor(J=new v5){super();if(this.isSprite=!0,this.type="Sprite",b8===void 0){b8=new k6;const $=new Float32Array([-0.5,-0.5,0,0,0,0.5,-0.5,0,1,0,0.5,0.5,0,1,1,-0.5,0.5,0,0,1]),Q=new DH($,5);b8.setIndex([0,1,2,0,2,3]),b8.setAttribute("position",new S5(Q,3,0,!1)),b8.setAttribute("uv",new S5(Q,2,3,!1))}this.geometry=b8,this.material=J,this.center=new k0(0.5,0.5)}raycast(J,$){if(J.camera===null)console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');if(h8.setFromMatrixScale(this.matrixWorld),zH.copy(J.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(J.camera.matrixWorldInverse,this.matrixWorld),g8.setFromMatrixPosition(this.modelViewMatrix),J.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1)h8.multiplyScalar(-g8.z);const Q=this.material.rotation;let Z,H;if(Q!==0)H=Math.cos(Q),Z=Math.sin(Q);const Y=this.center;k5(I5.set(-0.5,-0.5,0),g8,Y,h8,Z,H),k5(_7.set(0.5,-0.5,0),g8,Y,h8,Z,H),k5(L5.set(0.5,0.5,0),g8,Y,h8,Z,H),y4.set(0,0),q$.set(1,0),x4.set(1,1);let K=J.ray.intersectTriangle(I5,_7,L5,!1,z7);if(K===null){if(k5(_7.set(-0.5,0.5,0),g8,Y,h8,Z,H),q$.set(0,1),K=J.ray.intersectTriangle(I5,L5,_7,!1,z7),K===null)return}const G=J.ray.origin.distanceTo(z7);if(G<J.near||G>J.far)return;$.push({distance:G,point:z7.clone(),uv:Z6.getInterpolation(z7,I5,_7,L5,y4,q$,x4,new k0),face:null,object:this})}copy(J,$){if(super.copy(J,$),J.center!==void 0)this.center.copy(J.center);return this.material=J.material,this}}class W8 extends xJ{constructor(J,$,Q,Z,H,Y,K,G,U){super(J,$,Q,Z,H,Y,K,G,U);this.isCanvasTexture=!0,this.needsUpdate=!0}}class V8 extends F8{constructor(J){super();this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new a0(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a0(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new k0(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(J)}copy(J){return super.copy(J),this.defines={STANDARD:""},this.color.copy(J.color),this.roughness=J.roughness,this.metalness=J.metalness,this.map=J.map,this.lightMap=J.lightMap,this.lightMapIntensity=J.lightMapIntensity,this.aoMap=J.aoMap,this.aoMapIntensity=J.aoMapIntensity,this.emissive.copy(J.emissive),this.emissiveMap=J.emissiveMap,this.emissiveIntensity=J.emissiveIntensity,this.bumpMap=J.bumpMap,this.bumpScale=J.bumpScale,this.normalMap=J.normalMap,this.normalMapType=J.normalMapType,this.normalScale.copy(J.normalScale),this.displacementMap=J.displacementMap,this.displacementScale=J.displacementScale,this.displacementBias=J.displacementBias,this.roughnessMap=J.roughnessMap,this.metalnessMap=J.metalnessMap,this.alphaMap=J.alphaMap,this.envMap=J.envMap,this.envMapIntensity=J.envMapIntensity,this.wireframe=J.wireframe,this.wireframeLinewidth=J.wireframeLinewidth,this.wireframeLinecap=J.wireframeLinecap,this.wireframeLinejoin=J.wireframeLinejoin,this.flatShading=J.flatShading,this.fog=J.fog,this}}class k7{constructor(J,$,Q,Z){this.parameterPositions=J,this._cachedIndex=0,this.resultBuffer=Z!==void 0?Z:new $.constructor(Q),this.sampleValues=$,this.valueSize=Q,this.settings=null,this.DefaultSettings_={}}evaluate(J){const $=this.parameterPositions;let Q=this._cachedIndex,Z=$[Q],H=$[Q-1];Q:{J:{let Y;$:{Z:if(!(J<Z)){for(let K=Q+2;;){if(Z===void 0){if(J<H)break Z;return Q=$.length,this._cachedIndex=Q,this.copySampleValue_(Q-1)}if(Q===K)break;if(H=Z,Z=$[++Q],J<Z)break J}Y=$.length;break $}if(!(J>=H)){const K=$[1];if(J<K)Q=2,H=K;for(let G=Q-2;;){if(H===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Q===G)break;if(Z=H,H=$[--Q-1],J>=H)break J}Y=Q,Q=0;break $}break Q}while(Q<Y){const K=Q+Y>>>1;if(J<$[K])Y=K;else Q=K+1}if(Z=$[Q],H=$[Q-1],H===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Z===void 0)return Q=$.length,this._cachedIndex=Q,this.copySampleValue_(Q-1)}this._cachedIndex=Q,this.intervalChanged_(Q,H,Z)}return this.interpolate_(Q,H,J,Z)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(J){const $=this.resultBuffer,Q=this.sampleValues,Z=this.valueSize,H=J*Z;for(let Y=0;Y!==Z;++Y)$[Y]=Q[H+Y];return $}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class NH extends k7{constructor(J,$,Q,Z){super(J,$,Q,Z);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(J,$,Q){const Z=this.parameterPositions;let H=J-2,Y=J+1,K=Z[H],G=Z[Y];if(K===void 0)switch(this.getSettings_().endingStart){case 2401:H=J,K=2*$-Q;break;case 2402:H=Z.length-2,K=$+Z[H]-Z[H+1];break;default:H=J,K=Q}if(G===void 0)switch(this.getSettings_().endingEnd){case 2401:Y=J,G=2*Q-$;break;case 2402:Y=1,G=Q+Z[1]-Z[0];break;default:Y=J-1,G=$}const U=(Q-$)*0.5,q=this.valueSize;this._weightPrev=U/($-K),this._weightNext=U/(G-Q),this._offsetPrev=H*q,this._offsetNext=Y*q}interpolate_(J,$,Q,Z){const H=this.resultBuffer,Y=this.sampleValues,K=this.valueSize,G=J*K,U=G-K,q=this._offsetPrev,W=this._offsetNext,V=this._weightPrev,D=this._weightNext,_=(Q-$)/(Z-$),R=_*_,E=R*_,z=-V*E+2*V*R-V*_,N=(1+V)*E+(-1.5-2*V)*R+(-0.5+V)*_+1,k=(-1-D)*E+(1.5+D)*R+0.5*_,M=D*E-D*R;for(let C=0;C!==K;++C)H[C]=z*Y[q+C]+N*Y[U+C]+k*Y[G+C]+M*Y[W+C];return H}}class _H extends k7{constructor(J,$,Q,Z){super(J,$,Q,Z)}interpolate_(J,$,Q,Z){const H=this.resultBuffer,Y=this.sampleValues,K=this.valueSize,G=J*K,U=G-K,q=(Q-$)/(Z-$),W=1-q;for(let V=0;V!==K;++V)H[V]=Y[U+V]*W+Y[G+V]*q;return H}}class RH extends k7{constructor(J,$,Q,Z){super(J,$,Q,Z)}interpolate_(J){return this.copySampleValue_(J-1)}}class A6{constructor(J,$,Q,Z){if(J===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if($===void 0||$.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+J);this.name=J,this.times=A5($,this.TimeBufferType),this.values=A5(Q,this.ValueBufferType),this.setInterpolation(Z||this.DefaultInterpolation)}static toJSON(J){const $=J.constructor;let Q;if($.toJSON!==this.toJSON)Q=$.toJSON(J);else{Q={name:J.name,times:A5(J.times,Array),values:A5(J.values,Array)};const Z=J.getInterpolation();if(Z!==J.DefaultInterpolation)Q.interpolation=Z}return Q.type=J.ValueTypeName,Q}InterpolantFactoryMethodDiscrete(J){return new RH(this.times,this.values,this.getValueSize(),J)}InterpolantFactoryMethodLinear(J){return new _H(this.times,this.values,this.getValueSize(),J)}InterpolantFactoryMethodSmooth(J){return new NH(this.times,this.values,this.getValueSize(),J)}setInterpolation(J){let $;switch(J){case 2300:$=this.InterpolantFactoryMethodDiscrete;break;case 2301:$=this.InterpolantFactoryMethodLinear;break;case 2302:$=this.InterpolantFactoryMethodSmooth;break}if($===void 0){const Q="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(J!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Q);return console.warn("THREE.KeyframeTrack:",Q),this}return this.createInterpolant=$,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(J){if(J!==0){const $=this.times;for(let Q=0,Z=$.length;Q!==Z;++Q)$[Q]+=J}return this}scale(J){if(J!==1){const $=this.times;for(let Q=0,Z=$.length;Q!==Z;++Q)$[Q]*=J}return this}trim(J,$){const Q=this.times,Z=Q.length;let H=0,Y=Z-1;while(H!==Z&&Q[H]<J)++H;while(Y!==-1&&Q[Y]>$)--Y;if(++Y,H!==0||Y!==Z){if(H>=Y)Y=Math.max(Y,1),H=Y-1;const K=this.getValueSize();this.times=Q.slice(H,Y),this.values=this.values.slice(H*K,Y*K)}return this}validate(){let J=!0;const $=this.getValueSize();if($-Math.floor($)!==0)console.error("THREE.KeyframeTrack: Invalid value size in track.",this),J=!1;const Q=this.times,Z=this.values,H=Q.length;if(H===0)console.error("THREE.KeyframeTrack: Track is empty.",this),J=!1;let Y=null;for(let K=0;K!==H;K++){const G=Q[K];if(typeof G==="number"&&isNaN(G)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,K,G),J=!1;break}if(Y!==null&&Y>G){console.error("THREE.KeyframeTrack: Out of order keys.",this,K,G,Y),J=!1;break}Y=G}if(Z!==void 0){if(MW(Z))for(let K=0,G=Z.length;K!==G;++K){const U=Z[K];if(isNaN(U)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,K,U),J=!1;break}}}return J}optimize(){const J=this.times.slice(),$=this.values.slice(),Q=this.getValueSize(),Z=this.getInterpolation()===2302,H=J.length-1;let Y=1;for(let K=1;K<H;++K){let G=!1;const U=J[K],q=J[K+1];if(U!==q&&(K!==1||U!==J[0]))if(!Z){const W=K*Q,V=W-Q,D=W+Q;for(let _=0;_!==Q;++_){const R=$[W+_];if(R!==$[V+_]||R!==$[D+_]){G=!0;break}}}else G=!0;if(G){if(K!==Y){J[Y]=J[K];const W=K*Q,V=Y*Q;for(let D=0;D!==Q;++D)$[V+D]=$[W+D]}++Y}}if(H>0){J[Y]=J[H];for(let K=H*Q,G=Y*Q,U=0;U!==Q;++U)$[G+U]=$[K+U];++Y}if(Y!==J.length)this.times=J.slice(0,Y),this.values=$.slice(0,Y*Q);else this.times=J,this.values=$;return this}clone(){const J=this.times.slice(),$=this.values.slice(),Z=new this.constructor(this.name,J,$);return Z.createInterpolant=this.createInterpolant,Z}}A6.prototype.TimeBufferType=Float32Array;A6.prototype.ValueBufferType=Float32Array;A6.prototype.DefaultInterpolation=2301;class n8 extends A6{}n8.prototype.ValueTypeName="bool";n8.prototype.ValueBufferType=Array;n8.prototype.DefaultInterpolation=2300;n8.prototype.InterpolantFactoryMethodLinear=void 0;n8.prototype.InterpolantFactoryMethodSmooth=void 0;class EH extends A6{}EH.prototype.ValueTypeName="color";class OH extends A6{}OH.prototype.ValueTypeName="number";class BH extends k7{constructor(J,$,Q,Z){super(J,$,Q,Z)}interpolate_(J,$,Q,Z){const H=this.resultBuffer,Y=this.sampleValues,K=this.valueSize,G=(Q-$)/(Z-$);let U=J*K;for(let q=U+K;U!==q;U+=4)L6.slerpFlat(H,0,Y,U-K,Y,U,G);return H}}class m5 extends A6{InterpolantFactoryMethodLinear(J){return new BH(this.times,this.values,this.getValueSize(),J)}}m5.prototype.ValueTypeName="quaternion";m5.prototype.DefaultInterpolation=2301;m5.prototype.InterpolantFactoryMethodSmooth=void 0;class o8 extends A6{}o8.prototype.ValueTypeName="string";o8.prototype.ValueBufferType=Array;o8.prototype.DefaultInterpolation=2300;o8.prototype.InterpolantFactoryMethodLinear=void 0;o8.prototype.InterpolantFactoryMethodSmooth=void 0;class MH extends A6{}MH.prototype.ValueTypeName="vector";class IH{constructor(J,$,Q){const Z=this;let H=!1,Y=0,K=0,G=void 0;const U=[];this.onStart=void 0,this.onLoad=J,this.onProgress=$,this.onError=Q,this.itemStart=function(q){if(K++,H===!1){if(Z.onStart!==void 0)Z.onStart(q,Y,K)}H=!0},this.itemEnd=function(q){if(Y++,Z.onProgress!==void 0)Z.onProgress(q,Y,K);if(Y===K){if(H=!1,Z.onLoad!==void 0)Z.onLoad()}},this.itemError=function(q){if(Z.onError!==void 0)Z.onError(q)},this.resolveURL=function(q){if(G)return G(q);return q},this.setURLModifier=function(q){return G=q,this},this.addHandler=function(q,W){return U.push(q,W),this},this.removeHandler=function(q){const W=U.indexOf(q);if(W!==-1)U.splice(W,2);return this},this.getHandler=function(q){for(let W=0,V=U.length;W<V;W+=2){const D=U[W],_=U[W+1];if(D.global)D.lastIndex=0;if(D.test(q))return _}return null}}}var IW=new IH;class LH{constructor(J){this.manager=J!==void 0?J:IW,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(J,$){const Q=this;return new Promise(function(Z,H){Q.load(J,Z,$,H)})}parse(){}setCrossOrigin(J){return this.crossOrigin=J,this}setWithCredentials(J){return this.withCredentials=J,this}setPath(J){return this.path=J,this}setResourcePath(J){return this.resourcePath=J,this}setRequestHeader(J){return this.requestHeader=J,this}}LH.DEFAULT_MATERIAL_NAME="__DEFAULT";class C$ extends bJ{constructor(J,$=1){super();this.isLight=!0,this.type="Light",this.color=new a0(J),this.intensity=$}dispose(){}copy(J,$){return super.copy(J,$),this.color.copy(J.color),this.intensity=J.intensity,this}toJSON(J){const $=super.toJSON(J);if($.object.color=this.color.getHex(),$.object.intensity=this.intensity,this.groundColor!==void 0)$.object.groundColor=this.groundColor.getHex();if(this.distance!==void 0)$.object.distance=this.distance;if(this.angle!==void 0)$.object.angle=this.angle;if(this.decay!==void 0)$.object.decay=this.decay;if(this.penumbra!==void 0)$.object.penumbra=this.penumbra;if(this.shadow!==void 0)$.object.shadow=this.shadow.toJSON();return $}}var X$=new IJ,b4=new v,h4=new v;class kH{constructor(J){this.camera=J,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new k0(512,512),this.map=null,this.mapPass=null,this.matrix=new IJ,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new x5,this._frameExtents=new k0(1,1),this._viewportCount=1,this._viewports=[new DJ(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(J){const $=this.camera,Q=this.matrix;b4.setFromMatrixPosition(J.matrixWorld),$.position.copy(b4),h4.setFromMatrixPosition(J.target.matrixWorld),$.lookAt(h4),$.updateMatrixWorld(),X$.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),this._frustum.setFromProjectionMatrix(X$),Q.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),Q.multiply(X$)}getViewport(J){return this._viewports[J]}getFrameExtents(){return this._frameExtents}dispose(){if(this.map)this.map.dispose();if(this.mapPass)this.mapPass.dispose()}copy(J){return this.camera=J.camera.clone(),this.bias=J.bias,this.radius=J.radius,this.mapSize.copy(J.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const J={};if(this.bias!==0)J.bias=this.bias;if(this.normalBias!==0)J.normalBias=this.normalBias;if(this.radius!==1)J.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)J.mapSize=this.mapSize.toArray();return J.camera=this.camera.toJSON(!1).object,delete J.camera.matrix,J}}var g4=new IJ,R7=new v,F$=new v;class AH extends kH{constructor(){super(new uJ(90,1,0.5,500));this.isPointLightShadow=!0,this._frameExtents=new k0(4,2),this._viewportCount=6,this._viewports=[new DJ(2,1,1,1),new DJ(0,1,1,1),new DJ(3,1,1,1),new DJ(1,1,1,1),new DJ(3,0,1,1),new DJ(1,0,1,1)],this._cubeDirections=[new v(1,0,0),new v(-1,0,0),new v(0,0,1),new v(0,0,-1),new v(0,1,0),new v(0,-1,0)],this._cubeUps=[new v(0,1,0),new v(0,1,0),new v(0,1,0),new v(0,1,0),new v(0,0,1),new v(0,0,-1)]}updateMatrices(J,$=0){const Q=this.camera,Z=this.matrix,H=J.distance||Q.far;if(H!==Q.far)Q.far=H,Q.updateProjectionMatrix();R7.setFromMatrixPosition(J.matrixWorld),Q.position.copy(R7),F$.copy(Q.position),F$.add(this._cubeDirections[$]),Q.up.copy(this._cubeUps[$]),Q.lookAt(F$),Q.updateMatrixWorld(),Z.makeTranslation(-R7.x,-R7.y,-R7.z),g4.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),this._frustum.setFromProjectionMatrix(g4)}}class f$ extends C${constructor(J,$,Q=0,Z=2){super(J,$);this.isPointLight=!0,this.type="PointLight",this.distance=Q,this.decay=Z,this.shadow=new AH}get power(){return this.intensity*4*Math.PI}set power(J){this.intensity=J/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(J,$){return super.copy(J,$),this.distance=J.distance,this.decay=J.decay,this.shadow=J.shadow.clone(),this}}class j$ extends C${constructor(J,$){super(J,$);this.isAmbientLight=!0,this.type="AmbientLight"}}class A7{constructor(J=!0){this.autoStart=J,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=v4(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let J=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const $=v4();J=($-this.oldTime)/1000,this.oldTime=$,this.elapsedTime+=J}return J}}var y$="\\[\\]\\.:\\/",LW=new RegExp("["+y$+"]","g"),x$="[^"+y$+"]",kW="[^"+y$.replace("\\.","")+"]",AW=/((?:WC+[\/:])*)/.source.replace("WC",x$),PW=/(WCOD+)?/.source.replace("WCOD",kW),TW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",x$),wW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",x$),SW=new RegExp("^"+AW+PW+TW+wW+"$"),CW=["material","materials","bones","map"];class PH{constructor(J,$,Q){const Z=Q||qJ.parseTrackName($);this._targetGroup=J,this._bindings=J.subscribe_($,Z)}getValue(J,$){this.bind();const Q=this._targetGroup.nCachedObjects_,Z=this._bindings[Q];if(Z!==void 0)Z.getValue(J,$)}setValue(J,$){const Q=this._bindings;for(let Z=this._targetGroup.nCachedObjects_,H=Q.length;Z!==H;++Z)Q[Z].setValue(J,$)}bind(){const J=this._bindings;for(let $=this._targetGroup.nCachedObjects_,Q=J.length;$!==Q;++$)J[$].bind()}unbind(){const J=this._bindings;for(let $=this._targetGroup.nCachedObjects_,Q=J.length;$!==Q;++$)J[$].unbind()}}class qJ{constructor(J,$,Q){this.path=$,this.parsedPath=Q||qJ.parseTrackName($),this.node=qJ.findNode(J,this.parsedPath.nodeName),this.rootNode=J,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(J,$,Q){if(!(J&&J.isAnimationObjectGroup))return new qJ(J,$,Q);else return new qJ.Composite(J,$,Q)}static sanitizeNodeName(J){return J.replace(/\s/g,"_").replace(LW,"")}static parseTrackName(J){const $=SW.exec(J);if($===null)throw new Error("PropertyBinding: Cannot parse trackName: "+J);const Q={nodeName:$[2],objectName:$[3],objectIndex:$[4],propertyName:$[5],propertyIndex:$[6]},Z=Q.nodeName&&Q.nodeName.lastIndexOf(".");if(Z!==void 0&&Z!==-1){const H=Q.nodeName.substring(Z+1);if(CW.indexOf(H)!==-1)Q.nodeName=Q.nodeName.substring(0,Z),Q.objectName=H}if(Q.propertyName===null||Q.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+J);return Q}static findNode(J,$){if($===void 0||$===""||$==="."||$===-1||$===J.name||$===J.uuid)return J;if(J.skeleton){const Q=J.skeleton.getBoneByName($);if(Q!==void 0)return Q}if(J.children){const Q=function(H){for(let Y=0;Y<H.length;Y++){const K=H[Y];if(K.name===$||K.uuid===$)return K;const G=Q(K.children);if(G)return G}return null},Z=Q(J.children);if(Z)return Z}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(J,$){J[$]=this.targetObject[this.propertyName]}_getValue_array(J,$){const Q=this.resolvedProperty;for(let Z=0,H=Q.length;Z!==H;++Z)J[$++]=Q[Z]}_getValue_arrayElement(J,$){J[$]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(J,$){this.resolvedProperty.toArray(J,$)}_setValue_direct(J,$){this.targetObject[this.propertyName]=J[$]}_setValue_direct_setNeedsUpdate(J,$){this.targetObject[this.propertyName]=J[$],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(J,$){this.targetObject[this.propertyName]=J[$],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(J,$){const Q=this.resolvedProperty;for(let Z=0,H=Q.length;Z!==H;++Z)Q[Z]=J[$++]}_setValue_array_setNeedsUpdate(J,$){const Q=this.resolvedProperty;for(let Z=0,H=Q.length;Z!==H;++Z)Q[Z]=J[$++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(J,$){const Q=this.resolvedProperty;for(let Z=0,H=Q.length;Z!==H;++Z)Q[Z]=J[$++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(J,$){this.resolvedProperty[this.propertyIndex]=J[$]}_setValue_arrayElement_setNeedsUpdate(J,$){this.resolvedProperty[this.propertyIndex]=J[$],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(J,$){this.resolvedProperty[this.propertyIndex]=J[$],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(J,$){this.resolvedProperty.fromArray(J,$)}_setValue_fromArray_setNeedsUpdate(J,$){this.resolvedProperty.fromArray(J,$),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(J,$){this.resolvedProperty.fromArray(J,$),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(J,$){this.bind(),this.getValue(J,$)}_setValue_unbound(J,$){this.bind(),this.setValue(J,$)}bind(){let J=this.node;const $=this.parsedPath,Q=$.objectName,Z=$.propertyName;let H=$.propertyIndex;if(!J)J=qJ.findNode(this.rootNode,$.nodeName),this.node=J;if(this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!J){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(Q){let U=$.objectIndex;switch(Q){case"materials":if(!J.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!J.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}J=J.material.materials;break;case"bones":if(!J.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}J=J.skeleton.bones;for(let q=0;q<J.length;q++)if(J[q].name===U){U=q;break}break;case"map":if("map"in J){J=J.map;break}if(!J.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!J.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}J=J.material.map;break;default:if(J[Q]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}J=J[Q]}if(U!==void 0){if(J[U]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,J);return}J=J[U]}}const Y=J[Z];if(Y===void 0){const U=$.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+U+"."+Z+" but it wasn\'t found.",J);return}let K=this.Versioning.None;if(this.targetObject=J,J.needsUpdate!==void 0)K=this.Versioning.NeedsUpdate;else if(J.matrixWorldNeedsUpdate!==void 0)K=this.Versioning.MatrixWorldNeedsUpdate;let G=this.BindingType.Direct;if(H!==void 0){if(Z==="morphTargetInfluences"){if(!J.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!J.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}if(J.morphTargetDictionary[H]!==void 0)H=J.morphTargetDictionary[H]}G=this.BindingType.ArrayElement,this.resolvedProperty=Y,this.propertyIndex=H}else if(Y.fromArray!==void 0&&Y.toArray!==void 0)G=this.BindingType.HasFromToArray,this.resolvedProperty=Y;else if(Array.isArray(Y))G=this.BindingType.EntireArray,this.resolvedProperty=Y;else this.propertyName=Z;this.getValue=this.GetterByBindingType[G],this.setValue=this.SetterByBindingTypeAndVersioning[G][K]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qJ.Composite=PH;qJ.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qJ.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qJ.prototype.GetterByBindingType=[qJ.prototype._getValue_direct,qJ.prototype._getValue_array,qJ.prototype._getValue_arrayElement,qJ.prototype._getValue_toArray];qJ.prototype.SetterByBindingTypeAndVersioning=[[qJ.prototype._setValue_direct,qJ.prototype._setValue_direct_setNeedsUpdate,qJ.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qJ.prototype._setValue_array,qJ.prototype._setValue_array_setNeedsUpdate,qJ.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qJ.prototype._setValue_arrayElement,qJ.prototype._setValue_arrayElement_setNeedsUpdate,qJ.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qJ.prototype._setValue_fromArray,qJ.prototype._setValue_fromArray_setNeedsUpdate,qJ.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var w2=new Float32Array(1);class p5{constructor(J=1,$=0,Q=0){return this.radius=J,this.phi=$,this.theta=Q,this}set(J,$,Q){return this.radius=J,this.phi=$,this.theta=Q,this}copy(J){return this.radius=J.radius,this.phi=J.phi,this.theta=J.theta,this}makeSafe(){return this.phi=Math.max(0.000001,Math.min(Math.PI-0.000001,this.phi)),this}setFromVector3(J){return this.setFromCartesianCoords(J.x,J.y,J.z)}setFromCartesianCoords(J,$,Q){if(this.radius=Math.sqrt(J*J+$*$+Q*Q),this.radius===0)this.theta=0,this.phi=0;else this.theta=Math.atan2(J,Q),this.phi=Math.acos(mJ($/this.radius,-1,1));return this}clone(){return new this.constructor().copy(this)}}if(typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"160"}}));if(typeof window!=="undefined")if(window.__THREE__)console.warn("WARNING: Multiple instances of Three.js being imported.");else window.__THREE__="160";var TH={type:"change"},b$={type:"start"},wH={type:"end"},d5=new j5,SH=new O6,fW=Math.cos(70*u4.DEG2RAD);class h$ extends v6{constructor(J,$){super();this.object=J,this.domElement=$,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new v,this.cursor=new v,this.minDistance=0,this.maxDistance=Infinity,this.minZoom=0,this.maxZoom=Infinity,this.minTargetRadius=0,this.maxTargetRadius=Infinity,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=(-Infinity),this.maxAzimuthAngle=Infinity,this.enableDamping=!1,this.dampingFactor=0.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:q8.ROTATE,MIDDLE:q8.DOLLY,RIGHT:q8.PAN},this.touches={ONE:X8.ROTATE,TWO:X8.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return K.phi},this.getAzimuthalAngle=function(){return K.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(f){f.addEventListener("keydown",Z0),this._domElementKeyEvents=f},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Z0),this._domElementKeyEvents=null},this.saveState=function(){Q.target0.copy(Q.target),Q.position0.copy(Q.object.position),Q.zoom0=Q.object.zoom},this.reset=function(){Q.target.copy(Q.target0),Q.object.position.copy(Q.position0),Q.object.zoom=Q.zoom0,Q.object.updateProjectionMatrix(),Q.dispatchEvent(TH),Q.update(),H=Z.NONE},this.update=function(){const f=new v,G0=new L6().setFromUnitVectors(J.up,new v(0,1,0)),M0=G0.clone().invert(),F0=new v,B0=new L6,g0=new v,l0=2*Math.PI;return function JJ(YJ=null){const N0=Q.object.position;if(f.copy(N0).sub(Q.target),f.applyQuaternion(G0),K.setFromVector3(f),Q.autoRotate&&H===Z.NONE)T(a(YJ));if(Q.enableDamping)K.theta+=G.theta*Q.dampingFactor,K.phi+=G.phi*Q.dampingFactor;else K.theta+=G.theta,K.phi+=G.phi;let{minAzimuthAngle:j,maxAzimuthAngle:D0}=Q;if(isFinite(j)&&isFinite(D0)){if(j<-Math.PI)j+=l0;else if(j>Math.PI)j-=l0;if(D0<-Math.PI)D0+=l0;else if(D0>Math.PI)D0-=l0;if(j<=D0)K.theta=Math.max(j,Math.min(D0,K.theta));else K.theta=K.theta>(j+D0)/2?Math.max(j,K.theta):Math.min(D0,K.theta)}if(K.phi=Math.max(Q.minPolarAngle,Math.min(Q.maxPolarAngle,K.phi)),K.makeSafe(),Q.enableDamping===!0)Q.target.addScaledVector(q,Q.dampingFactor);else Q.target.add(q);if(Q.target.sub(Q.cursor),Q.target.clampLength(Q.minTargetRadius,Q.maxTargetRadius),Q.target.add(Q.cursor),Q.zoomToCursor&&m||Q.object.isOrthographicCamera)K.radius=t(K.radius);else K.radius=t(K.radius*U);if(f.setFromSpherical(K),f.applyQuaternion(M0),N0.copy(Q.target).add(f),Q.object.lookAt(Q.target),Q.enableDamping===!0)G.theta*=1-Q.dampingFactor,G.phi*=1-Q.dampingFactor,q.multiplyScalar(1-Q.dampingFactor);else G.set(0,0,0),q.set(0,0,0);let E0=!1;if(Q.zoomToCursor&&m){let f0=null;if(Q.object.isPerspectiveCamera){const P0=f.length();f0=t(P0*U);const $J=P0-f0;Q.object.position.addScaledVector(M,$J),Q.object.updateMatrixWorld()}else if(Q.object.isOrthographicCamera){const P0=new v(C.x,C.y,0);P0.unproject(Q.object),Q.object.zoom=Math.max(Q.minZoom,Math.min(Q.maxZoom,Q.object.zoom/U)),Q.object.updateProjectionMatrix(),E0=!0;const $J=new v(C.x,C.y,0);$J.unproject(Q.object),Q.object.position.sub($J).add(P0),Q.object.updateMatrixWorld(),f0=f.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),Q.zoomToCursor=!1;if(f0!==null)if(this.screenSpacePanning)Q.target.set(0,0,-1).transformDirection(Q.object.matrix).multiplyScalar(f0).add(Q.object.position);else if(d5.origin.copy(Q.object.position),d5.direction.set(0,0,-1).transformDirection(Q.object.matrix),Math.abs(Q.object.up.dot(d5.direction))<fW)J.lookAt(Q.target);else SH.setFromNormalAndCoplanarPoint(Q.object.up,Q.target),d5.intersectPlane(SH,Q.target)}else if(Q.object.isOrthographicCamera)Q.object.zoom=Math.max(Q.minZoom,Math.min(Q.maxZoom,Q.object.zoom/U)),Q.object.updateProjectionMatrix(),E0=!0;if(U=1,m=!1,E0||F0.distanceToSquared(Q.object.position)>Y||8*(1-B0.dot(Q.object.quaternion))>Y||g0.distanceToSquared(Q.target)>0)return Q.dispatchEvent(TH),F0.copy(Q.object.position),B0.copy(Q.object.quaternion),g0.copy(Q.target),!0;return!1}}(),this.dispose=function(){if(Q.domElement.removeEventListener("contextmenu",O0),Q.domElement.removeEventListener("pointerdown",o0),Q.domElement.removeEventListener("pointercancel",A),Q.domElement.removeEventListener("wheel",q0),Q.domElement.removeEventListener("pointermove",d0),Q.domElement.removeEventListener("pointerup",A),Q._domElementKeyEvents!==null)Q._domElementKeyEvents.removeEventListener("keydown",Z0),Q._domElementKeyEvents=null};const Q=this,Z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let H=Z.NONE;const Y=0.000001,K=new p5,G=new p5;let U=1;const q=new v,W=new k0,V=new k0,D=new k0,_=new k0,R=new k0,E=new k0,z=new k0,N=new k0,k=new k0,M=new v,C=new k0;let m=!1;const P=[],b={};function a(f){if(f!==null)return 2*Math.PI/60*Q.autoRotateSpeed*f;else return 2*Math.PI/60/60*Q.autoRotateSpeed}function I(f){const G0=Math.abs(f)/(100*(window.devicePixelRatio|0));return Math.pow(0.95,Q.zoomSpeed*G0)}function T(f){G.theta-=f}function p(f){G.phi-=f}const K0=function(){const f=new v;return function G0(M0,F0){f.setFromMatrixColumn(F0,0),f.multiplyScalar(-M0),q.add(f)}}(),z0=function(){const f=new v;return function G0(M0,F0){if(Q.screenSpacePanning===!0)f.setFromMatrixColumn(F0,1);else f.setFromMatrixColumn(F0,0),f.crossVectors(Q.object.up,f);f.multiplyScalar(M0),q.add(f)}}(),y=function(){const f=new v;return function G0(M0,F0){const B0=Q.domElement;if(Q.object.isPerspectiveCamera){const g0=Q.object.position;f.copy(g0).sub(Q.target);let l0=f.length();l0*=Math.tan(Q.object.fov/2*Math.PI/180),K0(2*M0*l0/B0.clientHeight,Q.object.matrix),z0(2*F0*l0/B0.clientHeight,Q.object.matrix)}else if(Q.object.isOrthographicCamera)K0(M0*(Q.object.right-Q.object.left)/Q.object.zoom/B0.clientWidth,Q.object.matrix),z0(F0*(Q.object.top-Q.object.bottom)/Q.object.zoom/B0.clientHeight,Q.object.matrix);else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),Q.enablePan=!1}}();function r(f){if(Q.object.isPerspectiveCamera||Q.object.isOrthographicCamera)U/=f;else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),Q.enableZoom=!1}function e(f){if(Q.object.isPerspectiveCamera||Q.object.isOrthographicCamera)U*=f;else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),Q.enableZoom=!1}function Y0(f,G0){if(!Q.zoomToCursor)return;m=!0;const M0=Q.domElement.getBoundingClientRect(),F0=f-M0.left,B0=G0-M0.top,g0=M0.width,l0=M0.height;C.x=F0/g0*2-1,C.y=-(B0/l0)*2+1,M.set(C.x,C.y,1).unproject(Q.object).sub(Q.object.position).normalize()}function t(f){return Math.max(Q.minDistance,Math.min(Q.maxDistance,f))}function i(f){W.set(f.clientX,f.clientY)}function O(f){Y0(f.clientX,f.clientX),z.set(f.clientX,f.clientY)}function x(f){_.set(f.clientX,f.clientY)}function S(f){V.set(f.clientX,f.clientY),D.subVectors(V,W).multiplyScalar(Q.rotateSpeed);const G0=Q.domElement;T(2*Math.PI*D.x/G0.clientHeight),p(2*Math.PI*D.y/G0.clientHeight),W.copy(V),Q.update()}function g(f){if(N.set(f.clientX,f.clientY),k.subVectors(N,z),k.y>0)r(I(k.y));else if(k.y<0)e(I(k.y));z.copy(N),Q.update()}function $0(f){R.set(f.clientX,f.clientY),E.subVectors(R,_).multiplyScalar(Q.panSpeed),y(E.x,E.y),_.copy(R),Q.update()}function Q0(f){if(Y0(f.clientX,f.clientY),f.deltaY<0)e(I(f.deltaY));else if(f.deltaY>0)r(I(f.deltaY));Q.update()}function V0(f){let G0=!1;switch(f.code){case Q.keys.UP:if(f.ctrlKey||f.metaKey||f.shiftKey)p(2*Math.PI*Q.rotateSpeed/Q.domElement.clientHeight);else y(0,Q.keyPanSpeed);G0=!0;break;case Q.keys.BOTTOM:if(f.ctrlKey||f.metaKey||f.shiftKey)p(-2*Math.PI*Q.rotateSpeed/Q.domElement.clientHeight);else y(0,-Q.keyPanSpeed);G0=!0;break;case Q.keys.LEFT:if(f.ctrlKey||f.metaKey||f.shiftKey)T(2*Math.PI*Q.rotateSpeed/Q.domElement.clientHeight);else y(Q.keyPanSpeed,0);G0=!0;break;case Q.keys.RIGHT:if(f.ctrlKey||f.metaKey||f.shiftKey)T(-2*Math.PI*Q.rotateSpeed/Q.domElement.clientHeight);else y(-Q.keyPanSpeed,0);G0=!0;break}if(G0)f.preventDefault(),Q.update()}function R0(f){if(P.length===1)W.set(f.pageX,f.pageY);else{const G0=H0(f),M0=0.5*(f.pageX+G0.x),F0=0.5*(f.pageY+G0.y);W.set(M0,F0)}}function b0(f){if(P.length===1)_.set(f.pageX,f.pageY);else{const G0=H0(f),M0=0.5*(f.pageX+G0.x),F0=0.5*(f.pageY+G0.y);_.set(M0,F0)}}function y0(f){const G0=H0(f),M0=f.pageX-G0.x,F0=f.pageY-G0.y,B0=Math.sqrt(M0*M0+F0*F0);z.set(0,B0)}function e0(f){if(Q.enableZoom)y0(f);if(Q.enablePan)b0(f)}function u(f){if(Q.enableZoom)y0(f);if(Q.enableRotate)R0(f)}function CJ(f){if(P.length==1)V.set(f.pageX,f.pageY);else{const M0=H0(f),F0=0.5*(f.pageX+M0.x),B0=0.5*(f.pageY+M0.y);V.set(F0,B0)}D.subVectors(V,W).multiplyScalar(Q.rotateSpeed);const G0=Q.domElement;T(2*Math.PI*D.x/G0.clientHeight),p(2*Math.PI*D.y/G0.clientHeight),W.copy(V)}function t0(f){if(P.length===1)R.set(f.pageX,f.pageY);else{const G0=H0(f),M0=0.5*(f.pageX+G0.x),F0=0.5*(f.pageY+G0.y);R.set(M0,F0)}E.subVectors(R,_).multiplyScalar(Q.panSpeed),y(E.x,E.y),_.copy(R)}function T0(f){const G0=H0(f),M0=f.pageX-G0.x,F0=f.pageY-G0.y,B0=Math.sqrt(M0*M0+F0*F0);N.set(0,B0),k.set(0,Math.pow(N.y/z.y,Q.zoomSpeed)),r(k.y),z.copy(N);const g0=(f.pageX+G0.x)*0.5,l0=(f.pageY+G0.y)*0.5;Y0(g0,l0)}function x0(f){if(Q.enableZoom)T0(f);if(Q.enablePan)t0(f)}function p0(f){if(Q.enableZoom)T0(f);if(Q.enableRotate)CJ(f)}function o0(f){if(Q.enabled===!1)return;if(P.length===0)Q.domElement.setPointerCapture(f.pointerId),Q.domElement.addEventListener("pointermove",d0),Q.domElement.addEventListener("pointerup",A);if(A0(f),f.pointerType==="touch")U0(f);else B(f)}function d0(f){if(Q.enabled===!1)return;if(f.pointerType==="touch")j0(f);else l(f)}function A(f){if(w0(f),P.length===0)Q.domElement.releasePointerCapture(f.pointerId),Q.domElement.removeEventListener("pointermove",d0),Q.domElement.removeEventListener("pointerup",A);Q.dispatchEvent(wH),H=Z.NONE}function B(f){let G0;switch(f.button){case 0:G0=Q.mouseButtons.LEFT;break;case 1:G0=Q.mouseButtons.MIDDLE;break;case 2:G0=Q.mouseButtons.RIGHT;break;default:G0=-1}switch(G0){case q8.DOLLY:if(Q.enableZoom===!1)return;O(f),H=Z.DOLLY;break;case q8.ROTATE:if(f.ctrlKey||f.metaKey||f.shiftKey){if(Q.enablePan===!1)return;x(f),H=Z.PAN}else{if(Q.enableRotate===!1)return;i(f),H=Z.ROTATE}break;case q8.PAN:if(f.ctrlKey||f.metaKey||f.shiftKey){if(Q.enableRotate===!1)return;i(f),H=Z.ROTATE}else{if(Q.enablePan===!1)return;x(f),H=Z.PAN}break;default:H=Z.NONE}if(H!==Z.NONE)Q.dispatchEvent(b$)}function l(f){switch(H){case Z.ROTATE:if(Q.enableRotate===!1)return;S(f);break;case Z.DOLLY:if(Q.enableZoom===!1)return;g(f);break;case Z.PAN:if(Q.enablePan===!1)return;$0(f);break}}function q0(f){if(Q.enabled===!1||Q.enableZoom===!1||H!==Z.NONE)return;f.preventDefault(),Q.dispatchEvent(b$),Q0(f),Q.dispatchEvent(wH)}function Z0(f){if(Q.enabled===!1||Q.enablePan===!1)return;V0(f)}function U0(f){switch(m0(f),P.length){case 1:switch(Q.touches.ONE){case X8.ROTATE:if(Q.enableRotate===!1)return;R0(f),H=Z.TOUCH_ROTATE;break;case X8.PAN:if(Q.enablePan===!1)return;b0(f),H=Z.TOUCH_PAN;break;default:H=Z.NONE}break;case 2:switch(Q.touches.TWO){case X8.DOLLY_PAN:if(Q.enableZoom===!1&&Q.enablePan===!1)return;e0(f),H=Z.TOUCH_DOLLY_PAN;break;case X8.DOLLY_ROTATE:if(Q.enableZoom===!1&&Q.enableRotate===!1)return;u(f),H=Z.TOUCH_DOLLY_ROTATE;break;default:H=Z.NONE}break;default:H=Z.NONE}if(H!==Z.NONE)Q.dispatchEvent(b$)}function j0(f){switch(m0(f),H){case Z.TOUCH_ROTATE:if(Q.enableRotate===!1)return;CJ(f),Q.update();break;case Z.TOUCH_PAN:if(Q.enablePan===!1)return;t0(f),Q.update();break;case Z.TOUCH_DOLLY_PAN:if(Q.enableZoom===!1&&Q.enablePan===!1)return;x0(f),Q.update();break;case Z.TOUCH_DOLLY_ROTATE:if(Q.enableZoom===!1&&Q.enableRotate===!1)return;p0(f),Q.update();break;default:H=Z.NONE}}function O0(f){if(Q.enabled===!1)return;f.preventDefault()}function A0(f){P.push(f.pointerId)}function w0(f){delete b[f.pointerId];for(let G0=0;G0<P.length;G0++)if(P[G0]==f.pointerId){P.splice(G0,1);return}}function m0(f){let G0=b[f.pointerId];if(G0===void 0)G0=new k0,b[f.pointerId]=G0;G0.set(f.pageX,f.pageY)}function H0(f){const G0=f.pointerId===P[0]?P[1]:P[0];return b[G0]}Q.domElement.addEventListener("contextmenu",O0),Q.domElement.addEventListener("pointerdown",o0),Q.domElement.addEventListener("pointercancel",A),Q.domElement.addEventListener("wheel",q0,{passive:!1}),this.update()}}var CH={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class s6{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}var jW=new b5(-1,1,1,-1,0,1);class fH extends k6{constructor(){super();this.setAttribute("position",new W6([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new W6([0,2,0,0,2,0],2))}}var yW=new fH;class g${constructor(J){this._mesh=new KJ(yW,J)}dispose(){this._mesh.geometry.dispose()}render(J){J.render(this._mesh,jW)}get material(){return this._mesh.material}set material(J){this._mesh.material=J}}class P7 extends s6{constructor(J,$){super();if(this.textureID=$!==void 0?$:"tDiffuse",J instanceof V6)this.uniforms=J.uniforms,this.material=J;else if(J)this.uniforms=L$.clone(J.uniforms),this.material=new V6({name:J.name!==void 0?J.name:"unspecified",defines:Object.assign({},J.defines),uniforms:this.uniforms,vertexShader:J.vertexShader,fragmentShader:J.fragmentShader});this.fsQuad=new g$(this.material)}render(J,$,Q){if(this.uniforms[this.textureID])this.uniforms[this.textureID].value=Q.texture;if(this.fsQuad.material=this.material,this.renderToScreen)J.setRenderTarget(null),this.fsQuad.render(J);else{if(J.setRenderTarget($),this.clear)J.clear(J.autoClearColor,J.autoClearDepth,J.autoClearStencil);this.fsQuad.render(J)}}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class c5 extends s6{constructor(J,$){super();this.scene=J,this.camera=$,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(J,$,Q){const Z=J.getContext(),H=J.state;H.buffers.color.setMask(!1),H.buffers.depth.setMask(!1),H.buffers.color.setLocked(!0),H.buffers.depth.setLocked(!0);let Y,K;if(this.inverse)Y=0,K=1;else Y=1,K=0;if(H.buffers.stencil.setTest(!0),H.buffers.stencil.setOp(Z.REPLACE,Z.REPLACE,Z.REPLACE),H.buffers.stencil.setFunc(Z.ALWAYS,Y,4294967295),H.buffers.stencil.setClear(K),H.buffers.stencil.setLocked(!0),J.setRenderTarget(Q),this.clear)J.clear();if(J.render(this.scene,this.camera),J.setRenderTarget($),this.clear)J.clear();J.render(this.scene,this.camera),H.buffers.color.setLocked(!1),H.buffers.depth.setLocked(!1),H.buffers.color.setMask(!0),H.buffers.depth.setMask(!0),H.buffers.stencil.setLocked(!1),H.buffers.stencil.setFunc(Z.EQUAL,1,4294967295),H.buffers.stencil.setOp(Z.KEEP,Z.KEEP,Z.KEEP),H.buffers.stencil.setLocked(!0)}}class v$ extends s6{constructor(){super();this.needsSwap=!1}render(J){J.state.buffers.stencil.setLocked(!1),J.state.buffers.stencil.setTest(!1)}}class m${constructor(J,$){if(this.renderer=J,this._pixelRatio=J.getPixelRatio(),$===void 0){const Q=J.getSize(new k0);this._width=Q.width,this._height=Q.height,$=new Y6(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:c4}),$.texture.name="EffectComposer.rt1"}else this._width=$.width,this._height=$.height;this.renderTarget1=$,this.renderTarget2=$.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new P7(CH),this.copyPass.material.blending=m4,this.clock=new A7}swapBuffers(){const J=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=J}addPass(J){this.passes.push(J),J.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(J,$){this.passes.splice($,0,J),J.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(J){const $=this.passes.indexOf(J);if($!==-1)this.passes.splice($,1)}isLastEnabledPass(J){for(let $=J+1;$<this.passes.length;$++)if(this.passes[$].enabled)return!1;return!0}render(J){if(J===void 0)J=this.clock.getDelta();const $=this.renderer.getRenderTarget();let Q=!1;for(let Z=0,H=this.passes.length;Z<H;Z++){const Y=this.passes[Z];if(Y.enabled===!1)continue;if(Y.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(Z),Y.render(this.renderer,this.writeBuffer,this.readBuffer,J,Q),Y.needsSwap){if(Q){const K=this.renderer.getContext(),G=this.renderer.state.buffers.stencil;G.setFunc(K.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,J),G.setFunc(K.EQUAL,1,4294967295)}this.swapBuffers()}if(c5!==void 0){if(Y instanceof c5)Q=!0;else if(Y instanceof v$)Q=!1}}this.renderer.setRenderTarget($)}reset(J){if(J===void 0){const $=this.renderer.getSize(new k0);this._pixelRatio=this.renderer.getPixelRatio(),this._width=$.width,this._height=$.height,J=this.renderTarget1.clone(),J.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=J,this.renderTarget2=J.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(J,$){this._width=J,this._height=$;const Q=this._width*this._pixelRatio,Z=this._height*this._pixelRatio;this.renderTarget1.setSize(Q,Z),this.renderTarget2.setSize(Q,Z);for(let H=0;H<this.passes.length;H++)this.passes[H].setSize(Q,Z)}setPixelRatio(J){this._pixelRatio=J,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class p$ extends s6{constructor(J,$,Q=null,Z=null,H=null){super();this.scene=J,this.camera=$,this.overrideMaterial=Q,this.clearColor=Z,this.clearAlpha=H,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new a0}render(J,$,Q){const Z=J.autoClear;J.autoClear=!1;let H,Y;if(this.overrideMaterial!==null)Y=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial;if(this.clearColor!==null)J.getClearColor(this._oldClearColor),J.setClearColor(this.clearColor);if(this.clearAlpha!==null)H=J.getClearAlpha(),J.setClearAlpha(this.clearAlpha);if(this.clearDepth==!0)J.clearDepth();if(J.setRenderTarget(this.renderToScreen?null:Q),this.clear===!0)J.clear(J.autoClearColor,J.autoClearDepth,J.autoClearStencil);if(J.render(this.scene,this.camera),this.clearColor!==null)J.setClearColor(this._oldClearColor);if(this.clearAlpha!==null)J.setClearAlpha(H);if(this.overrideMaterial!==null)this.scene.overrideMaterial=Y;J.autoClear=Z}}var jH={name:"FXAAShader",uniforms:{tDiffuse:{value:null},resolution:{value:new k0(0.0009765625,0.001953125)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		precision highp float;

		uniform sampler2D tDiffuse;

		uniform vec2 resolution;

		varying vec2 vUv;

		// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

		//----------------------------------------------------------------------------------
		// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
		// SDK Version: v3.00
		// Email:       gameworks@nvidia.com
		// Site:        http://developer.nvidia.com/
		//
		// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
		//
		// Redistribution and use in source and binary forms, with or without
		// modification, are permitted provided that the following conditions
		// are met:
		//  * Redistributions of source code must retain the above copyright
		//    notice, this list of conditions and the following disclaimer.
		//  * Redistributions in binary form must reproduce the above copyright
		//    notice, this list of conditions and the following disclaimer in the
		//    documentation and/or other materials provided with the distribution.
		//  * Neither the name of NVIDIA CORPORATION nor the names of its
		//    contributors may be used to endorse or promote products derived
		//    from this software without specific prior written permission.
		//
		// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
		// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
		// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
		// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
		// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
		// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
		// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
		// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
		// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
		// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
		// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
		//
		//----------------------------------------------------------------------------------

		#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
		#endif

		/*--------------------------------------------------------------------------*/
		#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
		#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
		/*--------------------------------------------------------------------------*/

		#define NUM_SAMPLES 5

		// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
		float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
		}

		/*============================================================================

									FXAA3 QUALITY - PC

		============================================================================*/

		/*--------------------------------------------------------------------------*/
		vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
		) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
				if(earlyExit) FxaaDiscard;
			#else
				if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
				// locate the edge
				vec2 dirToEdge;
				dirToEdge.x = contrastE > contrastW ? 1. : -1.;
				dirToEdge.y = contrastS > contrastN ? 1. : -1.;
				// . 2 .      . 1 .
				// 1 0 2  ~=  0 0 1
				// . 1 .      . 0 .

				// tap 2 pixels and see which ones are "outside" the edge, to
				// determine if the edge is vertical or horizontal

				vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
				float matchAlongH = contrast( rgbaM, rgbaAlongH );
				// . 1 .
				// 0 0 1
				// . 0 H

				vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
				float matchAlongV = contrast( rgbaM, rgbaAlongV );
				// V 1 .
				// 0 0 1
				// . 0 .

				relativeVContrast = matchAlongV - matchAlongH;
				relativeVContrast *= fxaaQualityinvEdgeThreshold;

				if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
					// 1 1 .
					// 0 0 1
					// . 0 1

					// do a simple blur
					return mix(
						rgbaM,
						(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
						.4
					);
				}

				horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
				iterationsUsed = i;

				float increment = float(i + 1);

				if(!doneN) {
					nDist += increment;
					posN = posM + offNP * nDist;
					vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
					doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
					iterationsUsedN = i;
				}

				if(!doneP) {
					pDist += increment;
					posP = posM - offNP * pDist;
					vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
					doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
					iterationsUsedP = i;
				}

				if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
				doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
				doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
				rgbaM,
				rgbaN,
				dist * .5
			);
		}

		void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
				vUv,
				tDiffuse,
				resolution,
				edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
				invEdgeDetectionQuality
			);

		}
	`};var c$=function(J,$,Q,Z,H,Y,K,G){const U=(b,a,I,T)=>[new k0(b/K,1-T/G),new k0(I/K,1-T/G),new k0(I/K,1-a/G),new k0(b/K,1-a/G)],q=U($+Y,Q,$+Z+Y,Q+Y),W=U($+Z+Y,Q,$+Z*2+Y,Q+Y),V=U($,Q+Y,$+Y,Q+Y+H),D=U($+Y,Q+Y,$+Z+Y,Q+Y+H),_=U($+Z+Y,Q+Y,$+Z+Y*2,Q+H+Y),R=U($+Z+Y*2,Q+Y,$+Z*2+Y*2,Q+H+Y),E=J.attributes.uv,z=[_[3],_[2],_[0],_[1]],N=[V[3],V[2],V[0],V[1]],k=[q[3],q[2],q[0],q[1]],M=[W[0],W[1],W[3],W[2]],C=[D[3],D[2],D[0],D[1]],m=[R[3],R[2],R[0],R[1]],P=[];for(let b of[z,N,k,M,C,m])for(let a of b)P.push(a.x,a.y);E.set(new Float32Array(P)),E.needsUpdate=!0},G6=function(J,$,Q,Z,H,Y){c$(J,$,Q,Z,H,Y,64,64)},d$=function(J,$,Q,Z,H,Y){c$(J,$,Q,Z,H,Y,64,32)};class a6 extends AJ{J;$;constructor(J,$){super();this.innerLayer=J;this.outerLayer=$;J.name="inner",$.name="outer"}}class xH extends AJ{head;body;rightArm;leftArm;rightLeg;leftLeg;modelListeners=[];slim=!1;_map=null;layer1Material;layer1MaterialBiased;layer2Material;layer2MaterialBiased;constructor(){super();this.layer1Material=new V8({side:z$}),this.layer2Material=new V8({side:C5,transparent:!0,alphaTest:0.00001}),this.layer1MaterialBiased=this.layer1Material.clone(),this.layer1MaterialBiased.polygonOffset=!0,this.layer1MaterialBiased.polygonOffsetFactor=1,this.layer1MaterialBiased.polygonOffsetUnits=1,this.layer2MaterialBiased=this.layer2Material.clone(),this.layer2MaterialBiased.polygonOffset=!0,this.layer2MaterialBiased.polygonOffsetFactor=1,this.layer2MaterialBiased.polygonOffsetUnits=1;const J=new OJ(8,8,8);G6(J,0,0,8,8,8);const $=new KJ(J,this.layer1Material),Q=new OJ(9,9,9);G6(Q,32,0,8,8,8);const Z=new KJ(Q,this.layer2Material);this.head=new a6($,Z),this.head.name="head",this.head.add($,Z),$.position.y=4,Z.position.y=4,this.add(this.head);const H=new OJ(8,12,4);G6(H,16,16,8,12,4);const Y=new KJ(H,this.layer1Material),K=new OJ(8.5,12.5,4.5);G6(K,16,32,8,12,4);const G=new KJ(K,this.layer2Material);this.body=new a6(Y,G),this.body.name="body",this.body.add(Y,G),this.body.position.y=-6,this.add(this.body);const U=new OJ,q=new KJ(U,this.layer1MaterialBiased);this.modelListeners.push(()=>{q.scale.x=this.slim?3:4,q.scale.y=12,q.scale.z=4,G6(U,40,16,this.slim?3:4,12,4)});const W=new OJ,V=new KJ(W,this.layer2MaterialBiased);this.modelListeners.push(()=>{V.scale.x=this.slim?3.5:4.5,V.scale.y=12.5,V.scale.z=4.5,G6(W,40,32,this.slim?3:4,12,4)});const D=new AJ;D.add(q,V),this.modelListeners.push(()=>{D.position.x=this.slim?-0.5:-1}),D.position.y=-4,this.rightArm=new a6(q,V),this.rightArm.name="rightArm",this.rightArm.add(D),this.rightArm.position.x=-5,this.rightArm.position.y=-2,this.add(this.rightArm);const _=new OJ,R=new KJ(_,this.layer1MaterialBiased);this.modelListeners.push(()=>{R.scale.x=this.slim?3:4,R.scale.y=12,R.scale.z=4,G6(_,32,48,this.slim?3:4,12,4)});const E=new OJ,z=new KJ(E,this.layer2MaterialBiased);this.modelListeners.push(()=>{z.scale.x=this.slim?3.5:4.5,z.scale.y=12.5,z.scale.z=4.5,G6(E,48,48,this.slim?3:4,12,4)});const N=new AJ;N.add(R,z),this.modelListeners.push(()=>{N.position.x=this.slim?0.5:1}),N.position.y=-4,this.leftArm=new a6(R,z),this.leftArm.name="leftArm",this.leftArm.add(N),this.leftArm.position.x=5,this.leftArm.position.y=-2,this.add(this.leftArm);const k=new OJ(4,12,4);G6(k,0,16,4,12,4);const M=new KJ(k,this.layer1MaterialBiased),C=new OJ(4.5,12.5,4.5);G6(C,0,32,4,12,4);const m=new KJ(C,this.layer2MaterialBiased),P=new AJ;P.add(M,m),P.position.y=-6,this.rightLeg=new a6(M,m),this.rightLeg.name="rightLeg",this.rightLeg.add(P),this.rightLeg.position.x=-1.9,this.rightLeg.position.y=-12,this.rightLeg.position.z=-0.1,this.add(this.rightLeg);const b=new OJ(4,12,4);G6(b,16,48,4,12,4);const a=new KJ(b,this.layer1MaterialBiased),I=new OJ(4.5,12.5,4.5);G6(I,0,48,4,12,4);const T=new KJ(I,this.layer2MaterialBiased),p=new AJ;p.add(a,T),p.position.y=-6,this.leftLeg=new a6(a,T),this.leftLeg.name="leftLeg",this.leftLeg.add(p),this.leftLeg.position.x=1.9,this.leftLeg.position.y=-12,this.leftLeg.position.z=-0.1,this.add(this.leftLeg),this.modelType="default"}get map(){return this._map}set map(J){this._map=J,this.layer1Material.map=J,this.layer1Material.needsUpdate=!0,this.layer1MaterialBiased.map=J,this.layer1MaterialBiased.needsUpdate=!0,this.layer2Material.map=J,this.layer2Material.needsUpdate=!0,this.layer2MaterialBiased.map=J,this.layer2MaterialBiased.needsUpdate=!0}get modelType(){return this.slim?"slim":"default"}set modelType(J){this.slim=J==="slim",this.modelListeners.forEach(($)=>$())}getBodyParts(){return this.children.filter((J)=>J instanceof a6)}setInnerLayerVisible(J){this.getBodyParts().forEach(($)=>$.innerLayer.visible=J)}setOuterLayerVisible(J){this.getBodyParts().forEach(($)=>$.outerLayer.visible=J)}resetJoints(){this.head.rotation.set(0,0,0),this.leftArm.rotation.set(0,0,0),this.rightArm.rotation.set(0,0,0),this.leftLeg.rotation.set(0,0,0),this.rightLeg.rotation.set(0,0,0)}}class bH extends AJ{cape;material;constructor(){super();this.material=new V8({side:C5,transparent:!0,alphaTest:0.00001});const J=new OJ(10,16,1);d$(J,0,0,10,16,1),this.cape=new KJ(J,this.material),this.cape.position.y=-8,this.cape.position.z=0.5,this.add(this.cape)}get map(){return this.material.map}set map(J){this.material.map=J,this.material.needsUpdate=!0}}class hH extends AJ{leftWing;rightWing;material;constructor(){super();this.material=new V8({side:C5,transparent:!0,alphaTest:0.00001});const J=new OJ(12,22,4);d$(J,22,0,10,20,2);const $=new KJ(J,this.material);$.position.x=-5,$.position.y=-10,$.position.z=-1,this.leftWing=new AJ,this.leftWing.add($),this.add(this.leftWing);const Q=new OJ(12,22,4);d$(Q,22,0,10,20,2);const Z=new KJ(Q,this.material);Z.scale.x=-1,Z.position.x=5,Z.position.y=-10,Z.position.z=-1,this.rightWing=new AJ,this.rightWing.add(Z),this.add(this.rightWing),this.leftWing.position.x=5,this.leftWing.rotation.x=0.2617994,this.resetJoints()}resetJoints(){this.leftWing.rotation.y=0.01,this.leftWing.rotation.z=0.2617994,this.updateRightWing()}updateRightWing(){this.rightWing.position.x=-this.leftWing.position.x,this.rightWing.position.y=this.leftWing.position.y,this.rightWing.rotation.x=this.leftWing.rotation.x,this.rightWing.rotation.y=-this.leftWing.rotation.y,this.rightWing.rotation.z=-this.leftWing.rotation.z}get map(){return this.material.map}set map(J){this.material.map=J,this.material.needsUpdate=!0}}class gH extends AJ{rightEar;leftEar;material;constructor(){super();this.material=new V8({side:z$});const J=new OJ(8,8,1.3333333333333333);c$(J,0,0,6,6,1,14,7),this.rightEar=new KJ(J,this.material),this.rightEar.name="rightEar",this.rightEar.position.x=-6,this.add(this.rightEar),this.leftEar=new KJ(J,this.material),this.leftEar.name="leftEar",this.leftEar.position.x=6,this.add(this.leftEar)}get map(){return this.material.map}set map(J){this.material.map=J,this.material.needsUpdate=!0}}var yH=10.8*Math.PI/180;class u$ extends AJ{skin;cape;elytra;ears;constructor(){super();this.skin=new xH,this.skin.name="skin",this.skin.position.y=8,this.add(this.skin),this.cape=new bH,this.cape.name="cape",this.cape.position.y=8,this.cape.position.z=-2,this.cape.rotation.x=yH,this.cape.rotation.y=Math.PI,this.add(this.cape),this.elytra=new hH,this.elytra.name="elytra",this.elytra.position.y=8,this.elytra.position.z=-2,this.elytra.visible=!1,this.add(this.elytra),this.ears=new gH,this.ears.name="ears",this.ears.position.y=10,this.ears.position.z=0.6666666666666666,this.ears.visible=!1,this.skin.head.add(this.ears)}get backEquipment(){if(this.cape.visible)return"cape";else if(this.elytra.visible)return"elytra";else return null}set backEquipment(J){this.cape.visible=J==="cape",this.elytra.visible=J==="elytra"}resetJoints(){this.skin.resetJoints(),this.cape.rotation.x=yH,this.elytra.resetJoints()}}class l$ extends S${painted;text;font;margin;textStyle;backgroundStyle;height;textMaterial;constructor(J="",$={}){const Q=new v5({transparent:!0,alphaTest:0.00001});super(Q);if(this.textMaterial=Q,this.text=J,this.font=$.font===void 0?"48px Minecraft":$.font,this.margin=$.margin===void 0?[5,10,5,10]:$.margin,this.textStyle=$.textStyle===void 0?"white":$.textStyle,this.backgroundStyle=$.backgroundStyle===void 0?"rgba(0,0,0,.25)":$.backgroundStyle,this.height=$.height===void 0?4:$.height,($.repaintAfterLoaded===void 0?!0:$.repaintAfterLoaded)&&!document.fonts.check(this.font,this.text))this.paint(),this.painted=this.loadAndPaint();else this.paint(),this.painted=Promise.resolve()}async loadAndPaint(){await document.fonts.load(this.font,this.text),this.paint()}paint(){const J=document.createElement("canvas");let $=J.getContext("2d");$.font=this.font;const Q=$.measureText(this.text);J.width=this.margin[3]+Q.actualBoundingBoxLeft+Q.actualBoundingBoxRight+this.margin[1],J.height=this.margin[0]+Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent+this.margin[2],$=J.getContext("2d"),$.font=this.font,$.fillStyle=this.backgroundStyle,$.fillRect(0,0,J.width,J.height),$.fillStyle=this.textStyle,$.fillText(this.text,this.margin[3]+Q.actualBoundingBoxLeft,this.margin[0]+Q.actualBoundingBoxAscent);const Z=new W8(J);Z.magFilter=I6,Z.minFilter=I6,this.textMaterial.map=Z,this.textMaterial.needsUpdate=!0,this.scale.x=J.width/J.height*this.height,this.scale.y=this.height}}class n${canvas;scene;camera;renderer;controls;playerObject;playerWrapper;globalLight=new j$(16777215,3);cameraLight=new f$(16777215,0.6);composer;renderPass;fxaaPass;skinCanvas;capeCanvas;earsCanvas;skinTexture=null;capeTexture=null;earsTexture=null;backgroundTexture=null;_disposed=!1;_renderPaused=!1;_zoom;autoRotate=!1;autoRotateSpeed=1;_animation;clock;animationID;onContextLost;onContextRestored;_pixelRatio;devicePixelRatioQuery;onDevicePixelRatioChange;_nameTag=null;constructor(J={}){if(this.canvas=J.canvas===void 0?document.createElement("canvas"):J.canvas,this.skinCanvas=document.createElement("canvas"),this.capeCanvas=document.createElement("canvas"),this.earsCanvas=document.createElement("canvas"),this.scene=new w$,this.camera=new uJ,this.camera.add(this.cameraLight),this.scene.add(this.camera),this.scene.add(this.globalLight),this.renderer=new g5({canvas:this.canvas,preserveDrawingBuffer:J.preserveDrawingBuffer===!0}),this.onDevicePixelRatioChange=()=>{if(this.renderer.setPixelRatio(window.devicePixelRatio),this.updateComposerSize(),this._pixelRatio==="match-device")this.devicePixelRatioQuery=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.devicePixelRatioQuery.addEventListener("change",this.onDevicePixelRatioChange,{once:!0})},J.pixelRatio===void 0||J.pixelRatio==="match-device")this._pixelRatio="match-device",this.devicePixelRatioQuery=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.devicePixelRatioQuery.addEventListener("change",this.onDevicePixelRatioChange,{once:!0}),this.renderer.setPixelRatio(window.devicePixelRatio);else this._pixelRatio=J.pixelRatio,this.devicePixelRatioQuery=null,this.renderer.setPixelRatio(J.pixelRatio);this.renderer.setClearColor(0,0);let $;if(this.renderer.capabilities.isWebGL2)$=new Y6(0,0,{depthTexture:new L7(0,0,d4)});if(this.composer=new m$(this.renderer,$),this.renderPass=new p$(this.scene,this.camera),this.fxaaPass=new P7(jH),this.composer.addPass(this.renderPass),this.composer.addPass(this.fxaaPass),this.playerObject=new u$,this.playerObject.name="player",this.playerObject.skin.visible=!1,this.playerObject.cape.visible=!1,this.playerWrapper=new AJ,this.playerWrapper.add(this.playerObject),this.scene.add(this.playerWrapper),this.controls=new h$(this.camera,this.canvas),this.controls.enablePan=!1,this.controls.minDistance=10,this.controls.maxDistance=256,J.enableControls===!1)this.controls.enabled=!1;if(J.skin!==void 0)this.loadSkin(J.skin,{model:J.model,ears:J.ears==="current-skin"});if(J.cape!==void 0)this.loadCape(J.cape);if(J.ears!==void 0&&J.ears!=="current-skin")this.loadEars(J.ears.source,{textureType:J.ears.textureType});if(J.width!==void 0)this.width=J.width;if(J.height!==void 0)this.height=J.height;if(J.background!==void 0)this.background=J.background;if(J.panorama!==void 0)this.loadPanorama(J.panorama);if(J.nameTag!==void 0)this.nameTag=J.nameTag;if(this.camera.position.z=1,this._zoom=J.zoom===void 0?0.9:J.zoom,this.fov=J.fov===void 0?50:J.fov,this._animation=J.animation===void 0?null:J.animation,this.clock=new A7,J.renderPaused===!0)this._renderPaused=!0,this.animationID=null;else this.animationID=window.requestAnimationFrame(()=>this.draw());this.onContextLost=(Q)=>{if(Q.preventDefault(),this.animationID!==null)window.cancelAnimationFrame(this.animationID),this.animationID=null},this.onContextRestored=()=>{if(this.renderer.setClearColor(0,0),!this._renderPaused&&!this._disposed&&this.animationID===null)this.animationID=window.requestAnimationFrame(()=>this.draw())},this.canvas.addEventListener("webglcontextlost",this.onContextLost,!1),this.canvas.addEventListener("webglcontextrestored",this.onContextRestored,!1)}updateComposerSize(){this.composer.setSize(this.width,this.height);const J=this.renderer.getPixelRatio();this.composer.setPixelRatio(J),this.fxaaPass.material.uniforms.resolution.value.x=1/(this.width*J),this.fxaaPass.material.uniforms.resolution.value.y=1/(this.height*J)}recreateSkinTexture(){if(this.skinTexture!==null)this.skinTexture.dispose();this.skinTexture=new W8(this.skinCanvas),this.skinTexture.magFilter=I6,this.skinTexture.minFilter=I6,this.playerObject.skin.map=this.skinTexture}recreateCapeTexture(){if(this.capeTexture!==null)this.capeTexture.dispose();this.capeTexture=new W8(this.capeCanvas),this.capeTexture.magFilter=I6,this.capeTexture.minFilter=I6,this.playerObject.cape.map=this.capeTexture,this.playerObject.elytra.map=this.capeTexture}recreateEarsTexture(){if(this.earsTexture!==null)this.earsTexture.dispose();this.earsTexture=new W8(this.earsCanvas),this.earsTexture.magFilter=I6,this.earsTexture.minFilter=I6,this.playerObject.ears.map=this.earsTexture}loadSkin(J,$={}){if(J===null)this.resetSkin();else if(q7(J)){if(nZ(this.skinCanvas,J),this.recreateSkinTexture(),$.model===void 0||$.model==="auto-detect")this.playerObject.skin.modelType=iZ(this.skinCanvas);else this.playerObject.skin.modelType=$.model;if($.makeVisible!==!1)this.playerObject.skin.visible=!0;if($.ears===!0||$.ears=="load-only"){if(m9(this.earsCanvas,J),this.recreateEarsTexture(),$.ears===!0)this.playerObject.ears.visible=!0}}else return X7(J).then((Q)=>this.loadSkin(Q,$))}resetSkin(){if(this.playerObject.skin.visible=!1,this.playerObject.skin.map=null,this.skinTexture!==null)this.skinTexture.dispose(),this.skinTexture=null}loadCape(J,$={}){if(J===null)this.resetCape();else if(q7(J)){if(oZ(this.capeCanvas,J),this.recreateCapeTexture(),$.makeVisible!==!1)this.playerObject.backEquipment=$.backEquipment===void 0?"cape":$.backEquipment}else return X7(J).then((Q)=>this.loadCape(Q,$))}resetCape(){if(this.playerObject.backEquipment=null,this.playerObject.cape.map=null,this.playerObject.elytra.map=null,this.capeTexture!==null)this.capeTexture.dispose(),this.capeTexture=null}loadEars(J,$={}){if(J===null)this.resetEars();else if(q7(J)){if($.textureType==="skin")m9(this.earsCanvas,J);else rZ(this.earsCanvas,J);if(this.recreateEarsTexture(),$.makeVisible!==!1)this.playerObject.ears.visible=!0}else return X7(J).then((Q)=>this.loadEars(Q,$))}resetEars(){if(this.playerObject.ears.visible=!1,this.playerObject.ears.map=null,this.earsTexture!==null)this.earsTexture.dispose(),this.earsTexture=null}loadPanorama(J){return this.loadBackground(J,p4)}loadBackground(J,$){if(q7(J)){if(this.backgroundTexture!==null)this.backgroundTexture.dispose();if(this.backgroundTexture=new xJ,this.backgroundTexture.image=J,$!==void 0)this.backgroundTexture.mapping=$;this.backgroundTexture.needsUpdate=!0,this.scene.background=this.backgroundTexture}else return X7(J).then((Q)=>this.loadBackground(Q,$))}draw(){const J=this.clock.getDelta();if(this._animation!==null)this._animation.update(this.playerObject,J);if(this.autoRotate)this.playerWrapper.rotation.y+=J*this.autoRotateSpeed;this.controls.update(),this.render(),this.animationID=window.requestAnimationFrame(()=>this.draw())}render(){this.composer.render()}setSize(J,$){this.camera.aspect=J/$,this.camera.updateProjectionMatrix(),this.renderer.setSize(J,$),this.updateComposerSize()}dispose(){if(this._disposed=!0,this.canvas.removeEventListener("webglcontextlost",this.onContextLost,!1),this.canvas.removeEventListener("webglcontextrestored",this.onContextRestored,!1),this.devicePixelRatioQuery!==null)this.devicePixelRatioQuery.removeEventListener("change",this.onDevicePixelRatioChange),this.devicePixelRatioQuery=null;if(this.animationID!==null)window.cancelAnimationFrame(this.animationID),this.animationID=null;this.controls.dispose(),this.renderer.dispose(),this.resetSkin(),this.resetCape(),this.resetEars(),this.background=null,this.fxaaPass.fsQuad.dispose()}get disposed(){return this._disposed}get renderPaused(){return this._renderPaused}set renderPaused(J){if(this._renderPaused=J,this._renderPaused&&this.animationID!==null)window.cancelAnimationFrame(this.animationID),this.animationID=null,this.clock.stop(),this.clock.autoStart=!0;else if(!this._renderPaused&&!this._disposed&&!this.renderer.getContext().isContextLost()&&this.animationID==null)this.animationID=window.requestAnimationFrame(()=>this.draw())}get width(){return this.renderer.getSize(new k0).width}set width(J){this.setSize(J,this.height)}get height(){return this.renderer.getSize(new k0).height}set height(J){this.setSize(this.width,J)}get background(){return this.scene.background}set background(J){if(J===null||J instanceof a0||J instanceof xJ)this.scene.background=J;else this.scene.background=new a0(J);if(this.backgroundTexture!==null&&J!==this.backgroundTexture)this.backgroundTexture.dispose(),this.backgroundTexture=null}adjustCameraDistance(){let J=4.5+16.5/Math.tan(this.fov/180*Math.PI/2)/this.zoom;if(J<10)J=10;else if(J>256)J=256;this.camera.position.multiplyScalar(J/this.camera.position.length()),this.camera.updateProjectionMatrix()}resetCameraPose(){this.camera.position.set(0,0,1),this.camera.rotation.set(0,0,0),this.adjustCameraDistance()}get fov(){return this.camera.fov}set fov(J){this.camera.fov=J,this.adjustCameraDistance()}get zoom(){return this._zoom}set zoom(J){this._zoom=J,this.adjustCameraDistance()}get pixelRatio(){return this._pixelRatio}set pixelRatio(J){if(J==="match-device"){if(this._pixelRatio!=="match-device")this._pixelRatio=J,this.onDevicePixelRatioChange()}else{if(this._pixelRatio==="match-device"&&this.devicePixelRatioQuery!==null)this.devicePixelRatioQuery.removeEventListener("change",this.onDevicePixelRatioChange),this.devicePixelRatioQuery=null;this._pixelRatio=J,this.renderer.setPixelRatio(J),this.updateComposerSize()}}get animation(){return this._animation}set animation(J){if(this._animation!==J)this.playerObject.resetJoints(),this.playerObject.position.set(0,0,0),this.playerObject.rotation.set(0,0,0),this.clock.stop(),this.clock.autoStart=!0;if(J!==null)J.progress=0;this._animation=J}get nameTag(){return this._nameTag}set nameTag(J){if(this._nameTag!==null)this.playerWrapper.remove(this._nameTag);if(J!==null){if(!(J instanceof bJ))J=new l$(J);this.playerWrapper.add(J),J.position.y=20}this._nameTag=J}}class vH{speed=1;paused=!1;progress=0;update(J,$){if(this.paused)return;const Q=$*this.speed;this.animate(J,Q),this.progress+=Q}}class o$ extends vH{constructor(){super(...arguments)}animate(J){const $=this.progress*2,Q=Math.PI*0.02;J.skin.leftArm.rotation.z=Math.cos($)*0.03+Q,J.skin.rightArm.rotation.z=Math.cos($+Math.PI)*0.03-Q;const Z=Math.PI*0.06;J.cape.rotation.x=Math.sin($)*0.01+Z}}function i8({pageId:J,pageClass:$}){return function(Q,Z){Q.prototype._onMount=function(){this.pageId=J,this.pageClass=$,this.$id=this.pageId,this.addClass(this.pageClass)}}}class D8 extends I0{pageId="";pageClass="";constructor(J){super(oJ({class:"page",component:{}},J));this.build(J)}build(J){}}class T7 extends D8{constructor(){super(...arguments)}build(J){this.add(X0.createElement(MJ,{class:"minecraft-logo"})),this.addAll(X0.createElement(MJ,{class:"all-buttons"},X0.createElement(MJ,{class:"main-buttons"},X0.createElement(MJ,{class:"pair-buttons"},X0.createElement(LJ,{class:"dark",onClick:()=>J.component.activatePage("worldspage")},X0.createElement(U6,{icon:"/icons2/world.png"}),X0.createElement(VJ,{class:"bottom-text animated-on-hover animated-text text-large"},"Play")),X0.createElement(LJ,{class:"dark"},X0.createElement(U6,{icon:"/icons2/levers.png"}),X0.createElement(VJ,{class:"bottom-text animated-on-hover animated-text text-large"},"Settings"))),X0.createElement(MJ,{class:"tiny-buttons"},X0.createElement(LJ,{class:"dark icon-button"},X0.createElement(U6,{icon:"/icons2/shop.png",class:"md"})),X0.createElement(LJ,{class:"dark icon-button"},X0.createElement(U6,{icon:"/icons2/person.png",class:"md"})),X0.createElement(LJ,{class:"dark icon-button"},X0.createElement(U6,{icon:"/icons2/craft.png",class:"md"})))),X0.createElement(LJ,{onClick:()=>this.showLoading(),class:"dark full"},X0.createElement(U6,{icon:"/icons2/xp.png",class:"prefix sm"}),X0.createElement(VJ,null,"Hello"))));let $=new x9({}),Q=new n$({canvas:$.raw().at(0),width:200,height:200,zoom:0.5});Q.controls.enablePan=!1,Q.controls.enableZoom=!1,Q.controls.enableRotate=!1,Q.controls.addEventListener("change",(H)=>{H.target.object.position.y=0}),Q.nameTag="makanobush",Q.loadSkin("/skin.webp"),this.add(X0.createElement(MJ,{class:"skin-viewer"},$)),Q.animation=new o$;const Z=Q.scene.children[2].children[0].children[0].children[0];Q.scene.children[2].rotation.y=-0.4,Q.scene.children[2].rotation.x=0.4,this.on("mousemove",(H)=>{let Y=window.innerWidth-Q.width,K=window.innerHeight-Q.height;var G=H.pos.x-Y,U=H.pos.y-K,q=Math.atan2(G,Y),W=Math.atan2(U,K);Z.rotation.y=q*0.8,Z.rotation.x=W*0.8})}showLoading(){let J=new MJ({class:"loading-loader dark",attr:{loading:"Loading"}});this.add(J),setTimeout(()=>J.remove(),1e4)}}T7=z8([i8({pageId:"homepage",pageClass:"home-page"})],T7);class i$ extends I0{constructor(){super({class:"bg-image"})}}class r$ extends I0{constructor(){super({class:"pluginbar"});this.addAll(X0.createElement($6,null,X0.createElement(EJ,{icon:"/icons/search.png"})),X0.createElement($6,null,X0.createElement(EJ,{icon:"/icons/skeleton.png"})),X0.createElement($6,null,X0.createElement(EJ,{icon:"/icons/sword.png"})),X0.createElement($6,null,X0.createElement(EJ,{icon:"/icons/play.png"})))}}var mH=[{picture:"/worlds/world-1.jpg",name:"My World",date:"01/12/2024"},{picture:"/worlds/world-2.jpg",name:"Texture Tryinng World",date:"01/04/2024"}];class w7 extends D8{constructor(){super(...arguments)}build(J){this.addAll(X0.createElement(MJ,{class:"sidebar"},X0.createElement(MJ,{class:"navbar"},X0.createElement(LJ,{class:"dark flat no-border margin-left",onClick:()=>J.component.activatePage("homepage")},X0.createElement(EJ,{class:"prefix",icon:"/icons/apps.png"}),X0.createElement(VJ,null,"Back")),X0.createElement(MJ,{class:"title"},X0.createElement(U6,{class:"md",icon:"/icons2/world.png"}),X0.createElement(VJ,null,"Worlds"))),X0.createElement(MJ,{class:"tabs"},X0.createElement(LJ,{class:"hover"},X0.createElement(EJ,{class:"prefix",icon:"/icons/castle.png"}),X0.createElement(VJ,null,"Single Player")),X0.createElement(LJ,{class:"dark hover"},X0.createElement(EJ,{class:"prefix",icon:"/icons/person.png"}),X0.createElement(VJ,null,"Multiplayer")),X0.createElement(LJ,{class:"dark hover"},X0.createElement(EJ,{class:"prefix",icon:"/icons/monitor2.png"}),X0.createElement(VJ,null,"Servers"))),X0.createElement(MJ,{class:"buttons"},X0.createElement(LJ,{class:"full",onClick:()=>J.component.activatePage("createpage")},X0.createElement(EJ,{class:"prefix",icon:"/icons/layers.png"}),X0.createElement(VJ,null,"New World")),X0.createElement(MJ,{class:"mini-buttons"},X0.createElement($6,{class:"dark hover"},X0.createElement(EJ,{icon:"/icons/xbox.png"})),X0.createElement($6,{class:"dark hover"},X0.createElement(EJ,{icon:"/icons/tree.png"})),X0.createElement($6,{class:"dark hover"},X0.createElement(EJ,{icon:"/icons/unknown1.png"}))))),X0.createElement(MJ,{class:"mainbar"},new g9({class:"worlds-list",items:mH,grid:!1,template($){return new MJ({class:"world",children:[X0.createElement(y9,{src:$.picture}),X0.createElement(VJ,{class:"name"},$.name),X0.createElement($6,{class:"dark edit hover"},X0.createElement(EJ,{icon:"/icons/color.png"})),X0.createElement($6,{class:"dark info hover"},X0.createElement(EJ,{icon:"/icons/expand.png"}))]})}})),X0.createElement(r$,null))}}w7=z8([i8({pageId:"worldspage",pageClass:"worlds-page transparent"})],w7);class S7 extends D8{constructor(){super(...arguments)}build(J){this.addAll(X0.createElement(LJ,{class:"back-button dark flat no-border margin-left",onClick:()=>J.component.activatePage("worldspage")},X0.createElement(EJ,{class:"prefix",icon:"/icons/apps.png"}),X0.createElement(VJ,null,"Back")),new w9({class:"input"}),X0.createElement(MJ,{class:"button-group-two"},X0.createElement(LJ,{class:"full"},X0.createElement(EJ,{class:"prefix",icon:"/icons/skeleton.png"}),X0.createElement(VJ,null,"Survival")),X0.createElement(LJ,{class:"full dark"},X0.createElement(EJ,{class:"prefix",icon:"/icons/castle.png"}),X0.createElement(VJ,null,"Creative"))),X0.createElement(LJ,{class:"create-world",onClick:()=>this.showLoading(J)},X0.createElement(EJ,{class:"prefix",icon:"/icons/play.png"}),X0.createElement(VJ,null,"Create")))}showLoading(J){let $=new MJ({class:"loading-loader dark",attr:{loading:"Generating"}});this.add($),setTimeout(()=>{$.remove(),J.component.activatePage("worldspage")},5000)}}S7=z8([i8({pageId:"createpage",pageClass:"create-page"})],S7);class PJ extends f6{constructor(){super(...arguments)}static updateMode="refresh";build(J){return new I0({children:[X0.createElement(i$,null),X0.createElement(T7,{component:this}),X0.createElement(w7,{component:this}),X0.createElement(S7,{component:this})]})}activatePage(J){this._currentWidget.findAll(".page").forEach(($)=>$.removeClass("active")),this._currentWidget.find("#"+J)?.addClass("active")}afterBuild(J){this.activatePage("homepage")}}(()=>{const J=document.createElement("style");J.pathname="/home/makano/workspace/mcui/styles/styles.scss",J.textContent=atob("KiB7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKYm9keSB7CiAgbWFyZ2luOiAwOwogIHVzZXItc2VsZWN0OiBub25lOwp9CgpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogTWluZWNyYWZ0OwogIHNyYzogdXJsKCIvZm9udHMvbWluZWNyYWZ0LndvZmYyIik7Cn0KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6IE1pbmVjcmFmdFRlbjsKICBzcmM6IHVybCgiL2ZvbnRzL21jdGVuLnR0ZiIpOwp9CmJvZHksIGlucHV0IHsKICBmb250LWZhbWlseTogTWluZWNyYWZ0LCBzYW5zLXNlcmlmOwp9CgpoMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBidXR0b24sIC5mb250LXRlbiB7CiAgZm9udC1mYW1pbHk6IE1pbmVjcmFmdFRlbjsKfQoKLnBhZ2UgewogIC0tcGFnZS13aWR0aDogMTAwZHZ3OwogIC0tcGFnZS1oZWlnaHQ6IDEwMGR2aDsKICAtLWFjdGl2ZS1kaXNwbGF5OiBibG9jazsKICAtLWluYWN0aXZlLWRpc3BsYXk6IG5vbmU7CiAgZGlzcGxheTogdmFyKC0taW5hY3RpdmUtZGlzcGxheSk7CiAgLS1wYWdlLWltYWdlLXVybDogdXJsKCIvYmctd29vbC1kYXJrLnBuZyIpOwogIC0tZml0LXg6IGNvdmVyOwogIC0tZml0LXk6IGNvdmVyOwogIGJhY2tncm91bmQ6IHZhcigtLXBhZ2UtaW1hZ2UtdXJsKTsKICBiYWNrZ3JvdW5kLXNpemU6IHZhcigtLWZpdC14KSB2YXIoLS1maXQteSk7CiAgd2lkdGg6IHZhcigtLXBhZ2Utd2lkdGgpOwogIGhlaWdodDogdmFyKC0tcGFnZS1oZWlnaHQpOwp9Ci5wYWdlLmJnLWNlbnRlcmVkIHsKICAtLWZpdC14OiA4MCU7CiAgLS1maXQteTogMTAwJTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IDUwJTsKfQoucGFnZS5mYWRlLW91dCB7CiAgLS1wYWdlLWltYWdlLXVybDogdXJsKCIvYmctd29vbC1mYWRlb3V0LWRhcmsucG5nIik7CiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKfQoucGFnZS5hY3RpdmUgewogIGRpc3BsYXk6IHZhcigtLWFjdGl2ZS1kaXNwbGF5KTsKfQoucGFnZS50cmFuc3BhcmVudCB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7Cn0KCi5wbHVnaW5iYXIgewogIHdpZHRoOiAzNnB4OwogIGJhY2tncm91bmQ6IHJnYmEoMjIsIDI5LCAyMiwgMC44MTU2ODYyNzQ1KTsKfQoKLmJnLWltYWdlIHsKICAtLWJnLWltYWdlLXVybDogdXJsKCIvYmFja2dyb3VuZC5wbmciKTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGJhY2tncm91bmQ6IHZhcigtLWJnLWltYWdlLXVybCk7CiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKICB6LWluZGV4OiAtMTsKfQoKLmJ1dHRvbiB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIC0tYnV0dG9uLXJhZGl1czogMDsKICAtLWJvcmRlci1zaWRlOiAwOwogIHBhZGRpbmc6IDEwcHggMjBweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWNvbG9yKTsKICBjb2xvcjogdmFyKC0tYnV0dG9uLWZnKTsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1idXR0b24tcmFkaXVzKTsKICBib3JkZXI6IDRweCBzb2xpZCB2YXIoLS1idXR0b24tY29sb3ItZGFyayk7CiAgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLWxpZ2h0KTsKICBib3JkZXItbGVmdDogdmFyKC0tYm9yZGVyLXNpZGUpOwogIGJvcmRlci1yaWdodDogdmFyKC0tYm9yZGVyLXNpZGUpOwogIGJveC1zaGFkb3c6IDBweCA0cHggcmdiYSgwLCAwLCAwLCAwLjQpOwp9Ci5idXR0b24uZGFyayB7CiAgLS1idXR0b24tY29sb3I6ICMxNjFkMTZhMDsKICAtLWJ1dHRvbi1jb2xvci1kYXJrOiAjMTgxZjE4YTA7CiAgLS1idXR0b24tY29sb3ItZGFya2VyOiAjMGYxNDBmYTA7CiAgLS1idXR0b24tY29sb3ItbGlnaHQ6ICMyMTMwMjFhMDsKICBib3gtc2hhZG93OiBub25lOwp9Ci5idXR0b24sIC5idXR0b24uZGFyay5ob3Zlcjpob3ZlciB7CiAgLS1idXR0b24tY29sb3I6ICMzMzcxMjE7CiAgLS1idXR0b24tZmc6ICNmZmZmZmY7CiAgLS1idXR0b24tY29sb3ItZGFyazogIzJhNjQxYzsKICAtLWJ1dHRvbi1jb2xvci1kYXJrZXI6ICMxYTQ3MGY7CiAgLS1idXR0b24tY29sb3ItbGlnaHQ6ICM1MmE1MzU7Cn0KLmJ1dHRvbjpmb2N1cywgLmJ1dHRvbiB7CiAgb3V0bGluZTogMDsKfQouYnV0dG9uIC5pY29uIHsKICB0cmFuc2l0aW9uOiAwLjJzOwp9Ci5idXR0b246YWN0aXZlIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24tY29sb3ItZGFya2VyKTsKfQouYnV0dG9uOmFjdGl2ZSAuaWNvbiB7CiAgc2NhbGU6IDAuOTsKfQouYnV0dG9uLnJvdW5kIHsKICAtLWJ1dHRvbi1yYWRpdXM6IDJweDsKfQouYnV0dG9uLm5vLWJvcmRlciB7CiAgYm9yZGVyOiAwOwp9Ci5idXR0b24ubWluaSB7CiAgcGFkZGluZzogMTBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgaGVpZ2h0OiA0MHB4Owp9Ci5idXR0b24uc2lkZXMgewogIC0tYm9yZGVyLXNpZGU6IDRweDsKfQouYnV0dG9uLmljb24tYnV0dG9uIHsKICBwYWRkaW5nOiA1cHggMTBweDsKfQouYnV0dG9uLmZ1bGwgewogIHdpZHRoOiAxMDAlOwp9Ci5idXR0b24gLmljb24ucHJlZml4IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgbGVmdDogMTVweDsKfQouYnV0dG9uLm1hcmdpbi1sZWZ0IHsKICBwYWRkaW5nLWxlZnQ6IDQwcHg7Cn0KLmJ1dHRvbi5mbGF0IHsKICBwYWRkaW5nOiA1cHggMTBweDsKfQouYnV0dG9uLmZsYXQgLmljb24ucHJlZml4IHsKICBtYXJnaW4tdG9wOiAtM3B4OwogIGxlZnQ6IDVweDsKfQouYnV0dG9uLmZsYXQubWFyZ2luLWxlZnQgewogIHBhZGRpbmctbGVmdDogMjVweDsKfQouYnV0dG9uIC5ib3R0b20tdGV4dCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogNXB4OwogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsZWZ0OiAwOwp9Ci5idXR0b24gLnRleHQtbGFyZ2UgewogIGZvbnQtc2l6ZTogMThweDsKfQouYnV0dG9uIC5hbmltYXRlZC10ZXh0IHsKICBhbmltYXRpb246IDAuNXMgMSB0cmFuc2Zvcm0tdXBzaWRlOwogIGNvbG9yOiB0cmFuc3BhcmVudDsKICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMTcsIDE3LCAxNywgMC44NjY2NjY2NjY3KSwgcmdiYSgxNywgMTcsIDE3LCAwLjg2NjY2NjY2NjcpLCB0cmFuc3BhcmVudCwgdHJhbnNwYXJlbnQpOwogIGJhY2tncm91bmQtc2l6ZTogMjAwJTsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJTsKICAtd2Via2l0LWJhY2tncm91bmQtY2xpcDogdGV4dDsKICAtbW96LWJhY2tncm91bmQtY2xpcDogdGV4dDsKICBiYWNrZ3JvdW5kLWNsaXA6IHRleHQ7Cn0KLmJ1dHRvbiAuYW5pbWF0ZWQtb24taG92ZXIgewogIGRpc3BsYXk6IG5vbmU7Cn0KLmJ1dHRvbjpob3ZlciAuYW5pbWF0ZWQtb24taG92ZXIgewogIGRpc3BsYXk6IHVuc2V0Owp9CkBrZXlmcmFtZXMgdHJhbnNmb3JtLXVwc2lkZSB7CiAgZnJvbSB7CiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAxMDAlOwogIH0KICB0byB7CiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwJTsKICB9Cn0KCi5idXR0b24tZ3JvdXAtdHdvIHsKICBkaXNwbGF5OiBmbGV4OwogIHdpZHRoOiBjbGFtcCgyMDBweCwgMjUwcHgsIDcwJSk7Cn0KCi5pbnB1dCB7CiAgYm9yZGVyOiAycHggc29saWQgIzEyMTgxMjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMGEwZTBhOwogIG91dGxpbmU6IG5vbmU7CiAgcGFkZGluZzogMTBweCAxNXB4OwogIGNvbG9yOiB3aGl0ZTsKICB3aWR0aDogY2xhbXAoMjAwcHgsIDI1MHB4LCA4MCUpOwp9CgouaWNvbiB7CiAgLS1zaXplOiA2NHB4OwogIHdpZHRoOiB2YXIoLS1zaXplKTsKICBoZWlnaHQ6IHZhcigtLXNpemUpOwogIGJhY2tncm91bmQ6IHZhcigtLWljb24tdXJsKTsKICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQouaWNvbi5tZC0xIHsKICAtLXNpemU6IDQ4cHg7Cn0KLmljb24ubWQgewogIC0tc2l6ZTogMzJweDsKfQouaWNvbi5tZC0yIHsKICAtLXNpemU6IDI0cHg7Cn0KLmljb24ubGcgewogIC0tc2l6ZTogMTI4cHg7Cn0KLmljb24uc20gewogIC0tc2l6ZTogMTZweDsKfQoKLmxvYWRpbmctbG9hZGVyIHsKICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24tY29sb3IpOwogIGNvbG9yOiB2YXIoLS1idXR0b24tZmcpOwogIGJvcmRlci1yYWRpdXM6IHZhcigtLWJ1dHRvbi1yYWRpdXMpOwogIGJvcmRlcjogNHB4IHNvbGlkIHZhcigtLWJ1dHRvbi1jb2xvci1kYXJrKTsKICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1idXR0b24tY29sb3ItbGlnaHQpOwogIGJvcmRlci1sZWZ0OiB2YXIoLS1ib3JkZXItc2lkZSk7CiAgYm9yZGVyLXJpZ2h0OiB2YXIoLS1ib3JkZXItc2lkZSk7CiAgYm94LXNoYWRvdzogMHB4IDRweCByZ2JhKDAsIDAsIDAsIDAuNCk7CiAgcG9zaXRpb246IGZpeGVkOwogIHdpZHRoOiAxNTBweDsKICBoZWlnaHQ6IDE1MHB4OwogIHBhZGRpbmc6IDA7CiAgei1pbmRleDogMTsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLmxvYWRpbmctbG9hZGVyLmRhcmsgewogIC0tYnV0dG9uLWNvbG9yOiAjMTYxZDE2YTA7CiAgLS1idXR0b24tY29sb3ItZGFyazogIzE4MWYxOGEwOwogIC0tYnV0dG9uLWNvbG9yLWRhcmtlcjogIzBmMTQwZmEwOwogIC0tYnV0dG9uLWNvbG9yLWxpZ2h0OiAjMjEzMDIxYTA7CiAgYm94LXNoYWRvdzogbm9uZTsKfQoubG9hZGluZy1sb2FkZXI6OmJlZm9yZSB7CiAgY29udGVudDogIiI7CiAgZGlzcGxheTogYmxvY2s7CiAgd2lkdGg6IDMycHg7CiAgaGVpZ2h0OiAzMnB4OwogIGFuaW1hdGlvbjogMi41cyBpbmZpbml0ZSBhbHRlcm5hdGUgc3RlcHMoNSkgYW5pbWF0ZS1zcHJpdGU7CiAgYmFja2dyb3VuZC1zaXplOiAxMDAlOwp9CkBrZXlmcmFtZXMgYW5pbWF0ZS1zcHJpdGUgewogIDAlIHsKICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiL2xvYWRpbmdzL2dhcy0xLnBuZyIpOwogIH0KICAyNSUgewogICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCIvbG9hZGluZ3MvZ2FzLTIucG5nIik7CiAgfQogIDUwJSB7CiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIi9sb2FkaW5ncy9nYXMtMy5wbmciKTsKICB9CiAgNzUlIHsKICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiL2xvYWRpbmdzL2dhcy00LnBuZyIpOwogIH0KICAxMDAlIHsKICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiL2xvYWRpbmdzL2dhcy01LnBuZyIpOwogIH0KfQoubG9hZGluZy1sb2FkZXI6OmFmdGVyIHsKICBjb250ZW50OiBhdHRyKGxvYWRpbmcpOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDVweDsKICBjb2xvcjogd2hpdGU7Cn0KCi5wYWdlOmhhcygubG9hZGluZy1sb2FkZXIpIHsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKfQoucGFnZTpoYXMoLmxvYWRpbmctbG9hZGVyKSAqOm5vdCguYmctaW1hZ2UpOm5vdCgubG9hZGluZy1sb2FkZXIpIHsKICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7Cn0KCi5ob21lLXBhZ2UgewogIGhlaWdodDogMTAwJTsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7CiAgLS1hY3RpdmUtZGlzcGxheTogZmxleDsKICAtLWluYWN0aXZlLWRpc3BsYXk6IGZsZXg7Cn0KLmhvbWUtcGFnZSAubWluZWNyYWZ0LWxvZ28gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBiYWNrZ3JvdW5kOiB1cmwoIi9taW5lY3JhZnQucG5nIik7CiAgd2lkdGg6IDUwMHB4OwogIGhlaWdodDogODVweDsKICBkaXNwbGF5OiBibG9jazsKICB6LWluZGV4OiAxOwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgdG9wOiAxMCU7CiAgdHJhbnNmb3JtOiBzY2FsZVkoMSk7CiAgdHJhbnNpdGlvbjogMC4yNXM7Cn0KLmhvbWUtcGFnZTpub3QoLmFjdGl2ZSkgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB3aWR0aDogMTAwJTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB6LWluZGV4OiAtMTsKfQouaG9tZS1wYWdlOm5vdCguYWN0aXZlKSAubWluZWNyYWZ0LWxvZ28gewogIHRyYW5zZm9ybTogc2NhbGVZKDApOwp9Ci5ob21lLXBhZ2UgLmFsbC1idXR0b25zIHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogNXB4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KLmhvbWUtcGFnZSAuYWxsLWJ1dHRvbnMgLm1haW4tYnV0dG9ucyB7CiAgZGlzcGxheTogZmxleDsKICBnYXA6IDVweDsKfQouaG9tZS1wYWdlIC5hbGwtYnV0dG9ucyAubWFpbi1idXR0b25zIC5wYWlyLWJ1dHRvbnMgewogIGRpc3BsYXk6IGZsZXg7CiAgZ2FwOiA1cHg7Cn0KLmhvbWUtcGFnZSAuYWxsLWJ1dHRvbnMgLm1haW4tYnV0dG9ucyAudGlueS1idXR0b25zIHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogNXB4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KLmhvbWUtcGFnZSAuYWxsLWJ1dHRvbnMgLmJ1dHRvbiB7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgMCkgc2NhbGVZKDEpOwogIHRyYW5zaXRpb246IDAuMjVzOwp9Ci5ob21lLXBhZ2U6bm90KC5hY3RpdmUpIC5hbGwtYnV0dG9ucyAuYnV0dG9uIHsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwJSwgMCkgc2NhbGUoNCk7CiAgb3BhY2l0eTogMDsKfQouaG9tZS1wYWdlOm5vdCguYWN0aXZlKSAuYWxsLWJ1dHRvbnMgLm1haW4tYnV0dG9ucyAuYnV0dG9uOm50aC1jaGlsZCgxKSB7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTExMCUsIDApIHNjYWxlKDQpOwp9Ci5ob21lLXBhZ2U6bm90KC5hY3RpdmUpIC5hbGwtYnV0dG9ucyAubWFpbi1idXR0b25zIC5idXR0b246bnRoLWNoaWxkKDIpIHsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgxMTAlLCAwKSBzY2FsZSg0KTsKfQouaG9tZS1wYWdlIC5za2luLXZpZXdlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHotaW5kZXg6IDE7CiAgcmlnaHQ6IDElOwogIGJvdHRvbTogMSU7Cn0KLmhvbWUtcGFnZTpub3QoLmFjdGl2ZSkgLnNraW4tdmlld2VyIHsKICBkaXNwbGF5OiBub25lOwp9Cgo6cm9vdCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLndvcmxkcy1wYWdlIHsKICAtLWFjdGl2ZS1kaXNwbGF5OiBmbGV4OwogIC0taW5hY3RpdmUtZGlzcGxheTogZmxleDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIHotaW5kZXg6IC0xOwp9Ci53b3JsZHMtcGFnZSAuc2lkZWJhciB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiAyNjBweDsKICBiYWNrZ3JvdW5kOiByZ2JhKDIyLCAyOSwgMjIsIDAuNjI3NDUwOTgwNCk7CiAgaGVpZ2h0OiAxMDB2aDsKICB0cmFuc2l0aW9uOiAwLjVzOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC0xMDAlLCAwKTsKfQoud29ybGRzLXBhZ2UgLnNpZGViYXIgLm5hdmJhciB7CiAgaGVpZ2h0OiA1MHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgcGFkZGluZzogMTBweDsKICBnYXA6IDIwcHg7Cn0KLndvcmxkcy1wYWdlIC5zaWRlYmFyIC5uYXZiYXIgLnRpdGxlIHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogNXB4OwogIGNvbG9yOiB3aGl0ZTsKICBmb250LWZhbWlseTogTWluZWNyYWZ0VGVuOwogIGxpbmUtaGVpZ2h0OiAzNXB4Owp9Ci53b3JsZHMtcGFnZSAuc2lkZWJhciAudGFicywgLndvcmxkcy1wYWdlIC5zaWRlYmFyIC5idXR0b25zIHsKICB3aWR0aDogMTAwJTsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KLndvcmxkcy1wYWdlIC5zaWRlYmFyIC50YWJzIHsKICBwYWRkaW5nOiAyMHB4OwogIGdhcDogMjBweDsKfQoud29ybGRzLXBhZ2UgLnNpZGViYXIgLmJ1dHRvbnMgewogIGdhcDogNXB4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogMTBweDsKfQoud29ybGRzLXBhZ2UgLnNpZGViYXIgLmJ1dHRvbnMgLmZ1bGwgewogIHdpZHRoOiAxNjBweDsKfQoud29ybGRzLXBhZ2UgLnNpZGViYXIgLmJ1dHRvbnMgLm1pbmkgewogIHdpZHRoOiA1MHB4Owp9Ci53b3JsZHMtcGFnZSAuc2lkZWJhciAuYnV0dG9ucyAubWluaS1idXR0b25zIHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogNXB4Owp9Ci53b3JsZHMtcGFnZS5hY3RpdmUgewogIHotaW5kZXg6IDE7Cn0KLndvcmxkcy1wYWdlIC5wbHVnaW5iYXIsIC53b3JsZHMtcGFnZSAubWFpbmJhciB7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMTEwJSwgMCk7CiAgdHJhbnNpdGlvbjogMC41czsKfQoud29ybGRzLXBhZ2UgLm1haW5iYXIgewogIHdpZHRoOiBjYWxjKDEwMCUgLSAyOTZweCk7CiAgLS1wYWdlLWltYWdlLXVybDogdXJsKCIvYmctd29vbC1kYXJrLnBuZyIpOwogIC0tZml0LXg6IGNvdmVyOwogIC0tZml0LXk6IGNvdmVyOwogIGJhY2tncm91bmQ6IHZhcigtLXBhZ2UtaW1hZ2UtdXJsKTsKICBiYWNrZ3JvdW5kLXNpemU6IHZhcigtLWZpdC14KSB2YXIoLS1maXQteSk7Cn0KLndvcmxkcy1wYWdlIC5tYWluYmFyLmJnLWNlbnRlcmVkIHsKICAtLWZpdC14OiA4MCU7CiAgLS1maXQteTogMTAwJTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtcG9zaXRpb246IDUwJTsKfQoud29ybGRzLXBhZ2UgLm1haW5iYXIuZmFkZS1vdXQgewogIC0tcGFnZS1pbWFnZS11cmw6IHVybCgiL2JnLXdvb2wtZmFkZW91dC1kYXJrLnBuZyIpOwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7Cn0KLndvcmxkcy1wYWdlIC5tYWluYmFyIC53b3JsZHMtbGlzdCB7CiAgd2lkdGg6IDEwMCU7CiAgcGFkZGluZzogMTBweDsKICBkaXNwbGF5OiBncmlkOwogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7CiAgZ2FwOiAxMHB4Owp9Ci53b3JsZHMtcGFnZSAubWFpbmJhciAud29ybGRzLWxpc3QgLndvcmxkIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgYmFja2dyb3VuZDogcmdiYSgyMiwgMjksIDIyLCAwLjYyNzQ1MDk4MDQpOwogIGNvbG9yOiB3aGl0ZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoud29ybGRzLXBhZ2UgLm1haW5iYXIgLndvcmxkcy1saXN0IC53b3JsZCBpbWcgewogIHdpZHRoOiAxMDAlOwogIHRyYW5zaXRpb246IDAuNHM7Cn0KLndvcmxkcy1wYWdlIC5tYWluYmFyIC53b3JsZHMtbGlzdCAud29ybGQgLm5hbWUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDVweDsKICBsZWZ0OiA1cHg7Cn0KLndvcmxkcy1wYWdlIC5tYWluYmFyIC53b3JsZHMtbGlzdCAud29ybGQgLmluZm8gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBib3R0b206IDVweDsKICByaWdodDogNXB4Owp9Ci53b3JsZHMtcGFnZSAubWFpbmJhciAud29ybGRzLWxpc3QgLndvcmxkIC5lZGl0IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1cHg7CiAgcmlnaHQ6IDVweDsKfQoud29ybGRzLXBhZ2UgLm1haW5iYXIgLndvcmxkcy1saXN0IC53b3JsZDpob3ZlciBpbWcgewogIHNjYWxlOiAxLjI7Cn0KLndvcmxkcy1wYWdlLmFjdGl2ZSAubWFpbmJhciwgLndvcmxkcy1wYWdlLmFjdGl2ZSAuc2lkZWJhciwgLndvcmxkcy1wYWdlLmFjdGl2ZSAucGx1Z2luYmFyIHsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCAwKTsKfQoKLmNyZWF0ZS1wYWdlIHsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgZ2FwOiAxMHB4OwogIC0tYWN0aXZlLWRpc3BsYXk6IGZsZXg7CiAgLS1pbmFjdGl2ZS1kaXNwbGF5OiBmbGV4OwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC00MDAlKSBzY2FsZSgwLjI1KTsKICB0cmFuc2l0aW9uOiAwLjVzOwp9Ci5jcmVhdGUtcGFnZS5hY3RpdmUgewogIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpOwp9Ci5jcmVhdGUtcGFnZSAuY3JlYXRlLXdvcmxkIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAyNXB4OwogIHJpZ2h0OiAyNXB4OwogIHdpZHRoOiAxMjVweDsKfQouY3JlYXRlLXBhZ2UgLmJhY2stYnV0dG9uIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAxNXB4OwogIGxlZnQ6IDE1cHg7Cn0="),document.head.appendChild(J)})();class u5 extends f6{constructor(){super(...arguments)}build(J){return J.page}}var bW=function(){const J=window.pages||[];if(!window.pages)window.pages=J;const $=(Q)=>({...C7,wrap(Z){return{...this,...Z}},addArgument(...Z){if(!Array.isArray(C7.args))C7.args=[];return C7.args.push(...Z),$()},add(Z,H){return C7[Z]=H,$()},...Q});if(typeof PJ.title==="string")document.title=PJ.title;if(typeof PJ.title==="function")document.title=PJ.title($({page:made0}));if(Array.isArray(PJ.links))PJ.links.forEach((Q)=>{let Z=document.createElement("link");if(typeof Q=="string")Z.rel="stylesheet",Z.href=Q;else{if(Q.rel)Z.rel=Q.rel;if(Q.href)Z.href=Q.href}document.head.appendChild(Z)});if(Array.isArray(PJ.scripts))PJ.scripts.forEach((Q)=>{let Z=document.createElement("script");Z.src=Q,document.head.appendChild(Z)});if(typeof PJ.headContent=="function")PJ.headContent($())?.forEach((Q)=>{Q?.to?.(document.head)});if(window.loadFunction=()=>{if(document.body.setAttribute("class",""),!window.after&&window.loaderOn)window.loader.remove();const Q=window.initResponse?window.initResponse:typeof l5.init=="function"?l5.init($())||{}:{};if(!window.initResponse)window.initResponse=Q;if(typeof u5.beforeBuildStart=="function")u5.beforeBuildStart($());if(typeof PJ.beforeBuildStart=="function")PJ.beforeBuildStart($());let Z=new PJ,H=new u5;if(window.lastPage&&PJ.inheritState!==!1)Z._inheritState(window.lastPage);if(PJ.bodyClass)document.body.setAttribute("class",PJ.bodyClass);Z._beforeInit(),Z.emit("beforeInit",{component:Z,props:$()}),Z.initState($()),H._beforeInit(),H.emit("beforeInit",{component:H,props:$()}),H.initState($()),Z.emit("initState",{component:Z,props:$()});let Y=Z.make($({init:Q,page:null}));Z.emit("buildStart",{widget:Y,component:Z,props:$()}),H.emit("initState",{component:H,props:$()});let K=H.make($({init:Q,page:Y}));if(H.emit("buildStart",{widget:K,component:H,props:$()}),PJ.layouts===!1)Y.to(document.body),Z.afterBuild($({page:Y}),...Array.isArray($().args)?$().args:[]),Z.emit("buildEnd",{widget:Y,component:Z,props:$()});else Z.afterBuild($({page:Y}),...Array.isArray($().args)?$().args:[]),Z.emit("buildEnd",{widget:Y,component:Z,props:$()}),K.to(document.body),H.afterBuild($({page:Y}),...Array.isArray($().args)?$().args:[]),H.emit("buildEnd",{widget:K,component:H,props:$()});if(J.push(Z),J.push(H),window.lastPage=Z,typeof l5.after=="function"&&!window.initted)l5.after($({page:Y}));if(window.after&&window.loaderOn)window.loader.remove();window.initted=!0},window.popStateListener=(Q)=>{if(window.previousPathname)s$(window.previousPathname,{push:!1});else s$(location.pathname,{push:!1})},!window.popStateListenerListening)window.addEventListener("popstate",window.popStateListener);window.popStateListenerListening=!0,window.addEventListener("load",window.loadFunction)},l5={init:()=>{},after:()=>{}},pH=[{pathname:"/",filename:"app/page.tsx"},{pathname:"/widgets",filename:"app/widgets/page.tsx"}],xW=document.currentScript,s$=(J,$={})=>{let Q=J;if(typeof $!=="object")$={};if(J.startsWith("./"))Q=J.replace("./",location.pathname+"/");if(Q=Q.replace(/\/\//g,"/"),$.refresh==!0)return location.pathname=Q;let Z=0;const H=(Y)=>{Z++,document.getElementById("current_script")?.remove();let K=document.createElement("script"),G=Q+"?onlyjs=true",U=Q+"/index.js".replace(/\/\//g,"/");K.src=Y?G:U,K.id="current_script",K.onload=()=>{if(xW.remove(),document.body.innerHTML="",window.loadFunction(),$.push!==!1)history.pushState(null,!1,Q)},K.onerror=(q)=>{if(q.preventDefault(),Z<5)H(!0)},document.head.appendChild(K)};if($.inherit==!1)delete window.lastPage;if($.reinit==!0)delete window.initted,delete window.initResponse;window.previousPathname=location.pathname,H()},C7={router:{paths:pH,assign:function(J){location.assign(J)},navigate:function(J,$){s$(J,$)},back:function(){location.back()}},route:{path:"/",params:{}}};if(!window.all_possible_paths)window.all_possible_paths=pH;bW();
})();